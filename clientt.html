<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Java Compiler</title>
    <style>
        body { display: flex; height: 100vh; }
        #question { width: 40%; padding: 10px; border-right: 2px solid #ccc; }
        #editor-container { width: 60%; height: 90vh; }
        #output { margin-top: 10px; background: #f4f4f4; padding: 10px; white-space: pre-wrap; }
    </style>
    
</head>
<body>
    <div id="question">
        <h1>Question:</h1>
        <p>Write a Java program that prints "Hello, world!"</p>
        <button onclick="submitCode()">Run Code</button>
        <h2>Output:</h2>
        <pre id="output"></pre>
    </div>
    <div id="editor-container"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/loader.min.js"></script>

    <script>
        let editor;
        require.config({ paths: { vs: "https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs" } });
        require(["vs/editor/editor.main"], function () {
            editor = monaco.editor.create(document.getElementById("editor-container"), {
                value: `public class Main {\n    public static void main(String[] args) {\n        System.out.println("Hello, world!");\n    }\n}`,
                language: "java",
                theme: "vs-dark"
            });
        });

        function submitCode() {
            let code = editor.getValue();  // Get text from Monaco Editor

            fetch("/compile", {
                method: "POST",
                headers: { "Content-Type": "text/plain" },
                body: code
            })
            .then(response => response.text())
            .then(data => document.getElementById("output").innerText = data)
            .catch(error => console.error("Error:", error));
        }
    </script>
</body>
</html>
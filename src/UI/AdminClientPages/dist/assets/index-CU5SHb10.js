(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function sR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var by={exports:{}},lf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uA;function bP(){if(uA)return lf;uA=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var h in s)h!=="key"&&(o[h]=s[h])}else o=s;return s=o.ref,{$$typeof:n,type:r,key:u,ref:s!==void 0?s:null,props:o}}return lf.Fragment=e,lf.jsx=t,lf.jsxs=t,lf}var cA;function wP(){return cA||(cA=1,by.exports=bP()),by.exports}var I=wP(),wy={exports:{}},tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hA;function EP(){if(hA)return tt;hA=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function A(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,F={};function V(O,re,we){this.props=O,this.context=re,this.refs=F,this.updater=we||D}V.prototype.isReactComponent={},V.prototype.setState=function(O,re){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,re,"setState")},V.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function H(){}H.prototype=V.prototype;function J(O,re,we){this.props=O,this.context=re,this.refs=F,this.updater=we||D}var se=J.prototype=new H;se.constructor=J,M(se,V.prototype),se.isPureReactComponent=!0;var ue=Array.isArray,de={H:null,A:null,T:null,S:null},be=Object.prototype.hasOwnProperty;function U(O,re,we,Ee,Se,Fe){return we=Fe.ref,{$$typeof:n,type:O,key:re,ref:we!==void 0?we:null,props:Fe}}function P(O,re){return U(O.type,re,void 0,void 0,void 0,O.props)}function N(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function k(O){var re={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(we){return re[we]})}var z=/\/+/g;function W(O,re){return typeof O=="object"&&O!==null&&O.key!=null?k(""+O.key):re.toString(36)}function j(){}function _t(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(j,j):(O.status="pending",O.then(function(re){O.status==="pending"&&(O.status="fulfilled",O.value=re)},function(re){O.status==="pending"&&(O.status="rejected",O.reason=re)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function xe(O,re,we,Ee,Se){var Fe=typeof O;(Fe==="undefined"||Fe==="boolean")&&(O=null);var Ue=!1;if(O===null)Ue=!0;else switch(Fe){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(O.$$typeof){case n:case e:Ue=!0;break;case v:return Ue=O._init,xe(Ue(O._payload),re,we,Ee,Se)}}if(Ue)return Se=Se(O),Ue=Ee===""?"."+W(O,0):Ee,ue(Se)?(we="",Ue!=null&&(we=Ue.replace(z,"$&/")+"/"),xe(Se,re,we,"",function(ut){return ut})):Se!=null&&(N(Se)&&(Se=P(Se,we+(Se.key==null||O&&O.key===Se.key?"":(""+Se.key).replace(z,"$&/")+"/")+Ue)),re.push(Se)),1;Ue=0;var Ot=Ee===""?".":Ee+":";if(ue(O))for(var Te=0;Te<O.length;Te++)Ee=O[Te],Fe=Ot+W(Ee,Te),Ue+=xe(Ee,re,we,Fe,Se);else if(Te=A(O),typeof Te=="function")for(O=Te.call(O),Te=0;!(Ee=O.next()).done;)Ee=Ee.value,Fe=Ot+W(Ee,Te++),Ue+=xe(Ee,re,we,Fe,Se);else if(Fe==="object"){if(typeof O.then=="function")return xe(_t(O),re,we,Ee,Se);throw re=String(O),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function le(O,re,we){if(O==null)return O;var Ee=[],Se=0;return xe(O,Ee,"","",function(Fe){return re.call(we,Fe,Se++)}),Ee}function Ne(O){if(O._status===-1){var re=O._result;re=re(),re.then(function(we){(O._status===0||O._status===-1)&&(O._status=1,O._result=we)},function(we){(O._status===0||O._status===-1)&&(O._status=2,O._result=we)}),O._status===-1&&(O._status=0,O._result=re)}if(O._status===1)return O._result.default;throw O._result}var Oe=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function Ye(){}return tt.Children={map:le,forEach:function(O,re,we){le(O,function(){re.apply(this,arguments)},we)},count:function(O){var re=0;return le(O,function(){re++}),re},toArray:function(O){return le(O,function(re){return re})||[]},only:function(O){if(!N(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},tt.Component=V,tt.Fragment=t,tt.Profiler=s,tt.PureComponent=J,tt.StrictMode=r,tt.Suspense=f,tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=de,tt.act=function(){throw Error("act(...) is not supported in production builds of React.")},tt.cache=function(O){return function(){return O.apply(null,arguments)}},tt.cloneElement=function(O,re,we){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var Ee=M({},O.props),Se=O.key,Fe=void 0;if(re!=null)for(Ue in re.ref!==void 0&&(Fe=void 0),re.key!==void 0&&(Se=""+re.key),re)!be.call(re,Ue)||Ue==="key"||Ue==="__self"||Ue==="__source"||Ue==="ref"&&re.ref===void 0||(Ee[Ue]=re[Ue]);var Ue=arguments.length-2;if(Ue===1)Ee.children=we;else if(1<Ue){for(var Ot=Array(Ue),Te=0;Te<Ue;Te++)Ot[Te]=arguments[Te+2];Ee.children=Ot}return U(O.type,Se,void 0,void 0,Fe,Ee)},tt.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:o,_context:O},O},tt.createElement=function(O,re,we){var Ee,Se={},Fe=null;if(re!=null)for(Ee in re.key!==void 0&&(Fe=""+re.key),re)be.call(re,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(Se[Ee]=re[Ee]);var Ue=arguments.length-2;if(Ue===1)Se.children=we;else if(1<Ue){for(var Ot=Array(Ue),Te=0;Te<Ue;Te++)Ot[Te]=arguments[Te+2];Se.children=Ot}if(O&&O.defaultProps)for(Ee in Ue=O.defaultProps,Ue)Se[Ee]===void 0&&(Se[Ee]=Ue[Ee]);return U(O,Fe,void 0,void 0,null,Se)},tt.createRef=function(){return{current:null}},tt.forwardRef=function(O){return{$$typeof:h,render:O}},tt.isValidElement=N,tt.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:Ne}},tt.memo=function(O,re){return{$$typeof:p,type:O,compare:re===void 0?null:re}},tt.startTransition=function(O){var re=de.T,we={};de.T=we;try{var Ee=O(),Se=de.S;Se!==null&&Se(we,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(Ye,Oe)}catch(Fe){Oe(Fe)}finally{de.T=re}},tt.unstable_useCacheRefresh=function(){return de.H.useCacheRefresh()},tt.use=function(O){return de.H.use(O)},tt.useActionState=function(O,re,we){return de.H.useActionState(O,re,we)},tt.useCallback=function(O,re){return de.H.useCallback(O,re)},tt.useContext=function(O){return de.H.useContext(O)},tt.useDebugValue=function(){},tt.useDeferredValue=function(O,re){return de.H.useDeferredValue(O,re)},tt.useEffect=function(O,re){return de.H.useEffect(O,re)},tt.useId=function(){return de.H.useId()},tt.useImperativeHandle=function(O,re,we){return de.H.useImperativeHandle(O,re,we)},tt.useInsertionEffect=function(O,re){return de.H.useInsertionEffect(O,re)},tt.useLayoutEffect=function(O,re){return de.H.useLayoutEffect(O,re)},tt.useMemo=function(O,re){return de.H.useMemo(O,re)},tt.useOptimistic=function(O,re){return de.H.useOptimistic(O,re)},tt.useReducer=function(O,re,we){return de.H.useReducer(O,re,we)},tt.useRef=function(O){return de.H.useRef(O)},tt.useState=function(O){return de.H.useState(O)},tt.useSyncExternalStore=function(O,re,we){return de.H.useSyncExternalStore(O,re,we)},tt.useTransition=function(){return de.H.useTransition()},tt.version="19.0.0",tt}var dA;function ow(){return dA||(dA=1,wy.exports=EP()),wy.exports}var B=ow();const yh=sR(B);var Ey={exports:{}},uf={},Ty={exports:{}},Ay={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fA;function TP(){return fA||(fA=1,function(n){function e(le,Ne){var Oe=le.length;le.push(Ne);e:for(;0<Oe;){var Ye=Oe-1>>>1,O=le[Ye];if(0<s(O,Ne))le[Ye]=Ne,le[Oe]=O,Oe=Ye;else break e}}function t(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var Ne=le[0],Oe=le.pop();if(Oe!==Ne){le[0]=Oe;e:for(var Ye=0,O=le.length,re=O>>>1;Ye<re;){var we=2*(Ye+1)-1,Ee=le[we],Se=we+1,Fe=le[Se];if(0>s(Ee,Oe))Se<O&&0>s(Fe,Ee)?(le[Ye]=Fe,le[Se]=Oe,Ye=Se):(le[Ye]=Ee,le[we]=Oe,Ye=we);else if(Se<O&&0>s(Fe,Oe))le[Ye]=Fe,le[Se]=Oe,Ye=Se;else break e}}return Ne}function s(le,Ne){var Oe=le.sortIndex-Ne.sortIndex;return Oe!==0?Oe:le.id-Ne.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],p=[],v=1,b=null,A=3,D=!1,M=!1,F=!1,V=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function se(le){for(var Ne=t(p);Ne!==null;){if(Ne.callback===null)r(p);else if(Ne.startTime<=le)r(p),Ne.sortIndex=Ne.expirationTime,e(f,Ne);else break;Ne=t(p)}}function ue(le){if(F=!1,se(le),!M)if(t(f)!==null)M=!0,_t();else{var Ne=t(p);Ne!==null&&xe(ue,Ne.startTime-le)}}var de=!1,be=-1,U=5,P=-1;function N(){return!(n.unstable_now()-P<U)}function k(){if(de){var le=n.unstable_now();P=le;var Ne=!0;try{e:{M=!1,F&&(F=!1,H(be),be=-1),D=!0;var Oe=A;try{t:{for(se(le),b=t(f);b!==null&&!(b.expirationTime>le&&N());){var Ye=b.callback;if(typeof Ye=="function"){b.callback=null,A=b.priorityLevel;var O=Ye(b.expirationTime<=le);if(le=n.unstable_now(),typeof O=="function"){b.callback=O,se(le),Ne=!0;break t}b===t(f)&&r(f),se(le)}else r(f);b=t(f)}if(b!==null)Ne=!0;else{var re=t(p);re!==null&&xe(ue,re.startTime-le),Ne=!1}}break e}finally{b=null,A=Oe,D=!1}Ne=void 0}}finally{Ne?z():de=!1}}}var z;if(typeof J=="function")z=function(){J(k)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,j=W.port2;W.port1.onmessage=k,z=function(){j.postMessage(null)}}else z=function(){V(k,0)};function _t(){de||(de=!0,z())}function xe(le,Ne){be=V(function(){le(n.unstable_now())},Ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){M||D||(M=!0,_t())},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(le){switch(A){case 1:case 2:case 3:var Ne=3;break;default:Ne=A}var Oe=A;A=Ne;try{return le()}finally{A=Oe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,Ne){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var Oe=A;A=le;try{return Ne()}finally{A=Oe}},n.unstable_scheduleCallback=function(le,Ne,Oe){var Ye=n.unstable_now();switch(typeof Oe=="object"&&Oe!==null?(Oe=Oe.delay,Oe=typeof Oe=="number"&&0<Oe?Ye+Oe:Ye):Oe=Ye,le){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Oe+O,le={id:v++,callback:Ne,priorityLevel:le,startTime:Oe,expirationTime:O,sortIndex:-1},Oe>Ye?(le.sortIndex=Oe,e(p,le),t(f)===null&&le===t(p)&&(F?(H(be),be=-1):F=!0,xe(ue,Oe-Ye))):(le.sortIndex=O,e(f,le),M||D||(M=!0,_t())),le},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(le){var Ne=A;return function(){var Oe=A;A=Ne;try{return le.apply(this,arguments)}finally{A=Oe}}}}(Ay)),Ay}var mA;function AP(){return mA||(mA=1,Ty.exports=TP()),Ty.exports}var Sy={exports:{}},Mr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pA;function SP(){if(pA)return Mr;pA=1;var n=ow();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,p,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:b==null?null:""+b,children:f,containerInfo:p,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Mr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Mr.createPortal=function(f,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(f,p,null,v)},Mr.flushSync=function(f){var p=u.T,v=r.p;try{if(u.T=null,r.p=2,f)return f()}finally{u.T=p,r.p=v,r.d.f()}},Mr.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(f,p))},Mr.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Mr.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var v=p.as,b=h(v,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,D=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?r.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:D}):v==="script"&&r.d.X(f,{crossOrigin:b,integrity:A,fetchPriority:D,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Mr.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);r.d.M(f,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(f)},Mr.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,b=h(v,p.crossOrigin);r.d.L(f,v,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Mr.preloadModule=function(f,p){if(typeof f=="string")if(p){var v=h(p.as,p.crossOrigin);r.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(f)},Mr.requestFormReset=function(f){r.d.r(f)},Mr.unstable_batchedUpdates=function(f,p){return f(p)},Mr.useFormState=function(f,p,v){return u.H.useFormState(f,p,v)},Mr.useFormStatus=function(){return u.H.useHostTransitionStatus()},Mr.version="19.0.0",Mr}var gA;function IP(){if(gA)return Sy.exports;gA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sy.exports=SP(),Sy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _A;function RP(){if(_A)return uf;_A=1;var n=AP(),e=ow(),t=IP();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var o=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),D=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),ue=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function be(i){return i===null||typeof i!="object"?null:(i=de&&i[de]||i["@@iterator"],typeof i=="function"?i:null)}var U=Symbol.for("react.client.reference");function P(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===U?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case f:return"Fragment";case h:return"Portal";case v:return"Profiler";case p:return"StrictMode";case F:return"Suspense";case V:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case D:return(i.displayName||"Context")+".Provider";case A:return(i._context.displayName||"Context")+".Consumer";case M:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case H:return a=i.displayName||null,a!==null?a:P(i.type)||"Memo";case J:a=i._payload,i=i._init;try{return P(i(a))}catch{}}return null}var N=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=Object.assign,z,W;function j(i){if(z===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);z=a&&a[1]||"",W=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+z+i+W}var _t=!1;function xe(i,a){if(!i||_t)return"";_t=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ae){var ee=ae}Reflect.construct(i,[],pe)}else{try{pe.call()}catch(ae){ee=ae}i.call(pe.prototype)}}else{try{throw Error()}catch(ae){ee=ae}(pe=i())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ae){if(ae&&ee&&typeof ae.stack=="string")return[ae.stack,ee.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),T=_[0],R=_[1];if(T&&R){var L=T.split(`
`),G=R.split(`
`);for(m=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;m<G.length&&!G[m].includes("DetermineComponentFrameRoot");)m++;if(c===L.length||m===G.length)for(c=L.length-1,m=G.length-1;1<=c&&0<=m&&L[c]!==G[m];)m--;for(;1<=c&&0<=m;c--,m--)if(L[c]!==G[m]){if(c!==1||m!==1)do if(c--,m--,0>m||L[c]!==G[m]){var oe=`
`+L[c].replace(" at new "," at ");return i.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",i.displayName)),oe}while(1<=c&&0<=m);break}}}finally{_t=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?j(l):""}function le(i){switch(i.tag){case 26:case 27:case 5:return j(i.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 15:return i=xe(i.type,!1),i;case 11:return i=xe(i.type.render,!1),i;case 1:return i=xe(i.type,!0),i;default:return""}}function Ne(i){try{var a="";do a+=le(i),i=i.return;while(i);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Oe(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function Ye(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function O(i){if(Oe(i)!==i)throw Error(r(188))}function re(i){var a=i.alternate;if(!a){if(a=Oe(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,c=a;;){var m=l.return;if(m===null)break;var _=m.alternate;if(_===null){if(c=m.return,c!==null){l=c;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===l)return O(m),i;if(_===c)return O(m),a;_=_.sibling}throw Error(r(188))}if(l.return!==c.return)l=m,c=_;else{for(var T=!1,R=m.child;R;){if(R===l){T=!0,l=m,c=_;break}if(R===c){T=!0,c=m,l=_;break}R=R.sibling}if(!T){for(R=_.child;R;){if(R===l){T=!0,l=_,c=m;break}if(R===c){T=!0,c=_,l=m;break}R=R.sibling}if(!T)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function we(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=we(i),a!==null)return a;i=i.sibling}return null}var Ee=Array.isArray,Se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fe={pending:!1,data:null,method:null,action:null},Ue=[],Ot=-1;function Te(i){return{current:i}}function ut(i){0>Ot||(i.current=Ue[Ot],Ue[Ot]=null,Ot--)}function ct(i,a){Ot++,Ue[Ot]=i.current,i.current=a}var Dn=Te(null),Dr=Te(null),vn=Te(null),Dt=Te(null);function Un(i,a){switch(ct(vn,a),ct(Dr,i),ct(Dn,null),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?j0(a):0;break;default:if(i=i===8?a.parentNode:a,a=i.tagName,i=i.namespaceURI)i=j0(i),a=U0(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ut(Dn),ct(Dn,a)}function kt(){ut(Dn),ut(Dr),ut(vn)}function $i(i){i.memoizedState!==null&&ct(Dt,i);var a=Dn.current,l=U0(a,i.type);a!==l&&(ct(Dr,i),ct(Dn,l))}function _s(i){Dr.current===i&&(ut(Dn),ut(Dr)),Dt.current===i&&(ut(Dt),nf._currentValue=Fe)}var vs=Object.prototype.hasOwnProperty,ys=n.unstable_scheduleCallback,$s=n.unstable_cancelCallback,Ql=n.unstable_shouldYield,Gs=n.unstable_requestPaint,xn=n.unstable_now,Br=n.unstable_getCurrentPriorityLevel,tn=n.unstable_ImmediatePriority,Ht=n.unstable_UserBlockingPriority,er=n.unstable_NormalPriority,zr=n.unstable_LowPriority,Si=n.unstable_IdlePriority,Io=n.log,Ii=n.unstable_setDisableYieldValue,qr=null,On=null;function Ca(i){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(qr,i,void 0,(i.current.flags&128)===128)}catch{}}function Hr(i){if(typeof Io=="function"&&Ii(i),On&&typeof On.setStrictMode=="function")try{On.setStrictMode(qr,i)}catch{}}var Fn=Math.clz32?Math.clz32:Gi,bs=Math.log,Da=Math.LN2;function Gi(i){return i>>>=0,i===0?32:31-(bs(i)/Da|0)|0}var $r=128,hi=4194304;function jt(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Vt(i,a){var l=i.pendingLanes;if(l===0)return 0;var c=0,m=i.suspendedLanes,_=i.pingedLanes,T=i.warmLanes;i=i.finishedLanes!==0;var R=l&134217727;return R!==0?(l=R&~m,l!==0?c=jt(l):(_&=R,_!==0?c=jt(_):i||(T=R&~T,T!==0&&(c=jt(T))))):(R=l&~m,R!==0?c=jt(R):_!==0?c=jt(_):i||(T=l&~T,T!==0&&(c=jt(T)))),c===0?0:a!==0&&a!==c&&(a&m)===0&&(m=c&-c,T=a&-a,m>=T||m===32&&(T&4194176)!==0)?a:c}function Gr(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function St(i,a){switch(i){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hn(){var i=$r;return $r<<=1,($r&4194176)===0&&($r=128),i}function xr(){var i=hi;return hi<<=1,(hi&62914560)===0&&(hi=4194304),i}function Wi(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function $t(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function xa(i,a,l,c,m,_){var T=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var R=i.entanglements,L=i.expirationTimes,G=i.hiddenUpdates;for(l=T&~l;0<l;){var oe=31-Fn(l),pe=1<<oe;R[oe]=0,L[oe]=-1;var ee=G[oe];if(ee!==null)for(G[oe]=null,oe=0;oe<ee.length;oe++){var ae=ee[oe];ae!==null&&(ae.lane&=-536870913)}l&=~pe}c!==0&&di(i,c,0),_!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=_&~(T&~a))}function di(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var c=31-Fn(a);i.entangledLanes|=a,i.entanglements[c]=i.entanglements[c]|1073741824|l&4194218}function Wr(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var c=31-Fn(l),m=1<<c;m&a|i[c]&a&&(i[c]|=a),l&=~m}}function Ki(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Kr(){var i=Se.p;return i!==0?i:(i=window.event,i===void 0?32:rA(i.type))}function mr(i,a){var l=Se.p;try{return Se.p=i,a()}finally{Se.p=l}}var fi=Math.random().toString(36).slice(2),Gt="__reactFiber$"+fi,nn="__reactProps$"+fi,Ri="__reactContainer$"+fi,Or="__reactEvents$"+fi,Me="__reactListeners$"+fi,Qe="__reactHandles$"+fi,nt="__reactResources$"+fi,ht="__reactMarker$"+fi;function rn(i){delete i[Gt],delete i[nn],delete i[Or],delete i[Me],delete i[Qe]}function yn(i){var a=i[Gt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[Ri]||l[Gt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=z0(i);i!==null;){if(l=i[Gt])return l;i=z0(i)}return a}i=l,l=i.parentNode}return null}function Gn(i){if(i=i[Gt]||i[Ri]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function pr(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function ws(i){var a=i[nt];return a||(a=i[nt]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Bt(i){i[ht]=!0}var Yi=new Set,Oa={};function gr(i,a){tr(i,a),tr(i+"Capture",a)}function tr(i,a){for(Oa[i]=a,i=0;i<a.length;i++)Yi.add(a[i])}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ro={},Co={};function Xl(i){return vs.call(Co,i)?!0:vs.call(Ro,i)?!1:hc.test(i)?Co[i]=!0:(Ro[i]=!0,!1)}function Es(i,a,l){if(Xl(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Ts(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function Yr(i,a,l,c){if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+c)}}function nr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Zl(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function mi(i){var a=Zl(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),c=""+i[a];if(!i.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,_=l.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return m.call(this)},set:function(T){c=""+T,_.call(this,T)}}),Object.defineProperty(i,a,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Nn(i){i._valueTracker||(i._valueTracker=mi(i))}function Ci(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return i&&(c=Zl(i)?i.checked?"true":"false":i.value),i=c,i!==l?(a.setValue(i),!0):!1}function Wn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Di=/[\n"\\]/g;function Wt(i){return i.replace(Di,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Kn(i,a,l,c,m,_,T,R){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),a!=null?T==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+nr(a)):i.value!==""+nr(a)&&(i.value=""+nr(a)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),a!=null?As(i,T,nr(a)):l!=null?As(i,T,nr(l)):c!=null&&i.removeAttribute("value"),m==null&&_!=null&&(i.defaultChecked=!!_),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+nr(R):i.removeAttribute("name")}function Qr(i,a,l,c,m,_,T,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),a!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||a!=null))return;l=l!=null?""+nr(l):"",a=a!=null?""+nr(a):l,R||a===i.value||(i.value=a),i.defaultValue=a}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=R?i.checked:!!c,i.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function As(i,a,l){a==="number"&&Wn(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function rt(i,a,l,c){if(i=i.options,a){a={};for(var m=0;m<l.length;m++)a["$"+l[m]]=!0;for(l=0;l<i.length;l++)m=a.hasOwnProperty("$"+i[l].value),i[l].selected!==m&&(i[l].selected=m),m&&c&&(i[l].defaultSelected=!0)}else{for(l=""+nr(l),a=null,m=0;m<i.length;m++){if(i[m].value===l){i[m].selected=!0,c&&(i[m].defaultSelected=!0);return}a!==null||i[m].disabled||(a=i[m])}a!==null&&(a.selected=!0)}}function Ss(i,a,l){if(a!=null&&(a=""+nr(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+nr(l):""}function Is(i,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(r(92));if(Ee(c)){if(1<c.length)throw Error(r(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=nr(a),i.defaultValue=l,c=i.textContent,c===l&&c!==""&&c!==null&&(i.value=c)}function Yn(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Jl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Do(i,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":c?i.setProperty(a,l):typeof l!="number"||l===0||Jl.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function pi(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var m in a)c=a[m],a.hasOwnProperty(m)&&l[m]!==c&&Do(i,m,c)}else for(var _ in a)a.hasOwnProperty(_)&&Do(i,_,a[_])}function eu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xi(i){return xo.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var rr=null;function Ws(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Xr=null,Xi=null;function Zi(i){var a=Gn(i);if(a&&(i=a.stateNode)){var l=i[nn]||null;e:switch(i=a.stateNode,a.type){case"input":if(Kn(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Wt(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==i&&c.form===i.form){var m=c[nn]||null;if(!m)throw Error(r(90));Kn(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===i.form&&Ci(c)}break e;case"textarea":Ss(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&rt(i,!!l.multiple,a,!1)}}}var Oo=!1;function Rs(i,a,l){if(Oo)return i(a,l);Oo=!0;try{var c=i(a);return c}finally{if(Oo=!1,(Xr!==null||Xi!==null)&&(Dp(),Xr&&(a=Xr,i=Xi,Xi=Xr=null,Zi(a),i)))for(a=0;a<i.length;a++)Zi(i[a])}}function Na(i,a){var l=i.stateNode;if(l===null)return null;var c=l[nn]||null;if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var Zr=!1;if(Nr)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){Zr=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{Zr=!1}var Jr=null,Ji=null,Ds=null;function Ks(){if(Ds)return Ds;var i,a=Ji,l=a.length,c,m="value"in Jr?Jr.value:Jr.textContent,_=m.length;for(i=0;i<l&&a[i]===m[i];i++);var T=l-i;for(c=1;c<=T&&a[l-c]===m[_-c];c++);return Ds=m.slice(i,1<c?1-c:void 0)}function es(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Oi(){return!0}function Pa(){return!1}function bn(i){function a(l,c,m,_,T){this._reactName=l,this._targetInst=m,this.type=c,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(l=i[R],this[R]=l?l(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Oi:Pa,this.isPropagationStopped=Pa,this}return k(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),a}var wt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ka=bn(wt),Ni=k({},wt,{view:0,detail:0}),No=bn(Ni),Va,Ma,_r,La=k({},Ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==_r&&(_r&&i.type==="mousemove"?(Va=i.screenX-_r.screenX,Ma=i.screenY-_r.screenY):Ma=Va=0,_r=i),Va)},movementY:function(i){return"movementY"in i?i.movementY:Ma}}),ei=bn(La),tu=k({},La,{dataTransfer:0}),dc=bn(tu),Ys=k({},Ni,{relatedTarget:0}),ja=bn(Ys),Ua=k({},wt,{animationName:0,elapsedTime:0,pseudoElement:0}),Fa=bn(Ua),fc=k({},wt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Po=bn(fc),mc=k({},wt,{data:0}),ko=bn(mc),ts={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ba(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=gc[i])?!!a[i]:!1}function Qs(){return Ba}var nu=k({},Ni,{key:function(i){if(i.key){var a=ts[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=es(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?pc[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qs,charCode:function(i){return i.type==="keypress"?es(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?es(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),gi=bn(nu),Vo=k({},La,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ru=bn(Vo),ns=k({},Ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qs}),_c=bn(ns),vc=k({},wt,{propertyName:0,elapsedTime:0,pseudoElement:0}),yc=bn(vc),bc=k({},La,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),za=bn(bc),ir=k({},wt,{newState:0,oldState:0}),wc=bn(ir),xs=[9,13,27,32],sr=Nr&&"CompositionEvent"in window,d=null;Nr&&"documentMode"in document&&(d=document.documentMode);var y=Nr&&"TextEvent"in window&&!d,E=Nr&&(!sr||d&&8<d&&11>=d),x=" ",Q=!1;function te(i,a){switch(i){case"keyup":return xs.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ie(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var dt=!1;function Pn(i,a){switch(i){case"compositionend":return Ie(a);case"keypress":return a.which!==32?null:(Q=!0,x);case"textInput":return i=a.data,i===x&&Q?null:i;default:return null}}function ft(i,a){if(dt)return i==="compositionend"||!sr&&te(i,a)?(i=Ks(),Ds=Ji=Jr=null,dt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return E&&a.locale!=="ko"?null:a.data;default:return null}}var Nt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wn(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Nt[i.type]:a==="textarea"}function rs(i,a,l,c){Xr?Xi?Xi.push(c):Xi=[c]:Xr=c,a=kp(a,"onChange"),0<a.length&&(l=new ka("onChange","change",null,l,c),i.push({event:l,listeners:a}))}var Bn=null,is=null;function iu(i){P0(i,0)}function su(i){var a=pr(i);if(Ci(a))return i}function au(i,a){if(i==="change")return a}var Gm=!1;if(Nr){var dd;if(Nr){var Ec="oninput"in document;if(!Ec){var Wm=document.createElement("div");Wm.setAttribute("oninput","return;"),Ec=typeof Wm.oninput=="function"}dd=Ec}else dd=!1;Gm=dd&&(!document.documentMode||9<document.documentMode)}function Km(){Bn&&(Bn.detachEvent("onpropertychange",fd),is=Bn=null)}function fd(i){if(i.propertyName==="value"&&su(is)){var a=[];rs(a,is,i,Ws(i)),Rs(iu,a)}}function Ym(i,a,l){i==="focusin"?(Km(),Bn=a,is=l,Bn.attachEvent("onpropertychange",fd)):i==="focusout"&&Km()}function Qm(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return su(is)}function Tc(i,a){if(i==="click")return su(a)}function Xm(i,a){if(i==="input"||i==="change")return su(a)}function md(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Kt=typeof Object.is=="function"?Object.is:md;function ou(i,a){if(Kt(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var m=l[c];if(!vs.call(a,m)||!Kt(i[m],a[m]))return!1}return!0}function Zm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function pd(i,a){var l=Zm(i);i=0;for(var c;l;){if(l.nodeType===3){if(c=i+l.textContent.length,i<=a&&c>=a)return{node:l,offset:a-i};i=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Zm(l)}}function gd(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?gd(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Jm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Wn(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=Wn(i.document)}return a}function _d(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function Z_(i,a){var l=Jm(a);a=i.focusedElem;var c=i.selectionRange;if(l!==a&&a&&a.ownerDocument&&gd(a.ownerDocument.documentElement,a)){if(c!==null&&_d(a)){if(i=c.start,l=c.end,l===void 0&&(l=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(l,a.value.length);else if(l=(i=a.ownerDocument||document)&&i.defaultView||window,l.getSelection){l=l.getSelection();var m=a.textContent.length,_=Math.min(c.start,m);c=c.end===void 0?_:Math.min(c.end,m),!l.extend&&_>c&&(m=c,c=_,_=m),m=pd(a,_);var T=pd(a,c);m&&T&&(l.rangeCount!==1||l.anchorNode!==m.node||l.anchorOffset!==m.offset||l.focusNode!==T.node||l.focusOffset!==T.offset)&&(i=i.createRange(),i.setStart(m.node,m.offset),l.removeAllRanges(),_>c?(l.addRange(i),l.extend(T.node,T.offset)):(i.setEnd(T.node,T.offset),l.addRange(i)))}}for(i=[],l=a;l=l.parentNode;)l.nodeType===1&&i.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)l=i[a],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var J_=Nr&&"documentMode"in document&&11>=document.documentMode,Mo=null,vd=null,Lo=null,Ac=!1;function Sc(i,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ac||Mo==null||Mo!==Wn(c)||(c=Mo,"selectionStart"in c&&_d(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Lo&&ou(Lo,c)||(Lo=c,c=kp(vd,"onSelect"),0<c.length&&(a=new ka("onSelect","select",null,a,l),i.push({event:a,listeners:c}),a.target=Mo)))}function qa(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var jo={animationend:qa("Animation","AnimationEnd"),animationiteration:qa("Animation","AnimationIteration"),animationstart:qa("Animation","AnimationStart"),transitionrun:qa("Transition","TransitionRun"),transitionstart:qa("Transition","TransitionStart"),transitioncancel:qa("Transition","TransitionCancel"),transitionend:qa("Transition","TransitionEnd")},Os={},ss={};Nr&&(ss=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function Xs(i){if(Os[i])return Os[i];if(!jo[i])return i;var a=jo[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in ss)return Os[i]=a[l];return i}var ep=Xs("animationend"),yd=Xs("animationiteration"),bd=Xs("animationstart"),tp=Xs("transitionrun"),np=Xs("transitionstart"),ev=Xs("transitioncancel"),rp=Xs("transitionend"),ip=new Map,wd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function _i(i,a){ip.set(i,a),gr(a,[i])}var vi=[],Uo=0,Ed=0;function Ic(){for(var i=Uo,a=Ed=Uo=0;a<i;){var l=vi[a];vi[a++]=null;var c=vi[a];vi[a++]=null;var m=vi[a];vi[a++]=null;var _=vi[a];if(vi[a++]=null,c!==null&&m!==null){var T=c.pending;T===null?m.next=m:(m.next=T.next,T.next=m),c.pending=m}_!==0&&sp(l,m,_)}}function Rc(i,a,l,c){vi[Uo++]=i,vi[Uo++]=a,vi[Uo++]=l,vi[Uo++]=c,Ed|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Pi(i,a,l,c){return Rc(i,a,l,c),Cc(i)}function Ns(i,a){return Rc(i,null,null,a),Cc(i)}function sp(i,a,l){i.lanes|=l;var c=i.alternate;c!==null&&(c.lanes|=l);for(var m=!1,_=i.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(m=!0)),i=_,_=_.return;m&&a!==null&&i.tag===3&&(_=i.stateNode,m=31-Fn(l),_=_.hiddenUpdates,i=_[m],i===null?_[m]=[a]:i.push(a),a.lane=l|536870912)}function Cc(i){if(50<Yd)throw Yd=0,Hv=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Fo={},ap=new WeakMap;function yi(i,a){if(typeof i=="object"&&i!==null){var l=ap.get(i);return l!==void 0?l:(a={value:i,source:a,stack:Ne(a)},ap.set(i,a),a)}return{value:i,source:a,stack:Ne(a)}}var Bo=[],zo=0,Dc=null,qo=0,vr=[],ti=0,Zs=null,ni=1,ki="";function Ha(i,a){Bo[zo++]=qo,Bo[zo++]=Dc,Dc=i,qo=a}function op(i,a,l){vr[ti++]=ni,vr[ti++]=ki,vr[ti++]=Zs,Zs=i;var c=ni;i=ki;var m=32-Fn(c)-1;c&=~(1<<m),l+=1;var _=32-Fn(a)+m;if(30<_){var T=m-m%5;_=(c&(1<<T)-1).toString(32),c>>=T,m-=T,ni=1<<32-Fn(a)+m|l<<m|c,ki=_+i}else ni=1<<_|l<<m|c,ki=i}function Td(i){i.return!==null&&(Ha(i,1),op(i,1,0))}function Ps(i){for(;i===Dc;)Dc=Bo[--zo],Bo[zo]=null,qo=Bo[--zo],Bo[zo]=null;for(;i===Zs;)Zs=vr[--ti],vr[ti]=null,ki=vr[--ti],vr[ti]=null,ni=vr[--ti],vr[ti]=null}var yr=null,Qn=null,at=!1,ri=null,as=!1,xc=Error(r(519));function $a(i){var a=Error(r(418,""));throw uu(yi(a,i)),xc}function Ga(i){var a=i.stateNode,l=i.type,c=i.memoizedProps;switch(a[Gt]=i,a[nn]=c,l){case"dialog":bt("cancel",a),bt("close",a);break;case"iframe":case"object":case"embed":bt("load",a);break;case"video":case"audio":for(l=0;l<Xd.length;l++)bt(Xd[l],a);break;case"source":bt("error",a);break;case"img":case"image":case"link":bt("error",a),bt("load",a);break;case"details":bt("toggle",a);break;case"input":bt("invalid",a),Qr(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Nn(a);break;case"select":bt("invalid",a);break;case"textarea":bt("invalid",a),Is(a,c.value,c.defaultValue,c.children),Nn(a)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||L0(a.textContent,l)?(c.popover!=null&&(bt("beforetoggle",a),bt("toggle",a)),c.onScroll!=null&&bt("scroll",a),c.onScrollEnd!=null&&bt("scrollend",a),c.onClick!=null&&(a.onclick=Vp),a=!0):a=!1,a||$a(i)}function Oc(i){for(yr=i.return;yr;)switch(yr.tag){case 3:case 27:as=!0;return;case 5:case 13:as=!1;return;default:yr=yr.return}}function Ho(i){if(i!==yr)return!1;if(!at)return Oc(i),at=!0,!1;var a=!1,l;if((l=i.tag!==3&&i.tag!==27)&&((l=i.tag===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||oy(i.type,i.memoizedProps)),l=!l),l&&(a=!0),a&&Qn&&$a(i),Oc(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(a===0){Qn=Fs(i.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;i=i.nextSibling}Qn=null}}else Qn=yr?Fs(i.stateNode.nextSibling):null;return!0}function lu(){Qn=yr=null,at=!1}function uu(i){ri===null?ri=[i]:ri.push(i)}var cu=Error(r(460)),$o=Error(r(474)),ks={then:function(){}};function lp(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Nc(){}function up(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Nc,Nc),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,i===cu?Error(r(483)):i;default:if(typeof a.status=="string")a.then(Nc,Nc);else{if(i=Qt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(c){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=c}},function(c){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,i===cu?Error(r(483)):i}throw hu=a,cu}}var hu=null;function cp(){if(hu===null)throw Error(r(459));var i=hu;return hu=null,i}var Go=null,du=0;function Pc(i){var a=du;return du+=1,Go===null&&(Go=[]),up(Go,i,a)}function Wo(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function kc(i,a){throw a.$$typeof===o?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Ad(i){var a=i._init;return a(i._payload)}function Vc(i){function a(Y,$){if(i){var Z=Y.deletions;Z===null?(Y.deletions=[$],Y.flags|=16):Z.push($)}}function l(Y,$){if(!i)return null;for(;$!==null;)a(Y,$),$=$.sibling;return null}function c(Y){for(var $=new Map;Y!==null;)Y.key!==null?$.set(Y.key,Y):$.set(Y.index,Y),Y=Y.sibling;return $}function m(Y,$){return Y=sl(Y,$),Y.index=0,Y.sibling=null,Y}function _(Y,$,Z){return Y.index=Z,i?(Z=Y.alternate,Z!==null?(Z=Z.index,Z<$?(Y.flags|=33554434,$):Z):(Y.flags|=33554434,$)):(Y.flags|=1048576,$)}function T(Y){return i&&Y.alternate===null&&(Y.flags|=33554434),Y}function R(Y,$,Z,ce){return $===null||$.tag!==6?($=Mv(Z,Y.mode,ce),$.return=Y,$):($=m($,Z),$.return=Y,$)}function L(Y,$,Z,ce){var Pe=Z.type;return Pe===f?oe(Y,$,Z.props.children,ce,Z.key):$!==null&&($.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===J&&Ad(Pe)===$.type)?($=m($,Z.props),Wo($,Z),$.return=Y,$):($=Ap(Z.type,Z.key,Z.props,null,Y.mode,ce),Wo($,Z),$.return=Y,$)}function G(Y,$,Z,ce){return $===null||$.tag!==4||$.stateNode.containerInfo!==Z.containerInfo||$.stateNode.implementation!==Z.implementation?($=Lv(Z,Y.mode,ce),$.return=Y,$):($=m($,Z.children||[]),$.return=Y,$)}function oe(Y,$,Z,ce,Pe){return $===null||$.tag!==7?($=Tu(Z,Y.mode,ce,Pe),$.return=Y,$):($=m($,Z),$.return=Y,$)}function pe(Y,$,Z){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Mv(""+$,Y.mode,Z),$.return=Y,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case u:return Z=Ap($.type,$.key,$.props,null,Y.mode,Z),Wo(Z,$),Z.return=Y,Z;case h:return $=Lv($,Y.mode,Z),$.return=Y,$;case J:var ce=$._init;return $=ce($._payload),pe(Y,$,Z)}if(Ee($)||be($))return $=Tu($,Y.mode,Z,null),$.return=Y,$;if(typeof $.then=="function")return pe(Y,Pc($),Z);if($.$$typeof===D)return pe(Y,wp(Y,$),Z);kc(Y,$)}return null}function ee(Y,$,Z,ce){var Pe=$!==null?$.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Pe!==null?null:R(Y,$,""+Z,ce);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case u:return Z.key===Pe?L(Y,$,Z,ce):null;case h:return Z.key===Pe?G(Y,$,Z,ce):null;case J:return Pe=Z._init,Z=Pe(Z._payload),ee(Y,$,Z,ce)}if(Ee(Z)||be(Z))return Pe!==null?null:oe(Y,$,Z,ce,null);if(typeof Z.then=="function")return ee(Y,$,Pc(Z),ce);if(Z.$$typeof===D)return ee(Y,$,wp(Y,Z),ce);kc(Y,Z)}return null}function ae(Y,$,Z,ce,Pe){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Y=Y.get(Z)||null,R($,Y,""+ce,Pe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case u:return Y=Y.get(ce.key===null?Z:ce.key)||null,L($,Y,ce,Pe);case h:return Y=Y.get(ce.key===null?Z:ce.key)||null,G($,Y,ce,Pe);case J:var st=ce._init;return ce=st(ce._payload),ae(Y,$,Z,ce,Pe)}if(Ee(ce)||be(ce))return Y=Y.get(Z)||null,oe($,Y,ce,Pe,null);if(typeof ce.then=="function")return ae(Y,$,Z,Pc(ce),Pe);if(ce.$$typeof===D)return ae(Y,$,Z,wp($,ce),Pe);kc($,ce)}return null}function Le(Y,$,Z,ce){for(var Pe=null,st=null,ze=$,We=$=0,cr=null;ze!==null&&We<Z.length;We++){ze.index>We?(cr=ze,ze=null):cr=ze.sibling;var Rt=ee(Y,ze,Z[We],ce);if(Rt===null){ze===null&&(ze=cr);break}i&&ze&&Rt.alternate===null&&a(Y,ze),$=_(Rt,$,We),st===null?Pe=Rt:st.sibling=Rt,st=Rt,ze=cr}if(We===Z.length)return l(Y,ze),at&&Ha(Y,We),Pe;if(ze===null){for(;We<Z.length;We++)ze=pe(Y,Z[We],ce),ze!==null&&($=_(ze,$,We),st===null?Pe=ze:st.sibling=ze,st=ze);return at&&Ha(Y,We),Pe}for(ze=c(ze);We<Z.length;We++)cr=ae(ze,Y,We,Z[We],ce),cr!==null&&(i&&cr.alternate!==null&&ze.delete(cr.key===null?We:cr.key),$=_(cr,$,We),st===null?Pe=cr:st.sibling=cr,st=cr);return i&&ze.forEach(function(dl){return a(Y,dl)}),at&&Ha(Y,We),Pe}function Je(Y,$,Z,ce){if(Z==null)throw Error(r(151));for(var Pe=null,st=null,ze=$,We=$=0,cr=null,Rt=Z.next();ze!==null&&!Rt.done;We++,Rt=Z.next()){ze.index>We?(cr=ze,ze=null):cr=ze.sibling;var dl=ee(Y,ze,Rt.value,ce);if(dl===null){ze===null&&(ze=cr);break}i&&ze&&dl.alternate===null&&a(Y,ze),$=_(dl,$,We),st===null?Pe=dl:st.sibling=dl,st=dl,ze=cr}if(Rt.done)return l(Y,ze),at&&Ha(Y,We),Pe;if(ze===null){for(;!Rt.done;We++,Rt=Z.next())Rt=pe(Y,Rt.value,ce),Rt!==null&&($=_(Rt,$,We),st===null?Pe=Rt:st.sibling=Rt,st=Rt);return at&&Ha(Y,We),Pe}for(ze=c(ze);!Rt.done;We++,Rt=Z.next())Rt=ae(ze,Y,We,Rt.value,ce),Rt!==null&&(i&&Rt.alternate!==null&&ze.delete(Rt.key===null?We:Rt.key),$=_(Rt,$,We),st===null?Pe=Rt:st.sibling=Rt,st=Rt);return i&&ze.forEach(function(yP){return a(Y,yP)}),at&&Ha(Y,We),Pe}function Sn(Y,$,Z,ce){if(typeof Z=="object"&&Z!==null&&Z.type===f&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case u:e:{for(var Pe=Z.key;$!==null;){if($.key===Pe){if(Pe=Z.type,Pe===f){if($.tag===7){l(Y,$.sibling),ce=m($,Z.props.children),ce.return=Y,Y=ce;break e}}else if($.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===J&&Ad(Pe)===$.type){l(Y,$.sibling),ce=m($,Z.props),Wo(ce,Z),ce.return=Y,Y=ce;break e}l(Y,$);break}else a(Y,$);$=$.sibling}Z.type===f?(ce=Tu(Z.props.children,Y.mode,ce,Z.key),ce.return=Y,Y=ce):(ce=Ap(Z.type,Z.key,Z.props,null,Y.mode,ce),Wo(ce,Z),ce.return=Y,Y=ce)}return T(Y);case h:e:{for(Pe=Z.key;$!==null;){if($.key===Pe)if($.tag===4&&$.stateNode.containerInfo===Z.containerInfo&&$.stateNode.implementation===Z.implementation){l(Y,$.sibling),ce=m($,Z.children||[]),ce.return=Y,Y=ce;break e}else{l(Y,$);break}else a(Y,$);$=$.sibling}ce=Lv(Z,Y.mode,ce),ce.return=Y,Y=ce}return T(Y);case J:return Pe=Z._init,Z=Pe(Z._payload),Sn(Y,$,Z,ce)}if(Ee(Z))return Le(Y,$,Z,ce);if(be(Z)){if(Pe=be(Z),typeof Pe!="function")throw Error(r(150));return Z=Pe.call(Z),Je(Y,$,Z,ce)}if(typeof Z.then=="function")return Sn(Y,$,Pc(Z),ce);if(Z.$$typeof===D)return Sn(Y,$,wp(Y,Z),ce);kc(Y,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,$!==null&&$.tag===6?(l(Y,$.sibling),ce=m($,Z),ce.return=Y,Y=ce):(l(Y,$),ce=Mv(Z,Y.mode,ce),ce.return=Y,Y=ce),T(Y)):l(Y,$)}return function(Y,$,Z,ce){try{du=0;var Pe=Sn(Y,$,Z,ce);return Go=null,Pe}catch(ze){if(ze===cu)throw ze;var st=hs(29,ze,null,Y.mode);return st.lanes=ce,st.return=Y,st}finally{}}}var Js=Vc(!0),ea=Vc(!1),Wa=Te(null),Ko=Te(0);function Sd(i,a){i=ro,ct(Ko,i),ct(Wa,a),ro=i|a.baseLanes}function fu(){ct(Ko,ro),ct(Wa,Wa.current)}function Mc(){ro=Ko.current,ut(Wa),ut(Ko)}var Pr=Te(null),os=null;function kr(i){var a=i.alternate;ct(kn,kn.current&1),ct(Pr,i),os===null&&(a===null||Wa.current!==null||a.memoizedState!==null)&&(os=i)}function Vs(i){if(i.tag===22){if(ct(kn,kn.current),ct(Pr,i),os===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(os=i)}}else ta()}function ta(){ct(kn,kn.current),ct(Pr,Pr.current)}function Ms(i){ut(Pr),os===i&&(os=null),ut(kn)}var kn=Te(0);function Lc(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var tv=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,c){i.push(c)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},nv=n.unstable_scheduleCallback,rv=n.unstable_NormalPriority,Vn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jc(){return{controller:new tv,data:new Map,refCount:0}}function na(i){i.refCount--,i.refCount===0&&nv(rv,function(){i.controller.abort()})}var ra=null,Id=0,Yo=0,ls=null;function S(i,a){if(ra===null){var l=ra=[];Id=0,Yo=Zv(),ls={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Id++,a.then(g,g),a}function g(){if(--Id===0&&ra!==null){ls!==null&&(ls.status="fulfilled");var i=ra;ra=null,Yo=0,ls=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function w(i,a){var l=[],c={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return i.then(function(){c.status="fulfilled",c.value=a;for(var m=0;m<l.length;m++)(0,l[m])(a)},function(m){for(c.status="rejected",c.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),c}var C=N.S;N.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&S(i,a),C!==null&&C(i,a)};var q=Te(null);function K(){var i=q.current;return i!==null?i:Qt.pooledCache}function ie(i,a){a===null?ct(q,q.current):ct(q,a.pool)}function he(){var i=K();return i===null?null:{parent:Vn._currentValue,pool:i}}var Ae=0,fe=null,ve=null,ye=null,Xe=!1,Be=!1,qe=!1,$e=0,Ge=0,vt=null,Ut=0;function Ve(){throw Error(r(321))}function yt(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!Kt(i[l],a[l]))return!1;return!0}function Ze(i,a,l,c,m,_){return Ae=_,fe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,N.H=i===null||i.memoizedState===null?_u:Xo,qe=!1,_=l(c,m),qe=!1,Be&&(_=It(a,l,c,m)),it(i),_}function it(i){N.H=sa;var a=ve!==null&&ve.next!==null;if(Ae=0,ye=ve=fe=null,Xe=!1,Ge=0,vt=null,a)throw Error(r(300));i===null||lr||(i=i.dependencies,i!==null&&bp(i)&&(lr=!0))}function It(i,a,l,c){fe=i;var m=0;do{if(Be&&(vt=null),Ge=0,Be=!1,25<=m)throw Error(r(301));if(m+=1,ye=ve=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}N.H=vu,_=a(l,c)}while(Be);return _}function Pt(){var i=N.H,a=i.useState()[0];return a=typeof a.then=="function"?ar(a):a,i=i.useState()[0],(ve!==null?ve.memoizedState:null)!==i&&(fe.flags|=1024),a}function At(){var i=$e!==0;return $e=0,i}function Jt(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function br(i){if(Xe){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Xe=!1}Ae=0,ye=ve=fe=null,Be=!1,Ge=$e=0,vt=null}function Yt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?fe.memoizedState=ye=i:ye=ye.next=i,ye}function mt(){if(ve===null){var i=fe.alternate;i=i!==null?i.memoizedState:null}else i=ve.next;var a=ye===null?fe.memoizedState:ye.next;if(a!==null)ye=a,ve=i;else{if(i===null)throw fe.alternate===null?Error(r(467)):Error(r(310));ve=i,i={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},ye===null?fe.memoizedState=ye=i:ye=ye.next=i}return ye}var wr;wr=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ar(i){var a=Ge;return Ge+=1,vt===null&&(vt=[]),i=up(vt,i,a),a=fe,(ye===null?a.memoizedState:ye.next)===null&&(a=a.alternate,N.H=a===null||a.memoizedState===null?_u:Xo),i}function zt(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ar(i);if(i.$$typeof===D)return Vr(i)}throw Error(r(438,String(i)))}function bi(i){var a=null,l=fe.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=fe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=wr(),fe.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),c=0;c<i;c++)l[c]=ue;return a.index++,l}function zn(i,a){return typeof a=="function"?a(i):a}function Ls(i){var a=mt();return En(a,ve,i)}function En(i,a,l){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=l;var m=i.baseQueue,_=c.pending;if(_!==null){if(m!==null){var T=m.next;m.next=_.next,_.next=T}a.baseQueue=m=_,c.pending=null}if(_=i.baseState,m===null)i.memoizedState=_;else{a=m.next;var R=T=null,L=null,G=a,oe=!1;do{var pe=G.lane&-536870913;if(pe!==G.lane?(Et&pe)===pe:(Ae&pe)===pe){var ee=G.revertLane;if(ee===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),pe===Yo&&(oe=!0);else if((Ae&ee)===ee){G=G.next,ee===Yo&&(oe=!0);continue}else pe={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},L===null?(R=L=pe,T=_):L=L.next=pe,fe.lanes|=ee,al|=ee;pe=G.action,qe&&l(_,pe),_=G.hasEagerState?G.eagerState:l(_,pe)}else ee={lane:pe,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},L===null?(R=L=ee,T=_):L=L.next=ee,fe.lanes|=pe,al|=pe;G=G.next}while(G!==null&&G!==a);if(L===null?T=_:L.next=R,!Kt(_,i.memoizedState)&&(lr=!0,oe&&(l=ls,l!==null)))throw l;i.memoizedState=_,i.baseState=T,i.baseQueue=L,c.lastRenderedState=_}return m===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function xt(i){var a=mt(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var c=l.dispatch,m=l.pending,_=a.memoizedState;if(m!==null){l.pending=null;var T=m=m.next;do _=i(_,T.action),T=T.next;while(T!==m);Kt(_,a.memoizedState)||(lr=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),l.lastRenderedState=_}return[_,c]}function or(i,a,l){var c=fe,m=mt(),_=at;if(_){if(l===void 0)throw Error(r(407));l=l()}else l=a();var T=!Kt((ve||m).memoizedState,l);if(T&&(m.memoizedState=l,lr=!0),m=m.queue,zc(mu.bind(null,c,m,i),[i]),m.getSnapshot!==a||T||ye!==null&&ye.memoizedState.tag&1){if(c.flags|=2048,Ka(9,js.bind(null,c,m,l,a),{destroy:void 0},null),Qt===null)throw Error(r(349));_||(Ae&60)!==0||ii(c,a,l)}return l}function ii(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=fe.updateQueue,a===null?(a=wr(),fe.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function js(i,a,l,c){a.value=l,a.getSnapshot=c,Rd(a)&&Cd(i)}function mu(i,a,l){return l(function(){Rd(a)&&Cd(i)})}function Rd(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!Kt(i,l)}catch{return!0}}function Cd(i){var a=Ns(i,2);a!==null&&si(a,i,2)}function Qo(i){var a=Yt();if(typeof i=="function"){var l=i;if(i=l(),qe){Hr(!0);try{l()}finally{Hr(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zn,lastRenderedState:i},a}function hp(i,a,l,c){return i.baseState=l,En(i,ve,typeof c=="function"?c:zn)}function iv(i,a,l,c,m){if(_p(i))throw Error(r(485));if(i=a.action,i!==null){var _={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){_.listeners.push(T)}};N.T!==null?l(!0):_.isTransition=!1,c(_),l=a.pending,l===null?(_.next=a.pending=_,Uc(a,_)):(_.next=l.next,a.pending=l.next=_)}}function Uc(i,a){var l=a.action,c=a.payload,m=i.state;if(a.isTransition){var _=N.T,T={};N.T=T;try{var R=l(m,c),L=N.S;L!==null&&L(T,R),dp(i,a,R)}catch(G){xd(i,a,G)}finally{N.T=_}}else try{_=l(m,c),dp(i,a,_)}catch(G){xd(i,a,G)}}function dp(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Dd(i,a,c)},function(c){return xd(i,a,c)}):Dd(i,a,l)}function Dd(i,a,l){a.status="fulfilled",a.value=l,Od(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,Uc(i,l)))}function xd(i,a,l){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,Od(a),a=a.next;while(a!==c)}i.action=null}function Od(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Nd(i,a){return a}function fp(i,a){if(at){var l=Qt.formState;if(l!==null){e:{var c=fe;if(at){if(Qn){t:{for(var m=Qn,_=as;m.nodeType!==8;){if(!_){m=null;break t}if(m=Fs(m.nextSibling),m===null){m=null;break t}}_=m.data,m=_==="F!"||_==="F"?m:null}if(m){Qn=Fs(m.nextSibling),c=m.data==="F!";break e}}$a(c)}c=!1}c&&(a=l[0])}}return l=Yt(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nd,lastRenderedState:a},l.queue=c,l=bT.bind(null,fe,c),c.dispatch=l,c=Qo(!1),_=uv.bind(null,fe,!1,c.queue),c=Yt(),m={state:a,dispatch:null,action:i,pending:null},c.queue=m,l=iv.bind(null,fe,m,_,l),m.dispatch=l,c.memoizedState=i,[a,l,!1]}function mp(i){var a=mt();return ia(a,ve,i)}function ia(i,a,l){a=En(i,a,Nd)[0],i=Ls(zn)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?ar(a):a;var c=mt(),m=c.queue,_=m.dispatch;return l!==c.memoizedState&&(fe.flags|=2048,Ka(9,Fc.bind(null,m,l),{destroy:void 0},null)),[a,_,i]}function Fc(i,a){i.action=a}function Pd(i){var a=mt(),l=ve;if(l!==null)return ia(a,l,i);mt(),a=a.memoizedState,l=mt();var c=l.queue.dispatch;return l.memoizedState=i,[a,c,!1]}function Ka(i,a,l,c){return i={tag:i,create:a,inst:l,deps:c,next:null},a=fe.updateQueue,a===null&&(a=wr(),fe.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(c=l.next,l.next=i,i.next=c,a.lastEffect=i),i}function Bc(){return mt().memoizedState}function pu(i,a,l,c){var m=Yt();fe.flags|=i,m.memoizedState=Ka(1|a,l,{destroy:void 0},c===void 0?null:c)}function gu(i,a,l,c){var m=mt();c=c===void 0?null:c;var _=m.memoizedState.inst;ve!==null&&c!==null&&yt(c,ve.memoizedState.deps)?m.memoizedState=Ka(a,l,_,c):(fe.flags|=i,m.memoizedState=Ka(1|a,l,_,c))}function kd(i,a){pu(8390656,8,i,a)}function zc(i,a){gu(2048,8,i,a)}function pp(i,a){return gu(4,2,i,a)}function gp(i,a){return gu(4,4,i,a)}function qc(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Vd(i,a,l){l=l!=null?l.concat([i]):null,gu(4,4,qc.bind(null,a,i),l)}function sv(){}function dT(i,a){var l=mt();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&yt(a,c[1])?c[0]:(l.memoizedState=[i,a],i)}function fT(i,a){var l=mt();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&yt(a,c[1]))return c[0];if(c=i(),qe){Hr(!0);try{i()}finally{Hr(!1)}}return l.memoizedState=[c,a],c}function av(i,a,l){return l===void 0||(Ae&1073741824)!==0?i.memoizedState=a:(i.memoizedState=l,i=p0(),fe.lanes|=i,al|=i,l)}function mT(i,a,l,c){return Kt(l,a)?l:Wa.current!==null?(i=av(i,l,c),Kt(i,a)||(lr=!0),i):(Ae&42)===0?(lr=!0,i.memoizedState=l):(i=p0(),fe.lanes|=i,al|=i,a)}function pT(i,a,l,c,m){var _=Se.p;Se.p=_!==0&&8>_?_:8;var T=N.T,R={};N.T=R,uv(i,!1,a,l);try{var L=m(),G=N.S;if(G!==null&&G(R,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var oe=w(L,c);Md(i,a,oe,ji(i))}else Md(i,a,c,ji(i))}catch(pe){Md(i,a,{then:function(){},status:"rejected",reason:pe},ji())}finally{Se.p=_,N.T=T}}function pN(){}function ov(i,a,l,c){if(i.tag!==5)throw Error(r(476));var m=gT(i).queue;pT(i,m,a,Fe,l===null?pN:function(){return _T(i),l(c)})}function gT(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Fe,baseState:Fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zn,lastRenderedState:Fe},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zn,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function _T(i){var a=gT(i).next.queue;Md(i,a,{},ji())}function lv(){return Vr(nf)}function vT(){return mt().memoizedState}function yT(){return mt().memoizedState}function gN(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=ji();i=el(l);var c=tl(a,i,l);c!==null&&(si(c,a,l),Ud(c,a,l)),a={cache:jc()},i.payload=a;return}a=a.return}}function _N(i,a,l){var c=ji();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},_p(i)?wT(a,l):(l=Pi(i,a,l,c),l!==null&&(si(l,i,c),ET(l,a,c)))}function bT(i,a,l){var c=ji();Md(i,a,l,c)}function Md(i,a,l,c){var m={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(_p(i))wT(a,m);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var T=a.lastRenderedState,R=_(T,l);if(m.hasEagerState=!0,m.eagerState=R,Kt(R,T))return Rc(i,a,m,0),Qt===null&&Ic(),!1}catch{}finally{}if(l=Pi(i,a,m,c),l!==null)return si(l,i,c),ET(l,a,c),!0}return!1}function uv(i,a,l,c){if(c={lane:2,revertLane:Zv(),action:c,hasEagerState:!1,eagerState:null,next:null},_p(i)){if(a)throw Error(r(479))}else a=Pi(i,l,c,2),a!==null&&si(a,i,2)}function _p(i){var a=i.alternate;return i===fe||a!==null&&a===fe}function wT(i,a){Be=Xe=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function ET(i,a,l){if((l&4194176)!==0){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,Wr(i,l)}}var sa={readContext:Vr,use:zt,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useLayoutEffect:Ve,useInsertionEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useSyncExternalStore:Ve,useId:Ve};sa.useCacheRefresh=Ve,sa.useMemoCache=Ve,sa.useHostTransitionStatus=Ve,sa.useFormState=Ve,sa.useActionState=Ve,sa.useOptimistic=Ve;var _u={readContext:Vr,use:zt,useCallback:function(i,a){return Yt().memoizedState=[i,a===void 0?null:a],i},useContext:Vr,useEffect:kd,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,pu(4194308,4,qc.bind(null,a,i),l)},useLayoutEffect:function(i,a){return pu(4194308,4,i,a)},useInsertionEffect:function(i,a){pu(4,2,i,a)},useMemo:function(i,a){var l=Yt();a=a===void 0?null:a;var c=i();if(qe){Hr(!0);try{i()}finally{Hr(!1)}}return l.memoizedState=[c,a],c},useReducer:function(i,a,l){var c=Yt();if(l!==void 0){var m=l(a);if(qe){Hr(!0);try{l(a)}finally{Hr(!1)}}}else m=a;return c.memoizedState=c.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},c.queue=i,i=i.dispatch=_N.bind(null,fe,i),[c.memoizedState,i]},useRef:function(i){var a=Yt();return i={current:i},a.memoizedState=i},useState:function(i){i=Qo(i);var a=i.queue,l=bT.bind(null,fe,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:sv,useDeferredValue:function(i,a){var l=Yt();return av(l,i,a)},useTransition:function(){var i=Qo(!1);return i=pT.bind(null,fe,i.queue,!0,!1),Yt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var c=fe,m=Yt();if(at){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),Qt===null)throw Error(r(349));(Et&60)!==0||ii(c,a,l)}m.memoizedState=l;var _={value:l,getSnapshot:a};return m.queue=_,kd(mu.bind(null,c,_,i),[i]),c.flags|=2048,Ka(9,js.bind(null,c,_,l,a),{destroy:void 0},null),l},useId:function(){var i=Yt(),a=Qt.identifierPrefix;if(at){var l=ki,c=ni;l=(c&~(1<<32-Fn(c)-1)).toString(32)+l,a=":"+a+"R"+l,l=$e++,0<l&&(a+="H"+l.toString(32)),a+=":"}else l=Ut++,a=":"+a+"r"+l.toString(32)+":";return i.memoizedState=a},useCacheRefresh:function(){return Yt().memoizedState=gN.bind(null,fe)}};_u.useMemoCache=bi,_u.useHostTransitionStatus=lv,_u.useFormState=fp,_u.useActionState=fp,_u.useOptimistic=function(i){var a=Yt();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=uv.bind(null,fe,!0,l),l.dispatch=a,[i,a]};var Xo={readContext:Vr,use:zt,useCallback:dT,useContext:Vr,useEffect:zc,useImperativeHandle:Vd,useInsertionEffect:pp,useLayoutEffect:gp,useMemo:fT,useReducer:Ls,useRef:Bc,useState:function(){return Ls(zn)},useDebugValue:sv,useDeferredValue:function(i,a){var l=mt();return mT(l,ve.memoizedState,i,a)},useTransition:function(){var i=Ls(zn)[0],a=mt().memoizedState;return[typeof i=="boolean"?i:ar(i),a]},useSyncExternalStore:or,useId:vT};Xo.useCacheRefresh=yT,Xo.useMemoCache=bi,Xo.useHostTransitionStatus=lv,Xo.useFormState=mp,Xo.useActionState=mp,Xo.useOptimistic=function(i,a){var l=mt();return hp(l,ve,i,a)};var vu={readContext:Vr,use:zt,useCallback:dT,useContext:Vr,useEffect:zc,useImperativeHandle:Vd,useInsertionEffect:pp,useLayoutEffect:gp,useMemo:fT,useReducer:xt,useRef:Bc,useState:function(){return xt(zn)},useDebugValue:sv,useDeferredValue:function(i,a){var l=mt();return ve===null?av(l,i,a):mT(l,ve.memoizedState,i,a)},useTransition:function(){var i=xt(zn)[0],a=mt().memoizedState;return[typeof i=="boolean"?i:ar(i),a]},useSyncExternalStore:or,useId:vT};vu.useCacheRefresh=yT,vu.useMemoCache=bi,vu.useHostTransitionStatus=lv,vu.useFormState=Pd,vu.useActionState=Pd,vu.useOptimistic=function(i,a){var l=mt();return ve!==null?hp(l,ve,i,a):(l.baseState=i,[i,l.queue.dispatch])};function cv(i,a,l,c){a=i.memoizedState,l=l(c,a),l=l==null?a:k({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var hv={isMounted:function(i){return(i=i._reactInternals)?Oe(i)===i:!1},enqueueSetState:function(i,a,l){i=i._reactInternals;var c=ji(),m=el(c);m.payload=a,l!=null&&(m.callback=l),a=tl(i,m,c),a!==null&&(si(a,i,c),Ud(a,i,c))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var c=ji(),m=el(c);m.tag=1,m.payload=a,l!=null&&(m.callback=l),a=tl(i,m,c),a!==null&&(si(a,i,c),Ud(a,i,c))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=ji(),c=el(l);c.tag=2,a!=null&&(c.callback=a),a=tl(i,c,l),a!==null&&(si(a,i,l),Ud(a,i,l))}};function TT(i,a,l,c,m,_,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,_,T):a.prototype&&a.prototype.isPureReactComponent?!ou(l,c)||!ou(m,_):!0}function AT(i,a,l,c){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==i&&hv.enqueueReplaceState(a,a.state,null)}function yu(i,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(i=i.defaultProps){l===a&&(l=k({},l));for(var m in i)l[m]===void 0&&(l[m]=i[m])}return l}var vp=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function ST(i){vp(i)}function IT(i){console.error(i)}function RT(i){vp(i)}function yp(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function CT(i,a,l){try{var c=i.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function dv(i,a,l){return l=el(l),l.tag=3,l.payload={element:null},l.callback=function(){yp(i,a)},l}function DT(i){return i=el(i),i.tag=3,i}function xT(i,a,l,c){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var _=c.value;i.payload=function(){return m(_)},i.callback=function(){CT(a,l,c)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){CT(a,l,c),typeof m!="function"&&(ol===null?ol=new Set([this]):ol.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function vN(i,a,l,c,m){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&jd(a,l,m,!0),l=Pr.current,l!==null){switch(l.tag){case 13:return os===null?Wv():l.alternate===null&&An===0&&(An=3),l.flags&=-257,l.flags|=65536,l.lanes=m,c===ks?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),Yv(i,c,m)),!1;case 22:return l.flags|=65536,c===ks?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),Yv(i,c,m)),!1}throw Error(r(435,l.tag))}return Yv(i,c,m),Wv(),!1}if(at)return a=Pr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,c!==xc&&(i=Error(r(422),{cause:c}),uu(yi(i,l)))):(c!==xc&&(a=Error(r(423),{cause:c}),uu(yi(a,l))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,c=yi(c,l),m=dv(i.stateNode,c,m),Rv(i,m),An!==4&&(An=2)),!1;var _=Error(r(520),{cause:c});if(_=yi(_,l),Wd===null?Wd=[_]:Wd.push(_),An!==4&&(An=2),a===null)return!0;c=yi(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=m&-m,l.lanes|=i,i=dv(l.stateNode,c,i),Rv(l,i),!1;case 1:if(a=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ol===null||!ol.has(_))))return l.flags|=65536,m&=-m,l.lanes|=m,m=DT(m),xT(m,i,l,c),Rv(l,m),!1}l=l.return}while(l!==null);return!1}var OT=Error(r(461)),lr=!1;function Er(i,a,l,c){a.child=i===null?ea(a,null,l,c):Js(a,i.child,l,c)}function NT(i,a,l,c,m){l=l.render;var _=a.ref;if("ref"in c){var T={};for(var R in c)R!=="ref"&&(T[R]=c[R])}else T=c;return wu(a),c=Ze(i,a,l,T,_,m),R=At(),i!==null&&!lr?(Jt(i,a,m),Ya(i,a,m)):(at&&R&&Td(a),a.flags|=1,Er(i,a,c,m),a.child)}function PT(i,a,l,c,m){if(i===null){var _=l.type;return typeof _=="function"&&!Vv(_)&&_.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=_,kT(i,a,_,c,m)):(i=Ap(l.type,null,c,a,a.mode,m),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,!wv(i,m)){var T=_.memoizedProps;if(l=l.compare,l=l!==null?l:ou,l(T,c)&&i.ref===a.ref)return Ya(i,a,m)}return a.flags|=1,i=sl(_,c),i.ref=a.ref,i.return=a,a.child=i}function kT(i,a,l,c,m){if(i!==null){var _=i.memoizedProps;if(ou(_,c)&&i.ref===a.ref)if(lr=!1,a.pendingProps=c=_,wv(i,m))(i.flags&131072)!==0&&(lr=!0);else return a.lanes=i.lanes,Ya(i,a,m)}return fv(i,a,l,c,m)}function VT(i,a,l){var c=a.pendingProps,m=c.children,_=(a.stateNode._pendingVisibility&2)!==0,T=i!==null?i.memoizedState:null;if(Ld(i,a),c.mode==="hidden"||_){if((a.flags&128)!==0){if(c=T!==null?T.baseLanes|l:l,i!==null){for(m=a.child=i.child,_=0;m!==null;)_=_|m.lanes|m.childLanes,m=m.sibling;a.childLanes=_&~c}else a.childLanes=0,a.child=null;return MT(i,a,c,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&ie(a,T!==null?T.cachePool:null),T!==null?Sd(a,T):fu(),Vs(a);else return a.lanes=a.childLanes=536870912,MT(i,a,T!==null?T.baseLanes|l:l,l)}else T!==null?(ie(a,T.cachePool),Sd(a,T),ta(),a.memoizedState=null):(i!==null&&ie(a,null),fu(),ta());return Er(i,a,m,l),a.child}function MT(i,a,l,c){var m=K();return m=m===null?null:{parent:Vn._currentValue,pool:m},a.memoizedState={baseLanes:l,cachePool:m},i!==null&&ie(a,null),fu(),Vs(a),i!==null&&jd(i,a,c,!0),null}function Ld(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=2097664)}}function fv(i,a,l,c,m){return wu(a),l=Ze(i,a,l,c,void 0,m),c=At(),i!==null&&!lr?(Jt(i,a,m),Ya(i,a,m)):(at&&c&&Td(a),a.flags|=1,Er(i,a,l,m),a.child)}function LT(i,a,l,c,m,_){return wu(a),a.updateQueue=null,l=It(a,c,l,m),it(i),c=At(),i!==null&&!lr?(Jt(i,a,_),Ya(i,a,_)):(at&&c&&Td(a),a.flags|=1,Er(i,a,l,_),a.child)}function jT(i,a,l,c,m){if(wu(a),a.stateNode===null){var _=Fo,T=l.contextType;typeof T=="object"&&T!==null&&(_=Vr(T)),_=new l(c,_),a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=hv,a.stateNode=_,_._reactInternals=a,_=a.stateNode,_.props=c,_.state=a.memoizedState,_.refs={},Sv(a),T=l.contextType,_.context=typeof T=="object"&&T!==null?Vr(T):Fo,_.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(cv(a,l,T,c),_.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(T=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),T!==_.state&&hv.enqueueReplaceState(_,_.state,null),Bd(a,c,_,m),Fd(),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(i===null){_=a.stateNode;var R=a.memoizedProps,L=yu(l,R);_.props=L;var G=_.context,oe=l.contextType;T=Fo,typeof oe=="object"&&oe!==null&&(T=Vr(oe));var pe=l.getDerivedStateFromProps;oe=typeof pe=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=a.pendingProps!==R,oe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||G!==T)&&AT(a,_,c,T),Jo=!1;var ee=a.memoizedState;_.state=ee,Bd(a,c,_,m),Fd(),G=a.memoizedState,R||ee!==G||Jo?(typeof pe=="function"&&(cv(a,l,pe,c),G=a.memoizedState),(L=Jo||TT(a,l,L,c,ee,G,T))?(oe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(a.flags|=4194308)):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=G),_.props=c,_.state=G,_.context=T,c=L):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{_=a.stateNode,Iv(i,a),T=a.memoizedProps,oe=yu(l,T),_.props=oe,pe=a.pendingProps,ee=_.context,G=l.contextType,L=Fo,typeof G=="object"&&G!==null&&(L=Vr(G)),R=l.getDerivedStateFromProps,(G=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==pe||ee!==L)&&AT(a,_,c,L),Jo=!1,ee=a.memoizedState,_.state=ee,Bd(a,c,_,m),Fd();var ae=a.memoizedState;T!==pe||ee!==ae||Jo||i!==null&&i.dependencies!==null&&bp(i.dependencies)?(typeof R=="function"&&(cv(a,l,R,c),ae=a.memoizedState),(oe=Jo||TT(a,l,oe,c,ee,ae,L)||i!==null&&i.dependencies!==null&&bp(i.dependencies))?(G||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,ae,L),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,ae,L)),typeof _.componentDidUpdate=="function"&&(a.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===i.memoizedProps&&ee===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&ee===i.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=ae),_.props=c,_.state=ae,_.context=L,c=oe):(typeof _.componentDidUpdate!="function"||T===i.memoizedProps&&ee===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&ee===i.memoizedState||(a.flags|=1024),c=!1)}return _=c,Ld(i,a),c=(a.flags&128)!==0,_||c?(_=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),a.flags|=1,i!==null&&c?(a.child=Js(a,i.child,null,m),a.child=Js(a,null,l,m)):Er(i,a,l,m),a.memoizedState=_.state,i=a.child):i=Ya(i,a,m),i}function UT(i,a,l,c){return lu(),a.flags|=256,Er(i,a,l,c),a.child}var mv={dehydrated:null,treeContext:null,retryLane:0};function pv(i){return{baseLanes:i,cachePool:he()}}function gv(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=ds),i}function FT(i,a,l){var c=a.pendingProps,m=!1,_=(a.flags&128)!==0,T;if((T=_)||(T=i!==null&&i.memoizedState===null?!1:(kn.current&2)!==0),T&&(m=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,i===null){if(at){if(m?kr(a):ta(),at){var R=Qn,L;if(L=R){e:{for(L=R,R=as;L.nodeType!==8;){if(!R){R=null;break e}if(L=Fs(L.nextSibling),L===null){R=null;break e}}R=L}R!==null?(a.memoizedState={dehydrated:R,treeContext:Zs!==null?{id:ni,overflow:ki}:null,retryLane:536870912},L=hs(18,null,null,0),L.stateNode=R,L.return=a,a.child=L,yr=a,Qn=null,L=!0):L=!1}L||$a(a)}if(R=a.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return R.data==="$!"?a.lanes=16:a.lanes=536870912,null;Ms(a)}return R=c.children,c=c.fallback,m?(ta(),m=a.mode,R=vv({mode:"hidden",children:R},m),c=Tu(c,m,l,null),R.return=a,c.return=a,R.sibling=c,a.child=R,m=a.child,m.memoizedState=pv(l),m.childLanes=gv(i,T,l),a.memoizedState=mv,c):(kr(a),_v(a,R))}if(L=i.memoizedState,L!==null&&(R=L.dehydrated,R!==null)){if(_)a.flags&256?(kr(a),a.flags&=-257,a=yv(i,a,l)):a.memoizedState!==null?(ta(),a.child=i.child,a.flags|=128,a=null):(ta(),m=c.fallback,R=a.mode,c=vv({mode:"visible",children:c.children},R),m=Tu(m,R,l,null),m.flags|=2,c.return=a,m.return=a,c.sibling=m,a.child=c,Js(a,i.child,null,l),c=a.child,c.memoizedState=pv(l),c.childLanes=gv(i,T,l),a.memoizedState=mv,a=m);else if(kr(a),R.data==="$!"){if(T=R.nextSibling&&R.nextSibling.dataset,T)var G=T.dgst;T=G,c=Error(r(419)),c.stack="",c.digest=T,uu({value:c,source:null,stack:null}),a=yv(i,a,l)}else if(lr||jd(i,a,l,!1),T=(l&i.childLanes)!==0,lr||T){if(T=Qt,T!==null){if(c=l&-l,(c&42)!==0)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=(c&(T.suspendedLanes|l))!==0?0:c,c!==0&&c!==L.retryLane)throw L.retryLane=c,Ns(i,c),si(T,i,c),OT}R.data==="$?"||Wv(),a=yv(i,a,l)}else R.data==="$?"?(a.flags|=128,a.child=i.child,a=PN.bind(null,i),R._reactRetry=a,a=null):(i=L.treeContext,Qn=Fs(R.nextSibling),yr=a,at=!0,ri=null,as=!1,i!==null&&(vr[ti++]=ni,vr[ti++]=ki,vr[ti++]=Zs,ni=i.id,ki=i.overflow,Zs=a),a=_v(a,c.children),a.flags|=4096);return a}return m?(ta(),m=c.fallback,R=a.mode,L=i.child,G=L.sibling,c=sl(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&31457280,G!==null?m=sl(G,m):(m=Tu(m,R,l,null),m.flags|=2),m.return=a,c.return=a,c.sibling=m,a.child=c,c=m,m=a.child,R=i.child.memoizedState,R===null?R=pv(l):(L=R.cachePool,L!==null?(G=Vn._currentValue,L=L.parent!==G?{parent:G,pool:G}:L):L=he(),R={baseLanes:R.baseLanes|l,cachePool:L}),m.memoizedState=R,m.childLanes=gv(i,T,l),a.memoizedState=mv,c):(kr(a),l=i.child,i=l.sibling,l=sl(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,i!==null&&(T=a.deletions,T===null?(a.deletions=[i],a.flags|=16):T.push(i)),a.child=l,a.memoizedState=null,l)}function _v(i,a){return a=vv({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function vv(i,a){return d0(i,a,0,null)}function yv(i,a,l){return Js(a,i.child,null,l),i=_v(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function BT(i,a,l){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a),Tv(i.return,a,l)}function bv(i,a,l,c,m){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:m}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=l,_.tailMode=m)}function zT(i,a,l){var c=a.pendingProps,m=c.revealOrder,_=c.tail;if(Er(i,a,c.children,l),c=kn.current,(c&2)!==0)c=c&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&BT(i,l,a);else if(i.tag===19)BT(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(ct(kn,c),m){case"forwards":for(l=a.child,m=null;l!==null;)i=l.alternate,i!==null&&Lc(i)===null&&(m=l),l=l.sibling;l=m,l===null?(m=a.child,a.child=null):(m=l.sibling,l.sibling=null),bv(a,!1,m,l,_);break;case"backwards":for(l=null,m=a.child,a.child=null;m!==null;){if(i=m.alternate,i!==null&&Lc(i)===null){a.child=m;break}i=m.sibling,m.sibling=l,l=m,m=i}bv(a,!0,l,null,_);break;case"together":bv(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ya(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),al|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(jd(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=sl(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=sl(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function wv(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&bp(i)))}function yN(i,a,l){switch(a.tag){case 3:Un(a,a.stateNode.containerInfo),Zo(a,Vn,i.memoizedState.cache),lu();break;case 27:case 5:$i(a);break;case 4:Un(a,a.stateNode.containerInfo);break;case 10:Zo(a,a.type,a.memoizedProps.value);break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(kr(a),a.flags|=128,null):(l&a.child.childLanes)!==0?FT(i,a,l):(kr(a),i=Ya(i,a,l),i!==null?i.sibling:null);kr(a);break;case 19:var m=(i.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(jd(i,a,l,!1),c=(l&a.childLanes)!==0),m){if(c)return zT(i,a,l);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ct(kn,kn.current),c)break;return null;case 22:case 23:return a.lanes=0,VT(i,a,l);case 24:Zo(a,Vn,i.memoizedState.cache)}return Ya(i,a,l)}function qT(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)lr=!0;else{if(!wv(i,l)&&(a.flags&128)===0)return lr=!1,yN(i,a,l);lr=(i.flags&131072)!==0}else lr=!1,at&&(a.flags&1048576)!==0&&op(a,qo,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var c=a.elementType,m=c._init;if(c=m(c._payload),a.type=c,typeof c=="function")Vv(c)?(i=yu(c,i),a.tag=1,a=jT(null,a,c,i,l)):(a.tag=0,a=fv(null,a,c,i,l));else{if(c!=null){if(m=c.$$typeof,m===M){a.tag=11,a=NT(null,a,c,i,l);break e}else if(m===H){a.tag=14,a=PT(null,a,c,i,l);break e}}throw a=P(c)||c,Error(r(306,a,""))}}return a;case 0:return fv(i,a,a.type,a.pendingProps,l);case 1:return c=a.type,m=yu(c,a.pendingProps),jT(i,a,c,m,l);case 3:e:{if(Un(a,a.stateNode.containerInfo),i===null)throw Error(r(387));var _=a.pendingProps;m=a.memoizedState,c=m.element,Iv(i,a),Bd(a,_,null,l);var T=a.memoizedState;if(_=T.cache,Zo(a,Vn,_),_!==m.cache&&Av(a,[Vn],l,!0),Fd(),_=T.element,m.isDehydrated)if(m={element:_,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=UT(i,a,_,l);break e}else if(_!==c){c=yi(Error(r(424)),a),uu(c),a=UT(i,a,_,l);break e}else for(Qn=Fs(a.stateNode.containerInfo.firstChild),yr=a,at=!0,ri=null,as=!0,l=ea(a,null,_,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(lu(),_===c){a=Ya(i,a,l);break e}Er(i,a,_,l)}a=a.child}return a;case 26:return Ld(i,a),i===null?(l=G0(a.type,null,a.pendingProps,null))?a.memoizedState=l:at||(l=a.type,i=a.pendingProps,c=Mp(vn.current).createElement(l),c[Gt]=a,c[nn]=i,Tr(c,l,i),Bt(c),a.stateNode=c):a.memoizedState=G0(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return $i(a),i===null&&at&&(c=a.stateNode=q0(a.type,a.pendingProps,vn.current),yr=a,as=!0,Qn=Fs(c.firstChild)),c=a.pendingProps.children,i!==null||at?Er(i,a,c,l):a.child=Js(a,null,c,l),Ld(i,a),a.child;case 5:return i===null&&at&&((m=c=Qn)&&(c=YN(c,a.type,a.pendingProps,as),c!==null?(a.stateNode=c,yr=a,Qn=Fs(c.firstChild),as=!1,m=!0):m=!1),m||$a(a)),$i(a),m=a.type,_=a.pendingProps,T=i!==null?i.memoizedProps:null,c=_.children,oy(m,_)?c=null:T!==null&&oy(m,T)&&(a.flags|=32),a.memoizedState!==null&&(m=Ze(i,a,Pt,null,null,l),nf._currentValue=m),Ld(i,a),Er(i,a,c,l),a.child;case 6:return i===null&&at&&((i=l=Qn)&&(l=QN(l,a.pendingProps,as),l!==null?(a.stateNode=l,yr=a,Qn=null,i=!0):i=!1),i||$a(a)),null;case 13:return FT(i,a,l);case 4:return Un(a,a.stateNode.containerInfo),c=a.pendingProps,i===null?a.child=Js(a,null,c,l):Er(i,a,c,l),a.child;case 11:return NT(i,a,a.type,a.pendingProps,l);case 7:return Er(i,a,a.pendingProps,l),a.child;case 8:return Er(i,a,a.pendingProps.children,l),a.child;case 12:return Er(i,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,Zo(a,a.type,c.value),Er(i,a,c.children,l),a.child;case 9:return m=a.type._context,c=a.pendingProps.children,wu(a),m=Vr(m),c=c(m),a.flags|=1,Er(i,a,c,l),a.child;case 14:return PT(i,a,a.type,a.pendingProps,l);case 15:return kT(i,a,a.type,a.pendingProps,l);case 19:return zT(i,a,l);case 22:return VT(i,a,l);case 24:return wu(a),c=Vr(Vn),i===null?(m=K(),m===null&&(m=Qt,_=jc(),m.pooledCache=_,_.refCount++,_!==null&&(m.pooledCacheLanes|=l),m=_),a.memoizedState={parent:c,cache:m},Sv(a),Zo(a,Vn,m)):((i.lanes&l)!==0&&(Iv(i,a),Bd(a,null,null,l),Fd()),m=i.memoizedState,_=a.memoizedState,m.parent!==c?(m={parent:c,cache:c},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Zo(a,Vn,c)):(c=_.cache,Zo(a,Vn,c),c!==m.cache&&Av(a,[Vn],l,!0))),Er(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}var Ev=Te(null),bu=null,Qa=null;function Zo(i,a,l){ct(Ev,a._currentValue),a._currentValue=l}function Xa(i){i._currentValue=Ev.current,ut(Ev)}function Tv(i,a,l){for(;i!==null;){var c=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),i===l)break;i=i.return}}function Av(i,a,l,c){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var _=m.dependencies;if(_!==null){var T=m.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=m;for(var L=0;L<a.length;L++)if(R.context===a[L]){_.lanes|=l,R=_.alternate,R!==null&&(R.lanes|=l),Tv(_.return,l,i),c||(T=null);break e}_=R.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(r(341));T.lanes|=l,_=T.alternate,_!==null&&(_.lanes|=l),Tv(T,l,i),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===i){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function jd(i,a,l,c){i=null;for(var m=a,_=!1;m!==null;){if(!_){if((m.flags&524288)!==0)_=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var R=m.type;Kt(m.pendingProps.value,T.value)||(i!==null?i.push(R):i=[R])}}else if(m===Dt.current){if(T=m.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(nf):i=[nf])}m=m.return}i!==null&&Av(a,i,l,c),a.flags|=262144}function bp(i){for(i=i.firstContext;i!==null;){if(!Kt(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function wu(i){bu=i,Qa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Vr(i){return HT(bu,i)}function wp(i,a){return bu===null&&wu(i),HT(i,a)}function HT(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Qa===null){if(i===null)throw Error(r(308));Qa=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Qa=Qa.next=a;return l}var Jo=!1;function Sv(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Iv(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function el(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function tl(i,a,l){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(fn&2)!==0){var m=c.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),c.pending=a,a=Cc(i),sp(i,null,l),a}return Rc(i,c,a,l),Cc(i)}function Ud(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194176)!==0)){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,Wr(i,l)}}function Rv(i,a){var l=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var m=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?m=_=T:_=_.next=T,l=l.next}while(l!==null);_===null?m=_=a:_=_.next=a}else m=_=a;l={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Cv=!1;function Fd(){if(Cv){var i=ls;if(i!==null)throw i}}function Bd(i,a,l,c){Cv=!1;var m=i.updateQueue;Jo=!1;var _=m.firstBaseUpdate,T=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var L=R,G=L.next;L.next=null,T===null?_=G:T.next=G,T=L;var oe=i.alternate;oe!==null&&(oe=oe.updateQueue,R=oe.lastBaseUpdate,R!==T&&(R===null?oe.firstBaseUpdate=G:R.next=G,oe.lastBaseUpdate=L))}if(_!==null){var pe=m.baseState;T=0,oe=G=L=null,R=_;do{var ee=R.lane&-536870913,ae=ee!==R.lane;if(ae?(Et&ee)===ee:(c&ee)===ee){ee!==0&&ee===Yo&&(Cv=!0),oe!==null&&(oe=oe.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Le=i,Je=R;ee=a;var Sn=l;switch(Je.tag){case 1:if(Le=Je.payload,typeof Le=="function"){pe=Le.call(Sn,pe,ee);break e}pe=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Je.payload,ee=typeof Le=="function"?Le.call(Sn,pe,ee):Le,ee==null)break e;pe=k({},pe,ee);break e;case 2:Jo=!0}}ee=R.callback,ee!==null&&(i.flags|=64,ae&&(i.flags|=8192),ae=m.callbacks,ae===null?m.callbacks=[ee]:ae.push(ee))}else ae={lane:ee,tag:R.tag,payload:R.payload,callback:R.callback,next:null},oe===null?(G=oe=ae,L=pe):oe=oe.next=ae,T|=ee;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;ae=R,R=ae.next,ae.next=null,m.lastBaseUpdate=ae,m.shared.pending=null}}while(!0);oe===null&&(L=pe),m.baseState=L,m.firstBaseUpdate=G,m.lastBaseUpdate=oe,_===null&&(m.shared.lanes=0),al|=T,i.lanes=T,i.memoizedState=pe}}function $T(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function GT(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)$T(l[i],a)}function zd(i,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var m=c.next;l=m;do{if((l.tag&i)===i){c=void 0;var _=l.create,T=l.inst;c=_(),T.destroy=c}l=l.next}while(l!==m)}}catch(R){qt(a,a.return,R)}}function nl(i,a,l){try{var c=a.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var _=m.next;c=_;do{if((c.tag&i)===i){var T=c.inst,R=T.destroy;if(R!==void 0){T.destroy=void 0,m=a;var L=l;try{R()}catch(G){qt(m,L,G)}}}c=c.next}while(c!==_)}}catch(G){qt(a,a.return,G)}}function WT(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{GT(a,l)}catch(c){qt(i,i.return,c)}}}function KT(i,a,l){l.props=yu(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(c){qt(i,a,c)}}function Eu(i,a){try{var l=i.ref;if(l!==null){var c=i.stateNode;switch(i.tag){case 26:case 27:case 5:var m=c;break;default:m=c}typeof l=="function"?i.refCleanup=l(m):l.current=m}}catch(_){qt(i,a,_)}}function Vi(i,a){var l=i.ref,c=i.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(m){qt(i,a,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){qt(i,a,m)}else l.current=null}function YT(i){var a=i.type,l=i.memoizedProps,c=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(m){qt(i,i.return,m)}}function QT(i,a,l){try{var c=i.stateNode;HN(c,i.type,l,a),c[nn]=a}catch(m){qt(i,i.return,m)}}function XT(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function Dv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||XT(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function xv(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?l.nodeType===8?l.parentNode.insertBefore(i,a):l.insertBefore(i,a):(l.nodeType===8?(a=l.parentNode,a.insertBefore(i,l)):(a=l,a.appendChild(i)),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Vp));else if(c!==4&&c!==27&&(i=i.child,i!==null))for(xv(i,a,l),i=i.sibling;i!==null;)xv(i,a,l),i=i.sibling}function Ep(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(c!==4&&c!==27&&(i=i.child,i!==null))for(Ep(i,a,l),i=i.sibling;i!==null;)Ep(i,a,l),i=i.sibling}var Za=!1,Tn=!1,Ov=!1,ZT=typeof WeakSet=="function"?WeakSet:Set,ur=null,JT=!1;function bN(i,a){if(i=i.containerInfo,sy=zp,i=Jm(i),_d(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var m=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var T=0,R=-1,L=-1,G=0,oe=0,pe=i,ee=null;t:for(;;){for(var ae;pe!==l||m!==0&&pe.nodeType!==3||(R=T+m),pe!==_||c!==0&&pe.nodeType!==3||(L=T+c),pe.nodeType===3&&(T+=pe.nodeValue.length),(ae=pe.firstChild)!==null;)ee=pe,pe=ae;for(;;){if(pe===i)break t;if(ee===l&&++G===m&&(R=T),ee===_&&++oe===c&&(L=T),(ae=pe.nextSibling)!==null)break;pe=ee,ee=pe.parentNode}pe=ae}l=R===-1||L===-1?null:{start:R,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(ay={focusedElem:i,selectionRange:l},zp=!1,ur=a;ur!==null;)if(a=ur,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,ur=i;else for(;ur!==null;){switch(a=ur,_=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,l=a,m=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var Le=yu(l.type,m,l.elementType===l.type);i=c.getSnapshotBeforeUpdate(Le,_),c.__reactInternalSnapshotBeforeUpdate=i}catch(Je){qt(l,l.return,Je)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)cy(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":cy(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,ur=i;break}ur=a.return}return Le=JT,JT=!1,Le}function e0(i,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:eo(i,l),c&4&&zd(5,l);break;case 1:if(eo(i,l),c&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(R){qt(l,l.return,R)}else{var m=yu(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(m,a,i.__reactInternalSnapshotBeforeUpdate)}catch(R){qt(l,l.return,R)}}c&64&&WT(l),c&512&&Eu(l,l.return);break;case 3:if(eo(i,l),c&64&&(c=l.updateQueue,c!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{GT(c,i)}catch(R){qt(l,l.return,R)}}break;case 26:eo(i,l),c&512&&Eu(l,l.return);break;case 27:case 5:eo(i,l),a===null&&c&4&&YT(l),c&512&&Eu(l,l.return);break;case 12:eo(i,l);break;case 13:eo(i,l),c&4&&r0(i,l);break;case 22:if(m=l.memoizedState!==null||Za,!m){a=a!==null&&a.memoizedState!==null||Tn;var _=Za,T=Tn;Za=m,(Tn=a)&&!T?rl(i,l,(l.subtreeFlags&8772)!==0):eo(i,l),Za=_,Tn=T}c&512&&(l.memoizedProps.mode==="manual"?Eu(l,l.return):Vi(l,l.return));break;default:eo(i,l)}}function t0(i){var a=i.alternate;a!==null&&(i.alternate=null,t0(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&rn(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var qn=null,Mi=!1;function Ja(i,a,l){for(l=l.child;l!==null;)n0(i,a,l),l=l.sibling}function n0(i,a,l){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(qr,l)}catch{}switch(l.tag){case 26:Tn||Vi(l,a),Ja(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Tn||Vi(l,a);var c=qn,m=Mi;for(qn=l.stateNode,Ja(i,a,l),l=l.stateNode,a=l.attributes;a.length;)l.removeAttributeNode(a[0]);rn(l),qn=c,Mi=m;break;case 5:Tn||Vi(l,a);case 6:m=qn;var _=Mi;if(qn=null,Ja(i,a,l),qn=m,Mi=_,qn!==null)if(Mi)try{i=qn,c=l.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)}catch(T){qt(l,a,T)}else try{qn.removeChild(l.stateNode)}catch(T){qt(l,a,T)}break;case 18:qn!==null&&(Mi?(a=qn,l=l.stateNode,a.nodeType===8?uy(a.parentNode,l):a.nodeType===1&&uy(a,l),of(a)):uy(qn,l.stateNode));break;case 4:c=qn,m=Mi,qn=l.stateNode.containerInfo,Mi=!0,Ja(i,a,l),qn=c,Mi=m;break;case 0:case 11:case 14:case 15:Tn||nl(2,l,a),Tn||nl(4,l,a),Ja(i,a,l);break;case 1:Tn||(Vi(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&KT(l,a,c)),Ja(i,a,l);break;case 21:Ja(i,a,l);break;case 22:Tn||Vi(l,a),Tn=(c=Tn)||l.memoizedState!==null,Ja(i,a,l),Tn=c;break;default:Ja(i,a,l)}}function r0(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{of(i)}catch(l){qt(a,a.return,l)}}function wN(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new ZT),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new ZT),a;default:throw Error(r(435,i.tag))}}function Nv(i,a){var l=wN(i);a.forEach(function(c){var m=kN.bind(null,i,c);l.has(c)||(l.add(c),c.then(m,m))})}function us(i,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var m=l[c],_=i,T=a,R=T;e:for(;R!==null;){switch(R.tag){case 27:case 5:qn=R.stateNode,Mi=!1;break e;case 3:qn=R.stateNode.containerInfo,Mi=!0;break e;case 4:qn=R.stateNode.containerInfo,Mi=!0;break e}R=R.return}if(qn===null)throw Error(r(160));n0(_,T,m),qn=null,Mi=!1,_=m.alternate,_!==null&&(_.return=null),m.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)i0(a,i),a=a.sibling}var Us=null;function i0(i,a){var l=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:us(a,i),cs(i),c&4&&(nl(3,i,i.return),zd(3,i),nl(5,i,i.return));break;case 1:us(a,i),cs(i),c&512&&(Tn||l===null||Vi(l,l.return)),c&64&&Za&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var m=Us;if(us(a,i),cs(i),c&512&&(Tn||l===null||Vi(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=i.memoizedState,l===null)if(c===null)if(i.stateNode===null){e:{c=i.type,l=i.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":_=m.getElementsByTagName("title")[0],(!_||_[ht]||_[Gt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=m.createElement(c),m.head.insertBefore(_,m.querySelector("head > title"))),Tr(_,c,l),_[Gt]=i,Bt(_),c=_;break e;case"link":var T=Y0("link","href",m).get(c+(l.href||""));if(T){for(var R=0;R<T.length;R++)if(_=T[R],_.getAttribute("href")===(l.href==null?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(R,1);break t}}_=m.createElement(c),Tr(_,c,l),m.head.appendChild(_);break;case"meta":if(T=Y0("meta","content",m).get(c+(l.content||""))){for(R=0;R<T.length;R++)if(_=T[R],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(R,1);break t}}_=m.createElement(c),Tr(_,c,l),m.head.appendChild(_);break;default:throw Error(r(468,c))}_[Gt]=i,Bt(_),c=_}i.stateNode=c}else Q0(m,i.type,i.stateNode);else i.stateNode=K0(m,c,i.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?Q0(m,i.type,i.stateNode):K0(m,c,i.memoizedProps)):c===null&&i.stateNode!==null&&QT(i,i.memoizedProps,l.memoizedProps)}break;case 27:if(c&4&&i.alternate===null){m=i.stateNode,_=i.memoizedProps;try{for(var L=m.firstChild;L;){var G=L.nextSibling,oe=L.nodeName;L[ht]||oe==="HEAD"||oe==="BODY"||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&L.rel.toLowerCase()==="stylesheet"||m.removeChild(L),L=G}for(var pe=i.type,ee=m.attributes;ee.length;)m.removeAttributeNode(ee[0]);Tr(m,pe,_),m[Gt]=i,m[nn]=_}catch(Le){qt(i,i.return,Le)}}case 5:if(us(a,i),cs(i),c&512&&(Tn||l===null||Vi(l,l.return)),i.flags&32){m=i.stateNode;try{Yn(m,"")}catch(Le){qt(i,i.return,Le)}}c&4&&i.stateNode!=null&&(m=i.memoizedProps,QT(i,m,l!==null?l.memoizedProps:m)),c&1024&&(Ov=!0);break;case 6:if(us(a,i),cs(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,l=i.stateNode;try{l.nodeValue=c}catch(Le){qt(i,i.return,Le)}}break;case 3:if(Up=null,m=Us,Us=Lp(a.containerInfo),us(a,i),Us=m,cs(i),c&4&&l!==null&&l.memoizedState.isDehydrated)try{of(a.containerInfo)}catch(Le){qt(i,i.return,Le)}Ov&&(Ov=!1,s0(i));break;case 4:c=Us,Us=Lp(i.stateNode.containerInfo),us(a,i),cs(i),Us=c;break;case 12:us(a,i),cs(i);break;case 13:us(a,i),cs(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Bv=xn()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Nv(i,c)));break;case 22:if(c&512&&(Tn||l===null||Vi(l,l.return)),L=i.memoizedState!==null,G=l!==null&&l.memoizedState!==null,oe=Za,pe=Tn,Za=oe||L,Tn=pe||G,us(a,i),Tn=pe,Za=oe,cs(i),a=i.stateNode,a._current=i,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,c&8192&&(a._visibility=L?a._visibility&-2:a._visibility|1,L&&(a=Za||Tn,l===null||G||a||Hc(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))e:for(l=null,a=i;;){if(a.tag===5||a.tag===26||a.tag===27){if(l===null){G=l=a;try{if(m=G.stateNode,L)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=G.stateNode,R=G.memoizedProps.style;var ae=R!=null&&R.hasOwnProperty("display")?R.display:null;T.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Le){qt(G,G.return,Le)}}}else if(a.tag===6){if(l===null){G=a;try{G.stateNode.nodeValue=L?"":G.memoizedProps}catch(Le){qt(G,G.return,Le)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=i.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Nv(i,l))));break;case 19:us(a,i),cs(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Nv(i,c)));break;case 21:break;default:us(a,i),cs(i)}}function cs(i){var a=i.flags;if(a&2){try{if(i.tag!==27){e:{for(var l=i.return;l!==null;){if(XT(l)){var c=l;break e}l=l.return}throw Error(r(160))}switch(c.tag){case 27:var m=c.stateNode,_=Dv(i);Ep(i,_,m);break;case 5:var T=c.stateNode;c.flags&32&&(Yn(T,""),c.flags&=-33);var R=Dv(i);Ep(i,R,T);break;case 3:case 4:var L=c.stateNode.containerInfo,G=Dv(i);xv(i,G,L);break;default:throw Error(r(161))}}}catch(oe){qt(i,i.return,oe)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function s0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;s0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function eo(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)e0(i,a.alternate,a),a=a.sibling}function Hc(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:nl(4,a,a.return),Hc(a);break;case 1:Vi(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&KT(a,a.return,l),Hc(a);break;case 26:case 27:case 5:Vi(a,a.return),Hc(a);break;case 22:Vi(a,a.return),a.memoizedState===null&&Hc(a);break;default:Hc(a)}i=i.sibling}}function rl(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,m=i,_=a,T=_.flags;switch(_.tag){case 0:case 11:case 15:rl(m,_,l),zd(4,_);break;case 1:if(rl(m,_,l),c=_,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(G){qt(c,c.return,G)}if(c=_,m=c.updateQueue,m!==null){var R=c.stateNode;try{var L=m.shared.hiddenCallbacks;if(L!==null)for(m.shared.hiddenCallbacks=null,m=0;m<L.length;m++)$T(L[m],R)}catch(G){qt(c,c.return,G)}}l&&T&64&&WT(_),Eu(_,_.return);break;case 26:case 27:case 5:rl(m,_,l),l&&c===null&&T&4&&YT(_),Eu(_,_.return);break;case 12:rl(m,_,l);break;case 13:rl(m,_,l),l&&T&4&&r0(m,_);break;case 22:_.memoizedState===null&&rl(m,_,l),Eu(_,_.return);break;default:rl(m,_,l)}a=a.sibling}}function Pv(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&na(l))}function kv(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&na(i))}function il(i,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)a0(i,a,l,c),a=a.sibling}function a0(i,a,l,c){var m=a.flags;switch(a.tag){case 0:case 11:case 15:il(i,a,l,c),m&2048&&zd(9,a);break;case 3:il(i,a,l,c),m&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&na(i)));break;case 12:if(m&2048){il(i,a,l,c),i=a.stateNode;try{var _=a.memoizedProps,T=_.id,R=_.onPostCommit;typeof R=="function"&&R(T,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(L){qt(a,a.return,L)}}else il(i,a,l,c);break;case 23:break;case 22:_=a.stateNode,a.memoizedState!==null?_._visibility&4?il(i,a,l,c):qd(i,a):_._visibility&4?il(i,a,l,c):(_._visibility|=4,$c(i,a,l,c,(a.subtreeFlags&10256)!==0)),m&2048&&Pv(a.alternate,a);break;case 24:il(i,a,l,c),m&2048&&kv(a.alternate,a);break;default:il(i,a,l,c)}}function $c(i,a,l,c,m){for(m=m&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var _=i,T=a,R=l,L=c,G=T.flags;switch(T.tag){case 0:case 11:case 15:$c(_,T,R,L,m),zd(8,T);break;case 23:break;case 22:var oe=T.stateNode;T.memoizedState!==null?oe._visibility&4?$c(_,T,R,L,m):qd(_,T):(oe._visibility|=4,$c(_,T,R,L,m)),m&&G&2048&&Pv(T.alternate,T);break;case 24:$c(_,T,R,L,m),m&&G&2048&&kv(T.alternate,T);break;default:$c(_,T,R,L,m)}a=a.sibling}}function qd(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,c=a,m=c.flags;switch(c.tag){case 22:qd(l,c),m&2048&&Pv(c.alternate,c);break;case 24:qd(l,c),m&2048&&kv(c.alternate,c);break;default:qd(l,c)}a=a.sibling}}var Hd=8192;function Gc(i){if(i.subtreeFlags&Hd)for(i=i.child;i!==null;)o0(i),i=i.sibling}function o0(i){switch(i.tag){case 26:Gc(i),i.flags&Hd&&i.memoizedState!==null&&uP(Us,i.memoizedState,i.memoizedProps);break;case 5:Gc(i);break;case 3:case 4:var a=Us;Us=Lp(i.stateNode.containerInfo),Gc(i),Us=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=Hd,Hd=16777216,Gc(i),Hd=a):Gc(i));break;default:Gc(i)}}function l0(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function $d(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];ur=c,c0(c,i)}l0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)u0(i),i=i.sibling}function u0(i){switch(i.tag){case 0:case 11:case 15:$d(i),i.flags&2048&&nl(9,i,i.return);break;case 3:$d(i);break;case 12:$d(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&4&&(i.return===null||i.return.tag!==13)?(a._visibility&=-5,Tp(i)):$d(i);break;default:$d(i)}}function Tp(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];ur=c,c0(c,i)}l0(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:nl(8,a,a.return),Tp(a);break;case 22:l=a.stateNode,l._visibility&4&&(l._visibility&=-5,Tp(a));break;default:Tp(a)}i=i.sibling}}function c0(i,a){for(;ur!==null;){var l=ur;switch(l.tag){case 0:case 11:case 15:nl(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:na(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,ur=c;else e:for(l=i;ur!==null;){c=ur;var m=c.sibling,_=c.return;if(t0(c),c===l){ur=null;break e}if(m!==null){m.return=_,ur=m;break e}ur=_}}}function EN(i,a,l,c){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(i,a,l,c){return new EN(i,a,l,c)}function Vv(i){return i=i.prototype,!(!i||!i.isReactComponent)}function sl(i,a){var l=i.alternate;return l===null?(l=hs(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&31457280,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function h0(i,a){i.flags&=31457282;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Ap(i,a,l,c,m,_){var T=0;if(c=i,typeof i=="function")Vv(i)&&(T=1);else if(typeof i=="string")T=oP(i,l,Dn.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case f:return Tu(l.children,m,_,a);case p:T=8,m|=24;break;case v:return i=hs(12,l,a,m|2),i.elementType=v,i.lanes=_,i;case F:return i=hs(13,l,a,m),i.elementType=F,i.lanes=_,i;case V:return i=hs(19,l,a,m),i.elementType=V,i.lanes=_,i;case se:return d0(l,m,_,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case b:case D:T=10;break e;case A:T=9;break e;case M:T=11;break e;case H:T=14;break e;case J:T=16,c=null;break e}T=29,l=Error(r(130,i===null?"null":typeof i,"")),c=null}return a=hs(T,l,a,m),a.elementType=i,a.type=c,a.lanes=_,a}function Tu(i,a,l,c){return i=hs(7,i,c,a),i.lanes=l,i}function d0(i,a,l,c){i=hs(22,i,c,a),i.elementType=se,i.lanes=l;var m={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var _=m._current;if(_===null)throw Error(r(456));if((m._pendingVisibility&2)===0){var T=Ns(_,2);T!==null&&(m._pendingVisibility|=2,si(T,_,2))}},attach:function(){var _=m._current;if(_===null)throw Error(r(456));if((m._pendingVisibility&2)!==0){var T=Ns(_,2);T!==null&&(m._pendingVisibility&=-3,si(T,_,2))}}};return i.stateNode=m,i}function Mv(i,a,l){return i=hs(6,i,null,a),i.lanes=l,i}function Lv(i,a,l){return a=hs(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function to(i){i.flags|=4}function f0(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!X0(a)){if(a=Pr.current,a!==null&&((Et&4194176)===Et?os!==null:(Et&62914560)!==Et&&(Et&536870912)===0||a!==os))throw hu=ks,$o;i.flags|=8192}}function Sp(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?xr():536870912,i.lanes|=a,Kc|=a)}function Gd(i,a){if(!at)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function dn(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,c=0;if(a)for(var m=i.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags&31457280,c|=m.flags&31457280,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=c,i.childLanes=l,a}function TN(i,a,l){var c=a.pendingProps;switch(Ps(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(a),null;case 1:return dn(a),null;case 3:return l=a.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Xa(Vn),kt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Ho(a)?to(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ri!==null&&($v(ri),ri=null))),dn(a),null;case 26:return l=a.memoizedState,i===null?(to(a),l!==null?(dn(a),f0(a,l)):(dn(a),a.flags&=-16777217)):l?l!==i.memoizedState?(to(a),dn(a),f0(a,l)):(dn(a),a.flags&=-16777217):(i.memoizedProps!==c&&to(a),dn(a),a.flags&=-16777217),null;case 27:_s(a),l=vn.current;var m=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==c&&to(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return dn(a),null}i=Dn.current,Ho(a)?Ga(a):(i=q0(m,c,l),a.stateNode=i,to(a))}return dn(a),null;case 5:if(_s(a),l=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==c&&to(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return dn(a),null}if(i=Dn.current,Ho(a))Ga(a);else{switch(m=Mp(vn.current),i){case 1:i=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=m.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?m.createElement("select",{is:c.is}):m.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?m.createElement(l,{is:c.is}):m.createElement(l)}}i[Gt]=a,i[nn]=c;e:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break e;for(;m.sibling===null;){if(m.return===null||m.return===a)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=i;e:switch(Tr(i,l,c),l){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&to(a)}}return dn(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==c&&to(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(r(166));if(i=vn.current,Ho(a)){if(i=a.stateNode,l=a.memoizedProps,c=null,m=yr,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}i[Gt]=a,i=!!(i.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||L0(i.nodeValue,l)),i||$a(a)}else i=Mp(i).createTextNode(c),i[Gt]=a,a.stateNode=i}return dn(a),null;case 13:if(c=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Ho(a),c!==null&&c.dehydrated!==null){if(i===null){if(!m)throw Error(r(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[Gt]=a}else lu(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;dn(a),m=!1}else ri!==null&&($v(ri),ri=null),m=!0;if(!m)return a.flags&256?(Ms(a),a):(Ms(a),null)}if(Ms(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=c!==null,i=i!==null&&i.memoizedState!==null,l){c=a.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool);var _=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==m&&(c.flags|=2048)}return l!==i&&l&&(a.child.flags|=8192),Sp(a,a.updateQueue),dn(a),null;case 4:return kt(),i===null&&ny(a.stateNode.containerInfo),dn(a),null;case 10:return Xa(a.type),dn(a),null;case 19:if(ut(kn),m=a.memoizedState,m===null)return dn(a),null;if(c=(a.flags&128)!==0,_=m.rendering,_===null)if(c)Gd(m,!1);else{if(An!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(_=Lc(i),_!==null){for(a.flags|=128,Gd(m,!1),i=_.updateQueue,a.updateQueue=i,Sp(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)h0(l,i),l=l.sibling;return ct(kn,kn.current&1|2),a.child}i=i.sibling}m.tail!==null&&xn()>Ip&&(a.flags|=128,c=!0,Gd(m,!1),a.lanes=4194304)}else{if(!c)if(i=Lc(_),i!==null){if(a.flags|=128,c=!0,i=i.updateQueue,a.updateQueue=i,Sp(a,i),Gd(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!at)return dn(a),null}else 2*xn()-m.renderingStartTime>Ip&&l!==536870912&&(a.flags|=128,c=!0,Gd(m,!1),a.lanes=4194304);m.isBackwards?(_.sibling=a.child,a.child=_):(i=m.last,i!==null?i.sibling=_:a.child=_,m.last=_)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=xn(),a.sibling=null,i=kn.current,ct(kn,c?i&1|2:i&1),a):(dn(a),null);case 22:case 23:return Ms(a),Mc(),c=a.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(dn(a),a.subtreeFlags&6&&(a.flags|=8192)):dn(a),l=a.updateQueue,l!==null&&Sp(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),i!==null&&ut(q),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Xa(Vn),dn(a),null;case 25:return null}throw Error(r(156,a.tag))}function AN(i,a){switch(Ps(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Xa(Vn),kt(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return _s(a),null;case 13:if(Ms(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));lu()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ut(kn),null;case 4:return kt(),null;case 10:return Xa(a.type),null;case 22:case 23:return Ms(a),Mc(),i!==null&&ut(q),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Xa(Vn),null;case 25:return null;default:return null}}function m0(i,a){switch(Ps(a),a.tag){case 3:Xa(Vn),kt();break;case 26:case 27:case 5:_s(a);break;case 4:kt();break;case 13:Ms(a);break;case 19:ut(kn);break;case 10:Xa(a.type);break;case 22:case 23:Ms(a),Mc(),i!==null&&ut(q);break;case 24:Xa(Vn)}}var SN={getCacheForType:function(i){var a=Vr(Vn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l}},IN=typeof WeakMap=="function"?WeakMap:Map,fn=0,Qt=null,ot=null,Et=0,Xt=0,Li=null,no=!1,Wc=!1,jv=!1,ro=0,An=0,al=0,Au=0,Uv=0,ds=0,Kc=0,Wd=null,aa=null,Fv=!1,Bv=0,Ip=1/0,Rp=null,ol=null,Cp=!1,Su=null,Kd=0,zv=0,qv=null,Yd=0,Hv=null;function ji(){if((fn&2)!==0&&Et!==0)return Et&-Et;if(N.T!==null){var i=Yo;return i!==0?i:Zv()}return Kr()}function p0(){ds===0&&(ds=(Et&536870912)===0||at?hn():536870912);var i=Pr.current;return i!==null&&(i.flags|=32),ds}function si(i,a,l){(i===Qt&&Xt===2||i.cancelPendingCommit!==null)&&(Yc(i,0),io(i,Et,ds,!1)),$t(i,l),((fn&2)===0||i!==Qt)&&(i===Qt&&((fn&2)===0&&(Au|=l),An===4&&io(i,Et,ds,!1)),oa(i))}function g0(i,a,l){if((fn&6)!==0)throw Error(r(327));var c=!l&&(a&60)===0&&(a&i.expiredLanes)===0||Gr(i,a),m=c?DN(i,a):Kv(i,a,!0),_=c;do{if(m===0){Wc&&!c&&io(i,a,0,!1);break}else if(m===6)io(i,a,0,!no);else{if(l=i.current.alternate,_&&!RN(l)){m=Kv(i,a,!1),_=!1;continue}if(m===2){if(_=a,i.errorRecoveryDisabledLanes&_)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var R=i;m=Wd;var L=R.current.memoizedState.isDehydrated;if(L&&(Yc(R,T).flags|=256),T=Kv(R,T,!1),T!==2){if(jv&&!L){R.errorRecoveryDisabledLanes|=_,Au|=_,m=4;break e}_=aa,aa=m,_!==null&&$v(_)}m=T}if(_=!1,m!==2)continue}}if(m===1){Yc(i,0),io(i,a,0,!0);break}e:{switch(c=i,m){case 0:case 1:throw Error(r(345));case 4:if((a&4194176)===a){io(c,a,ds,!no);break e}break;case 2:aa=null;break;case 3:case 5:break;default:throw Error(r(329))}if(c.finishedWork=l,c.finishedLanes=a,(a&62914560)===a&&(_=Bv+300-xn(),10<_)){if(io(c,a,ds,!no),Vt(c,0)!==0)break e;c.timeoutHandle=F0(_0.bind(null,c,l,aa,Rp,Fv,a,ds,Au,Kc,no,2,-0,0),_);break e}_0(c,l,aa,Rp,Fv,a,ds,Au,Kc,no,0,-0,0)}}break}while(!0);oa(i)}function $v(i){aa===null?aa=i:aa.push.apply(aa,i)}function _0(i,a,l,c,m,_,T,R,L,G,oe,pe,ee){var ae=a.subtreeFlags;if((ae&8192||(ae&16785408)===16785408)&&(tf={stylesheets:null,count:0,unsuspend:lP},o0(a),a=cP(),a!==null)){i.cancelPendingCommit=a(A0.bind(null,i,l,c,m,T,R,L,1,pe,ee)),io(i,_,T,!G);return}A0(i,l,c,m,T,R,L,oe,pe,ee)}function RN(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var m=l[c],_=m.getSnapshot;m=m.value;try{if(!Kt(_(),m))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function io(i,a,l,c){a&=~Uv,a&=~Au,i.suspendedLanes|=a,i.pingedLanes&=~a,c&&(i.warmLanes|=a),c=i.expirationTimes;for(var m=a;0<m;){var _=31-Fn(m),T=1<<_;c[_]=-1,m&=~T}l!==0&&di(i,l,a)}function Dp(){return(fn&6)===0?(Qd(0),!1):!0}function Gv(){if(ot!==null){if(Xt===0)var i=ot.return;else i=ot,Qa=bu=null,br(i),Go=null,du=0,i=ot;for(;i!==null;)m0(i.alternate,i),i=i.return;ot=null}}function Yc(i,a){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,GN(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Gv(),Qt=i,ot=l=sl(i.current,null),Et=a,Xt=0,Li=null,no=!1,Wc=Gr(i,a),jv=!1,Kc=ds=Uv=Au=al=An=0,aa=Wd=null,Fv=!1,(a&8)!==0&&(a|=a&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=a;0<c;){var m=31-Fn(c),_=1<<m;a|=i[m],c&=~_}return ro=a,Ic(),l}function v0(i,a){fe=null,N.H=sa,a===cu?(a=cp(),Xt=3):a===$o?(a=cp(),Xt=4):Xt=a===OT?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Li=a,ot===null&&(An=1,yp(i,yi(a,i.current)))}function y0(){var i=N.H;return N.H=sa,i===null?sa:i}function b0(){var i=N.A;return N.A=SN,i}function Wv(){An=4,no||(Et&4194176)!==Et&&Pr.current!==null||(Wc=!0),(al&134217727)===0&&(Au&134217727)===0||Qt===null||io(Qt,Et,ds,!1)}function Kv(i,a,l){var c=fn;fn|=2;var m=y0(),_=b0();(Qt!==i||Et!==a)&&(Rp=null,Yc(i,a)),a=!1;var T=An;e:do try{if(Xt!==0&&ot!==null){var R=ot,L=Li;switch(Xt){case 8:Gv(),T=6;break e;case 3:case 2:case 6:Pr.current===null&&(a=!0);var G=Xt;if(Xt=0,Li=null,Qc(i,R,L,G),l&&Wc){T=0;break e}break;default:G=Xt,Xt=0,Li=null,Qc(i,R,L,G)}}CN(),T=An;break}catch(oe){v0(i,oe)}while(!0);return a&&i.shellSuspendCounter++,Qa=bu=null,fn=c,N.H=m,N.A=_,ot===null&&(Qt=null,Et=0,Ic()),T}function CN(){for(;ot!==null;)w0(ot)}function DN(i,a){var l=fn;fn|=2;var c=y0(),m=b0();Qt!==i||Et!==a?(Rp=null,Ip=xn()+500,Yc(i,a)):Wc=Gr(i,a);e:do try{if(Xt!==0&&ot!==null){a=ot;var _=Li;t:switch(Xt){case 1:Xt=0,Li=null,Qc(i,a,_,1);break;case 2:if(lp(_)){Xt=0,Li=null,E0(a);break}a=function(){Xt===2&&Qt===i&&(Xt=7),oa(i)},_.then(a,a);break e;case 3:Xt=7;break e;case 4:Xt=5;break e;case 7:lp(_)?(Xt=0,Li=null,E0(a)):(Xt=0,Li=null,Qc(i,a,_,7));break;case 5:var T=null;switch(ot.tag){case 26:T=ot.memoizedState;case 5:case 27:var R=ot;if(!T||X0(T)){Xt=0,Li=null;var L=R.sibling;if(L!==null)ot=L;else{var G=R.return;G!==null?(ot=G,xp(G)):ot=null}break t}}Xt=0,Li=null,Qc(i,a,_,5);break;case 6:Xt=0,Li=null,Qc(i,a,_,6);break;case 8:Gv(),An=6;break e;default:throw Error(r(462))}}xN();break}catch(oe){v0(i,oe)}while(!0);return Qa=bu=null,N.H=c,N.A=m,fn=l,ot!==null?0:(Qt=null,Et=0,Ic(),An)}function xN(){for(;ot!==null&&!Ql();)w0(ot)}function w0(i){var a=qT(i.alternate,i,ro);i.memoizedProps=i.pendingProps,a===null?xp(i):ot=a}function E0(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=LT(l,a,a.pendingProps,a.type,void 0,Et);break;case 11:a=LT(l,a,a.pendingProps,a.type.render,a.ref,Et);break;case 5:br(a);default:m0(l,a),a=ot=h0(a,ro),a=qT(l,a,ro)}i.memoizedProps=i.pendingProps,a===null?xp(i):ot=a}function Qc(i,a,l,c){Qa=bu=null,br(a),Go=null,du=0;var m=a.return;try{if(vN(i,m,a,l,Et)){An=1,yp(i,yi(l,i.current)),ot=null;return}}catch(_){if(m!==null)throw ot=m,_;An=1,yp(i,yi(l,i.current)),ot=null;return}a.flags&32768?(at||c===1?i=!0:Wc||(Et&536870912)!==0?i=!1:(no=i=!0,(c===2||c===3||c===6)&&(c=Pr.current,c!==null&&c.tag===13&&(c.flags|=16384))),T0(a,i)):xp(a)}function xp(i){var a=i;do{if((a.flags&32768)!==0){T0(a,no);return}i=a.return;var l=TN(a.alternate,a,ro);if(l!==null){ot=l;return}if(a=a.sibling,a!==null){ot=a;return}ot=a=i}while(a!==null);An===0&&(An=5)}function T0(i,a){do{var l=AN(i.alternate,i);if(l!==null){l.flags&=32767,ot=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){ot=i;return}ot=i=l}while(i!==null);An=6,ot=null}function A0(i,a,l,c,m,_,T,R,L,G){var oe=N.T,pe=Se.p;try{Se.p=2,N.T=null,ON(i,a,l,c,pe,m,_,T,R,L,G)}finally{N.T=oe,Se.p=pe}}function ON(i,a,l,c,m,_,T,R){do Xc();while(Su!==null);if((fn&6)!==0)throw Error(r(327));var L=i.finishedWork;if(c=i.finishedLanes,L===null)return null;if(i.finishedWork=null,i.finishedLanes=0,L===i.current)throw Error(r(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var G=L.lanes|L.childLanes;if(G|=Ed,xa(i,c,G,_,T,R),i===Qt&&(ot=Qt=null,Et=0),(L.subtreeFlags&10256)===0&&(L.flags&10256)===0||Cp||(Cp=!0,zv=G,qv=l,VN(er,function(){return Xc(),null})),l=(L.flags&15990)!==0,(L.subtreeFlags&15990)!==0||l?(l=N.T,N.T=null,_=Se.p,Se.p=2,T=fn,fn|=4,bN(i,L),i0(L,i),Z_(ay,i.containerInfo),zp=!!sy,ay=sy=null,i.current=L,e0(i,L.alternate,L),Gs(),fn=T,Se.p=_,N.T=l):i.current=L,Cp?(Cp=!1,Su=i,Kd=c):S0(i,G),G=i.pendingLanes,G===0&&(ol=null),Ca(L.stateNode),oa(i),a!==null)for(m=i.onRecoverableError,L=0;L<a.length;L++)G=a[L],m(G.value,{componentStack:G.stack});return(Kd&3)!==0&&Xc(),G=i.pendingLanes,(c&4194218)!==0&&(G&42)!==0?i===Hv?Yd++:(Yd=0,Hv=i):Yd=0,Qd(0),null}function S0(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,na(a)))}function Xc(){if(Su!==null){var i=Su,a=zv;zv=0;var l=Ki(Kd),c=N.T,m=Se.p;try{if(Se.p=32>l?32:l,N.T=null,Su===null)var _=!1;else{l=qv,qv=null;var T=Su,R=Kd;if(Su=null,Kd=0,(fn&6)!==0)throw Error(r(331));var L=fn;if(fn|=4,u0(T.current),a0(T,T.current,R,l),fn=L,Qd(0,!1),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(qr,T)}catch{}_=!0}return _}finally{Se.p=m,N.T=c,S0(i,a)}}return!1}function I0(i,a,l){a=yi(l,a),a=dv(i.stateNode,a,2),i=tl(i,a,2),i!==null&&($t(i,2),oa(i))}function qt(i,a,l){if(i.tag===3)I0(i,i,l);else for(;a!==null;){if(a.tag===3){I0(a,i,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ol===null||!ol.has(c))){i=yi(l,i),l=DT(2),c=tl(a,l,2),c!==null&&(xT(l,c,a,i),$t(c,2),oa(c));break}}a=a.return}}function Yv(i,a,l){var c=i.pingCache;if(c===null){c=i.pingCache=new IN;var m=new Set;c.set(a,m)}else m=c.get(a),m===void 0&&(m=new Set,c.set(a,m));m.has(l)||(jv=!0,m.add(l),i=NN.bind(null,i,a,l),a.then(i,i))}function NN(i,a,l){var c=i.pingCache;c!==null&&c.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Qt===i&&(Et&l)===l&&(An===4||An===3&&(Et&62914560)===Et&&300>xn()-Bv?(fn&2)===0&&Yc(i,0):Uv|=l,Kc===Et&&(Kc=0)),oa(i)}function R0(i,a){a===0&&(a=xr()),i=Ns(i,a),i!==null&&($t(i,a),oa(i))}function PN(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),R0(i,l)}function kN(i,a){var l=0;switch(i.tag){case 13:var c=i.stateNode,m=i.memoizedState;m!==null&&(l=m.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(a),R0(i,l)}function VN(i,a){return ys(i,a)}var Op=null,Zc=null,Qv=!1,Np=!1,Xv=!1,Iu=0;function oa(i){i!==Zc&&i.next===null&&(Zc===null?Op=Zc=i:Zc=Zc.next=i),Np=!0,Qv||(Qv=!0,LN(MN))}function Qd(i,a){if(!Xv&&Np){Xv=!0;do for(var l=!1,c=Op;c!==null;){if(i!==0){var m=c.pendingLanes;if(m===0)var _=0;else{var T=c.suspendedLanes,R=c.pingedLanes;_=(1<<31-Fn(42|i)+1)-1,_&=m&~(T&~R),_=_&201326677?_&201326677|1:_?_|2:0}_!==0&&(l=!0,x0(c,_))}else _=Et,_=Vt(c,c===Qt?_:0),(_&3)===0||Gr(c,_)||(l=!0,x0(c,_));c=c.next}while(l);Xv=!1}}function MN(){Np=Qv=!1;var i=0;Iu!==0&&($N()&&(i=Iu),Iu=0);for(var a=xn(),l=null,c=Op;c!==null;){var m=c.next,_=C0(c,a);_===0?(c.next=null,l===null?Op=m:l.next=m,m===null&&(Zc=l)):(l=c,(i!==0||(_&3)!==0)&&(Np=!0)),c=m}Qd(i)}function C0(i,a){for(var l=i.suspendedLanes,c=i.pingedLanes,m=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var T=31-Fn(_),R=1<<T,L=m[T];L===-1?((R&l)===0||(R&c)!==0)&&(m[T]=St(R,a)):L<=a&&(i.expiredLanes|=R),_&=~R}if(a=Qt,l=Et,l=Vt(i,i===a?l:0),c=i.callbackNode,l===0||i===a&&Xt===2||i.cancelPendingCommit!==null)return c!==null&&c!==null&&$s(c),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Gr(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(c!==null&&$s(c),Ki(l)){case 2:case 8:l=Ht;break;case 32:l=er;break;case 268435456:l=Si;break;default:l=er}return c=D0.bind(null,i),l=ys(l,c),i.callbackPriority=a,i.callbackNode=l,a}return c!==null&&c!==null&&$s(c),i.callbackPriority=2,i.callbackNode=null,2}function D0(i,a){var l=i.callbackNode;if(Xc()&&i.callbackNode!==l)return null;var c=Et;return c=Vt(i,i===Qt?c:0),c===0?null:(g0(i,c,a),C0(i,xn()),i.callbackNode!=null&&i.callbackNode===l?D0.bind(null,i):null)}function x0(i,a){if(Xc())return null;g0(i,a,!0)}function LN(i){WN(function(){(fn&6)!==0?ys(tn,i):i()})}function Zv(){return Iu===0&&(Iu=hn()),Iu}function O0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:xi(""+i)}function N0(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function jN(i,a,l,c,m){if(a==="submit"&&l&&l.stateNode===m){var _=O0((m[nn]||null).action),T=c.submitter;T&&(a=(a=T[nn]||null)?O0(a.formAction):T.getAttribute("formAction"),a!==null&&(_=a,T=null));var R=new ka("action","action",null,c,m);i.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Iu!==0){var L=T?N0(m,T):new FormData(m);ov(l,{pending:!0,data:L,method:m.method,action:_},null,L)}}else typeof _=="function"&&(R.preventDefault(),L=T?N0(m,T):new FormData(m),ov(l,{pending:!0,data:L,method:m.method,action:_},_,L))},currentTarget:m}]})}}for(var Jv=0;Jv<wd.length;Jv++){var ey=wd[Jv],UN=ey.toLowerCase(),FN=ey[0].toUpperCase()+ey.slice(1);_i(UN,"on"+FN)}_i(ep,"onAnimationEnd"),_i(yd,"onAnimationIteration"),_i(bd,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(tp,"onTransitionRun"),_i(np,"onTransitionStart"),_i(ev,"onTransitionCancel"),_i(rp,"onTransitionEnd"),tr("onMouseEnter",["mouseout","mouseover"]),tr("onMouseLeave",["mouseout","mouseover"]),tr("onPointerEnter",["pointerout","pointerover"]),tr("onPointerLeave",["pointerout","pointerover"]),gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gr("onBeforeInput",["compositionend","keypress","textInput","paste"]),gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xd));function P0(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var c=i[l],m=c.event;c=c.listeners;e:{var _=void 0;if(a)for(var T=c.length-1;0<=T;T--){var R=c[T],L=R.instance,G=R.currentTarget;if(R=R.listener,L!==_&&m.isPropagationStopped())break e;_=R,m.currentTarget=G;try{_(m)}catch(oe){vp(oe)}m.currentTarget=null,_=L}else for(T=0;T<c.length;T++){if(R=c[T],L=R.instance,G=R.currentTarget,R=R.listener,L!==_&&m.isPropagationStopped())break e;_=R,m.currentTarget=G;try{_(m)}catch(oe){vp(oe)}m.currentTarget=null,_=L}}}}function bt(i,a){var l=a[Or];l===void 0&&(l=a[Or]=new Set);var c=i+"__bubble";l.has(c)||(k0(a,i,2,!1),l.add(c))}function ty(i,a,l){var c=0;a&&(c|=4),k0(l,i,c,a)}var Pp="_reactListening"+Math.random().toString(36).slice(2);function ny(i){if(!i[Pp]){i[Pp]=!0,Yi.forEach(function(l){l!=="selectionchange"&&(BN.has(l)||ty(l,!1,i),ty(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Pp]||(a[Pp]=!0,ty("selectionchange",!1,a))}}function k0(i,a,l,c){switch(rA(a)){case 2:var m=fP;break;case 8:m=mP;break;default:m=py}l=m.bind(null,a,l,i),m=void 0,!Zr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),c?m!==void 0?i.addEventListener(a,l,{capture:!0,passive:m}):i.addEventListener(a,l,!0):m!==void 0?i.addEventListener(a,l,{passive:m}):i.addEventListener(a,l,!1)}function ry(i,a,l,c,m){var _=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var R=c.stateNode.containerInfo;if(R===m||R.nodeType===8&&R.parentNode===m)break;if(T===4)for(T=c.return;T!==null;){var L=T.tag;if((L===3||L===4)&&(L=T.stateNode.containerInfo,L===m||L.nodeType===8&&L.parentNode===m))return;T=T.return}for(;R!==null;){if(T=yn(R),T===null)return;if(L=T.tag,L===5||L===6||L===26||L===27){c=_=T;continue e}R=R.parentNode}}c=c.return}Rs(function(){var G=_,oe=Ws(l),pe=[];e:{var ee=ip.get(i);if(ee!==void 0){var ae=ka,Le=i;switch(i){case"keypress":if(es(l)===0)break e;case"keydown":case"keyup":ae=gi;break;case"focusin":Le="focus",ae=ja;break;case"focusout":Le="blur",ae=ja;break;case"beforeblur":case"afterblur":ae=ja;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=ei;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=dc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=_c;break;case ep:case yd:case bd:ae=Fa;break;case rp:ae=yc;break;case"scroll":case"scrollend":ae=No;break;case"wheel":ae=za;break;case"copy":case"cut":case"paste":ae=Po;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=ru;break;case"toggle":case"beforetoggle":ae=wc}var Je=(a&4)!==0,Sn=!Je&&(i==="scroll"||i==="scrollend"),Y=Je?ee!==null?ee+"Capture":null:ee;Je=[];for(var $=G,Z;$!==null;){var ce=$;if(Z=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||Z===null||Y===null||(ce=Na($,Y),ce!=null&&Je.push(Zd($,ce,Z))),Sn)break;$=$.return}0<Je.length&&(ee=new ae(ee,Le,null,l,oe),pe.push({event:ee,listeners:Je}))}}if((a&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",ae=i==="mouseout"||i==="pointerout",ee&&l!==rr&&(Le=l.relatedTarget||l.fromElement)&&(yn(Le)||Le[Ri]))break e;if((ae||ee)&&(ee=oe.window===oe?oe:(ee=oe.ownerDocument)?ee.defaultView||ee.parentWindow:window,ae?(Le=l.relatedTarget||l.toElement,ae=G,Le=Le?yn(Le):null,Le!==null&&(Sn=Oe(Le),Je=Le.tag,Le!==Sn||Je!==5&&Je!==27&&Je!==6)&&(Le=null)):(ae=null,Le=G),ae!==Le)){if(Je=ei,ce="onMouseLeave",Y="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(Je=ru,ce="onPointerLeave",Y="onPointerEnter",$="pointer"),Sn=ae==null?ee:pr(ae),Z=Le==null?ee:pr(Le),ee=new Je(ce,$+"leave",ae,l,oe),ee.target=Sn,ee.relatedTarget=Z,ce=null,yn(oe)===G&&(Je=new Je(Y,$+"enter",Le,l,oe),Je.target=Z,Je.relatedTarget=Sn,ce=Je),Sn=ce,ae&&Le)t:{for(Je=ae,Y=Le,$=0,Z=Je;Z;Z=Jc(Z))$++;for(Z=0,ce=Y;ce;ce=Jc(ce))Z++;for(;0<$-Z;)Je=Jc(Je),$--;for(;0<Z-$;)Y=Jc(Y),Z--;for(;$--;){if(Je===Y||Y!==null&&Je===Y.alternate)break t;Je=Jc(Je),Y=Jc(Y)}Je=null}else Je=null;ae!==null&&V0(pe,ee,ae,Je,!1),Le!==null&&Sn!==null&&V0(pe,Sn,Le,Je,!0)}}e:{if(ee=G?pr(G):window,ae=ee.nodeName&&ee.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ee.type==="file")var Pe=au;else if(wn(ee))if(Gm)Pe=Xm;else{Pe=Qm;var st=Ym}else ae=ee.nodeName,!ae||ae.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?G&&eu(G.elementType)&&(Pe=au):Pe=Tc;if(Pe&&(Pe=Pe(i,G))){rs(pe,Pe,l,oe);break e}st&&st(i,ee,G),i==="focusout"&&G&&ee.type==="number"&&G.memoizedProps.value!=null&&As(ee,"number",ee.value)}switch(st=G?pr(G):window,i){case"focusin":(wn(st)||st.contentEditable==="true")&&(Mo=st,vd=G,Lo=null);break;case"focusout":Lo=vd=Mo=null;break;case"mousedown":Ac=!0;break;case"contextmenu":case"mouseup":case"dragend":Ac=!1,Sc(pe,l,oe);break;case"selectionchange":if(J_)break;case"keydown":case"keyup":Sc(pe,l,oe)}var ze;if(sr)e:{switch(i){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else dt?te(i,l)&&(We="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(We="onCompositionStart");We&&(E&&l.locale!=="ko"&&(dt||We!=="onCompositionStart"?We==="onCompositionEnd"&&dt&&(ze=Ks()):(Jr=oe,Ji="value"in Jr?Jr.value:Jr.textContent,dt=!0)),st=kp(G,We),0<st.length&&(We=new ko(We,i,null,l,oe),pe.push({event:We,listeners:st}),ze?We.data=ze:(ze=Ie(l),ze!==null&&(We.data=ze)))),(ze=y?Pn(i,l):ft(i,l))&&(We=kp(G,"onBeforeInput"),0<We.length&&(st=new ko("onBeforeInput","beforeinput",null,l,oe),pe.push({event:st,listeners:We}),st.data=ze)),jN(pe,i,G,l,oe)}P0(pe,a)})}function Zd(i,a,l){return{instance:i,listener:a,currentTarget:l}}function kp(i,a){for(var l=a+"Capture",c=[];i!==null;){var m=i,_=m.stateNode;m=m.tag,m!==5&&m!==26&&m!==27||_===null||(m=Na(i,l),m!=null&&c.unshift(Zd(i,m,_)),m=Na(i,a),m!=null&&c.push(Zd(i,m,_))),i=i.return}return c}function Jc(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function V0(i,a,l,c,m){for(var _=a._reactName,T=[];l!==null&&l!==c;){var R=l,L=R.alternate,G=R.stateNode;if(R=R.tag,L!==null&&L===c)break;R!==5&&R!==26&&R!==27||G===null||(L=G,m?(G=Na(l,_),G!=null&&T.unshift(Zd(l,G,L))):m||(G=Na(l,_),G!=null&&T.push(Zd(l,G,L)))),l=l.return}T.length!==0&&i.push({event:a,listeners:T})}var zN=/\r\n?/g,qN=/\u0000|\uFFFD/g;function M0(i){return(typeof i=="string"?i:""+i).replace(zN,`
`).replace(qN,"")}function L0(i,a){return a=M0(a),M0(i)===a}function Vp(){}function Ft(i,a,l,c,m,_){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Yn(i,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Yn(i,""+c);break;case"className":Ts(i,"class",c);break;case"tabIndex":Ts(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ts(i,l,c);break;case"style":pi(i,c,_);break;case"data":if(a!=="object"){Ts(i,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=xi(""+c),i.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(a!=="input"&&Ft(i,a,"name",m.name,m,null),Ft(i,a,"formEncType",m.formEncType,m,null),Ft(i,a,"formMethod",m.formMethod,m,null),Ft(i,a,"formTarget",m.formTarget,m,null)):(Ft(i,a,"encType",m.encType,m,null),Ft(i,a,"method",m.method,m,null),Ft(i,a,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=xi(""+c),i.setAttribute(l,c);break;case"onClick":c!=null&&(i.onclick=Vp);break;case"onScroll":c!=null&&bt("scroll",i);break;case"onScrollEnd":c!=null&&bt("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}l=xi(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""+c):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":c===!0?i.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,c):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(l,c):i.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(l):i.setAttribute(l,c);break;case"popover":bt("beforetoggle",i),bt("toggle",i),Es(i,"popover",c);break;case"xlinkActuate":Yr(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Yr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Yr(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Yr(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Yr(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Yr(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Yr(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Yr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Yr(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Es(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Qi.get(l)||l,Es(i,l,c))}}function iy(i,a,l,c,m,_){switch(l){case"style":pi(i,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof c=="string"?Yn(i,c):(typeof c=="number"||typeof c=="bigint")&&Yn(i,""+c);break;case"onScroll":c!=null&&bt("scroll",i);break;case"onScrollEnd":c!=null&&bt("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Vp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oa.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),a=l.slice(2,m?l.length-7:void 0),_=i[nn]||null,_=_!=null?_[l]:null,typeof _=="function"&&i.removeEventListener(a,_,m),typeof c=="function")){typeof _!="function"&&_!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,c,m);break e}l in i?i[l]=c:c===!0?i.setAttribute(l,""):Es(i,l,c)}}}function Tr(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bt("error",i),bt("load",i);var c=!1,m=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var T=l[_];if(T!=null)switch(_){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Ft(i,a,_,T,l,null)}}m&&Ft(i,a,"srcSet",l.srcSet,l,null),c&&Ft(i,a,"src",l.src,l,null);return;case"input":bt("invalid",i);var R=_=T=m=null,L=null,G=null;for(c in l)if(l.hasOwnProperty(c)){var oe=l[c];if(oe!=null)switch(c){case"name":m=oe;break;case"type":T=oe;break;case"checked":L=oe;break;case"defaultChecked":G=oe;break;case"value":_=oe;break;case"defaultValue":R=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,a));break;default:Ft(i,a,c,oe,l,null)}}Qr(i,_,R,L,G,T,m,!1),Nn(i);return;case"select":bt("invalid",i),c=T=_=null;for(m in l)if(l.hasOwnProperty(m)&&(R=l[m],R!=null))switch(m){case"value":_=R;break;case"defaultValue":T=R;break;case"multiple":c=R;default:Ft(i,a,m,R,l,null)}a=_,l=T,i.multiple=!!c,a!=null?rt(i,!!c,a,!1):l!=null&&rt(i,!!c,l,!0);return;case"textarea":bt("invalid",i),_=m=c=null;for(T in l)if(l.hasOwnProperty(T)&&(R=l[T],R!=null))switch(T){case"value":c=R;break;case"defaultValue":m=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:Ft(i,a,T,R,l,null)}Is(i,c,m,_),Nn(i);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(c=l[L],c!=null))switch(L){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ft(i,a,L,c,l,null)}return;case"dialog":bt("cancel",i),bt("close",i);break;case"iframe":case"object":bt("load",i);break;case"video":case"audio":for(c=0;c<Xd.length;c++)bt(Xd[c],i);break;case"image":bt("error",i),bt("load",i);break;case"details":bt("toggle",i);break;case"embed":case"source":case"link":bt("error",i),bt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in l)if(l.hasOwnProperty(G)&&(c=l[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Ft(i,a,G,c,l,null)}return;default:if(eu(a)){for(oe in l)l.hasOwnProperty(oe)&&(c=l[oe],c!==void 0&&iy(i,a,oe,c,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(c=l[R],c!=null&&Ft(i,a,R,c,l,null))}function HN(i,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,_=null,T=null,R=null,L=null,G=null,oe=null;for(ae in l){var pe=l[ae];if(l.hasOwnProperty(ae)&&pe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":L=pe;default:c.hasOwnProperty(ae)||Ft(i,a,ae,null,c,pe)}}for(var ee in c){var ae=c[ee];if(pe=l[ee],c.hasOwnProperty(ee)&&(ae!=null||pe!=null))switch(ee){case"type":_=ae;break;case"name":m=ae;break;case"checked":G=ae;break;case"defaultChecked":oe=ae;break;case"value":T=ae;break;case"defaultValue":R=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,a));break;default:ae!==pe&&Ft(i,a,ee,ae,c,pe)}}Kn(i,T,R,L,G,oe,_,m);return;case"select":ae=T=R=ee=null;for(_ in l)if(L=l[_],l.hasOwnProperty(_)&&L!=null)switch(_){case"value":break;case"multiple":ae=L;default:c.hasOwnProperty(_)||Ft(i,a,_,null,c,L)}for(m in c)if(_=c[m],L=l[m],c.hasOwnProperty(m)&&(_!=null||L!=null))switch(m){case"value":ee=_;break;case"defaultValue":R=_;break;case"multiple":T=_;default:_!==L&&Ft(i,a,m,_,c,L)}a=R,l=T,c=ae,ee!=null?rt(i,!!l,ee,!1):!!c!=!!l&&(a!=null?rt(i,!!l,a,!0):rt(i,!!l,l?[]:"",!1));return;case"textarea":ae=ee=null;for(R in l)if(m=l[R],l.hasOwnProperty(R)&&m!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Ft(i,a,R,null,c,m)}for(T in c)if(m=c[T],_=l[T],c.hasOwnProperty(T)&&(m!=null||_!=null))switch(T){case"value":ee=m;break;case"defaultValue":ae=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==_&&Ft(i,a,T,m,c,_)}Ss(i,ee,ae);return;case"option":for(var Le in l)if(ee=l[Le],l.hasOwnProperty(Le)&&ee!=null&&!c.hasOwnProperty(Le))switch(Le){case"selected":i.selected=!1;break;default:Ft(i,a,Le,null,c,ee)}for(L in c)if(ee=c[L],ae=l[L],c.hasOwnProperty(L)&&ee!==ae&&(ee!=null||ae!=null))switch(L){case"selected":i.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Ft(i,a,L,ee,c,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Je in l)ee=l[Je],l.hasOwnProperty(Je)&&ee!=null&&!c.hasOwnProperty(Je)&&Ft(i,a,Je,null,c,ee);for(G in c)if(ee=c[G],ae=l[G],c.hasOwnProperty(G)&&ee!==ae&&(ee!=null||ae!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,a));break;default:Ft(i,a,G,ee,c,ae)}return;default:if(eu(a)){for(var Sn in l)ee=l[Sn],l.hasOwnProperty(Sn)&&ee!==void 0&&!c.hasOwnProperty(Sn)&&iy(i,a,Sn,void 0,c,ee);for(oe in c)ee=c[oe],ae=l[oe],!c.hasOwnProperty(oe)||ee===ae||ee===void 0&&ae===void 0||iy(i,a,oe,ee,c,ae);return}}for(var Y in l)ee=l[Y],l.hasOwnProperty(Y)&&ee!=null&&!c.hasOwnProperty(Y)&&Ft(i,a,Y,null,c,ee);for(pe in c)ee=c[pe],ae=l[pe],!c.hasOwnProperty(pe)||ee===ae||ee==null&&ae==null||Ft(i,a,pe,ee,c,ae)}var sy=null,ay=null;function Mp(i){return i.nodeType===9?i:i.ownerDocument}function j0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function U0(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function oy(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var ly=null;function $N(){var i=window.event;return i&&i.type==="popstate"?i===ly?!1:(ly=i,!0):(ly=null,!1)}var F0=typeof setTimeout=="function"?setTimeout:void 0,GN=typeof clearTimeout=="function"?clearTimeout:void 0,B0=typeof Promise=="function"?Promise:void 0,WN=typeof queueMicrotask=="function"?queueMicrotask:typeof B0<"u"?function(i){return B0.resolve(null).then(i).catch(KN)}:F0;function KN(i){setTimeout(function(){throw i})}function uy(i,a){var l=a,c=0;do{var m=l.nextSibling;if(i.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(c===0){i.removeChild(m),of(a);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=m}while(l);of(a)}function cy(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":cy(l),rn(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function YN(i,a,l,c){for(;i.nodeType===1;){var m=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[ht])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==m.rel||i.getAttribute("href")!==(m.href==null?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var _=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Fs(i.nextSibling),i===null)break}return null}function QN(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Fs(i.nextSibling),i===null))return null;return i}function Fs(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}function z0(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return i;a--}else l==="/$"&&a++}i=i.previousSibling}return null}function q0(i,a,l){switch(a=Mp(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}var fs=new Map,H0=new Set;function Lp(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var so=Se.d;Se.d={f:XN,r:ZN,D:JN,C:eP,L:tP,m:nP,X:iP,S:rP,M:sP};function XN(){var i=so.f(),a=Dp();return i||a}function ZN(i){var a=Gn(i);a!==null&&a.tag===5&&a.type==="form"?_T(a):so.r(i)}var eh=typeof document>"u"?null:document;function $0(i,a,l){var c=eh;if(c&&typeof a=="string"&&a){var m=Wt(a);m='link[rel="'+i+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),H0.has(m)||(H0.add(m),i={rel:i,crossOrigin:l,href:a},c.querySelector(m)===null&&(a=c.createElement("link"),Tr(a,"link",i),Bt(a),c.head.appendChild(a)))}}function JN(i){so.D(i),$0("dns-prefetch",i,null)}function eP(i,a){so.C(i,a),$0("preconnect",i,a)}function tP(i,a,l){so.L(i,a,l);var c=eh;if(c&&i&&a){var m='link[rel="preload"][as="'+Wt(a)+'"]';a==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Wt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Wt(l.imageSizes)+'"]')):m+='[href="'+Wt(i)+'"]';var _=m;switch(a){case"style":_=th(i);break;case"script":_=nh(i)}fs.has(_)||(i=k({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),fs.set(_,i),c.querySelector(m)!==null||a==="style"&&c.querySelector(Jd(_))||a==="script"&&c.querySelector(ef(_))||(a=c.createElement("link"),Tr(a,"link",i),Bt(a),c.head.appendChild(a)))}}function nP(i,a){so.m(i,a);var l=eh;if(l&&i){var c=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Wt(c)+'"][href="'+Wt(i)+'"]',_=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=nh(i)}if(!fs.has(_)&&(i=k({rel:"modulepreload",href:i},a),fs.set(_,i),l.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ef(_)))return}c=l.createElement("link"),Tr(c,"link",i),Bt(c),l.head.appendChild(c)}}}function rP(i,a,l){so.S(i,a,l);var c=eh;if(c&&i){var m=ws(c).hoistableStyles,_=th(i);a=a||"default";var T=m.get(_);if(!T){var R={loading:0,preload:null};if(T=c.querySelector(Jd(_)))R.loading=5;else{i=k({rel:"stylesheet",href:i,"data-precedence":a},l),(l=fs.get(_))&&hy(i,l);var L=T=c.createElement("link");Bt(L),Tr(L,"link",i),L._p=new Promise(function(G,oe){L.onload=G,L.onerror=oe}),L.addEventListener("load",function(){R.loading|=1}),L.addEventListener("error",function(){R.loading|=2}),R.loading|=4,jp(T,a,c)}T={type:"stylesheet",instance:T,count:1,state:R},m.set(_,T)}}}function iP(i,a){so.X(i,a);var l=eh;if(l&&i){var c=ws(l).hoistableScripts,m=nh(i),_=c.get(m);_||(_=l.querySelector(ef(m)),_||(i=k({src:i,async:!0},a),(a=fs.get(m))&&dy(i,a),_=l.createElement("script"),Bt(_),Tr(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(m,_))}}function sP(i,a){so.M(i,a);var l=eh;if(l&&i){var c=ws(l).hoistableScripts,m=nh(i),_=c.get(m);_||(_=l.querySelector(ef(m)),_||(i=k({src:i,async:!0,type:"module"},a),(a=fs.get(m))&&dy(i,a),_=l.createElement("script"),Bt(_),Tr(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(m,_))}}function G0(i,a,l,c){var m=(m=vn.current)?Lp(m):null;if(!m)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=th(l.href),l=ws(m).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=th(l.href);var _=ws(m).hoistableStyles,T=_.get(i);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,T),(_=m.querySelector(Jd(i)))&&!_._p&&(T.instance=_,T.state.loading=5),fs.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},fs.set(i,l),_||aP(m,i,l,T.state))),a&&c===null)throw Error(r(528,""));return T}if(a&&c!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=nh(l),l=ws(m).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function th(i){return'href="'+Wt(i)+'"'}function Jd(i){return'link[rel="stylesheet"]['+i+"]"}function W0(i){return k({},i,{"data-precedence":i.precedence,precedence:null})}function aP(i,a,l,c){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=i.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),Tr(a,"link",l),Bt(a),i.head.appendChild(a))}function nh(i){return'[src="'+Wt(i)+'"]'}function ef(i){return"script[async]"+i}function K0(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=i.querySelector('style[data-href~="'+Wt(l.href)+'"]');if(c)return a.instance=c,Bt(c),c;var m=k({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Bt(c),Tr(c,"style",m),jp(c,l.precedence,i),a.instance=c;case"stylesheet":m=th(l.href);var _=i.querySelector(Jd(m));if(_)return a.state.loading|=4,a.instance=_,Bt(_),_;c=W0(l),(m=fs.get(m))&&hy(c,m),_=(i.ownerDocument||i).createElement("link"),Bt(_);var T=_;return T._p=new Promise(function(R,L){T.onload=R,T.onerror=L}),Tr(_,"link",c),a.state.loading|=4,jp(_,l.precedence,i),a.instance=_;case"script":return _=nh(l.src),(m=i.querySelector(ef(_)))?(a.instance=m,Bt(m),m):(c=l,(m=fs.get(_))&&(c=k({},l),dy(c,m)),i=i.ownerDocument||i,m=i.createElement("script"),Bt(m),Tr(m,"link",c),i.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,jp(c,l.precedence,i));return a.instance}function jp(i,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,_=m,T=0;T<c.length;T++){var R=c[T];if(R.dataset.precedence===a)_=R;else if(_!==m)break}_?_.parentNode.insertBefore(i,_.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function hy(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function dy(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Up=null;function Y0(i,a,l){if(Up===null){var c=new Map,m=Up=new Map;m.set(l,c)}else m=Up,c=m.get(l),c||(c=new Map,m.set(l,c));if(c.has(i))return c;for(c.set(i,null),l=l.getElementsByTagName(i),m=0;m<l.length;m++){var _=l[m];if(!(_[ht]||_[Gt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var T=_.getAttribute(a)||"";T=i+T;var R=c.get(T);R?R.push(_):c.set(T,[_])}}return c}function Q0(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function oP(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function X0(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var tf=null;function lP(){}function uP(i,a,l){if(tf===null)throw Error(r(475));var c=tf;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=th(l.href),_=i.querySelector(Jd(m));if(_){i=_._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=Fp.bind(c),i.then(c,c)),a.state.loading|=4,a.instance=_,Bt(_);return}_=i.ownerDocument||i,l=W0(l),(m=fs.get(m))&&hy(l,m),_=_.createElement("link"),Bt(_);var T=_;T._p=new Promise(function(R,L){T.onload=R,T.onerror=L}),Tr(_,"link",l),a.instance=_}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(c.count++,a=Fp.bind(c),i.addEventListener("load",a),i.addEventListener("error",a))}}function cP(){if(tf===null)throw Error(r(475));var i=tf;return i.stylesheets&&i.count===0&&fy(i,i.stylesheets),0<i.count?function(a){var l=setTimeout(function(){if(i.stylesheets&&fy(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(l)}}:null}function Fp(){if(this.count--,this.count===0){if(this.stylesheets)fy(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Bp=null;function fy(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Bp=new Map,a.forEach(hP,i),Bp=null,Fp.call(i))}function hP(i,a){if(!(a.state.loading&4)){var l=Bp.get(i);if(l)var c=l.get(null);else{l=new Map,Bp.set(i,l);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<m.length;_++){var T=m[_];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),c=T)}c&&l.set(null,c)}m=a.instance,T=m.getAttribute("data-precedence"),_=l.get(T)||c,_===c&&l.set(null,m),l.set(T,m),this.count++,c=Fp.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),_?_.parentNode.insertBefore(m,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),a.state.loading|=4}}var nf={$$typeof:D,Provider:null,Consumer:null,_currentValue:Fe,_currentValue2:Fe,_threadCount:0};function dP(i,a,l,c,m,_,T,R){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wi(0),this.hiddenUpdates=Wi(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=_,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function Z0(i,a,l,c,m,_,T,R,L,G,oe,pe){return i=new dP(i,a,l,T,R,L,G,pe),a=1,_===!0&&(a|=24),_=hs(3,null,null,a),i.current=_,_.stateNode=i,a=jc(),a.refCount++,i.pooledCache=a,a.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:a},Sv(_),i}function J0(i){return i?(i=Fo,i):Fo}function eA(i,a,l,c,m,_){m=J0(m),c.context===null?c.context=m:c.pendingContext=m,c=el(a),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=tl(i,c,a),l!==null&&(si(l,i,a),Ud(l,i,a))}function tA(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function my(i,a){tA(i,a),(i=i.alternate)&&tA(i,a)}function nA(i){if(i.tag===13){var a=Ns(i,67108864);a!==null&&si(a,i,67108864),my(i,67108864)}}var zp=!0;function fP(i,a,l,c){var m=N.T;N.T=null;var _=Se.p;try{Se.p=2,py(i,a,l,c)}finally{Se.p=_,N.T=m}}function mP(i,a,l,c){var m=N.T;N.T=null;var _=Se.p;try{Se.p=8,py(i,a,l,c)}finally{Se.p=_,N.T=m}}function py(i,a,l,c){if(zp){var m=gy(c);if(m===null)ry(i,a,c,qp,l),iA(i,c);else if(gP(m,i,a,l,c))c.stopPropagation();else if(iA(i,c),a&4&&-1<pP.indexOf(i)){for(;m!==null;){var _=Gn(m);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var T=jt(_.pendingLanes);if(T!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;T;){var L=1<<31-Fn(T);R.entanglements[1]|=L,T&=~L}oa(_),(fn&6)===0&&(Ip=xn()+500,Qd(0))}}break;case 13:R=Ns(_,2),R!==null&&si(R,_,2),Dp(),my(_,2)}if(_=gy(c),_===null&&ry(i,a,c,qp,l),_===m)break;m=_}m!==null&&c.stopPropagation()}else ry(i,a,c,null,l)}}function gy(i){return i=Ws(i),_y(i)}var qp=null;function _y(i){if(qp=null,i=yn(i),i!==null){var a=Oe(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=Ye(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return qp=i,null}function rA(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Br()){case tn:return 2;case Ht:return 8;case er:case zr:return 32;case Si:return 268435456;default:return 32}default:return 32}}var vy=!1,ll=null,ul=null,cl=null,rf=new Map,sf=new Map,hl=[],pP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iA(i,a){switch(i){case"focusin":case"focusout":ll=null;break;case"dragenter":case"dragleave":ul=null;break;case"mouseover":case"mouseout":cl=null;break;case"pointerover":case"pointerout":rf.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":sf.delete(a.pointerId)}}function af(i,a,l,c,m,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[m]},a!==null&&(a=Gn(a),a!==null&&nA(a)),i):(i.eventSystemFlags|=c,a=i.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),i)}function gP(i,a,l,c,m){switch(a){case"focusin":return ll=af(ll,i,a,l,c,m),!0;case"dragenter":return ul=af(ul,i,a,l,c,m),!0;case"mouseover":return cl=af(cl,i,a,l,c,m),!0;case"pointerover":var _=m.pointerId;return rf.set(_,af(rf.get(_)||null,i,a,l,c,m)),!0;case"gotpointercapture":return _=m.pointerId,sf.set(_,af(sf.get(_)||null,i,a,l,c,m)),!0}return!1}function sA(i){var a=yn(i.target);if(a!==null){var l=Oe(a);if(l!==null){if(a=l.tag,a===13){if(a=Ye(l),a!==null){i.blockedOn=a,mr(i.priority,function(){if(l.tag===13){var c=ji(),m=Ns(l,c);m!==null&&si(m,l,c),my(l,c)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Hp(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=gy(i.nativeEvent);if(l===null){l=i.nativeEvent;var c=new l.constructor(l.type,l);rr=c,l.target.dispatchEvent(c),rr=null}else return a=Gn(l),a!==null&&nA(a),i.blockedOn=l,!1;a.shift()}return!0}function aA(i,a,l){Hp(i)&&l.delete(a)}function _P(){vy=!1,ll!==null&&Hp(ll)&&(ll=null),ul!==null&&Hp(ul)&&(ul=null),cl!==null&&Hp(cl)&&(cl=null),rf.forEach(aA),sf.forEach(aA)}function $p(i,a){i.blockedOn===a&&(i.blockedOn=null,vy||(vy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,_P)))}var Gp=null;function oA(i){Gp!==i&&(Gp=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Gp===i&&(Gp=null);for(var a=0;a<i.length;a+=3){var l=i[a],c=i[a+1],m=i[a+2];if(typeof c!="function"){if(_y(c||l)===null)continue;break}var _=Gn(l);_!==null&&(i.splice(a,3),a-=3,ov(_,{pending:!0,data:m,method:l.method,action:c},c,m))}}))}function of(i){function a(L){return $p(L,i)}ll!==null&&$p(ll,i),ul!==null&&$p(ul,i),cl!==null&&$p(cl,i),rf.forEach(a),sf.forEach(a);for(var l=0;l<hl.length;l++){var c=hl[l];c.blockedOn===i&&(c.blockedOn=null)}for(;0<hl.length&&(l=hl[0],l.blockedOn===null);)sA(l),l.blockedOn===null&&hl.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var m=l[c],_=l[c+1],T=m[nn]||null;if(typeof _=="function")T||oA(l);else if(T){var R=null;if(_&&_.hasAttribute("formAction")){if(m=_,T=_[nn]||null)R=T.formAction;else if(_y(m)!==null)continue}else R=T.action;typeof R=="function"?l[c+1]=R:(l.splice(c,3),c-=3),oA(l)}}}function yy(i){this._internalRoot=i}Wp.prototype.render=yy.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,c=ji();eA(l,c,i,a,null,null)},Wp.prototype.unmount=yy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;i.tag===0&&Xc(),eA(i.current,2,null,i,null,null),Dp(),a[Ri]=null}};function Wp(i){this._internalRoot=i}Wp.prototype.unstable_scheduleHydration=function(i){if(i){var a=Kr();i={blockedOn:null,target:i,priority:a};for(var l=0;l<hl.length&&a!==0&&a<hl[l].priority;l++);hl.splice(l,0,i),l===0&&sA(i)}};var lA=e.version;if(lA!=="19.0.0")throw Error(r(527,lA,"19.0.0"));Se.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=re(a),i=i!==null?we(i):null,i=i===null?null:i.stateNode,i};var vP={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:N,findFiberByHostInstance:yn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kp.isDisabled&&Kp.supportsFiber)try{qr=Kp.inject(vP),On=Kp}catch{}}return uf.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,c="",m=ST,_=IT,T=RT,R=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(R=a.unstable_transitionCallbacks)),a=Z0(i,1,!1,null,null,l,c,m,_,T,R,null),i[Ri]=a.current,ny(i.nodeType===8?i.parentNode:i),new yy(a)},uf.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var c=!1,m="",_=ST,T=IT,R=RT,L=null,G=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(L=l.unstable_transitionCallbacks),l.formState!==void 0&&(G=l.formState)),a=Z0(i,1,!0,a,l??null,c,m,_,T,R,L,G),a.context=J0(null),l=a.current,c=ji(),m=el(c),m.callback=null,tl(l,m,c),a.current.lanes=c,$t(a,c),oa(a),i[Ri]=a.current,ny(i),new Wp(a)},uf.version="19.0.0",uf}var vA;function CP(){if(vA)return Ey.exports;vA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ey.exports=RP(),Ey.exports}var DP=CP(),cf={},yA;function xP(){if(yA)return cf;yA=1,Object.defineProperty(cf,"__esModule",{value:!0}),cf.parse=u,cf.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function u(A,D){const M=new o,F=A.length;if(F<2)return M;const V=(D==null?void 0:D.decode)||v;let H=0;do{const J=A.indexOf("=",H);if(J===-1)break;const se=A.indexOf(";",H),ue=se===-1?F:se;if(J>ue){H=A.lastIndexOf(";",J-1)+1;continue}const de=h(A,H,J),be=f(A,J,de),U=A.slice(de,be);if(M[U]===void 0){let P=h(A,J+1,ue),N=f(A,ue,P);const k=V(A.slice(P,N));M[U]=k}H=ue+1}while(H<F);return M}function h(A,D,M){do{const F=A.charCodeAt(D);if(F!==32&&F!==9)return D}while(++D<M);return M}function f(A,D,M){for(;D>M;){const F=A.charCodeAt(--D);if(F!==32&&F!==9)return D+1}return M}function p(A,D,M){const F=(M==null?void 0:M.encode)||encodeURIComponent;if(!n.test(A))throw new TypeError(`argument name is invalid: ${A}`);const V=F(D);if(!e.test(V))throw new TypeError(`argument val is invalid: ${D}`);let H=A+"="+V;if(!M)return H;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);H+="; Max-Age="+M.maxAge}if(M.domain){if(!t.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);H+="; Domain="+M.domain}if(M.path){if(!r.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);H+="; Path="+M.path}if(M.expires){if(!b(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);H+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(H+="; HttpOnly"),M.secure&&(H+="; Secure"),M.partitioned&&(H+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":H+="; Priority=Low";break;case"medium":H+="; Priority=Medium";break;case"high":H+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":H+="; SameSite=Strict";break;case"lax":H+="; SameSite=Lax";break;case"none":H+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return H}function v(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch{return A}}function b(A){return s.call(A)==="[object Date]"}return cf}xP();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var bA="popstate";function OP(n={}){function e(r,s){let{pathname:o,search:u,hash:h}=r.location;return rb("",{pathname:o,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:qf(s)}return PP(e,t,null,n)}function mn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ba(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NP(){return Math.random().toString(36).substring(2,10)}function wA(n,e){return{usr:n.state,key:n.key,idx:e}}function rb(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Yh(e):e,state:t,key:e&&e.key||r||NP()}}function qf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Yh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function PP(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,u=s.history,h="POP",f=null,p=v();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function v(){return(u.state||{idx:null}).idx}function b(){h="POP";let V=v(),H=V==null?null:V-p;p=V,f&&f({action:h,location:F.location,delta:H})}function A(V,H){h="PUSH";let J=rb(F.location,V,H);p=v()+1;let se=wA(J,p),ue=F.createHref(J);try{u.pushState(se,"",ue)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;s.location.assign(ue)}o&&f&&f({action:h,location:F.location,delta:1})}function D(V,H){h="REPLACE";let J=rb(F.location,V,H);p=v();let se=wA(J,p),ue=F.createHref(J);u.replaceState(se,"",ue),o&&f&&f({action:h,location:F.location,delta:0})}function M(V){let H=s.location.origin!=="null"?s.location.origin:s.location.href,J=typeof V=="string"?V:qf(V);return J=J.replace(/ $/,"%20"),mn(H,`No window.location.(origin|href) available to create URL for href: ${J}`),new URL(J,H)}let F={get action(){return h},get location(){return n(s,u)},listen(V){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(bA,b),f=V,()=>{s.removeEventListener(bA,b),f=null}},createHref(V){return e(s,V)},createURL:M,encodeLocation(V){let H=M(V);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:A,replace:D,go(V){return u.go(V)}};return F}function aR(n,e,t="/"){return kP(n,e,t,!1)}function kP(n,e,t,r){let s=typeof e=="string"?Yh(e):e,o=Rl(s.pathname||"/",t);if(o==null)return null;let u=oR(n);VP(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let p=GP(o);h=HP(u[f],p,r)}return h}function oR(n,e=[],t=[],r=""){let s=(o,u,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};f.relativePath.startsWith("/")&&(mn(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let p=ho([r,f.relativePath]),v=t.concat(f);o.children&&o.children.length>0&&(mn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),oR(o.children,e,v,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:zP(p,o.index),routesMeta:v})};return n.forEach((o,u)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,u);else for(let f of lR(o.path))s(o,u,f)}),e}function lR(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let u=lR(r.join("/")),h=[];return h.push(...u.map(f=>f===""?o:[o,f].join("/"))),s&&h.push(...u),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function VP(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:qP(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var MP=/^:[\w-]+$/,LP=3,jP=2,UP=1,FP=10,BP=-2,EA=n=>n==="*";function zP(n,e){let t=n.split("/"),r=t.length;return t.some(EA)&&(r+=BP),e&&(r+=jP),t.filter(s=>!EA(s)).reduce((s,o)=>s+(MP.test(o)?LP:o===""?UP:FP),r)}function qP(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function HP(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],p=h===r.length-1,v=o==="/"?e:e.slice(o.length)||"/",b=Rg({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},v),A=f.route;if(!b&&p&&t&&!r[r.length-1].route.index&&(b=Rg({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!b)return null;Object.assign(s,b.params),u.push({params:s,pathname:ho([o,b.pathname]),pathnameBase:QP(ho([o,b.pathnameBase])),route:A}),b.pathnameBase!=="/"&&(o=ho([o,b.pathnameBase]))}return u}function Rg(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=$P(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],u=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((p,{paramName:v,isOptional:b},A)=>{if(v==="*"){let M=h[A]||"";u=o.slice(0,o.length-M.length).replace(/(.)\/+$/,"$1")}const D=h[A];return b&&!D?p[v]=void 0:p[v]=(D||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:u,pattern:n}}function $P(n,e=!1,t=!0){ba(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function GP(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ba(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Rl(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function WP(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Yh(n):n;return{pathname:t?t.startsWith("/")?t:KP(t,e):e,search:XP(r),hash:ZP(s)}}function KP(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Iy(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YP(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function uR(n){let e=YP(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function cR(n,e,t,r=!1){let s;typeof n=="string"?s=Yh(n):(s={...n},mn(!s.pathname||!s.pathname.includes("?"),Iy("?","pathname","search",s)),mn(!s.pathname||!s.pathname.includes("#"),Iy("#","pathname","hash",s)),mn(!s.search||!s.search.includes("#"),Iy("#","search","hash",s)));let o=n===""||s.pathname==="",u=o?"/":s.pathname,h;if(u==null)h=t;else{let b=e.length-1;if(!r&&u.startsWith("..")){let A=u.split("/");for(;A[0]==="..";)A.shift(),b-=1;s.pathname=A.join("/")}h=b>=0?e[b]:"/"}let f=WP(s,h),p=u&&u!=="/"&&u.endsWith("/"),v=(o||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||v)&&(f.pathname+="/"),f}var ho=n=>n.join("/").replace(/\/\/+/g,"/"),QP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),XP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ZP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function JP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var hR=["POST","PUT","PATCH","DELETE"];new Set(hR);var e1=["GET",...hR];new Set(e1);var Qh=B.createContext(null);Qh.displayName="DataRouter";var r_=B.createContext(null);r_.displayName="DataRouterState";var dR=B.createContext({isTransitioning:!1});dR.displayName="ViewTransition";var t1=B.createContext(new Map);t1.displayName="Fetchers";var n1=B.createContext(null);n1.displayName="Await";var Ia=B.createContext(null);Ia.displayName="Navigation";var _m=B.createContext(null);_m.displayName="Location";var Hs=B.createContext({outlet:null,matches:[],isDataRoute:!1});Hs.displayName="Route";var lw=B.createContext(null);lw.displayName="RouteError";function r1(n,{relative:e}={}){mn(vm(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=B.useContext(Ia),{hash:s,pathname:o,search:u}=ym(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:ho([t,o])),r.createHref({pathname:h,search:u,hash:s})}function vm(){return B.useContext(_m)!=null}function nc(){return mn(vm(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(_m).location}var fR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mR(n){B.useContext(Ia).static||B.useLayoutEffect(n)}function i_(){let{isDataRoute:n}=B.useContext(Hs);return n?v1():i1()}function i1(){mn(vm(),"useNavigate() may be used only in the context of a <Router> component.");let n=B.useContext(Qh),{basename:e,navigator:t}=B.useContext(Ia),{matches:r}=B.useContext(Hs),{pathname:s}=nc(),o=JSON.stringify(uR(r)),u=B.useRef(!1);return mR(()=>{u.current=!0}),B.useCallback((f,p={})=>{if(ba(u.current,fR),!u.current)return;if(typeof f=="number"){t.go(f);return}let v=cR(f,JSON.parse(o),s,p.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ho([e,v.pathname])),(p.replace?t.replace:t.push)(v,p.state,p)},[e,t,o,s,n])}var s1=B.createContext(null);function a1(n){let e=B.useContext(Hs).outlet;return e&&B.createElement(s1.Provider,{value:n},e)}function uw(){let{matches:n}=B.useContext(Hs),e=n[n.length-1];return e?e.params:{}}function ym(n,{relative:e}={}){let{matches:t}=B.useContext(Hs),{pathname:r}=nc(),s=JSON.stringify(uR(t));return B.useMemo(()=>cR(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function o1(n,e){return pR(n,e)}function pR(n,e,t,r){var J;mn(vm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=B.useContext(Ia),{matches:u}=B.useContext(Hs),h=u[u.length-1],f=h?h.params:{},p=h?h.pathname:"/",v=h?h.pathnameBase:"/",b=h&&h.route;{let se=b&&b.path||"";gR(p,!b||se.endsWith("*")||se.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${se}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${se}"> to <Route path="${se==="/"?"*":`${se}/*`}">.`)}let A=nc(),D;if(e){let se=typeof e=="string"?Yh(e):e;mn(v==="/"||((J=se.pathname)==null?void 0:J.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${se.pathname}" was given in the \`location\` prop.`),D=se}else D=A;let M=D.pathname||"/",F=M;if(v!=="/"){let se=v.replace(/^\//,"").split("/");F="/"+M.replace(/^\//,"").split("/").slice(se.length).join("/")}let V=!o&&t&&t.matches&&t.matches.length>0?t.matches:aR(n,{pathname:F});ba(b||V!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),ba(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=d1(V&&V.map(se=>Object.assign({},se,{params:Object.assign({},f,se.params),pathname:ho([v,s.encodeLocation?s.encodeLocation(se.pathname).pathname:se.pathname]),pathnameBase:se.pathnameBase==="/"?v:ho([v,s.encodeLocation?s.encodeLocation(se.pathnameBase).pathname:se.pathnameBase])})),u,t,r);return e&&H?B.createElement(_m.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},H):H}function l1(){let n=_1(),e=JP(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=B.createElement(B.Fragment,null,B.createElement("p",null,"💿 Hey developer 👋"),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:o},"ErrorBoundary")," or"," ",B.createElement("code",{style:o},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:s},t):null,u)}var u1=B.createElement(l1,null),c1=class extends B.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?B.createElement(Hs.Provider,{value:this.props.routeContext},B.createElement(lw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function h1({routeContext:n,match:e,children:t}){let r=B.useContext(Qh);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(Hs.Provider,{value:n},t)}function d1(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let f=s.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);mn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let u=!1,h=-1;if(t)for(let f=0;f<s.length;f++){let p=s[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:v,errors:b}=t,A=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!b||b[p.route.id]===void 0);if(p.route.lazy||A){u=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((f,p,v)=>{let b,A=!1,D=null,M=null;t&&(b=o&&p.route.id?o[p.route.id]:void 0,D=p.route.errorElement||u1,u&&(h<0&&v===0?(gR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,M=null):h===v&&(A=!0,M=p.route.hydrateFallbackElement||null)));let F=e.concat(s.slice(0,v+1)),V=()=>{let H;return b?H=D:A?H=M:p.route.Component?H=B.createElement(p.route.Component,null):p.route.element?H=p.route.element:H=f,B.createElement(h1,{match:p,routeContext:{outlet:f,matches:F,isDataRoute:t!=null},children:H})};return t&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?B.createElement(c1,{location:t.location,revalidation:t.revalidation,component:D,error:b,children:V(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):V()},null)}function cw(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function f1(n){let e=B.useContext(Qh);return mn(e,cw(n)),e}function m1(n){let e=B.useContext(r_);return mn(e,cw(n)),e}function p1(n){let e=B.useContext(Hs);return mn(e,cw(n)),e}function hw(n){let e=p1(n),t=e.matches[e.matches.length-1];return mn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function g1(){return hw("useRouteId")}function _1(){var r;let n=B.useContext(lw),e=m1("useRouteError"),t=hw("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function v1(){let{router:n}=f1("useNavigate"),e=hw("useNavigate"),t=B.useRef(!1);return mR(()=>{t.current=!0}),B.useCallback(async(s,o={})=>{ba(t.current,fR),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var TA={};function gR(n,e,t){!e&&!TA[n]&&(TA[n]=!0,ba(!1,t))}B.memo(y1);function y1({routes:n,future:e,state:t}){return pR(n,void 0,t,e)}function _R(n){return a1(n.context)}function Xn(n){mn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function b1({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){mn(!vm(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=B.useMemo(()=>({basename:u,navigator:s,static:o,future:{}}),[u,s,o]);typeof t=="string"&&(t=Yh(t));let{pathname:f="/",search:p="",hash:v="",state:b=null,key:A="default"}=t,D=B.useMemo(()=>{let M=Rl(f,u);return M==null?null:{location:{pathname:M,search:p,hash:v,state:b,key:A},navigationType:r}},[u,f,p,v,b,A,r]);return ba(D!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:B.createElement(Ia.Provider,{value:h},B.createElement(_m.Provider,{children:e,value:D}))}function w1({children:n,location:e}){return o1(ib(n),e)}function ib(n,e=[]){let t=[];return B.Children.forEach(n,(r,s)=>{if(!B.isValidElement(r))return;let o=[...e,s];if(r.type===B.Fragment){t.push.apply(t,ib(r.props.children,o));return}mn(r.type===Xn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=ib(r.props.children,o)),t.push(u)}),t}var ug="get",cg="application/x-www-form-urlencoded";function s_(n){return n!=null&&typeof n.tagName=="string"}function E1(n){return s_(n)&&n.tagName.toLowerCase()==="button"}function T1(n){return s_(n)&&n.tagName.toLowerCase()==="form"}function A1(n){return s_(n)&&n.tagName.toLowerCase()==="input"}function S1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function I1(n,e){return n.button===0&&(!e||e==="_self")&&!S1(n)}var Yp=null;function R1(){if(Yp===null)try{new FormData(document.createElement("form"),0),Yp=!1}catch{Yp=!0}return Yp}var C1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ry(n){return n!=null&&!C1.has(n)?(ba(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cg}"`),null):n}function D1(n,e){let t,r,s,o,u;if(T1(n)){let h=n.getAttribute("action");r=h?Rl(h,e):null,t=n.getAttribute("method")||ug,s=Ry(n.getAttribute("enctype"))||cg,o=new FormData(n)}else if(E1(n)||A1(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(r=f?Rl(f,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||ug,s=Ry(n.getAttribute("formenctype"))||Ry(h.getAttribute("enctype"))||cg,o=new FormData(h,n),!R1()){let{name:p,type:v,value:b}=n;if(v==="image"){let A=p?`${p}.`:"";o.append(`${A}x`,"0"),o.append(`${A}y`,"0")}else p&&o.append(p,b)}}else{if(s_(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ug,r=null,s=cg,u=n}return o&&s==="text/plain"&&(u=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:u}}function dw(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function x1(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function O1(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function N1(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let u=await x1(o,t);return u.links?u.links():[]}return[]}));return M1(r.flat(1).filter(O1).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function AA(n,e,t,r,s,o){let u=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,h=(f,p)=>{var v;return t[p].pathname!==f.pathname||((v=t[p].route.path)==null?void 0:v.endsWith("*"))&&t[p].params["*"]!==f.params["*"]};return o==="assets"?e.filter((f,p)=>u(f,p)||h(f,p)):o==="data"?e.filter((f,p)=>{var b;let v=r.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(u(f,p)||h(f,p))return!0;if(f.route.shouldRevalidate){let A=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((b=t[0])==null?void 0:b.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function P1(n,e,{includeHydrateFallback:t}={}){return k1(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function k1(n){return[...new Set(n)]}function V1(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function M1(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(V1(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function L1(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function j1(){let n=B.useContext(Qh);return dw(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function U1(){let n=B.useContext(r_);return dw(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var fw=B.createContext(void 0);fw.displayName="FrameworkContext";function vR(){let n=B.useContext(fw);return dw(n,"You must render this element inside a <HydratedRouter> element"),n}function F1(n,e){let t=B.useContext(fw),[r,s]=B.useState(!1),[o,u]=B.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:p,onMouseLeave:v,onTouchStart:b}=e,A=B.useRef(null);B.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let F=H=>{H.forEach(J=>{u(J.isIntersecting)})},V=new IntersectionObserver(F,{threshold:.5});return A.current&&V.observe(A.current),()=>{V.disconnect()}}},[n]),B.useEffect(()=>{if(r){let F=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(F)}}},[r]);let D=()=>{s(!0)},M=()=>{s(!1),u(!1)};return t?n!=="intent"?[o,A,{}]:[o,A,{onFocus:hf(h,D),onBlur:hf(f,M),onMouseEnter:hf(p,D),onMouseLeave:hf(v,M),onTouchStart:hf(b,D)}]:[!1,A,{}]}function hf(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function B1({page:n,...e}){let{router:t}=j1(),r=B.useMemo(()=>aR(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?B.createElement(q1,{page:n,matches:r,...e}):null}function z1(n){let{manifest:e,routeModules:t}=vR(),[r,s]=B.useState([]);return B.useEffect(()=>{let o=!1;return N1(n,e,t).then(u=>{o||s(u)}),()=>{o=!0}},[n,e,t]),r}function q1({page:n,matches:e,...t}){let r=nc(),{manifest:s,routeModules:o}=vR(),{loaderData:u,matches:h}=U1(),f=B.useMemo(()=>AA(n,e,h,s,r,"data"),[n,e,h,s,r]),p=B.useMemo(()=>AA(n,e,h,s,r,"assets"),[n,e,h,s,r]),v=B.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let D=new Set,M=!1;if(e.forEach(V=>{var J;let H=s.routes[V.route.id];!H||!H.hasLoader||(!f.some(se=>se.route.id===V.route.id)&&V.route.id in u&&((J=o[V.route.id])!=null&&J.shouldRevalidate)||H.hasClientLoader?M=!0:D.add(V.route.id))}),D.size===0)return[];let F=L1(n);return M&&D.size>0&&F.searchParams.set("_routes",e.filter(V=>D.has(V.route.id)).map(V=>V.route.id).join(",")),[F.pathname+F.search]},[u,r,s,f,e,n,o]),b=B.useMemo(()=>P1(p,s),[p,s]),A=z1(p);return B.createElement(B.Fragment,null,v.map(D=>B.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...t})),b.map(D=>B.createElement("link",{key:D,rel:"modulepreload",href:D,...t})),A.map(({key:D,link:M})=>B.createElement("link",{key:D,...M})))}function H1(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var yR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yR&&(window.__reactRouterVersion="7.2.0")}catch{}function $1({basename:n,children:e,window:t}){let r=B.useRef();r.current==null&&(r.current=OP({window:t,v5Compat:!0}));let s=r.current,[o,u]=B.useState({action:s.action,location:s.location}),h=B.useCallback(f=>{B.startTransition(()=>u(f))},[u]);return B.useLayoutEffect(()=>s.listen(h),[s,h]),B.createElement(b1,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var bR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zi=B.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:u,state:h,target:f,to:p,preventScrollReset:v,viewTransition:b,...A},D){let{basename:M}=B.useContext(Ia),F=typeof p=="string"&&bR.test(p),V,H=!1;if(typeof p=="string"&&F&&(V=p,yR))try{let N=new URL(window.location.href),k=p.startsWith("//")?new URL(N.protocol+p):new URL(p),z=Rl(k.pathname,M);k.origin===N.origin&&z!=null?p=z+k.search+k.hash:H=!0}catch{ba(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let J=r1(p,{relative:s}),[se,ue,de]=F1(r,A),be=Y1(p,{replace:u,state:h,target:f,preventScrollReset:v,relative:s,viewTransition:b});function U(N){e&&e(N),N.defaultPrevented||be(N)}let P=B.createElement("a",{...A,...de,href:V||J,onClick:H||o?e:U,ref:H1(D,ue),target:f,"data-discover":!F&&t==="render"?"true":void 0});return se&&!F?B.createElement(B.Fragment,null,P,B.createElement(B1,{page:J})):P});zi.displayName="Link";var G1=B.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:u,viewTransition:h,children:f,...p},v){let b=ym(u,{relative:p.relative}),A=nc(),D=B.useContext(r_),{navigator:M,basename:F}=B.useContext(Ia),V=D!=null&&ek(b)&&h===!0,H=M.encodeLocation?M.encodeLocation(b).pathname:b.pathname,J=A.pathname,se=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;t||(J=J.toLowerCase(),se=se?se.toLowerCase():null,H=H.toLowerCase()),se&&F&&(se=Rl(se,F)||se);const ue=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let de=J===H||!s&&J.startsWith(H)&&J.charAt(ue)==="/",be=se!=null&&(se===H||!s&&se.startsWith(H)&&se.charAt(H.length)==="/"),U={isActive:de,isPending:be,isTransitioning:V},P=de?e:void 0,N;typeof r=="function"?N=r(U):N=[r,de?"active":null,be?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let k=typeof o=="function"?o(U):o;return B.createElement(zi,{...p,"aria-current":P,className:N,ref:v,style:k,to:u,viewTransition:h},typeof f=="function"?f(U):f)});G1.displayName="NavLink";var W1=B.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:u=ug,action:h,onSubmit:f,relative:p,preventScrollReset:v,viewTransition:b,...A},D)=>{let M=Z1(),F=J1(h,{relative:p}),V=u.toLowerCase()==="get"?"get":"post",H=typeof h=="string"&&bR.test(h),J=se=>{if(f&&f(se),se.defaultPrevented)return;se.preventDefault();let ue=se.nativeEvent.submitter,de=(ue==null?void 0:ue.getAttribute("formmethod"))||u;M(ue||se.currentTarget,{fetcherKey:e,method:de,navigate:t,replace:s,state:o,relative:p,preventScrollReset:v,viewTransition:b})};return B.createElement("form",{ref:D,method:V,action:F,onSubmit:r?f:J,...A,"data-discover":!H&&n==="render"?"true":void 0})});W1.displayName="Form";function K1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wR(n){let e=B.useContext(Qh);return mn(e,K1(n)),e}function Y1(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:u}={}){let h=i_(),f=nc(),p=ym(n,{relative:o});return B.useCallback(v=>{if(I1(v,e)){v.preventDefault();let b=t!==void 0?t:qf(f)===qf(p);h(n,{replace:b,state:r,preventScrollReset:s,relative:o,viewTransition:u})}},[f,h,p,t,r,e,n,s,o,u])}var Q1=0,X1=()=>`__${String(++Q1)}__`;function Z1(){let{router:n}=wR("useSubmit"),{basename:e}=B.useContext(Ia),t=g1();return B.useCallback(async(r,s={})=>{let{action:o,method:u,encType:h,formData:f,body:p}=D1(r,e);if(s.navigate===!1){let v=s.fetcherKey||X1();await n.fetch(v,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||u,formEncType:s.encType||h,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||u,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function J1(n,{relative:e}={}){let{basename:t}=B.useContext(Ia),r=B.useContext(Hs);mn(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...ym(n||".",{relative:e})},u=nc();if(n==null){o.search=u.search;let h=new URLSearchParams(o.search),f=h.getAll("index");if(f.some(v=>v==="")){h.delete("index"),f.filter(b=>b).forEach(b=>h.append("index",b));let v=h.toString();o.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ho([t,o.pathname])),qf(o)}function ek(n,e={}){let t=B.useContext(dR);mn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=wR("useViewTransitionState"),s=ym(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Rl(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=Rl(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Rg(s.pathname,u)!=null||Rg(s.pathname,o)!=null}new TextEncoder;const tk=({children:n})=>I.jsx("div",{className:"sidebar-wrapper",children:I.jsxs("aside",{className:"sidebar",children:[I.jsxs("div",{className:"listgroup",children:[I.jsx("h2",{className:"sidebar_head",children:"Vcode"}),I.jsx("div",{className:"listgroupitem",children:I.jsx(zi,{to:"/",children:"Dashboard"})}),I.jsx("div",{className:"listgroupitem",children:I.jsx(zi,{to:"/manage-problem",children:"Manage Problems"})}),I.jsx("div",{className:"listgroupitem",children:I.jsx(zi,{to:"/submissions",children:"Submissions"})}),I.jsx("div",{className:"listgroupitem",children:I.jsx(zi,{to:"/analytics",children:"User Analytics"})}),I.jsx("div",{className:"listgroupitem",children:I.jsx(zi,{to:"/settings",children:"Settings"})})]}),n]})}),ER=B.createContext({email:null,role:null,port:null,hostIP:"192.168.67.185"}),Ra=()=>B.useContext(ER),nk=({children:n})=>{const[e,t]=B.useState(null),[r,s]=B.useState(null),[o,u]=B.useState(null),h="192.168.67.185";return B.useEffect(()=>{const f=localStorage.getItem("userEmail"),p=localStorage.getItem("userRole"),v=localStorage.getItem("userPort");t(f),s(p),u(v)},[]),I.jsx(ER.Provider,{value:{email:e,role:r,port:o,hostIP:h},children:n})};function rk(){const{hostIP:n}=Ra(),e=()=>{localStorage.removeItem("sessionId"),localStorage.removeItem("userEmail"),localStorage.removeItem("userRole"),localStorage.removeItem("userPort"),fetch(`http://${n}:9000/logout`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}).then(t=>{t.ok?(console.log("Logged out successfully"),window.location.href=`http://${n}:9000/`):(console.error("Logout failed:",t.statusText),alert("Logout failed. Please try again."))}).catch(t=>{console.error("Error during logout:",t),alert("Error during logout. Please try again."),window.location.href=`http://${n}:9000/`})};return I.jsx("div",{className:"admin-layout",children:I.jsxs("div",{className:"main-content",children:[I.jsx(tk,{children:I.jsx(I.Fragment,{children:I.jsx("div",{className:"btn-wrapper",children:I.jsx("button",{className:"logout-button",onClick:e,children:"Logout"})})})}),I.jsx("div",{className:"content",children:I.jsx(_R,{})})]})})}const mw=()=>{const{port:n,hostIP:e}=Ra(),t=i_(),[r,s]=B.useState([]),[o,u]=B.useState(!0),h=b=>{t(`/editProblem/${b}`)},f=()=>{t("/add-problem")},p=async()=>{try{const b=await fetch(`http://${e}:${n}/question`);if(b.ok){const A=await b.json();s(A)}}catch(b){console.error("Error fetching problems:",b)}},v=async b=>{if(window.confirm("Are you sure you want to delete this problem?"))try{const D=await fetch(`http://${e}:${n}/clearSingleSubmission/${b}`,{method:"DELETE"});if(D.ok)alert("🗑️ Problem deleted successfully!"),p();else{const M=await D.text();console.error("Server Error:",M),alert("❌ Failed to delete the problem.")}}catch(D){console.error("⚠️ Delete failed:",D),alert("⚠️ Could not connect to the server.")}};return B.useEffect(()=>{fetch(`http://${e}:${n}/question`).then(b=>{if(!b.ok)throw new Error("Failed to fetch problems");return b.json()}).then(b=>{s(b),u(!1)}).catch(b=>{console.error("Error fetching problems:",b),u(!1)})},[]),I.jsxs("div",{className:"overflow-auto",children:[I.jsx("h2",{className:"problemList-title",children:"Problem List"}),I.jsxs("div",{className:"input-group mb-3",children:[I.jsx("span",{className:"input-group-text bg-dark text-white",children:"🔍"}),I.jsx("input",{type:"text",className:"form-control bg-dark text-white",placeholder:"Search problem..."})]}),I.jsx("div",{className:"mb-4",children:I.jsx("button",{className:"btn btn-success",onClick:f,children:"➕ Add New Problem"})}),o?I.jsx("p",{children:"Loading problems..."}):I.jsx("ul",{className:"list-group",children:r.map(b=>I.jsx("li",{children:I.jsxs(zi,{to:"/question/"+b.id,className:"pli",children:[I.jsxs("div",{className:"problem-content",children:[I.jsx("strong",{children:b.title}),I.jsxs("div",{className:"difficulty",children:["Difficulty: ",b.difficulty]}),I.jsx("div",{className:"tags",children:b.tags.map((A,D)=>I.jsx("span",{className:"tag",children:A},D))})]}),I.jsx("button",{className:"settings-btn",onClick:A=>{A.preventDefault(),h(b.id)},children:"⚙️"}),I.jsx("button",{className:"delete-btn",onClick:A=>{A.preventDefault(),v(b.id)},children:"🗑️"})]})},b.id))})]})},SA=()=>I.jsx("div",{className:"PL-container",style:{position:"relative"},children:I.jsx(mw,{})}),sb=()=>I.jsx(I.Fragment,{children:I.jsxs("div",{className:"overflow-hidden",children:[I.jsx("h2",{className:"submissionList-title",children:"Recent Submissions"}),I.jsxs("ul",{className:"list-group",children:[I.jsxs("li",{className:"submission-item",children:[I.jsx("span",{className:"submission-problem",children:"Problem 1"}),I.jsx("span",{className:"submission-user",children:"JohnDoe"})]}),I.jsxs("li",{className:"submission-item",children:[I.jsx("span",{className:"submission-problem",children:"Sorting Algorithm"}),I.jsx("span",{className:"submission-user",children:"Alice123"})]}),I.jsxs("li",{className:"submission-item",children:[I.jsx("span",{className:"submission-problem",children:"Graph Traversal"}),I.jsx("span",{className:"submission-user",children:"CoderX"})]}),I.jsxs("li",{className:"submission-item",children:[I.jsx("span",{className:"submission-problem",children:"Dynamic Programming"}),I.jsx("span",{className:"submission-user",children:"Dev99"})]}),I.jsxs("li",{className:"submission-item",children:[I.jsx("span",{className:"submission-problem",children:"Binary Search"}),I.jsx("span",{className:"submission-user",children:"TechGeek"})]})]})]})}),ik=()=>{const n=[{id:1,name:"John Doe",email:"john@example.com",img:"https://i.pravatar.cc/40?img=1"},{id:2,name:"Alice Smith",email:"alice@example.com",img:"https://i.pravatar.cc/40?img=2"},{id:3,name:"Michael Brown",email:"michael@example.com",img:"https://i.pravatar.cc/40?img=3"},{id:4,name:"Sarah Wilson",email:"sarah@example.com",img:"https://i.pravatar.cc/40?img=4"},{id:5,name:"David Johnson",email:"david@example.com",img:"https://i.pravatar.cc/40?img=5"}];return I.jsxs("div",{className:"overflow-auto",children:[I.jsx("h2",{className:"userList-title",children:"User List"}),I.jsxs("div",{className:"input-group mb-3",children:[I.jsx("span",{className:"input-group-text bg-dark text-white",children:"@"}),I.jsx("input",{type:"text",className:"form-control bg-dark text-white",placeholder:"Search user..."})]}),I.jsx("ul",{className:"list-group",children:n.map(e=>I.jsxs("li",{className:"lgi",style:{display:"flex",alignItems:"center",padding:"10px"},children:[I.jsx("img",{src:e.img,alt:"Profile",width:"40",height:"40",style:{borderRadius:"50%",marginRight:"10px"}}),I.jsxs("div",{children:[I.jsx("strong",{children:e.name}),I.jsx("div",{children:e.email})]})]},e.id))})]})};function sk(){return I.jsxs("div",{className:"dashboard",children:[I.jsx("h1",{children:"Welcome to Admin Dashboard"}),I.jsxs("div",{className:"dashboard-cards",children:[I.jsx("div",{className:"dashboard-card",children:"Total Users: 120"}),I.jsx("div",{className:"dashboard-card",children:"Problems Created: 30"}),I.jsx("div",{className:"dashboard-card",children:"Submissions Today: 150"})]}),I.jsxs("div",{className:"dashboard_content",children:[I.jsx(ik,{}),I.jsx(mw,{}),I.jsx(sb,{})]})]})}function ak(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function RA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?IA(Object(t),!0).forEach(function(r){ak(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):IA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ok(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function lk(n,e){if(n==null)return{};var t=ok(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function uk(n,e){return ck(n)||hk(n,e)||dk(n,e)||fk()}function ck(n){if(Array.isArray(n))return n}function hk(n,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],r=!0,s=!1,o=void 0;try{for(var u=n[Symbol.iterator](),h;!(r=(h=u.next()).done)&&(t.push(h.value),!(e&&t.length===e));r=!0);}catch(f){s=!0,o=f}finally{try{!r&&u.return!=null&&u.return()}finally{if(s)throw o}}return t}}function dk(n,e){if(n){if(typeof n=="string")return CA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return CA(n,e)}}function CA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function fk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mk(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function DA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function xA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?DA(Object(t),!0).forEach(function(r){mk(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):DA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function pk(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){return e.reduceRight(function(s,o){return o(s)},r)}}function wf(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return s.length>=n.length?n.apply(this,s):function(){for(var u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];return e.apply(t,[].concat(s,h))}}}function Cg(n){return{}.toString.call(n).includes("Object")}function gk(n){return!Object.keys(n).length}function Hf(n){return typeof n=="function"}function _k(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function vk(n,e){return Cg(e)||wl("changeType"),Object.keys(e).some(function(t){return!_k(n,t)})&&wl("changeField"),e}function yk(n){Hf(n)||wl("selectorType")}function bk(n){Hf(n)||Cg(n)||wl("handlerType"),Cg(n)&&Object.values(n).some(function(e){return!Hf(e)})&&wl("handlersType")}function wk(n){n||wl("initialIsRequired"),Cg(n)||wl("initialType"),gk(n)&&wl("initialContent")}function Ek(n,e){throw new Error(n[e]||n.default)}var Tk={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},wl=wf(Ek)(Tk),Qp={changes:vk,selector:yk,handler:bk,initial:wk};function Ak(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Qp.initial(n),Qp.handler(e);var t={current:n},r=wf(Rk)(t,e),s=wf(Ik)(t),o=wf(Qp.changes)(n),u=wf(Sk)(t);function h(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(v){return v};return Qp.selector(p),p(t.current)}function f(p){pk(r,s,o,u)(p)}return[h,f]}function Sk(n,e){return Hf(e)?e(n.current):e}function Ik(n,e){return n.current=xA(xA({},n.current),e),e}function Rk(n,e,t){return Hf(e)?e(n.current):Object.keys(t).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,n.current[r])}),t}var Ck={create:Ak},Dk={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function xk(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return s.length>=n.length?n.apply(this,s):function(){for(var u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];return e.apply(t,[].concat(s,h))}}}function Ok(n){return{}.toString.call(n).includes("Object")}function Nk(n){return n||OA("configIsRequired"),Ok(n)||OA("configType"),n.urls?(Pk(),{paths:{vs:n.urls.monacoBase}}):n}function Pk(){console.warn(TR.deprecation)}function kk(n,e){throw new Error(n[e]||n.default)}var TR={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},OA=xk(kk)(TR),Vk={config:Nk},Mk=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return t.reduceRight(function(o,u){return u(o)},s)}};function AR(n,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&n[t]&&Object.assign(e[t],AR(n[t],e[t]))}),RA(RA({},n),e)}var Lk={type:"cancelation",msg:"operation is manually canceled"};function Cy(n){var e=!1,t=new Promise(function(r,s){n.then(function(o){return e?s(Lk):r(o)}),n.catch(s)});return t.cancel=function(){return e=!0},t}var jk=Ck.create({config:Dk,isInitialized:!1,resolve:null,reject:null,monaco:null}),SR=uk(jk,2),bm=SR[0],a_=SR[1];function Uk(n){var e=Vk.config(n),t=e.monaco,r=lk(e,["monaco"]);a_(function(s){return{config:AR(s.config,r),monaco:t}})}function Fk(){var n=bm(function(e){var t=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:t,isInitialized:r,resolve:s}});if(!n.isInitialized){if(a_({isInitialized:!0}),n.monaco)return n.resolve(n.monaco),Cy(Dy);if(window.monaco&&window.monaco.editor)return IR(window.monaco),n.resolve(window.monaco),Cy(Dy);Mk(Bk,qk)(Hk)}return Cy(Dy)}function Bk(n){return document.body.appendChild(n)}function zk(n){var e=document.createElement("script");return n&&(e.src=n),e}function qk(n){var e=bm(function(r){var s=r.config,o=r.reject;return{config:s,reject:o}}),t=zk("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return n()},t.onerror=e.reject,t}function Hk(){var n=bm(function(t){var r=t.config,s=t.resolve,o=t.reject;return{config:r,resolve:s,reject:o}}),e=window.require;e.config(n.config),e(["vs/editor/editor.main"],function(t){IR(t),n.resolve(t)},function(t){n.reject(t)})}function IR(n){bm().monaco||a_({monaco:n})}function $k(){return bm(function(n){var e=n.monaco;return e})}var Dy=new Promise(function(n,e){return a_({resolve:n,reject:e})}),RR={config:Uk,init:Fk,__getMonacoInstance:$k},Gk={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},xy=Gk,Wk={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Kk=Wk;function Yk({children:n}){return yh.createElement("div",{style:Kk.container},n)}var Qk=Yk,Xk=Qk;function Zk({width:n,height:e,isEditorReady:t,loading:r,_ref:s,className:o,wrapperProps:u}){return yh.createElement("section",{style:{...xy.wrapper,width:n,height:e},...u},!t&&yh.createElement(Xk,null,r),yh.createElement("div",{ref:s,style:{...xy.fullWidth,...!t&&xy.hide},className:o}))}var Jk=Zk,CR=B.memo(Jk);function eV(n){B.useEffect(n,[])}var DR=eV;function tV(n,e,t=!0){let r=B.useRef(!0);B.useEffect(r.current||!t?()=>{r.current=!1}:n,e)}var Ui=tV;function xf(){}function ph(n,e,t,r){return nV(n,r)||rV(n,e,t,r)}function nV(n,e){return n.editor.getModel(xR(n,e))}function rV(n,e,t,r){return n.editor.createModel(e,t,r?xR(n,r):void 0)}function xR(n,e){return n.Uri.parse(e)}function iV({original:n,modified:e,language:t,originalLanguage:r,modifiedLanguage:s,originalModelPath:o,modifiedModelPath:u,keepCurrentOriginalModel:h=!1,keepCurrentModifiedModel:f=!1,theme:p="light",loading:v="Loading...",options:b={},height:A="100%",width:D="100%",className:M,wrapperProps:F={},beforeMount:V=xf,onMount:H=xf}){let[J,se]=B.useState(!1),[ue,de]=B.useState(!0),be=B.useRef(null),U=B.useRef(null),P=B.useRef(null),N=B.useRef(H),k=B.useRef(V),z=B.useRef(!1);DR(()=>{let xe=RR.init();return xe.then(le=>(U.current=le)&&de(!1)).catch(le=>(le==null?void 0:le.type)!=="cancelation"&&console.error("Monaco initialization: error:",le)),()=>be.current?_t():xe.cancel()}),Ui(()=>{if(be.current&&U.current){let xe=be.current.getOriginalEditor(),le=ph(U.current,n||"",r||t||"text",o||"");le!==xe.getModel()&&xe.setModel(le)}},[o],J),Ui(()=>{if(be.current&&U.current){let xe=be.current.getModifiedEditor(),le=ph(U.current,e||"",s||t||"text",u||"");le!==xe.getModel()&&xe.setModel(le)}},[u],J),Ui(()=>{let xe=be.current.getModifiedEditor();xe.getOption(U.current.editor.EditorOption.readOnly)?xe.setValue(e||""):e!==xe.getValue()&&(xe.executeEdits("",[{range:xe.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),xe.pushUndoStop())},[e],J),Ui(()=>{var xe,le;(le=(xe=be.current)==null?void 0:xe.getModel())==null||le.original.setValue(n||"")},[n],J),Ui(()=>{let{original:xe,modified:le}=be.current.getModel();U.current.editor.setModelLanguage(xe,r||t||"text"),U.current.editor.setModelLanguage(le,s||t||"text")},[t,r,s],J),Ui(()=>{var xe;(xe=U.current)==null||xe.editor.setTheme(p)},[p],J),Ui(()=>{var xe;(xe=be.current)==null||xe.updateOptions(b)},[b],J);let W=B.useCallback(()=>{var Ne;if(!U.current)return;k.current(U.current);let xe=ph(U.current,n||"",r||t||"text",o||""),le=ph(U.current,e||"",s||t||"text",u||"");(Ne=be.current)==null||Ne.setModel({original:xe,modified:le})},[t,e,s,n,r,o,u]),j=B.useCallback(()=>{var xe;!z.current&&P.current&&(be.current=U.current.editor.createDiffEditor(P.current,{automaticLayout:!0,...b}),W(),(xe=U.current)==null||xe.editor.setTheme(p),se(!0),z.current=!0)},[b,p,W]);B.useEffect(()=>{J&&N.current(be.current,U.current)},[J]),B.useEffect(()=>{!ue&&!J&&j()},[ue,J,j]);function _t(){var le,Ne,Oe,Ye;let xe=(le=be.current)==null?void 0:le.getModel();h||((Ne=xe==null?void 0:xe.original)==null||Ne.dispose()),f||((Oe=xe==null?void 0:xe.modified)==null||Oe.dispose()),(Ye=be.current)==null||Ye.dispose()}return yh.createElement(CR,{width:D,height:A,isEditorReady:J,loading:v,_ref:P,className:M,wrapperProps:F})}var sV=iV;B.memo(sV);function aV(n){let e=B.useRef();return B.useEffect(()=>{e.current=n},[n]),e.current}var oV=aV,Xp=new Map;function lV({defaultValue:n,defaultLanguage:e,defaultPath:t,value:r,language:s,path:o,theme:u="light",line:h,loading:f="Loading...",options:p={},overrideServices:v={},saveViewState:b=!0,keepCurrentModel:A=!1,width:D="100%",height:M="100%",className:F,wrapperProps:V={},beforeMount:H=xf,onMount:J=xf,onChange:se,onValidate:ue=xf}){let[de,be]=B.useState(!1),[U,P]=B.useState(!0),N=B.useRef(null),k=B.useRef(null),z=B.useRef(null),W=B.useRef(J),j=B.useRef(H),_t=B.useRef(),xe=B.useRef(r),le=oV(o),Ne=B.useRef(!1),Oe=B.useRef(!1);DR(()=>{let re=RR.init();return re.then(we=>(N.current=we)&&P(!1)).catch(we=>(we==null?void 0:we.type)!=="cancelation"&&console.error("Monaco initialization: error:",we)),()=>k.current?O():re.cancel()}),Ui(()=>{var we,Ee,Se,Fe;let re=ph(N.current,n||r||"",e||s||"",o||t||"");re!==((we=k.current)==null?void 0:we.getModel())&&(b&&Xp.set(le,(Ee=k.current)==null?void 0:Ee.saveViewState()),(Se=k.current)==null||Se.setModel(re),b&&((Fe=k.current)==null||Fe.restoreViewState(Xp.get(o))))},[o],de),Ui(()=>{var re;(re=k.current)==null||re.updateOptions(p)},[p],de),Ui(()=>{!k.current||r===void 0||(k.current.getOption(N.current.editor.EditorOption.readOnly)?k.current.setValue(r):r!==k.current.getValue()&&(Oe.current=!0,k.current.executeEdits("",[{range:k.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),k.current.pushUndoStop(),Oe.current=!1))},[r],de),Ui(()=>{var we,Ee;let re=(we=k.current)==null?void 0:we.getModel();re&&s&&((Ee=N.current)==null||Ee.editor.setModelLanguage(re,s))},[s],de),Ui(()=>{var re;h!==void 0&&((re=k.current)==null||re.revealLine(h))},[h],de),Ui(()=>{var re;(re=N.current)==null||re.editor.setTheme(u)},[u],de);let Ye=B.useCallback(()=>{var re;if(!(!z.current||!N.current)&&!Ne.current){j.current(N.current);let we=o||t,Ee=ph(N.current,r||n||"",e||s||"",we||"");k.current=(re=N.current)==null?void 0:re.editor.create(z.current,{model:Ee,automaticLayout:!0,...p},v),b&&k.current.restoreViewState(Xp.get(we)),N.current.editor.setTheme(u),h!==void 0&&k.current.revealLine(h),be(!0),Ne.current=!0}},[n,e,t,r,s,o,p,v,b,u,h]);B.useEffect(()=>{de&&W.current(k.current,N.current)},[de]),B.useEffect(()=>{!U&&!de&&Ye()},[U,de,Ye]),xe.current=r,B.useEffect(()=>{var re,we;de&&se&&((re=_t.current)==null||re.dispose(),_t.current=(we=k.current)==null?void 0:we.onDidChangeModelContent(Ee=>{Oe.current||se(k.current.getValue(),Ee)}))},[de,se]),B.useEffect(()=>{if(de){let re=N.current.editor.onDidChangeMarkers(we=>{var Se;let Ee=(Se=k.current.getModel())==null?void 0:Se.uri;if(Ee&&we.find(Fe=>Fe.path===Ee.path)){let Fe=N.current.editor.getModelMarkers({resource:Ee});ue==null||ue(Fe)}});return()=>{re==null||re.dispose()}}return()=>{}},[de,ue]);function O(){var re,we;(re=_t.current)==null||re.dispose(),A?b&&Xp.set(o,k.current.saveViewState()):(we=k.current.getModel())==null||we.dispose(),k.current.dispose()}return yh.createElement(CR,{width:D,height:M,isEditorReady:de,loading:f,_ref:z,className:F,wrapperProps:V})}var uV=lV,cV=B.memo(uV),OR=cV,hg={exports:{}};/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var hV=hg.exports,NA;function dV(){return NA||(NA=1,function(n,e){(function(t,r){n.exports=r()})(hV,function(){const t=new Map,r={set(S,g,w){t.has(S)||t.set(S,new Map);const C=t.get(S);C.has(g)||C.size===0?C.set(g,w):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(C.keys())[0]}.`)},get:(S,g)=>t.has(S)&&t.get(S).get(g)||null,remove(S,g){if(!t.has(S))return;const w=t.get(S);w.delete(g),w.size===0&&t.delete(S)}},s="transitionend",o=S=>(S&&window.CSS&&window.CSS.escape&&(S=S.replace(/#([^\s"#']+)/g,(g,w)=>`#${CSS.escape(w)}`)),S),u=S=>{S.dispatchEvent(new Event(s))},h=S=>!(!S||typeof S!="object")&&(S.jquery!==void 0&&(S=S[0]),S.nodeType!==void 0),f=S=>h(S)?S.jquery?S[0]:S:typeof S=="string"&&S.length>0?document.querySelector(o(S)):null,p=S=>{if(!h(S)||S.getClientRects().length===0)return!1;const g=getComputedStyle(S).getPropertyValue("visibility")==="visible",w=S.closest("details:not([open])");if(!w)return g;if(w!==S){const C=S.closest("summary");if(C&&C.parentNode!==w||C===null)return!1}return g},v=S=>!S||S.nodeType!==Node.ELEMENT_NODE||!!S.classList.contains("disabled")||(S.disabled!==void 0?S.disabled:S.hasAttribute("disabled")&&S.getAttribute("disabled")!=="false"),b=S=>{if(!document.documentElement.attachShadow)return null;if(typeof S.getRootNode=="function"){const g=S.getRootNode();return g instanceof ShadowRoot?g:null}return S instanceof ShadowRoot?S:S.parentNode?b(S.parentNode):null},A=()=>{},D=S=>{S.offsetHeight},M=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,F=[],V=()=>document.documentElement.dir==="rtl",H=S=>{var g;g=()=>{const w=M();if(w){const C=S.NAME,q=w.fn[C];w.fn[C]=S.jQueryInterface,w.fn[C].Constructor=S,w.fn[C].noConflict=()=>(w.fn[C]=q,S.jQueryInterface)}},document.readyState==="loading"?(F.length||document.addEventListener("DOMContentLoaded",()=>{for(const w of F)w()}),F.push(g)):g()},J=(S,g=[],w=S)=>typeof S=="function"?S(...g):w,se=(S,g,w=!0)=>{if(!w)return void J(S);const C=(ie=>{if(!ie)return 0;let{transitionDuration:he,transitionDelay:Ae}=window.getComputedStyle(ie);const fe=Number.parseFloat(he),ve=Number.parseFloat(Ae);return fe||ve?(he=he.split(",")[0],Ae=Ae.split(",")[0],1e3*(Number.parseFloat(he)+Number.parseFloat(Ae))):0})(g)+5;let q=!1;const K=({target:ie})=>{ie===g&&(q=!0,g.removeEventListener(s,K),J(S))};g.addEventListener(s,K),setTimeout(()=>{q||u(g)},C)},ue=(S,g,w,C)=>{const q=S.length;let K=S.indexOf(g);return K===-1?!w&&C?S[q-1]:S[0]:(K+=w?1:-1,C&&(K=(K+q)%q),S[Math.max(0,Math.min(K,q-1))])},de=/[^.]*(?=\..*)\.|.*/,be=/\..*/,U=/::\d+$/,P={};let N=1;const k={mouseenter:"mouseover",mouseleave:"mouseout"},z=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function W(S,g){return g&&`${g}::${N++}`||S.uidEvent||N++}function j(S){const g=W(S);return S.uidEvent=g,P[g]=P[g]||{},P[g]}function _t(S,g,w=null){return Object.values(S).find(C=>C.callable===g&&C.delegationSelector===w)}function xe(S,g,w){const C=typeof g=="string",q=C?w:g||w;let K=Ye(S);return z.has(K)||(K=S),[C,q,K]}function le(S,g,w,C,q){if(typeof g!="string"||!S)return;let[K,ie,he]=xe(g,w,C);g in k&&(ie=(qe=>function($e){if(!$e.relatedTarget||$e.relatedTarget!==$e.delegateTarget&&!$e.delegateTarget.contains($e.relatedTarget))return qe.call(this,$e)})(ie));const Ae=j(S),fe=Ae[he]||(Ae[he]={}),ve=_t(fe,ie,K?w:null);if(ve)return void(ve.oneOff=ve.oneOff&&q);const ye=W(ie,g.replace(de,"")),Xe=K?function(Be,qe,$e){return function Ge(vt){const Ut=Be.querySelectorAll(qe);for(let{target:Ve}=vt;Ve&&Ve!==this;Ve=Ve.parentNode)for(const yt of Ut)if(yt===Ve)return re(vt,{delegateTarget:Ve}),Ge.oneOff&&O.off(Be,vt.type,qe,$e),$e.apply(Ve,[vt])}}(S,w,ie):function(Be,qe){return function $e(Ge){return re(Ge,{delegateTarget:Be}),$e.oneOff&&O.off(Be,Ge.type,qe),qe.apply(Be,[Ge])}}(S,ie);Xe.delegationSelector=K?w:null,Xe.callable=ie,Xe.oneOff=q,Xe.uidEvent=ye,fe[ye]=Xe,S.addEventListener(he,Xe,K)}function Ne(S,g,w,C,q){const K=_t(g[w],C,q);K&&(S.removeEventListener(w,K,!!q),delete g[w][K.uidEvent])}function Oe(S,g,w,C){const q=g[w]||{};for(const[K,ie]of Object.entries(q))K.includes(C)&&Ne(S,g,w,ie.callable,ie.delegationSelector)}function Ye(S){return S=S.replace(be,""),k[S]||S}const O={on(S,g,w,C){le(S,g,w,C,!1)},one(S,g,w,C){le(S,g,w,C,!0)},off(S,g,w,C){if(typeof g!="string"||!S)return;const[q,K,ie]=xe(g,w,C),he=ie!==g,Ae=j(S),fe=Ae[ie]||{},ve=g.startsWith(".");if(K===void 0){if(ve)for(const ye of Object.keys(Ae))Oe(S,Ae,ye,g.slice(1));for(const[ye,Xe]of Object.entries(fe)){const Be=ye.replace(U,"");he&&!g.includes(Be)||Ne(S,Ae,ie,Xe.callable,Xe.delegationSelector)}}else{if(!Object.keys(fe).length)return;Ne(S,Ae,ie,K,q?w:null)}},trigger(S,g,w){if(typeof g!="string"||!S)return null;const C=M();let q=null,K=!0,ie=!0,he=!1;g!==Ye(g)&&C&&(q=C.Event(g,w),C(S).trigger(q),K=!q.isPropagationStopped(),ie=!q.isImmediatePropagationStopped(),he=q.isDefaultPrevented());const Ae=re(new Event(g,{bubbles:K,cancelable:!0}),w);return he&&Ae.preventDefault(),ie&&S.dispatchEvent(Ae),Ae.defaultPrevented&&q&&q.preventDefault(),Ae}};function re(S,g={}){for(const[w,C]of Object.entries(g))try{S[w]=C}catch{Object.defineProperty(S,w,{configurable:!0,get:()=>C})}return S}function we(S){if(S==="true")return!0;if(S==="false")return!1;if(S===Number(S).toString())return Number(S);if(S===""||S==="null")return null;if(typeof S!="string")return S;try{return JSON.parse(decodeURIComponent(S))}catch{return S}}function Ee(S){return S.replace(/[A-Z]/g,g=>`-${g.toLowerCase()}`)}const Se={setDataAttribute(S,g,w){S.setAttribute(`data-bs-${Ee(g)}`,w)},removeDataAttribute(S,g){S.removeAttribute(`data-bs-${Ee(g)}`)},getDataAttributes(S){if(!S)return{};const g={},w=Object.keys(S.dataset).filter(C=>C.startsWith("bs")&&!C.startsWith("bsConfig"));for(const C of w){let q=C.replace(/^bs/,"");q=q.charAt(0).toLowerCase()+q.slice(1,q.length),g[q]=we(S.dataset[C])}return g},getDataAttribute:(S,g)=>we(S.getAttribute(`data-bs-${Ee(g)}`))};class Fe{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(g){return g=this._mergeConfigObj(g),g=this._configAfterMerge(g),this._typeCheckConfig(g),g}_configAfterMerge(g){return g}_mergeConfigObj(g,w){const C=h(w)?Se.getDataAttribute(w,"config"):{};return{...this.constructor.Default,...typeof C=="object"?C:{},...h(w)?Se.getDataAttributes(w):{},...typeof g=="object"?g:{}}}_typeCheckConfig(g,w=this.constructor.DefaultType){for(const[q,K]of Object.entries(w)){const ie=g[q],he=h(ie)?"element":(C=ie)==null?`${C}`:Object.prototype.toString.call(C).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(K).test(he))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${q}" provided type "${he}" but expected type "${K}".`)}var C}}class Ue extends Fe{constructor(g,w){super(),(g=f(g))&&(this._element=g,this._config=this._getConfig(w),r.set(this._element,this.constructor.DATA_KEY,this))}dispose(){r.remove(this._element,this.constructor.DATA_KEY),O.off(this._element,this.constructor.EVENT_KEY);for(const g of Object.getOwnPropertyNames(this))this[g]=null}_queueCallback(g,w,C=!0){se(g,w,C)}_getConfig(g){return g=this._mergeConfigObj(g,this._element),g=this._configAfterMerge(g),this._typeCheckConfig(g),g}static getInstance(g){return r.get(f(g),this.DATA_KEY)}static getOrCreateInstance(g,w={}){return this.getInstance(g)||new this(g,typeof w=="object"?w:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(g){return`${g}${this.EVENT_KEY}`}}const Ot=S=>{let g=S.getAttribute("data-bs-target");if(!g||g==="#"){let w=S.getAttribute("href");if(!w||!w.includes("#")&&!w.startsWith("."))return null;w.includes("#")&&!w.startsWith("#")&&(w=`#${w.split("#")[1]}`),g=w&&w!=="#"?w.trim():null}return g?g.split(",").map(w=>o(w)).join(","):null},Te={find:(S,g=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(g,S)),findOne:(S,g=document.documentElement)=>Element.prototype.querySelector.call(g,S),children:(S,g)=>[].concat(...S.children).filter(w=>w.matches(g)),parents(S,g){const w=[];let C=S.parentNode.closest(g);for(;C;)w.push(C),C=C.parentNode.closest(g);return w},prev(S,g){let w=S.previousElementSibling;for(;w;){if(w.matches(g))return[w];w=w.previousElementSibling}return[]},next(S,g){let w=S.nextElementSibling;for(;w;){if(w.matches(g))return[w];w=w.nextElementSibling}return[]},focusableChildren(S){const g=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(w=>`${w}:not([tabindex^="-"])`).join(",");return this.find(g,S).filter(w=>!v(w)&&p(w))},getSelectorFromElement(S){const g=Ot(S);return g&&Te.findOne(g)?g:null},getElementFromSelector(S){const g=Ot(S);return g?Te.findOne(g):null},getMultipleElementsFromSelector(S){const g=Ot(S);return g?Te.find(g):[]}},ut=(S,g="hide")=>{const w=`click.dismiss${S.EVENT_KEY}`,C=S.NAME;O.on(document,w,`[data-bs-dismiss="${C}"]`,function(q){if(["A","AREA"].includes(this.tagName)&&q.preventDefault(),v(this))return;const K=Te.getElementFromSelector(this)||this.closest(`.${C}`);S.getOrCreateInstance(K)[g]()})},ct=".bs.alert",Dn=`close${ct}`,Dr=`closed${ct}`;class vn extends Ue{static get NAME(){return"alert"}close(){if(O.trigger(this._element,Dn).defaultPrevented)return;this._element.classList.remove("show");const g=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,g)}_destroyElement(){this._element.remove(),O.trigger(this._element,Dr),this.dispose()}static jQueryInterface(g){return this.each(function(){const w=vn.getOrCreateInstance(this);if(typeof g=="string"){if(w[g]===void 0||g.startsWith("_")||g==="constructor")throw new TypeError(`No method named "${g}"`);w[g](this)}})}}ut(vn,"close"),H(vn);const Dt='[data-bs-toggle="button"]';class Un extends Ue{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(g){return this.each(function(){const w=Un.getOrCreateInstance(this);g==="toggle"&&w[g]()})}}O.on(document,"click.bs.button.data-api",Dt,S=>{S.preventDefault();const g=S.target.closest(Dt);Un.getOrCreateInstance(g).toggle()}),H(Un);const kt=".bs.swipe",$i=`touchstart${kt}`,_s=`touchmove${kt}`,vs=`touchend${kt}`,ys=`pointerdown${kt}`,$s=`pointerup${kt}`,Ql={endCallback:null,leftCallback:null,rightCallback:null},Gs={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class xn extends Fe{constructor(g,w){super(),this._element=g,g&&xn.isSupported()&&(this._config=this._getConfig(w),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Ql}static get DefaultType(){return Gs}static get NAME(){return"swipe"}dispose(){O.off(this._element,kt)}_start(g){this._supportPointerEvents?this._eventIsPointerPenTouch(g)&&(this._deltaX=g.clientX):this._deltaX=g.touches[0].clientX}_end(g){this._eventIsPointerPenTouch(g)&&(this._deltaX=g.clientX-this._deltaX),this._handleSwipe(),J(this._config.endCallback)}_move(g){this._deltaX=g.touches&&g.touches.length>1?0:g.touches[0].clientX-this._deltaX}_handleSwipe(){const g=Math.abs(this._deltaX);if(g<=40)return;const w=g/this._deltaX;this._deltaX=0,w&&J(w>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(O.on(this._element,ys,g=>this._start(g)),O.on(this._element,$s,g=>this._end(g)),this._element.classList.add("pointer-event")):(O.on(this._element,$i,g=>this._start(g)),O.on(this._element,_s,g=>this._move(g)),O.on(this._element,vs,g=>this._end(g)))}_eventIsPointerPenTouch(g){return this._supportPointerEvents&&(g.pointerType==="pen"||g.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Br=".bs.carousel",tn=".data-api",Ht="next",er="prev",zr="left",Si="right",Io=`slide${Br}`,Ii=`slid${Br}`,qr=`keydown${Br}`,On=`mouseenter${Br}`,Ca=`mouseleave${Br}`,Hr=`dragstart${Br}`,Fn=`load${Br}${tn}`,bs=`click${Br}${tn}`,Da="carousel",Gi="active",$r=".active",hi=".carousel-item",jt=$r+hi,Vt={ArrowLeft:Si,ArrowRight:zr},Gr={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},St={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class hn extends Ue{constructor(g,w){super(g,w),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Te.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Da&&this.cycle()}static get Default(){return Gr}static get DefaultType(){return St}static get NAME(){return"carousel"}next(){this._slide(Ht)}nextWhenVisible(){!document.hidden&&p(this._element)&&this.next()}prev(){this._slide(er)}pause(){this._isSliding&&u(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?O.one(this._element,Ii,()=>this.cycle()):this.cycle())}to(g){const w=this._getItems();if(g>w.length-1||g<0)return;if(this._isSliding)return void O.one(this._element,Ii,()=>this.to(g));const C=this._getItemIndex(this._getActive());if(C===g)return;const q=g>C?Ht:er;this._slide(q,w[g])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(g){return g.defaultInterval=g.interval,g}_addEventListeners(){this._config.keyboard&&O.on(this._element,qr,g=>this._keydown(g)),this._config.pause==="hover"&&(O.on(this._element,On,()=>this.pause()),O.on(this._element,Ca,()=>this._maybeEnableCycle())),this._config.touch&&xn.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const w of Te.find(".carousel-item img",this._element))O.on(w,Hr,C=>C.preventDefault());const g={leftCallback:()=>this._slide(this._directionToOrder(zr)),rightCallback:()=>this._slide(this._directionToOrder(Si)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new xn(this._element,g)}_keydown(g){if(/input|textarea/i.test(g.target.tagName))return;const w=Vt[g.key];w&&(g.preventDefault(),this._slide(this._directionToOrder(w)))}_getItemIndex(g){return this._getItems().indexOf(g)}_setActiveIndicatorElement(g){if(!this._indicatorsElement)return;const w=Te.findOne($r,this._indicatorsElement);w.classList.remove(Gi),w.removeAttribute("aria-current");const C=Te.findOne(`[data-bs-slide-to="${g}"]`,this._indicatorsElement);C&&(C.classList.add(Gi),C.setAttribute("aria-current","true"))}_updateInterval(){const g=this._activeElement||this._getActive();if(!g)return;const w=Number.parseInt(g.getAttribute("data-bs-interval"),10);this._config.interval=w||this._config.defaultInterval}_slide(g,w=null){if(this._isSliding)return;const C=this._getActive(),q=g===Ht,K=w||ue(this._getItems(),C,q,this._config.wrap);if(K===C)return;const ie=this._getItemIndex(K),he=ye=>O.trigger(this._element,ye,{relatedTarget:K,direction:this._orderToDirection(g),from:this._getItemIndex(C),to:ie});if(he(Io).defaultPrevented||!C||!K)return;const Ae=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ie),this._activeElement=K;const fe=q?"carousel-item-start":"carousel-item-end",ve=q?"carousel-item-next":"carousel-item-prev";K.classList.add(ve),D(K),C.classList.add(fe),K.classList.add(fe),this._queueCallback(()=>{K.classList.remove(fe,ve),K.classList.add(Gi),C.classList.remove(Gi,ve,fe),this._isSliding=!1,he(Ii)},C,this._isAnimated()),Ae&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Te.findOne(jt,this._element)}_getItems(){return Te.find(hi,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(g){return V()?g===zr?er:Ht:g===zr?Ht:er}_orderToDirection(g){return V()?g===er?zr:Si:g===er?Si:zr}static jQueryInterface(g){return this.each(function(){const w=hn.getOrCreateInstance(this,g);if(typeof g!="number"){if(typeof g=="string"){if(w[g]===void 0||g.startsWith("_")||g==="constructor")throw new TypeError(`No method named "${g}"`);w[g]()}}else w.to(g)})}}O.on(document,bs,"[data-bs-slide], [data-bs-slide-to]",function(S){const g=Te.getElementFromSelector(this);if(!g||!g.classList.contains(Da))return;S.preventDefault();const w=hn.getOrCreateInstance(g),C=this.getAttribute("data-bs-slide-to");return C?(w.to(C),void w._maybeEnableCycle()):Se.getDataAttribute(this,"slide")==="next"?(w.next(),void w._maybeEnableCycle()):(w.prev(),void w._maybeEnableCycle())}),O.on(window,Fn,()=>{const S=Te.find('[data-bs-ride="carousel"]');for(const g of S)hn.getOrCreateInstance(g)}),H(hn);const xr=".bs.collapse",Wi=`show${xr}`,$t=`shown${xr}`,xa=`hide${xr}`,di=`hidden${xr}`,Wr=`click${xr}.data-api`,Ki="show",Kr="collapse",mr="collapsing",fi=`:scope .${Kr} .${Kr}`,Gt='[data-bs-toggle="collapse"]',nn={parent:null,toggle:!0},Ri={parent:"(null|element)",toggle:"boolean"};class Or extends Ue{constructor(g,w){super(g,w),this._isTransitioning=!1,this._triggerArray=[];const C=Te.find(Gt);for(const q of C){const K=Te.getSelectorFromElement(q),ie=Te.find(K).filter(he=>he===this._element);K!==null&&ie.length&&this._triggerArray.push(q)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return nn}static get DefaultType(){return Ri}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let g=[];if(this._config.parent&&(g=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(q=>q!==this._element).map(q=>Or.getOrCreateInstance(q,{toggle:!1}))),g.length&&g[0]._isTransitioning||O.trigger(this._element,Wi).defaultPrevented)return;for(const q of g)q.hide();const w=this._getDimension();this._element.classList.remove(Kr),this._element.classList.add(mr),this._element.style[w]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const C=`scroll${w[0].toUpperCase()+w.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(mr),this._element.classList.add(Kr,Ki),this._element.style[w]="",O.trigger(this._element,$t)},this._element,!0),this._element.style[w]=`${this._element[C]}px`}hide(){if(this._isTransitioning||!this._isShown()||O.trigger(this._element,xa).defaultPrevented)return;const g=this._getDimension();this._element.style[g]=`${this._element.getBoundingClientRect()[g]}px`,D(this._element),this._element.classList.add(mr),this._element.classList.remove(Kr,Ki);for(const w of this._triggerArray){const C=Te.getElementFromSelector(w);C&&!this._isShown(C)&&this._addAriaAndCollapsedClass([w],!1)}this._isTransitioning=!0,this._element.style[g]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(mr),this._element.classList.add(Kr),O.trigger(this._element,di)},this._element,!0)}_isShown(g=this._element){return g.classList.contains(Ki)}_configAfterMerge(g){return g.toggle=!!g.toggle,g.parent=f(g.parent),g}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const g=this._getFirstLevelChildren(Gt);for(const w of g){const C=Te.getElementFromSelector(w);C&&this._addAriaAndCollapsedClass([w],this._isShown(C))}}_getFirstLevelChildren(g){const w=Te.find(fi,this._config.parent);return Te.find(g,this._config.parent).filter(C=>!w.includes(C))}_addAriaAndCollapsedClass(g,w){if(g.length)for(const C of g)C.classList.toggle("collapsed",!w),C.setAttribute("aria-expanded",w)}static jQueryInterface(g){const w={};return typeof g=="string"&&/show|hide/.test(g)&&(w.toggle=!1),this.each(function(){const C=Or.getOrCreateInstance(this,w);if(typeof g=="string"){if(C[g]===void 0)throw new TypeError(`No method named "${g}"`);C[g]()}})}}O.on(document,Wr,Gt,function(S){(S.target.tagName==="A"||S.delegateTarget&&S.delegateTarget.tagName==="A")&&S.preventDefault();for(const g of Te.getMultipleElementsFromSelector(this))Or.getOrCreateInstance(g,{toggle:!1}).toggle()}),H(Or);var Me="top",Qe="bottom",nt="right",ht="left",rn="auto",yn=[Me,Qe,nt,ht],Gn="start",pr="end",ws="clippingParents",Bt="viewport",Yi="popper",Oa="reference",gr=yn.reduce(function(S,g){return S.concat([g+"-"+Gn,g+"-"+pr])},[]),tr=[].concat(yn,[rn]).reduce(function(S,g){return S.concat([g,g+"-"+Gn,g+"-"+pr])},[]),Nr="beforeRead",hc="read",Ro="afterRead",Co="beforeMain",Xl="main",Es="afterMain",Ts="beforeWrite",Yr="write",nr="afterWrite",Zl=[Nr,hc,Ro,Co,Xl,Es,Ts,Yr,nr];function mi(S){return S?(S.nodeName||"").toLowerCase():null}function Nn(S){if(S==null)return window;if(S.toString()!=="[object Window]"){var g=S.ownerDocument;return g&&g.defaultView||window}return S}function Ci(S){return S instanceof Nn(S).Element||S instanceof Element}function Wn(S){return S instanceof Nn(S).HTMLElement||S instanceof HTMLElement}function Di(S){return typeof ShadowRoot<"u"&&(S instanceof Nn(S).ShadowRoot||S instanceof ShadowRoot)}const Wt={name:"applyStyles",enabled:!0,phase:"write",fn:function(S){var g=S.state;Object.keys(g.elements).forEach(function(w){var C=g.styles[w]||{},q=g.attributes[w]||{},K=g.elements[w];Wn(K)&&mi(K)&&(Object.assign(K.style,C),Object.keys(q).forEach(function(ie){var he=q[ie];he===!1?K.removeAttribute(ie):K.setAttribute(ie,he===!0?"":he)}))})},effect:function(S){var g=S.state,w={popper:{position:g.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(g.elements.popper.style,w.popper),g.styles=w,g.elements.arrow&&Object.assign(g.elements.arrow.style,w.arrow),function(){Object.keys(g.elements).forEach(function(C){var q=g.elements[C],K=g.attributes[C]||{},ie=Object.keys(g.styles.hasOwnProperty(C)?g.styles[C]:w[C]).reduce(function(he,Ae){return he[Ae]="",he},{});Wn(q)&&mi(q)&&(Object.assign(q.style,ie),Object.keys(K).forEach(function(he){q.removeAttribute(he)}))})}},requires:["computeStyles"]};function Kn(S){return S.split("-")[0]}var Qr=Math.max,As=Math.min,rt=Math.round;function Ss(){var S=navigator.userAgentData;return S!=null&&S.brands&&Array.isArray(S.brands)?S.brands.map(function(g){return g.brand+"/"+g.version}).join(" "):navigator.userAgent}function Is(){return!/^((?!chrome|android).)*safari/i.test(Ss())}function Yn(S,g,w){g===void 0&&(g=!1),w===void 0&&(w=!1);var C=S.getBoundingClientRect(),q=1,K=1;g&&Wn(S)&&(q=S.offsetWidth>0&&rt(C.width)/S.offsetWidth||1,K=S.offsetHeight>0&&rt(C.height)/S.offsetHeight||1);var ie=(Ci(S)?Nn(S):window).visualViewport,he=!Is()&&w,Ae=(C.left+(he&&ie?ie.offsetLeft:0))/q,fe=(C.top+(he&&ie?ie.offsetTop:0))/K,ve=C.width/q,ye=C.height/K;return{width:ve,height:ye,top:fe,right:Ae+ve,bottom:fe+ye,left:Ae,x:Ae,y:fe}}function Jl(S){var g=Yn(S),w=S.offsetWidth,C=S.offsetHeight;return Math.abs(g.width-w)<=1&&(w=g.width),Math.abs(g.height-C)<=1&&(C=g.height),{x:S.offsetLeft,y:S.offsetTop,width:w,height:C}}function Do(S,g){var w=g.getRootNode&&g.getRootNode();if(S.contains(g))return!0;if(w&&Di(w)){var C=g;do{if(C&&S.isSameNode(C))return!0;C=C.parentNode||C.host}while(C)}return!1}function pi(S){return Nn(S).getComputedStyle(S)}function eu(S){return["table","td","th"].indexOf(mi(S))>=0}function Qi(S){return((Ci(S)?S.ownerDocument:S.document)||window.document).documentElement}function xo(S){return mi(S)==="html"?S:S.assignedSlot||S.parentNode||(Di(S)?S.host:null)||Qi(S)}function xi(S){return Wn(S)&&pi(S).position!=="fixed"?S.offsetParent:null}function rr(S){for(var g=Nn(S),w=xi(S);w&&eu(w)&&pi(w).position==="static";)w=xi(w);return w&&(mi(w)==="html"||mi(w)==="body"&&pi(w).position==="static")?g:w||function(C){var q=/firefox/i.test(Ss());if(/Trident/i.test(Ss())&&Wn(C)&&pi(C).position==="fixed")return null;var K=xo(C);for(Di(K)&&(K=K.host);Wn(K)&&["html","body"].indexOf(mi(K))<0;){var ie=pi(K);if(ie.transform!=="none"||ie.perspective!=="none"||ie.contain==="paint"||["transform","perspective"].indexOf(ie.willChange)!==-1||q&&ie.willChange==="filter"||q&&ie.filter&&ie.filter!=="none")return K;K=K.parentNode}return null}(S)||g}function Ws(S){return["top","bottom"].indexOf(S)>=0?"x":"y"}function Xr(S,g,w){return Qr(S,As(g,w))}function Xi(S){return Object.assign({},{top:0,right:0,bottom:0,left:0},S)}function Zi(S,g){return g.reduce(function(w,C){return w[C]=S,w},{})}const Oo={name:"arrow",enabled:!0,phase:"main",fn:function(S){var g,w=S.state,C=S.name,q=S.options,K=w.elements.arrow,ie=w.modifiersData.popperOffsets,he=Kn(w.placement),Ae=Ws(he),fe=[ht,nt].indexOf(he)>=0?"height":"width";if(K&&ie){var ve=function(Pt,At){return Xi(typeof(Pt=typeof Pt=="function"?Pt(Object.assign({},At.rects,{placement:At.placement})):Pt)!="number"?Pt:Zi(Pt,yn))}(q.padding,w),ye=Jl(K),Xe=Ae==="y"?Me:ht,Be=Ae==="y"?Qe:nt,qe=w.rects.reference[fe]+w.rects.reference[Ae]-ie[Ae]-w.rects.popper[fe],$e=ie[Ae]-w.rects.reference[Ae],Ge=rr(K),vt=Ge?Ae==="y"?Ge.clientHeight||0:Ge.clientWidth||0:0,Ut=qe/2-$e/2,Ve=ve[Xe],yt=vt-ye[fe]-ve[Be],Ze=vt/2-ye[fe]/2+Ut,it=Xr(Ve,Ze,yt),It=Ae;w.modifiersData[C]=((g={})[It]=it,g.centerOffset=it-Ze,g)}},effect:function(S){var g=S.state,w=S.options.element,C=w===void 0?"[data-popper-arrow]":w;C!=null&&(typeof C!="string"||(C=g.elements.popper.querySelector(C)))&&Do(g.elements.popper,C)&&(g.elements.arrow=C)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Rs(S){return S.split("-")[1]}var Na={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Zr(S){var g,w=S.popper,C=S.popperRect,q=S.placement,K=S.variation,ie=S.offsets,he=S.position,Ae=S.gpuAcceleration,fe=S.adaptive,ve=S.roundOffsets,ye=S.isFixed,Xe=ie.x,Be=Xe===void 0?0:Xe,qe=ie.y,$e=qe===void 0?0:qe,Ge=typeof ve=="function"?ve({x:Be,y:$e}):{x:Be,y:$e};Be=Ge.x,$e=Ge.y;var vt=ie.hasOwnProperty("x"),Ut=ie.hasOwnProperty("y"),Ve=ht,yt=Me,Ze=window;if(fe){var it=rr(w),It="clientHeight",Pt="clientWidth";it===Nn(w)&&pi(it=Qi(w)).position!=="static"&&he==="absolute"&&(It="scrollHeight",Pt="scrollWidth"),(q===Me||(q===ht||q===nt)&&K===pr)&&(yt=Qe,$e-=(ye&&it===Ze&&Ze.visualViewport?Ze.visualViewport.height:it[It])-C.height,$e*=Ae?1:-1),q!==ht&&(q!==Me&&q!==Qe||K!==pr)||(Ve=nt,Be-=(ye&&it===Ze&&Ze.visualViewport?Ze.visualViewport.width:it[Pt])-C.width,Be*=Ae?1:-1)}var At,Jt=Object.assign({position:he},fe&&Na),br=ve===!0?function(Yt,mt){var wr=Yt.x,ar=Yt.y,zt=mt.devicePixelRatio||1;return{x:rt(wr*zt)/zt||0,y:rt(ar*zt)/zt||0}}({x:Be,y:$e},Nn(w)):{x:Be,y:$e};return Be=br.x,$e=br.y,Ae?Object.assign({},Jt,((At={})[yt]=Ut?"0":"",At[Ve]=vt?"0":"",At.transform=(Ze.devicePixelRatio||1)<=1?"translate("+Be+"px, "+$e+"px)":"translate3d("+Be+"px, "+$e+"px, 0)",At)):Object.assign({},Jt,((g={})[yt]=Ut?$e+"px":"",g[Ve]=vt?Be+"px":"",g.transform="",g))}const Cs={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(S){var g=S.state,w=S.options,C=w.gpuAcceleration,q=C===void 0||C,K=w.adaptive,ie=K===void 0||K,he=w.roundOffsets,Ae=he===void 0||he,fe={placement:Kn(g.placement),variation:Rs(g.placement),popper:g.elements.popper,popperRect:g.rects.popper,gpuAcceleration:q,isFixed:g.options.strategy==="fixed"};g.modifiersData.popperOffsets!=null&&(g.styles.popper=Object.assign({},g.styles.popper,Zr(Object.assign({},fe,{offsets:g.modifiersData.popperOffsets,position:g.options.strategy,adaptive:ie,roundOffsets:Ae})))),g.modifiersData.arrow!=null&&(g.styles.arrow=Object.assign({},g.styles.arrow,Zr(Object.assign({},fe,{offsets:g.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Ae})))),g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-placement":g.placement})},data:{}};var Jr={passive:!0};const Ji={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(S){var g=S.state,w=S.instance,C=S.options,q=C.scroll,K=q===void 0||q,ie=C.resize,he=ie===void 0||ie,Ae=Nn(g.elements.popper),fe=[].concat(g.scrollParents.reference,g.scrollParents.popper);return K&&fe.forEach(function(ve){ve.addEventListener("scroll",w.update,Jr)}),he&&Ae.addEventListener("resize",w.update,Jr),function(){K&&fe.forEach(function(ve){ve.removeEventListener("scroll",w.update,Jr)}),he&&Ae.removeEventListener("resize",w.update,Jr)}},data:{}};var Ds={left:"right",right:"left",bottom:"top",top:"bottom"};function Ks(S){return S.replace(/left|right|bottom|top/g,function(g){return Ds[g]})}var es={start:"end",end:"start"};function Oi(S){return S.replace(/start|end/g,function(g){return es[g]})}function Pa(S){var g=Nn(S);return{scrollLeft:g.pageXOffset,scrollTop:g.pageYOffset}}function bn(S){return Yn(Qi(S)).left+Pa(S).scrollLeft}function wt(S){var g=pi(S),w=g.overflow,C=g.overflowX,q=g.overflowY;return/auto|scroll|overlay|hidden/.test(w+q+C)}function ka(S){return["html","body","#document"].indexOf(mi(S))>=0?S.ownerDocument.body:Wn(S)&&wt(S)?S:ka(xo(S))}function Ni(S,g){var w;g===void 0&&(g=[]);var C=ka(S),q=C===((w=S.ownerDocument)==null?void 0:w.body),K=Nn(C),ie=q?[K].concat(K.visualViewport||[],wt(C)?C:[]):C,he=g.concat(ie);return q?he:he.concat(Ni(xo(ie)))}function No(S){return Object.assign({},S,{left:S.x,top:S.y,right:S.x+S.width,bottom:S.y+S.height})}function Va(S,g,w){return g===Bt?No(function(C,q){var K=Nn(C),ie=Qi(C),he=K.visualViewport,Ae=ie.clientWidth,fe=ie.clientHeight,ve=0,ye=0;if(he){Ae=he.width,fe=he.height;var Xe=Is();(Xe||!Xe&&q==="fixed")&&(ve=he.offsetLeft,ye=he.offsetTop)}return{width:Ae,height:fe,x:ve+bn(C),y:ye}}(S,w)):Ci(g)?function(C,q){var K=Yn(C,!1,q==="fixed");return K.top=K.top+C.clientTop,K.left=K.left+C.clientLeft,K.bottom=K.top+C.clientHeight,K.right=K.left+C.clientWidth,K.width=C.clientWidth,K.height=C.clientHeight,K.x=K.left,K.y=K.top,K}(g,w):No(function(C){var q,K=Qi(C),ie=Pa(C),he=(q=C.ownerDocument)==null?void 0:q.body,Ae=Qr(K.scrollWidth,K.clientWidth,he?he.scrollWidth:0,he?he.clientWidth:0),fe=Qr(K.scrollHeight,K.clientHeight,he?he.scrollHeight:0,he?he.clientHeight:0),ve=-ie.scrollLeft+bn(C),ye=-ie.scrollTop;return pi(he||K).direction==="rtl"&&(ve+=Qr(K.clientWidth,he?he.clientWidth:0)-Ae),{width:Ae,height:fe,x:ve,y:ye}}(Qi(S)))}function Ma(S){var g,w=S.reference,C=S.element,q=S.placement,K=q?Kn(q):null,ie=q?Rs(q):null,he=w.x+w.width/2-C.width/2,Ae=w.y+w.height/2-C.height/2;switch(K){case Me:g={x:he,y:w.y-C.height};break;case Qe:g={x:he,y:w.y+w.height};break;case nt:g={x:w.x+w.width,y:Ae};break;case ht:g={x:w.x-C.width,y:Ae};break;default:g={x:w.x,y:w.y}}var fe=K?Ws(K):null;if(fe!=null){var ve=fe==="y"?"height":"width";switch(ie){case Gn:g[fe]=g[fe]-(w[ve]/2-C[ve]/2);break;case pr:g[fe]=g[fe]+(w[ve]/2-C[ve]/2)}}return g}function _r(S,g){g===void 0&&(g={});var w=g,C=w.placement,q=C===void 0?S.placement:C,K=w.strategy,ie=K===void 0?S.strategy:K,he=w.boundary,Ae=he===void 0?ws:he,fe=w.rootBoundary,ve=fe===void 0?Bt:fe,ye=w.elementContext,Xe=ye===void 0?Yi:ye,Be=w.altBoundary,qe=Be!==void 0&&Be,$e=w.padding,Ge=$e===void 0?0:$e,vt=Xi(typeof Ge!="number"?Ge:Zi(Ge,yn)),Ut=Xe===Yi?Oa:Yi,Ve=S.rects.popper,yt=S.elements[qe?Ut:Xe],Ze=function(mt,wr,ar,zt){var bi=wr==="clippingParents"?function(xt){var or=Ni(xo(xt)),ii=["absolute","fixed"].indexOf(pi(xt).position)>=0&&Wn(xt)?rr(xt):xt;return Ci(ii)?or.filter(function(js){return Ci(js)&&Do(js,ii)&&mi(js)!=="body"}):[]}(mt):[].concat(wr),zn=[].concat(bi,[ar]),Ls=zn[0],En=zn.reduce(function(xt,or){var ii=Va(mt,or,zt);return xt.top=Qr(ii.top,xt.top),xt.right=As(ii.right,xt.right),xt.bottom=As(ii.bottom,xt.bottom),xt.left=Qr(ii.left,xt.left),xt},Va(mt,Ls,zt));return En.width=En.right-En.left,En.height=En.bottom-En.top,En.x=En.left,En.y=En.top,En}(Ci(yt)?yt:yt.contextElement||Qi(S.elements.popper),Ae,ve,ie),it=Yn(S.elements.reference),It=Ma({reference:it,element:Ve,placement:q}),Pt=No(Object.assign({},Ve,It)),At=Xe===Yi?Pt:it,Jt={top:Ze.top-At.top+vt.top,bottom:At.bottom-Ze.bottom+vt.bottom,left:Ze.left-At.left+vt.left,right:At.right-Ze.right+vt.right},br=S.modifiersData.offset;if(Xe===Yi&&br){var Yt=br[q];Object.keys(Jt).forEach(function(mt){var wr=[nt,Qe].indexOf(mt)>=0?1:-1,ar=[Me,Qe].indexOf(mt)>=0?"y":"x";Jt[mt]+=Yt[ar]*wr})}return Jt}function La(S,g){g===void 0&&(g={});var w=g,C=w.placement,q=w.boundary,K=w.rootBoundary,ie=w.padding,he=w.flipVariations,Ae=w.allowedAutoPlacements,fe=Ae===void 0?tr:Ae,ve=Rs(C),ye=ve?he?gr:gr.filter(function(qe){return Rs(qe)===ve}):yn,Xe=ye.filter(function(qe){return fe.indexOf(qe)>=0});Xe.length===0&&(Xe=ye);var Be=Xe.reduce(function(qe,$e){return qe[$e]=_r(S,{placement:$e,boundary:q,rootBoundary:K,padding:ie})[Kn($e)],qe},{});return Object.keys(Be).sort(function(qe,$e){return Be[qe]-Be[$e]})}const ei={name:"flip",enabled:!0,phase:"main",fn:function(S){var g=S.state,w=S.options,C=S.name;if(!g.modifiersData[C]._skip){for(var q=w.mainAxis,K=q===void 0||q,ie=w.altAxis,he=ie===void 0||ie,Ae=w.fallbackPlacements,fe=w.padding,ve=w.boundary,ye=w.rootBoundary,Xe=w.altBoundary,Be=w.flipVariations,qe=Be===void 0||Be,$e=w.allowedAutoPlacements,Ge=g.options.placement,vt=Kn(Ge),Ut=Ae||(vt!==Ge&&qe?function(xt){if(Kn(xt)===rn)return[];var or=Ks(xt);return[Oi(xt),or,Oi(or)]}(Ge):[Ks(Ge)]),Ve=[Ge].concat(Ut).reduce(function(xt,or){return xt.concat(Kn(or)===rn?La(g,{placement:or,boundary:ve,rootBoundary:ye,padding:fe,flipVariations:qe,allowedAutoPlacements:$e}):or)},[]),yt=g.rects.reference,Ze=g.rects.popper,it=new Map,It=!0,Pt=Ve[0],At=0;At<Ve.length;At++){var Jt=Ve[At],br=Kn(Jt),Yt=Rs(Jt)===Gn,mt=[Me,Qe].indexOf(br)>=0,wr=mt?"width":"height",ar=_r(g,{placement:Jt,boundary:ve,rootBoundary:ye,altBoundary:Xe,padding:fe}),zt=mt?Yt?nt:ht:Yt?Qe:Me;yt[wr]>Ze[wr]&&(zt=Ks(zt));var bi=Ks(zt),zn=[];if(K&&zn.push(ar[br]<=0),he&&zn.push(ar[zt]<=0,ar[bi]<=0),zn.every(function(xt){return xt})){Pt=Jt,It=!1;break}it.set(Jt,zn)}if(It)for(var Ls=function(xt){var or=Ve.find(function(ii){var js=it.get(ii);if(js)return js.slice(0,xt).every(function(mu){return mu})});if(or)return Pt=or,"break"},En=qe?3:1;En>0&&Ls(En)!=="break";En--);g.placement!==Pt&&(g.modifiersData[C]._skip=!0,g.placement=Pt,g.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function tu(S,g,w){return w===void 0&&(w={x:0,y:0}),{top:S.top-g.height-w.y,right:S.right-g.width+w.x,bottom:S.bottom-g.height+w.y,left:S.left-g.width-w.x}}function dc(S){return[Me,nt,Qe,ht].some(function(g){return S[g]>=0})}const Ys={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(S){var g=S.state,w=S.name,C=g.rects.reference,q=g.rects.popper,K=g.modifiersData.preventOverflow,ie=_r(g,{elementContext:"reference"}),he=_r(g,{altBoundary:!0}),Ae=tu(ie,C),fe=tu(he,q,K),ve=dc(Ae),ye=dc(fe);g.modifiersData[w]={referenceClippingOffsets:Ae,popperEscapeOffsets:fe,isReferenceHidden:ve,hasPopperEscaped:ye},g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-reference-hidden":ve,"data-popper-escaped":ye})}},ja={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(S){var g=S.state,w=S.options,C=S.name,q=w.offset,K=q===void 0?[0,0]:q,ie=tr.reduce(function(ve,ye){return ve[ye]=function(Xe,Be,qe){var $e=Kn(Xe),Ge=[ht,Me].indexOf($e)>=0?-1:1,vt=typeof qe=="function"?qe(Object.assign({},Be,{placement:Xe})):qe,Ut=vt[0],Ve=vt[1];return Ut=Ut||0,Ve=(Ve||0)*Ge,[ht,nt].indexOf($e)>=0?{x:Ve,y:Ut}:{x:Ut,y:Ve}}(ye,g.rects,K),ve},{}),he=ie[g.placement],Ae=he.x,fe=he.y;g.modifiersData.popperOffsets!=null&&(g.modifiersData.popperOffsets.x+=Ae,g.modifiersData.popperOffsets.y+=fe),g.modifiersData[C]=ie}},Ua={name:"popperOffsets",enabled:!0,phase:"read",fn:function(S){var g=S.state,w=S.name;g.modifiersData[w]=Ma({reference:g.rects.reference,element:g.rects.popper,placement:g.placement})},data:{}},Fa={name:"preventOverflow",enabled:!0,phase:"main",fn:function(S){var g=S.state,w=S.options,C=S.name,q=w.mainAxis,K=q===void 0||q,ie=w.altAxis,he=ie!==void 0&&ie,Ae=w.boundary,fe=w.rootBoundary,ve=w.altBoundary,ye=w.padding,Xe=w.tether,Be=Xe===void 0||Xe,qe=w.tetherOffset,$e=qe===void 0?0:qe,Ge=_r(g,{boundary:Ae,rootBoundary:fe,padding:ye,altBoundary:ve}),vt=Kn(g.placement),Ut=Rs(g.placement),Ve=!Ut,yt=Ws(vt),Ze=yt==="x"?"y":"x",it=g.modifiersData.popperOffsets,It=g.rects.reference,Pt=g.rects.popper,At=typeof $e=="function"?$e(Object.assign({},g.rects,{placement:g.placement})):$e,Jt=typeof At=="number"?{mainAxis:At,altAxis:At}:Object.assign({mainAxis:0,altAxis:0},At),br=g.modifiersData.offset?g.modifiersData.offset[g.placement]:null,Yt={x:0,y:0};if(it){if(K){var mt,wr=yt==="y"?Me:ht,ar=yt==="y"?Qe:nt,zt=yt==="y"?"height":"width",bi=it[yt],zn=bi+Ge[wr],Ls=bi-Ge[ar],En=Be?-Pt[zt]/2:0,xt=Ut===Gn?It[zt]:Pt[zt],or=Ut===Gn?-Pt[zt]:-It[zt],ii=g.elements.arrow,js=Be&&ii?Jl(ii):{width:0,height:0},mu=g.modifiersData["arrow#persistent"]?g.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Rd=mu[wr],Cd=mu[ar],Qo=Xr(0,It[zt],js[zt]),hp=Ve?It[zt]/2-En-Qo-Rd-Jt.mainAxis:xt-Qo-Rd-Jt.mainAxis,iv=Ve?-It[zt]/2+En+Qo+Cd+Jt.mainAxis:or+Qo+Cd+Jt.mainAxis,Uc=g.elements.arrow&&rr(g.elements.arrow),dp=Uc?yt==="y"?Uc.clientTop||0:Uc.clientLeft||0:0,Dd=(mt=br==null?void 0:br[yt])!=null?mt:0,xd=bi+iv-Dd,Od=Xr(Be?As(zn,bi+hp-Dd-dp):zn,bi,Be?Qr(Ls,xd):Ls);it[yt]=Od,Yt[yt]=Od-bi}if(he){var Nd,fp=yt==="x"?Me:ht,mp=yt==="x"?Qe:nt,ia=it[Ze],Fc=Ze==="y"?"height":"width",Pd=ia+Ge[fp],Ka=ia-Ge[mp],Bc=[Me,ht].indexOf(vt)!==-1,pu=(Nd=br==null?void 0:br[Ze])!=null?Nd:0,gu=Bc?Pd:ia-It[Fc]-Pt[Fc]-pu+Jt.altAxis,kd=Bc?ia+It[Fc]+Pt[Fc]-pu-Jt.altAxis:Ka,zc=Be&&Bc?function(pp,gp,qc){var Vd=Xr(pp,gp,qc);return Vd>qc?qc:Vd}(gu,ia,kd):Xr(Be?gu:Pd,ia,Be?kd:Ka);it[Ze]=zc,Yt[Ze]=zc-ia}g.modifiersData[C]=Yt}},requiresIfExists:["offset"]};function fc(S,g,w){w===void 0&&(w=!1);var C,q,K=Wn(g),ie=Wn(g)&&function(ye){var Xe=ye.getBoundingClientRect(),Be=rt(Xe.width)/ye.offsetWidth||1,qe=rt(Xe.height)/ye.offsetHeight||1;return Be!==1||qe!==1}(g),he=Qi(g),Ae=Yn(S,ie,w),fe={scrollLeft:0,scrollTop:0},ve={x:0,y:0};return(K||!K&&!w)&&((mi(g)!=="body"||wt(he))&&(fe=(C=g)!==Nn(C)&&Wn(C)?{scrollLeft:(q=C).scrollLeft,scrollTop:q.scrollTop}:Pa(C)),Wn(g)?((ve=Yn(g,!0)).x+=g.clientLeft,ve.y+=g.clientTop):he&&(ve.x=bn(he))),{x:Ae.left+fe.scrollLeft-ve.x,y:Ae.top+fe.scrollTop-ve.y,width:Ae.width,height:Ae.height}}function Po(S){var g=new Map,w=new Set,C=[];function q(K){w.add(K.name),[].concat(K.requires||[],K.requiresIfExists||[]).forEach(function(ie){if(!w.has(ie)){var he=g.get(ie);he&&q(he)}}),C.push(K)}return S.forEach(function(K){g.set(K.name,K)}),S.forEach(function(K){w.has(K.name)||q(K)}),C}var mc={placement:"bottom",modifiers:[],strategy:"absolute"};function ko(){for(var S=arguments.length,g=new Array(S),w=0;w<S;w++)g[w]=arguments[w];return!g.some(function(C){return!(C&&typeof C.getBoundingClientRect=="function")})}function ts(S){S===void 0&&(S={});var g=S,w=g.defaultModifiers,C=w===void 0?[]:w,q=g.defaultOptions,K=q===void 0?mc:q;return function(ie,he,Ae){Ae===void 0&&(Ae=K);var fe,ve,ye={placement:"bottom",orderedModifiers:[],options:Object.assign({},mc,K),modifiersData:{},elements:{reference:ie,popper:he},attributes:{},styles:{}},Xe=[],Be=!1,qe={state:ye,setOptions:function(Ge){var vt=typeof Ge=="function"?Ge(ye.options):Ge;$e(),ye.options=Object.assign({},K,ye.options,vt),ye.scrollParents={reference:Ci(ie)?Ni(ie):ie.contextElement?Ni(ie.contextElement):[],popper:Ni(he)};var Ut,Ve,yt=function(Ze){var it=Po(Ze);return Zl.reduce(function(It,Pt){return It.concat(it.filter(function(At){return At.phase===Pt}))},[])}((Ut=[].concat(C,ye.options.modifiers),Ve=Ut.reduce(function(Ze,it){var It=Ze[it.name];return Ze[it.name]=It?Object.assign({},It,it,{options:Object.assign({},It.options,it.options),data:Object.assign({},It.data,it.data)}):it,Ze},{}),Object.keys(Ve).map(function(Ze){return Ve[Ze]})));return ye.orderedModifiers=yt.filter(function(Ze){return Ze.enabled}),ye.orderedModifiers.forEach(function(Ze){var it=Ze.name,It=Ze.options,Pt=It===void 0?{}:It,At=Ze.effect;if(typeof At=="function"){var Jt=At({state:ye,name:it,instance:qe,options:Pt});Xe.push(Jt||function(){})}}),qe.update()},forceUpdate:function(){if(!Be){var Ge=ye.elements,vt=Ge.reference,Ut=Ge.popper;if(ko(vt,Ut)){ye.rects={reference:fc(vt,rr(Ut),ye.options.strategy==="fixed"),popper:Jl(Ut)},ye.reset=!1,ye.placement=ye.options.placement,ye.orderedModifiers.forEach(function(At){return ye.modifiersData[At.name]=Object.assign({},At.data)});for(var Ve=0;Ve<ye.orderedModifiers.length;Ve++)if(ye.reset!==!0){var yt=ye.orderedModifiers[Ve],Ze=yt.fn,it=yt.options,It=it===void 0?{}:it,Pt=yt.name;typeof Ze=="function"&&(ye=Ze({state:ye,options:It,name:Pt,instance:qe})||ye)}else ye.reset=!1,Ve=-1}}},update:(fe=function(){return new Promise(function(Ge){qe.forceUpdate(),Ge(ye)})},function(){return ve||(ve=new Promise(function(Ge){Promise.resolve().then(function(){ve=void 0,Ge(fe())})})),ve}),destroy:function(){$e(),Be=!0}};if(!ko(ie,he))return qe;function $e(){Xe.forEach(function(Ge){return Ge()}),Xe=[]}return qe.setOptions(Ae).then(function(Ge){!Be&&Ae.onFirstUpdate&&Ae.onFirstUpdate(Ge)}),qe}}var pc=ts(),gc=ts({defaultModifiers:[Ji,Ua,Cs,Wt]}),Ba=ts({defaultModifiers:[Ji,Ua,Cs,Wt,ja,ei,Fa,Oo,Ys]});const Qs=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Es,afterRead:Ro,afterWrite:nr,applyStyles:Wt,arrow:Oo,auto:rn,basePlacements:yn,beforeMain:Co,beforeRead:Nr,beforeWrite:Ts,bottom:Qe,clippingParents:ws,computeStyles:Cs,createPopper:Ba,createPopperBase:pc,createPopperLite:gc,detectOverflow:_r,end:pr,eventListeners:Ji,flip:ei,hide:Ys,left:ht,main:Xl,modifierPhases:Zl,offset:ja,placements:tr,popper:Yi,popperGenerator:ts,popperOffsets:Ua,preventOverflow:Fa,read:hc,reference:Oa,right:nt,start:Gn,top:Me,variationPlacements:gr,viewport:Bt,write:Yr},Symbol.toStringTag,{value:"Module"})),nu="dropdown",gi=".bs.dropdown",Vo=".data-api",ru="ArrowUp",ns="ArrowDown",_c=`hide${gi}`,vc=`hidden${gi}`,yc=`show${gi}`,bc=`shown${gi}`,za=`click${gi}${Vo}`,ir=`keydown${gi}${Vo}`,wc=`keyup${gi}${Vo}`,xs="show",sr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',d=`${sr}.${xs}`,y=".dropdown-menu",E=V()?"top-end":"top-start",x=V()?"top-start":"top-end",Q=V()?"bottom-end":"bottom-start",te=V()?"bottom-start":"bottom-end",Ie=V()?"left-start":"right-start",dt=V()?"right-start":"left-start",Pn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},ft={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Nt extends Ue{constructor(g,w){super(g,w),this._popper=null,this._parent=this._element.parentNode,this._menu=Te.next(this._element,y)[0]||Te.prev(this._element,y)[0]||Te.findOne(y,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Pn}static get DefaultType(){return ft}static get NAME(){return nu}toggle(){return this._isShown()?this.hide():this.show()}show(){if(v(this._element)||this._isShown())return;const g={relatedTarget:this._element};if(!O.trigger(this._element,yc,g).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const w of[].concat(...document.body.children))O.on(w,"mouseover",A);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(xs),this._element.classList.add(xs),O.trigger(this._element,bc,g)}}hide(){if(v(this._element)||!this._isShown())return;const g={relatedTarget:this._element};this._completeHide(g)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(g){if(!O.trigger(this._element,_c,g).defaultPrevented){if("ontouchstart"in document.documentElement)for(const w of[].concat(...document.body.children))O.off(w,"mouseover",A);this._popper&&this._popper.destroy(),this._menu.classList.remove(xs),this._element.classList.remove(xs),this._element.setAttribute("aria-expanded","false"),Se.removeDataAttribute(this._menu,"popper"),O.trigger(this._element,vc,g)}}_getConfig(g){if(typeof(g=super._getConfig(g)).reference=="object"&&!h(g.reference)&&typeof g.reference.getBoundingClientRect!="function")throw new TypeError(`${nu.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return g}_createPopper(){if(Qs===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let g=this._element;this._config.reference==="parent"?g=this._parent:h(this._config.reference)?g=f(this._config.reference):typeof this._config.reference=="object"&&(g=this._config.reference);const w=this._getPopperConfig();this._popper=Ba(g,this._menu,w)}_isShown(){return this._menu.classList.contains(xs)}_getPlacement(){const g=this._parent;if(g.classList.contains("dropend"))return Ie;if(g.classList.contains("dropstart"))return dt;if(g.classList.contains("dropup-center"))return"top";if(g.classList.contains("dropdown-center"))return"bottom";const w=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return g.classList.contains("dropup")?w?x:E:w?te:Q}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:g}=this._config;return typeof g=="string"?g.split(",").map(w=>Number.parseInt(w,10)):typeof g=="function"?w=>g(w,this._element):g}_getPopperConfig(){const g={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Se.setDataAttribute(this._menu,"popper","static"),g.modifiers=[{name:"applyStyles",enabled:!1}]),{...g,...J(this._config.popperConfig,[g])}}_selectMenuItem({key:g,target:w}){const C=Te.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(q=>p(q));C.length&&ue(C,w,g===ns,!C.includes(w)).focus()}static jQueryInterface(g){return this.each(function(){const w=Nt.getOrCreateInstance(this,g);if(typeof g=="string"){if(w[g]===void 0)throw new TypeError(`No method named "${g}"`);w[g]()}})}static clearMenus(g){if(g.button===2||g.type==="keyup"&&g.key!=="Tab")return;const w=Te.find(d);for(const C of w){const q=Nt.getInstance(C);if(!q||q._config.autoClose===!1)continue;const K=g.composedPath(),ie=K.includes(q._menu);if(K.includes(q._element)||q._config.autoClose==="inside"&&!ie||q._config.autoClose==="outside"&&ie||q._menu.contains(g.target)&&(g.type==="keyup"&&g.key==="Tab"||/input|select|option|textarea|form/i.test(g.target.tagName)))continue;const he={relatedTarget:q._element};g.type==="click"&&(he.clickEvent=g),q._completeHide(he)}}static dataApiKeydownHandler(g){const w=/input|textarea/i.test(g.target.tagName),C=g.key==="Escape",q=[ru,ns].includes(g.key);if(!q&&!C||w&&!C)return;g.preventDefault();const K=this.matches(sr)?this:Te.prev(this,sr)[0]||Te.next(this,sr)[0]||Te.findOne(sr,g.delegateTarget.parentNode),ie=Nt.getOrCreateInstance(K);if(q)return g.stopPropagation(),ie.show(),void ie._selectMenuItem(g);ie._isShown()&&(g.stopPropagation(),ie.hide(),K.focus())}}O.on(document,ir,sr,Nt.dataApiKeydownHandler),O.on(document,ir,y,Nt.dataApiKeydownHandler),O.on(document,za,Nt.clearMenus),O.on(document,wc,Nt.clearMenus),O.on(document,za,sr,function(S){S.preventDefault(),Nt.getOrCreateInstance(this).toggle()}),H(Nt);const wn="backdrop",rs="show",Bn=`mousedown.bs.${wn}`,is={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},iu={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class su extends Fe{constructor(g){super(),this._config=this._getConfig(g),this._isAppended=!1,this._element=null}static get Default(){return is}static get DefaultType(){return iu}static get NAME(){return wn}show(g){if(!this._config.isVisible)return void J(g);this._append();const w=this._getElement();this._config.isAnimated&&D(w),w.classList.add(rs),this._emulateAnimation(()=>{J(g)})}hide(g){this._config.isVisible?(this._getElement().classList.remove(rs),this._emulateAnimation(()=>{this.dispose(),J(g)})):J(g)}dispose(){this._isAppended&&(O.off(this._element,Bn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const g=document.createElement("div");g.className=this._config.className,this._config.isAnimated&&g.classList.add("fade"),this._element=g}return this._element}_configAfterMerge(g){return g.rootElement=f(g.rootElement),g}_append(){if(this._isAppended)return;const g=this._getElement();this._config.rootElement.append(g),O.on(g,Bn,()=>{J(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(g){se(g,this._getElement(),this._config.isAnimated)}}const au=".bs.focustrap",Gm=`focusin${au}`,dd=`keydown.tab${au}`,Ec="backward",Wm={autofocus:!0,trapElement:null},Km={autofocus:"boolean",trapElement:"element"};class fd extends Fe{constructor(g){super(),this._config=this._getConfig(g),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Wm}static get DefaultType(){return Km}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),O.off(document,au),O.on(document,Gm,g=>this._handleFocusin(g)),O.on(document,dd,g=>this._handleKeydown(g)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,O.off(document,au))}_handleFocusin(g){const{trapElement:w}=this._config;if(g.target===document||g.target===w||w.contains(g.target))return;const C=Te.focusableChildren(w);C.length===0?w.focus():this._lastTabNavDirection===Ec?C[C.length-1].focus():C[0].focus()}_handleKeydown(g){g.key==="Tab"&&(this._lastTabNavDirection=g.shiftKey?Ec:"forward")}}const Ym=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Qm=".sticky-top",Tc="padding-right",Xm="margin-right";class md{constructor(){this._element=document.body}getWidth(){const g=document.documentElement.clientWidth;return Math.abs(window.innerWidth-g)}hide(){const g=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Tc,w=>w+g),this._setElementAttributes(Ym,Tc,w=>w+g),this._setElementAttributes(Qm,Xm,w=>w-g)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Tc),this._resetElementAttributes(Ym,Tc),this._resetElementAttributes(Qm,Xm)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(g,w,C){const q=this.getWidth();this._applyManipulationCallback(g,K=>{if(K!==this._element&&window.innerWidth>K.clientWidth+q)return;this._saveInitialAttribute(K,w);const ie=window.getComputedStyle(K).getPropertyValue(w);K.style.setProperty(w,`${C(Number.parseFloat(ie))}px`)})}_saveInitialAttribute(g,w){const C=g.style.getPropertyValue(w);C&&Se.setDataAttribute(g,w,C)}_resetElementAttributes(g,w){this._applyManipulationCallback(g,C=>{const q=Se.getDataAttribute(C,w);q!==null?(Se.removeDataAttribute(C,w),C.style.setProperty(w,q)):C.style.removeProperty(w)})}_applyManipulationCallback(g,w){if(h(g))w(g);else for(const C of Te.find(g,this._element))w(C)}}const Kt=".bs.modal",ou=`hide${Kt}`,Zm=`hidePrevented${Kt}`,pd=`hidden${Kt}`,gd=`show${Kt}`,Jm=`shown${Kt}`,_d=`resize${Kt}`,Z_=`click.dismiss${Kt}`,J_=`mousedown.dismiss${Kt}`,Mo=`keydown.dismiss${Kt}`,vd=`click${Kt}.data-api`,Lo="modal-open",Ac="show",Sc="modal-static",qa={backdrop:!0,focus:!0,keyboard:!0},jo={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Os extends Ue{constructor(g,w){super(g,w),this._dialog=Te.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new md,this._addEventListeners()}static get Default(){return qa}static get DefaultType(){return jo}static get NAME(){return"modal"}toggle(g){return this._isShown?this.hide():this.show(g)}show(g){this._isShown||this._isTransitioning||O.trigger(this._element,gd,{relatedTarget:g}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Lo),this._adjustDialog(),this._backdrop.show(()=>this._showElement(g)))}hide(){this._isShown&&!this._isTransitioning&&(O.trigger(this._element,ou).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Ac),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){O.off(window,Kt),O.off(this._dialog,Kt),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new su({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new fd({trapElement:this._element})}_showElement(g){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const w=Te.findOne(".modal-body",this._dialog);w&&(w.scrollTop=0),D(this._element),this._element.classList.add(Ac),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,O.trigger(this._element,Jm,{relatedTarget:g})},this._dialog,this._isAnimated())}_addEventListeners(){O.on(this._element,Mo,g=>{g.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),O.on(window,_d,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),O.on(this._element,J_,g=>{O.one(this._element,Z_,w=>{this._element===g.target&&this._element===w.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Lo),this._resetAdjustments(),this._scrollBar.reset(),O.trigger(this._element,pd)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(O.trigger(this._element,Zm).defaultPrevented)return;const g=this._element.scrollHeight>document.documentElement.clientHeight,w=this._element.style.overflowY;w==="hidden"||this._element.classList.contains(Sc)||(g||(this._element.style.overflowY="hidden"),this._element.classList.add(Sc),this._queueCallback(()=>{this._element.classList.remove(Sc),this._queueCallback(()=>{this._element.style.overflowY=w},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const g=this._element.scrollHeight>document.documentElement.clientHeight,w=this._scrollBar.getWidth(),C=w>0;if(C&&!g){const q=V()?"paddingLeft":"paddingRight";this._element.style[q]=`${w}px`}if(!C&&g){const q=V()?"paddingRight":"paddingLeft";this._element.style[q]=`${w}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(g,w){return this.each(function(){const C=Os.getOrCreateInstance(this,g);if(typeof g=="string"){if(C[g]===void 0)throw new TypeError(`No method named "${g}"`);C[g](w)}})}}O.on(document,vd,'[data-bs-toggle="modal"]',function(S){const g=Te.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&S.preventDefault(),O.one(g,gd,C=>{C.defaultPrevented||O.one(g,pd,()=>{p(this)&&this.focus()})});const w=Te.findOne(".modal.show");w&&Os.getInstance(w).hide(),Os.getOrCreateInstance(g).toggle(this)}),ut(Os),H(Os);const ss=".bs.offcanvas",Xs=".data-api",ep=`load${ss}${Xs}`,yd="show",bd="showing",tp="hiding",np=".offcanvas.show",ev=`show${ss}`,rp=`shown${ss}`,ip=`hide${ss}`,wd=`hidePrevented${ss}`,_i=`hidden${ss}`,vi=`resize${ss}`,Uo=`click${ss}${Xs}`,Ed=`keydown.dismiss${ss}`,Ic={backdrop:!0,keyboard:!0,scroll:!1},Rc={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Pi extends Ue{constructor(g,w){super(g,w),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ic}static get DefaultType(){return Rc}static get NAME(){return"offcanvas"}toggle(g){return this._isShown?this.hide():this.show(g)}show(g){this._isShown||O.trigger(this._element,ev,{relatedTarget:g}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new md().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(bd),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(yd),this._element.classList.remove(bd),O.trigger(this._element,rp,{relatedTarget:g})},this._element,!0))}hide(){this._isShown&&(O.trigger(this._element,ip).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(tp),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(yd,tp),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new md().reset(),O.trigger(this._element,_i)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const g=!!this._config.backdrop;return new su({className:"offcanvas-backdrop",isVisible:g,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:g?()=>{this._config.backdrop!=="static"?this.hide():O.trigger(this._element,wd)}:null})}_initializeFocusTrap(){return new fd({trapElement:this._element})}_addEventListeners(){O.on(this._element,Ed,g=>{g.key==="Escape"&&(this._config.keyboard?this.hide():O.trigger(this._element,wd))})}static jQueryInterface(g){return this.each(function(){const w=Pi.getOrCreateInstance(this,g);if(typeof g=="string"){if(w[g]===void 0||g.startsWith("_")||g==="constructor")throw new TypeError(`No method named "${g}"`);w[g](this)}})}}O.on(document,Uo,'[data-bs-toggle="offcanvas"]',function(S){const g=Te.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&S.preventDefault(),v(this))return;O.one(g,_i,()=>{p(this)&&this.focus()});const w=Te.findOne(np);w&&w!==g&&Pi.getInstance(w).hide(),Pi.getOrCreateInstance(g).toggle(this)}),O.on(window,ep,()=>{for(const S of Te.find(np))Pi.getOrCreateInstance(S).show()}),O.on(window,vi,()=>{for(const S of Te.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(S).position!=="fixed"&&Pi.getOrCreateInstance(S).hide()}),ut(Pi),H(Pi);const Ns={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},sp=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Cc=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Fo=(S,g)=>{const w=S.nodeName.toLowerCase();return g.includes(w)?!sp.has(w)||!!Cc.test(S.nodeValue):g.filter(C=>C instanceof RegExp).some(C=>C.test(w))},ap={allowList:Ns,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},yi={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Bo={entry:"(string|element|function|null)",selector:"(string|element)"};class zo extends Fe{constructor(g){super(),this._config=this._getConfig(g)}static get Default(){return ap}static get DefaultType(){return yi}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(g=>this._resolvePossibleFunction(g)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(g){return this._checkContent(g),this._config.content={...this._config.content,...g},this}toHtml(){const g=document.createElement("div");g.innerHTML=this._maybeSanitize(this._config.template);for(const[q,K]of Object.entries(this._config.content))this._setContent(g,K,q);const w=g.children[0],C=this._resolvePossibleFunction(this._config.extraClass);return C&&w.classList.add(...C.split(" ")),w}_typeCheckConfig(g){super._typeCheckConfig(g),this._checkContent(g.content)}_checkContent(g){for(const[w,C]of Object.entries(g))super._typeCheckConfig({selector:w,entry:C},Bo)}_setContent(g,w,C){const q=Te.findOne(C,g);q&&((w=this._resolvePossibleFunction(w))?h(w)?this._putElementInTemplate(f(w),q):this._config.html?q.innerHTML=this._maybeSanitize(w):q.textContent=w:q.remove())}_maybeSanitize(g){return this._config.sanitize?function(w,C,q){if(!w.length)return w;if(q&&typeof q=="function")return q(w);const K=new window.DOMParser().parseFromString(w,"text/html"),ie=[].concat(...K.body.querySelectorAll("*"));for(const he of ie){const Ae=he.nodeName.toLowerCase();if(!Object.keys(C).includes(Ae)){he.remove();continue}const fe=[].concat(...he.attributes),ve=[].concat(C["*"]||[],C[Ae]||[]);for(const ye of fe)Fo(ye,ve)||he.removeAttribute(ye.nodeName)}return K.body.innerHTML}(g,this._config.allowList,this._config.sanitizeFn):g}_resolvePossibleFunction(g){return J(g,[this])}_putElementInTemplate(g,w){if(this._config.html)return w.innerHTML="",void w.append(g);w.textContent=g.textContent}}const Dc=new Set(["sanitize","allowList","sanitizeFn"]),qo="fade",vr="show",ti=".modal",Zs="hide.bs.modal",ni="hover",ki="focus",Ha={AUTO:"auto",TOP:"top",RIGHT:V()?"left":"right",BOTTOM:"bottom",LEFT:V()?"right":"left"},op={allowList:Ns,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Td={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ps extends Ue{constructor(g,w){if(Qs===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(g,w),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return op}static get DefaultType(){return Td}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),O.off(this._element.closest(ti),Zs,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const g=O.trigger(this._element,this.constructor.eventName("show")),w=(b(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(g.defaultPrevented||!w)return;this._disposePopper();const C=this._getTipElement();this._element.setAttribute("aria-describedby",C.getAttribute("id"));const{container:q}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(q.append(C),O.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(C),C.classList.add(vr),"ontouchstart"in document.documentElement)for(const K of[].concat(...document.body.children))O.on(K,"mouseover",A);this._queueCallback(()=>{O.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!O.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(vr),"ontouchstart"in document.documentElement)for(const g of[].concat(...document.body.children))O.off(g,"mouseover",A);this._activeTrigger.click=!1,this._activeTrigger[ki]=!1,this._activeTrigger[ni]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),O.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(g){const w=this._getTemplateFactory(g).toHtml();if(!w)return null;w.classList.remove(qo,vr),w.classList.add(`bs-${this.constructor.NAME}-auto`);const C=(q=>{do q+=Math.floor(1e6*Math.random());while(document.getElementById(q));return q})(this.constructor.NAME).toString();return w.setAttribute("id",C),this._isAnimated()&&w.classList.add(qo),w}setContent(g){this._newContent=g,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(g){return this._templateFactory?this._templateFactory.changeContent(g):this._templateFactory=new zo({...this._config,content:g,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(g){return this.constructor.getOrCreateInstance(g.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(qo)}_isShown(){return this.tip&&this.tip.classList.contains(vr)}_createPopper(g){const w=J(this._config.placement,[this,g,this._element]),C=Ha[w.toUpperCase()];return Ba(this._element,g,this._getPopperConfig(C))}_getOffset(){const{offset:g}=this._config;return typeof g=="string"?g.split(",").map(w=>Number.parseInt(w,10)):typeof g=="function"?w=>g(w,this._element):g}_resolvePossibleFunction(g){return J(g,[this._element])}_getPopperConfig(g){const w={placement:g,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:C=>{this._getTipElement().setAttribute("data-popper-placement",C.state.placement)}}]};return{...w,...J(this._config.popperConfig,[w])}}_setListeners(){const g=this._config.trigger.split(" ");for(const w of g)if(w==="click")O.on(this._element,this.constructor.eventName("click"),this._config.selector,C=>{this._initializeOnDelegatedTarget(C).toggle()});else if(w!=="manual"){const C=w===ni?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),q=w===ni?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");O.on(this._element,C,this._config.selector,K=>{const ie=this._initializeOnDelegatedTarget(K);ie._activeTrigger[K.type==="focusin"?ki:ni]=!0,ie._enter()}),O.on(this._element,q,this._config.selector,K=>{const ie=this._initializeOnDelegatedTarget(K);ie._activeTrigger[K.type==="focusout"?ki:ni]=ie._element.contains(K.relatedTarget),ie._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},O.on(this._element.closest(ti),Zs,this._hideModalHandler)}_fixTitle(){const g=this._element.getAttribute("title");g&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",g),this._element.setAttribute("data-bs-original-title",g),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(g,w){clearTimeout(this._timeout),this._timeout=setTimeout(g,w)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(g){const w=Se.getDataAttributes(this._element);for(const C of Object.keys(w))Dc.has(C)&&delete w[C];return g={...w,...typeof g=="object"&&g?g:{}},g=this._mergeConfigObj(g),g=this._configAfterMerge(g),this._typeCheckConfig(g),g}_configAfterMerge(g){return g.container=g.container===!1?document.body:f(g.container),typeof g.delay=="number"&&(g.delay={show:g.delay,hide:g.delay}),typeof g.title=="number"&&(g.title=g.title.toString()),typeof g.content=="number"&&(g.content=g.content.toString()),g}_getDelegateConfig(){const g={};for(const[w,C]of Object.entries(this._config))this.constructor.Default[w]!==C&&(g[w]=C);return g.selector=!1,g.trigger="manual",g}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(g){return this.each(function(){const w=Ps.getOrCreateInstance(this,g);if(typeof g=="string"){if(w[g]===void 0)throw new TypeError(`No method named "${g}"`);w[g]()}})}}H(Ps);const yr={...Ps.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Qn={...Ps.DefaultType,content:"(null|string|element|function)"};class at extends Ps{static get Default(){return yr}static get DefaultType(){return Qn}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(g){return this.each(function(){const w=at.getOrCreateInstance(this,g);if(typeof g=="string"){if(w[g]===void 0)throw new TypeError(`No method named "${g}"`);w[g]()}})}}H(at);const ri=".bs.scrollspy",as=`activate${ri}`,xc=`click${ri}`,$a=`load${ri}.data-api`,Ga="active",Oc="[href]",Ho=".nav-link",lu=`${Ho}, .nav-item > ${Ho}, .list-group-item`,uu={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},cu={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class $o extends Ue{constructor(g,w){super(g,w),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return uu}static get DefaultType(){return cu}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const g of this._observableSections.values())this._observer.observe(g)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(g){return g.target=f(g.target)||document.body,g.rootMargin=g.offset?`${g.offset}px 0px -30%`:g.rootMargin,typeof g.threshold=="string"&&(g.threshold=g.threshold.split(",").map(w=>Number.parseFloat(w))),g}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(O.off(this._config.target,xc),O.on(this._config.target,xc,Oc,g=>{const w=this._observableSections.get(g.target.hash);if(w){g.preventDefault();const C=this._rootElement||window,q=w.offsetTop-this._element.offsetTop;if(C.scrollTo)return void C.scrollTo({top:q,behavior:"smooth"});C.scrollTop=q}}))}_getNewObserver(){const g={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(w=>this._observerCallback(w),g)}_observerCallback(g){const w=ie=>this._targetLinks.get(`#${ie.target.id}`),C=ie=>{this._previousScrollData.visibleEntryTop=ie.target.offsetTop,this._process(w(ie))},q=(this._rootElement||document.documentElement).scrollTop,K=q>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=q;for(const ie of g){if(!ie.isIntersecting){this._activeTarget=null,this._clearActiveClass(w(ie));continue}const he=ie.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(K&&he){if(C(ie),!q)return}else K||he||C(ie)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const g=Te.find(Oc,this._config.target);for(const w of g){if(!w.hash||v(w))continue;const C=Te.findOne(decodeURI(w.hash),this._element);p(C)&&(this._targetLinks.set(decodeURI(w.hash),w),this._observableSections.set(w.hash,C))}}_process(g){this._activeTarget!==g&&(this._clearActiveClass(this._config.target),this._activeTarget=g,g.classList.add(Ga),this._activateParents(g),O.trigger(this._element,as,{relatedTarget:g}))}_activateParents(g){if(g.classList.contains("dropdown-item"))Te.findOne(".dropdown-toggle",g.closest(".dropdown")).classList.add(Ga);else for(const w of Te.parents(g,".nav, .list-group"))for(const C of Te.prev(w,lu))C.classList.add(Ga)}_clearActiveClass(g){g.classList.remove(Ga);const w=Te.find(`${Oc}.${Ga}`,g);for(const C of w)C.classList.remove(Ga)}static jQueryInterface(g){return this.each(function(){const w=$o.getOrCreateInstance(this,g);if(typeof g=="string"){if(w[g]===void 0||g.startsWith("_")||g==="constructor")throw new TypeError(`No method named "${g}"`);w[g]()}})}}O.on(window,$a,()=>{for(const S of Te.find('[data-bs-spy="scroll"]'))$o.getOrCreateInstance(S)}),H($o);const ks=".bs.tab",lp=`hide${ks}`,Nc=`hidden${ks}`,up=`show${ks}`,hu=`shown${ks}`,cp=`click${ks}`,Go=`keydown${ks}`,du=`load${ks}`,Pc="ArrowLeft",Wo="ArrowRight",kc="ArrowUp",Ad="ArrowDown",Vc="Home",Js="End",ea="active",Wa="fade",Ko="show",Sd=".dropdown-toggle",fu=`:not(${Sd})`,Mc='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Pr=`.nav-link${fu}, .list-group-item${fu}, [role="tab"]${fu}, ${Mc}`,os=`.${ea}[data-bs-toggle="tab"], .${ea}[data-bs-toggle="pill"], .${ea}[data-bs-toggle="list"]`;class kr extends Ue{constructor(g){super(g),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),O.on(this._element,Go,w=>this._keydown(w)))}static get NAME(){return"tab"}show(){const g=this._element;if(this._elemIsActive(g))return;const w=this._getActiveElem(),C=w?O.trigger(w,lp,{relatedTarget:g}):null;O.trigger(g,up,{relatedTarget:w}).defaultPrevented||C&&C.defaultPrevented||(this._deactivate(w,g),this._activate(g,w))}_activate(g,w){g&&(g.classList.add(ea),this._activate(Te.getElementFromSelector(g)),this._queueCallback(()=>{g.getAttribute("role")==="tab"?(g.removeAttribute("tabindex"),g.setAttribute("aria-selected",!0),this._toggleDropDown(g,!0),O.trigger(g,hu,{relatedTarget:w})):g.classList.add(Ko)},g,g.classList.contains(Wa)))}_deactivate(g,w){g&&(g.classList.remove(ea),g.blur(),this._deactivate(Te.getElementFromSelector(g)),this._queueCallback(()=>{g.getAttribute("role")==="tab"?(g.setAttribute("aria-selected",!1),g.setAttribute("tabindex","-1"),this._toggleDropDown(g,!1),O.trigger(g,Nc,{relatedTarget:w})):g.classList.remove(Ko)},g,g.classList.contains(Wa)))}_keydown(g){if(![Pc,Wo,kc,Ad,Vc,Js].includes(g.key))return;g.stopPropagation(),g.preventDefault();const w=this._getChildren().filter(q=>!v(q));let C;if([Vc,Js].includes(g.key))C=w[g.key===Vc?0:w.length-1];else{const q=[Wo,Ad].includes(g.key);C=ue(w,g.target,q,!0)}C&&(C.focus({preventScroll:!0}),kr.getOrCreateInstance(C).show())}_getChildren(){return Te.find(Pr,this._parent)}_getActiveElem(){return this._getChildren().find(g=>this._elemIsActive(g))||null}_setInitialAttributes(g,w){this._setAttributeIfNotExists(g,"role","tablist");for(const C of w)this._setInitialAttributesOnChild(C)}_setInitialAttributesOnChild(g){g=this._getInnerElement(g);const w=this._elemIsActive(g),C=this._getOuterElement(g);g.setAttribute("aria-selected",w),C!==g&&this._setAttributeIfNotExists(C,"role","presentation"),w||g.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(g,"role","tab"),this._setInitialAttributesOnTargetPanel(g)}_setInitialAttributesOnTargetPanel(g){const w=Te.getElementFromSelector(g);w&&(this._setAttributeIfNotExists(w,"role","tabpanel"),g.id&&this._setAttributeIfNotExists(w,"aria-labelledby",`${g.id}`))}_toggleDropDown(g,w){const C=this._getOuterElement(g);if(!C.classList.contains("dropdown"))return;const q=(K,ie)=>{const he=Te.findOne(K,C);he&&he.classList.toggle(ie,w)};q(Sd,ea),q(".dropdown-menu",Ko),C.setAttribute("aria-expanded",w)}_setAttributeIfNotExists(g,w,C){g.hasAttribute(w)||g.setAttribute(w,C)}_elemIsActive(g){return g.classList.contains(ea)}_getInnerElement(g){return g.matches(Pr)?g:Te.findOne(Pr,g)}_getOuterElement(g){return g.closest(".nav-item, .list-group-item")||g}static jQueryInterface(g){return this.each(function(){const w=kr.getOrCreateInstance(this);if(typeof g=="string"){if(w[g]===void 0||g.startsWith("_")||g==="constructor")throw new TypeError(`No method named "${g}"`);w[g]()}})}}O.on(document,cp,Mc,function(S){["A","AREA"].includes(this.tagName)&&S.preventDefault(),v(this)||kr.getOrCreateInstance(this).show()}),O.on(window,du,()=>{for(const S of Te.find(os))kr.getOrCreateInstance(S)}),H(kr);const Vs=".bs.toast",ta=`mouseover${Vs}`,Ms=`mouseout${Vs}`,kn=`focusin${Vs}`,Lc=`focusout${Vs}`,tv=`hide${Vs}`,nv=`hidden${Vs}`,rv=`show${Vs}`,Vn=`shown${Vs}`,jc="hide",na="show",ra="showing",Id={animation:"boolean",autohide:"boolean",delay:"number"},Yo={animation:!0,autohide:!0,delay:5e3};class ls extends Ue{constructor(g,w){super(g,w),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Yo}static get DefaultType(){return Id}static get NAME(){return"toast"}show(){O.trigger(this._element,rv).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(jc),D(this._element),this._element.classList.add(na,ra),this._queueCallback(()=>{this._element.classList.remove(ra),O.trigger(this._element,Vn),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(O.trigger(this._element,tv).defaultPrevented||(this._element.classList.add(ra),this._queueCallback(()=>{this._element.classList.add(jc),this._element.classList.remove(ra,na),O.trigger(this._element,nv)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(na),super.dispose()}isShown(){return this._element.classList.contains(na)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(g,w){switch(g.type){case"mouseover":case"mouseout":this._hasMouseInteraction=w;break;case"focusin":case"focusout":this._hasKeyboardInteraction=w}if(w)return void this._clearTimeout();const C=g.relatedTarget;this._element===C||this._element.contains(C)||this._maybeScheduleHide()}_setListeners(){O.on(this._element,ta,g=>this._onInteraction(g,!0)),O.on(this._element,Ms,g=>this._onInteraction(g,!1)),O.on(this._element,kn,g=>this._onInteraction(g,!0)),O.on(this._element,Lc,g=>this._onInteraction(g,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(g){return this.each(function(){const w=ls.getOrCreateInstance(this,g);if(typeof g=="string"){if(w[g]===void 0)throw new TypeError(`No method named "${g}"`);w[g](this)}})}}return ut(ls),H(ls),{Alert:vn,Button:Un,Carousel:hn,Collapse:Or,Dropdown:Nt,Modal:Os,Offcanvas:Pi,Popover:at,ScrollSpy:$o,Tab:kr,Toast:ls,Tooltip:Ps}})}(hg)),hg.exports}dV();const NR=({formTitle:n,initialData:e={},onSubmit:t})=>{const[r,s]=B.useState(e.id||""),[o,u]=B.useState(e.title||""),[h,f]=B.useState(e.difficulty||"Easy"),[p,v]=B.useState(e.tags||""),[b,A]=B.useState(e.description||""),[D,M]=B.useState(e.code||"// Write sample code here"),[F,V]=B.useState(e.language||"java"),[H,J]=B.useState(e.cases||"");B.useEffect(()=>{(e.id||e.title||e.description||e.code)&&(s(e.id||""),u(e.title||""),f(e.difficulty||"Easy"),v(e.tags||""),A(e.description||""),M(e.code||"// Write sample code here"),V(e.language||"java"),J(e.cases||""))},[e]);const se=ue=>{ue.preventDefault();const de={id:r,title:o,difficulty:h,tags:p,description:b,code:D,language:F,cases:H};console.log("Submitted Problem Data:",de),t(de)};return I.jsxs("div",{className:"admin-form-container",children:[I.jsx("h2",{className:"form-title",children:n}),I.jsxs("form",{onSubmit:se,children:[I.jsx("label",{children:"ID"}),I.jsx("input",{className:"form-input",type:"number",value:r,onChange:ue=>s(ue.target.value),required:!0}),I.jsx("label",{children:"Title"}),I.jsx("input",{className:"form-input",type:"text",value:o,onChange:ue=>u(ue.target.value),required:!0}),I.jsx("label",{children:"Difficulty"}),I.jsxs("select",{className:"form-input",value:h,onChange:ue=>f(ue.target.value),children:[I.jsx("option",{value:"Easy",children:"Easy"}),I.jsx("option",{value:"Medium",children:"Medium"}),I.jsx("option",{value:"Hard",children:"Hard"})]}),I.jsx("label",{children:"Tags (comma-separated)"}),I.jsx("input",{className:"form-input",type:"text",value:p,onChange:ue=>v(ue.target.value)}),I.jsx("label",{children:"Description"}),I.jsx("textarea",{className:"form-input",value:b,onChange:ue=>A(ue.target.value),rows:5}),I.jsxs("div",{className:"dropdown mb-3",children:[I.jsx("button",{className:"btn btn-dark dropdown-toggle",type:"button",id:"languageDropdown","data-bs-toggle":"dropdown","aria-expanded":"false",children:F.toUpperCase()}),I.jsx("ul",{className:"dropdown-menu","aria-labelledby":"languageDropdown",children:["java","javascript","python","c","cpp"].map(ue=>I.jsx("li",{children:I.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>V(ue),children:ue.toUpperCase()})},ue))})]}),I.jsx("label",{children:"Sample Code"}),I.jsx("div",{className:"editor-container",children:I.jsx(OR,{height:"400px",language:F,theme:"vs-dark",value:D,onChange:ue=>M(ue||"")})}),I.jsx("label",{children:"Test Cases"}),I.jsx("textarea",{className:"form-input",value:H,onChange:ue=>J(ue.target.value),rows:5,placeholder:`Example:
Input: 5
Output: 25

Input: 2
Output: 4`}),I.jsx("button",{type:"submit",className:"submit-btn btn btn-success mt-3",children:"Submit"})]})]})},fV=()=>{const{port:n,hostIP:e}=Ra(),{id:t}=uw(),[r,s]=B.useState(null),[o,u]=B.useState(!0);B.useEffect(()=>{t&&fetch(`http://${e}:${n}/question/${t}`).then(f=>{if(!f.ok)throw new Error("Failed to fetch problem data");return f.json()}).then(f=>{s(f),u(!1)}).catch(f=>{console.error("Error fetching problem:",f),u(!1)})},[t]);const h=async f=>{const p={id:t,title:f.title,diff:f.difficulty,desc:f.description,tags:(f.tags||"").split(",").map(v=>v.trim()).filter(v=>v.length>0),code:f.code,cases:f.cases};console.log("📤 Updating Problem Data:",p);try{const v=await fetch(`http://${e}:${n}/updateQuestion`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(v.ok)alert("✅ Question successfully updated in Firebase!");else{const b=await v.text();console.error("❌ Server Error Response:",b),alert("❌ Failed to update question on server.")}}catch(v){console.error("⚠️ Error reaching server:",v),alert("⚠️ Could not reach server.")}};return o?I.jsx("p",{children:"Loading problem data..."}):r?I.jsx(NR,{formTitle:`Edit Problem #${r.title}`,initialData:{...r,tags:Array.isArray(r.tags)?r.tags.join(", "):r.tags||""},onSubmit:h}):I.jsx("p",{children:"Problem not found."})},PR=()=>{const{port:n,hostIP:e}=Ra(),[t,r]=B.useState([{id:1,title:"Two Sum",diff:"Easy",tags:["Array","HashMap"]},{id:2,title:"Binary Tree Inorder Traversal",diff:"Medium",tags:["Tree","DFS"]},{id:3,title:"Dijkstra's Algorithm",diff:"Hard",tags:["Graph","Shortest Path"]}]);return B.useEffect(()=>{(async()=>{try{const o=await fetch(`http://${e}:${n}/question`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);const u=await o.text(),h=JSON.parse(u);console.log(h),r(h)}catch(o){console.error("❌ Error fetching problems:",o)}})()},[]),I.jsxs("div",{className:"overflow-auto",children:[I.jsx("h2",{className:"problemList-title",children:"Problem List"}),I.jsx("ul",{className:"list-group",children:t.map(s=>{var o;return I.jsx("li",{children:I.jsxs(zi,{to:`/problempage/${s.id}`,className:"pli",children:[I.jsx("strong",{children:s.title})," Difficulty:"," ",s.diff,I.jsx("br",{}),(o=s.tags)==null?void 0:o.map((u,h)=>I.jsx("span",{className:"tag",children:u},h))]})},s.id)})})]})},mV=({activityData:n,startDate:e=new Date(new Date().setFullYear(new Date().getFullYear()-1)).toISOString().split("T")[0],endDate:t=new Date().toISOString().split("T")[0],showMonthLabels:r=!0,showWeekdayLabels:s=!0})=>{const[o,u]=B.useState({cells:[],months:[],maxCount:0});B.useEffect(()=>{u((()=>{const v=new Date(e),b=new Date(t),A=v.getDay();v.setDate(v.getDate()-A);const D={};n.forEach(ue=>{D[ue.date]=ue.count});const M=Math.max(...n.map(ue=>ue.count),1),F=[],V=[];let H=new Date(v),J=0,se=-1;for(;H<=b;){const ue=H.toISOString().split("T")[0],de=H.getDay(),be=H.getMonth();if(be!==se){se=be;const U=H.toLocaleString("default",{month:"short"});V.push({name:U,x:J})}F.push({date:ue,count:D[ue]||0,x:J,y:de}),H.setDate(H.getDate()+1),H.getDay()===0&&J++}return{cells:F,months:V,maxCount:M}})())},[n,e,t]);const h=(p,v)=>{if(p===0)return"color-empty";const b=p/v;return b<.15?"color-scale-1":b<.4?"color-scale-2":b<.7?"color-scale-3":"color-scale-4"},f=p=>new Date(p).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return I.jsxs("div",{className:"panel",children:[I.jsx("div",{children:I.jsx("h1",{children:"Activity"})}),I.jsxs("div",{className:"github-heatmap",children:[I.jsxs("div",{className:"calendar-container",children:[s&&I.jsxs("div",{className:"weekday-labels",children:[I.jsx("div",{className:"weekday-label",children:"Mon"}),I.jsx("div",{className:"weekday-label",children:"Wed"}),I.jsx("div",{className:"weekday-label",children:"Fri"})]}),I.jsxs("div",{className:"calendar-grid",style:{gridTemplateColumns:`repeat(${o.months.length*4+1}, 1fr)`},children:[r&&I.jsx("div",{className:"month-labels",children:o.months.map((p,v)=>I.jsx("div",{className:"month-label",style:{gridColumn:p.x+1},children:p.name},`${p.name}-${v}`))}),I.jsx("div",{className:"cells-container",children:o.cells.map((p,v)=>I.jsx("div",{className:`calendar-cell ${h(p.count,o.maxCount)}`,style:{gridColumn:p.x+1,gridRow:p.y+1},title:`${p.count} contributions on ${f(p.date)}`},`${p.date}-${v}`))})]})]}),I.jsx("div",{className:"calendar-footer",children:I.jsxs("div",{className:"legend",children:[I.jsx("div",{className:"legend-text",children:"Less"}),I.jsxs("div",{className:"legend-cells",children:[I.jsx("div",{className:"legend-cell color-empty"}),I.jsx("div",{className:"legend-cell color-scale-1"}),I.jsx("div",{className:"legend-cell color-scale-2"}),I.jsx("div",{className:"legend-cell color-scale-3"}),I.jsx("div",{className:"legend-cell color-scale-4"})]}),I.jsx("div",{className:"legend-text",children:"More"})]})})]})]})};function pV(){const[n,e]=B.useState(new Date);B.useEffect(()=>{const r=setInterval(()=>e(new Date),1e3);return()=>clearInterval(r)},[]);const t=r=>r.toLocaleTimeString("en-US",{hour12:!1});return I.jsx("div",{className:"digital-clock",children:I.jsx("div",{className:"clock-time",children:t(n)})})}function kR(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=kR(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function o_(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=kR(n))&&(r&&(r+=" "),r+=e);return r}var Oy,PA;function gV(){if(PA)return Oy;PA=1;const n=(f,p,v,b)=>{if(v==="length"||v==="prototype"||v==="arguments"||v==="caller")return;const A=Object.getOwnPropertyDescriptor(f,v),D=Object.getOwnPropertyDescriptor(p,v);!e(A,D)&&b||Object.defineProperty(f,v,D)},e=function(f,p){return f===void 0||f.configurable||f.writable===p.writable&&f.enumerable===p.enumerable&&f.configurable===p.configurable&&(f.writable||f.value===p.value)},t=(f,p)=>{const v=Object.getPrototypeOf(p);v!==Object.getPrototypeOf(f)&&Object.setPrototypeOf(f,v)},r=(f,p)=>`/* Wrapped ${f}*/
${p}`,s=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),o=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),u=(f,p,v)=>{const b=v===""?"":`with ${v.trim()}() `,A=r.bind(null,b,p.toString());Object.defineProperty(A,"name",o),Object.defineProperty(f,"toString",{...s,value:A})};return Oy=(f,p,{ignoreNonConfigurable:v=!1}={})=>{const{name:b}=f;for(const A of Reflect.ownKeys(p))n(f,p,A,v);return t(f,p),u(f,p,b),f},Oy}var Ef={exports:{}},Ny,kA;function _V(){return kA||(kA=1,Ny=()=>{const n={};return n.promise=new Promise((e,t)=>{n.resolve=e,n.reject=t}),n}),Ny}var Zp=Ef.exports,VA;function vV(){return VA||(VA=1,function(n,e){var t=Zp&&Zp.__awaiter||function(u,h,f,p){return new(f||(f=Promise))(function(v,b){function A(F){try{M(p.next(F))}catch(V){b(V)}}function D(F){try{M(p.throw(F))}catch(V){b(V)}}function M(F){F.done?v(F.value):new f(function(V){V(F.value)}).then(A,D)}M((p=p.apply(u,h||[])).next())})},r=Zp&&Zp.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0});const s=r(_V());function o(u,h="maxAge"){let f,p,v;const b=()=>t(this,void 0,void 0,function*(){if(f!==void 0)return;const M=F=>t(this,void 0,void 0,function*(){v=s.default();const V=F[1][h]-Date.now();if(V<=0){u.delete(F[0]),v.resolve();return}return f=F[0],p=setTimeout(()=>{u.delete(F[0]),v&&v.resolve()},V),typeof p.unref=="function"&&p.unref(),v.promise});try{for(const F of u)yield M(F)}catch{}f=void 0}),A=()=>{f=void 0,p!==void 0&&(clearTimeout(p),p=void 0),v!==void 0&&(v.reject(void 0),v=void 0)},D=u.set.bind(u);return u.set=(M,F)=>{u.has(M)&&u.delete(M);const V=D(M,F);return f&&f===M&&A(),b(),V},b(),u}e.default=o,n.exports=o,n.exports.default=o}(Ef,Ef.exports)),Ef.exports}var Py,MA;function yV(){if(MA)return Py;MA=1;const n=gV(),e=vV(),t=new WeakMap,r=new WeakMap,s=(o,{cacheKey:u,cache:h=new Map,maxAge:f}={})=>{typeof f=="number"&&e(h);const p=function(...v){const b=u?u(v):v[0],A=h.get(b);if(A)return A.data;const D=o.apply(this,v);return h.set(b,{data:D,maxAge:f?Date.now()+f:Number.POSITIVE_INFINITY}),D};return n(p,o,{ignoreNonConfigurable:!0}),r.set(p,h),p};return s.decorator=(o={})=>(u,h,f)=>{const p=u[h];if(typeof p!="function")throw new TypeError("The decorated value must be a function");delete f.value,delete f.writable,f.get=function(){if(!t.has(this)){const v=s(p,o);return t.set(this,v),v}return t.get(this)}},s.clear=o=>{const u=r.get(o);if(!u)throw new TypeError("Can't clear a function that was not memoized!");if(typeof u.clear!="function")throw new TypeError("The cache Map can't be cleared!");u.clear()},Py=s,Py}var bV=yV();const VR=sR(bV);function wV(n){return typeof n=="string"}function EV(n,e,t){return t.indexOf(n)===e}function TV(n){return n.toLowerCase()===n}function LA(n){return n.indexOf(",")===-1?n:n.split(",")}function ab(n){if(!n)return n;if(n==="C"||n==="posix"||n==="POSIX")return"en-US";if(n.indexOf(".")!==-1){var e=n.split(".")[0],t=e===void 0?"":e;return ab(t)}if(n.indexOf("@")!==-1){var r=n.split("@")[0],t=r===void 0?"":r;return ab(t)}if(n.indexOf("-")===-1||!TV(n))return n;var s=n.split("-"),o=s[0],u=s[1],h=u===void 0?"":u;return"".concat(o,"-").concat(h.toUpperCase())}function AV(n){var e=n===void 0?{}:n,t=e.useFallbackLocale,r=t===void 0?!0:t,s=e.fallbackLocale,o=s===void 0?"en-US":s,u=[];if(typeof navigator<"u"){for(var h=navigator.languages||[],f=[],p=0,v=h;p<v.length;p++){var b=v[p];f=f.concat(LA(b))}var A=navigator.language,D=A&&LA(A);u=u.concat(f,D)}return r&&u.push(o),u.filter(wV).map(ab).filter(EV)}var SV=VR(AV,{cacheKey:JSON.stringify});function IV(n){return SV(n)[0]||null}var MR=VR(IV,{cacheKey:JSON.stringify});function yo(n,e,t){return function(s,o){o===void 0&&(o=t);var u=n(s)+o;return e(u)}}function wm(n){return function(t){return new Date(n(t).getTime()-1)}}function Em(n,e){return function(r){return[n(r),e(r)]}}function cn(n){if(n instanceof Date)return n.getFullYear();if(typeof n=="number")return n;var e=parseInt(n,10);if(typeof n=="string"&&!isNaN(e))return e;throw new Error("Failed to get year from date: ".concat(n,"."))}function Bl(n){if(n instanceof Date)return n.getMonth();throw new Error("Failed to get month from date: ".concat(n,"."))}function l_(n){if(n instanceof Date)return n.getDate();throw new Error("Failed to get year from date: ".concat(n,"."))}function Xh(n){var e=cn(n),t=e+(-e+1)%100,r=new Date;return r.setFullYear(t,0,1),r.setHours(0,0,0,0),r}var RV=yo(cn,Xh,-100),LR=yo(cn,Xh,100),pw=wm(LR),CV=yo(cn,pw,-100),jR=Em(Xh,pw);function zl(n){var e=cn(n),t=e+(-e+1)%10,r=new Date;return r.setFullYear(t,0,1),r.setHours(0,0,0,0),r}var UR=yo(cn,zl,-10),gw=yo(cn,zl,10),u_=wm(gw),FR=yo(cn,u_,-10),BR=Em(zl,u_);function Zh(n){var e=cn(n),t=new Date;return t.setFullYear(e,0,1),t.setHours(0,0,0,0),t}var zR=yo(cn,Zh,-1),_w=yo(cn,Zh,1),c_=wm(_w),qR=yo(cn,c_,-1),DV=Em(Zh,c_);function vw(n,e){return function(r,s){s===void 0&&(s=e);var o=cn(r),u=Bl(r)+s,h=new Date;return h.setFullYear(o,u,1),h.setHours(0,0,0,0),n(h)}}function rc(n){var e=cn(n),t=Bl(n),r=new Date;return r.setFullYear(e,t,1),r.setHours(0,0,0,0),r}var HR=vw(rc,-1),yw=vw(rc,1),Tm=wm(yw),$R=vw(Tm,-1),xV=Em(rc,Tm);function OV(n,e){return function(r,s){s===void 0&&(s=e);var o=cn(r),u=Bl(r),h=l_(r)+s,f=new Date;return f.setFullYear(o,u,h),f.setHours(0,0,0,0),n(f)}}function Am(n){var e=cn(n),t=Bl(n),r=l_(n),s=new Date;return s.setFullYear(e,t,r),s.setHours(0,0,0,0),s}var NV=OV(Am,1),bw=wm(NV),PV=Em(Am,bw);function GR(n){return l_(Tm(n))}var Sr={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},kV={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},ww=[0,1,2,3,4,5,6],ky=new Map;function VV(n){return function(t,r){var s=t||MR();ky.has(s)||ky.set(s,new Map);var o=ky.get(s);return o.has(n)||o.set(n,new Intl.DateTimeFormat(s||void 0,n).format),o.get(n)(r)}}function MV(n){var e=new Date(n);return new Date(e.setHours(12))}function ic(n){return function(e,t){return VV(n)(e,MV(t))}}var LV={day:"numeric"},jV={day:"numeric",month:"long",year:"numeric"},UV={month:"long"},FV={month:"long",year:"numeric"},BV={weekday:"short"},zV={weekday:"long"},qV={year:"numeric"},HV=ic(LV),$V=ic(jV),GV=ic(UV),WR=ic(FV),WV=ic(BV),KV=ic(zV),h_=ic(qV),YV=ww[0],QV=ww[5],jA=ww[6];function $f(n,e){e===void 0&&(e=Sr.ISO_8601);var t=n.getDay();switch(e){case Sr.ISO_8601:return(t+6)%7;case Sr.ISLAMIC:return(t+1)%7;case Sr.HEBREW:case Sr.GREGORY:return t;default:throw new Error("Unsupported calendar type.")}}function XV(n){var e=Xh(n);return cn(e)}function ZV(n){var e=zl(n);return cn(e)}function ob(n,e){e===void 0&&(e=Sr.ISO_8601);var t=cn(n),r=Bl(n),s=n.getDate()-$f(n,e);return new Date(t,r,s)}function JV(n,e){e===void 0&&(e=Sr.ISO_8601);var t=e===Sr.GREGORY?Sr.GREGORY:Sr.ISO_8601,r=ob(n,e),s=cn(n)+1,o,u;do o=new Date(s,0,t===Sr.ISO_8601?4:1),u=ob(o,e),s-=1;while(n<u);return Math.round((r.getTime()-u.getTime())/(864e5*7))+1}function Fu(n,e){switch(n){case"century":return Xh(e);case"decade":return zl(e);case"year":return Zh(e);case"month":return rc(e);case"day":return Am(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function eM(n,e){switch(n){case"century":return RV(e);case"decade":return UR(e);case"year":return zR(e);case"month":return HR(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function KR(n,e){switch(n){case"century":return LR(e);case"decade":return gw(e);case"year":return _w(e);case"month":return yw(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function tM(n,e){switch(n){case"decade":return UR(e,-100);case"year":return zR(e,-10);case"month":return HR(e,-12);default:throw new Error("Invalid rangeType: ".concat(n))}}function nM(n,e){switch(n){case"decade":return gw(e,100);case"year":return _w(e,10);case"month":return yw(e,12);default:throw new Error("Invalid rangeType: ".concat(n))}}function YR(n,e){switch(n){case"century":return pw(e);case"decade":return u_(e);case"year":return c_(e);case"month":return Tm(e);case"day":return bw(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function rM(n,e){switch(n){case"century":return CV(e);case"decade":return FR(e);case"year":return qR(e);case"month":return $R(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function iM(n,e){switch(n){case"decade":return FR(e,-100);case"year":return qR(e,-10);case"month":return $R(e,-12);default:throw new Error("Invalid rangeType: ".concat(n))}}function UA(n,e){switch(n){case"century":return jR(e);case"decade":return BR(e);case"year":return DV(e);case"month":return xV(e);case"day":return PV(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function sM(n,e,t){var r=[e,t].sort(function(s,o){return s.getTime()-o.getTime()});return[Fu(n,r[0]),YR(n,r[1])]}function QR(n,e,t){return t.map(function(r){return(e||h_)(n,r)}).join(" – ")}function aM(n,e,t){return QR(n,e,jR(t))}function XR(n,e,t){return QR(n,e,BR(t))}function oM(n){return n.getDay()===new Date().getDay()}function ZR(n,e){e===void 0&&(e=Sr.ISO_8601);var t=n.getDay();switch(e){case Sr.ISLAMIC:case Sr.HEBREW:return t===QV||t===jA;case Sr.ISO_8601:case Sr.GREGORY:return t===jA||t===YV;default:throw new Error("Unsupported calendar type.")}}var la="react-calendar__navigation";function lM(n){var e=n.activeStartDate,t=n.drillUp,r=n.formatMonthYear,s=r===void 0?WR:r,o=n.formatYear,u=o===void 0?h_:o,h=n.locale,f=n.maxDate,p=n.minDate,v=n.navigationAriaLabel,b=v===void 0?"":v,A=n.navigationAriaLive,D=n.navigationLabel,M=n.next2AriaLabel,F=M===void 0?"":M,V=n.next2Label,H=V===void 0?"»":V,J=n.nextAriaLabel,se=J===void 0?"":J,ue=n.nextLabel,de=ue===void 0?"›":ue,be=n.prev2AriaLabel,U=be===void 0?"":be,P=n.prev2Label,N=P===void 0?"«":P,k=n.prevAriaLabel,z=k===void 0?"":k,W=n.prevLabel,j=W===void 0?"‹":W,_t=n.setActiveStartDate,xe=n.showDoubleView,le=n.view,Ne=n.views,Oe=Ne.indexOf(le)>0,Ye=le!=="century",O=eM(le,e),re=Ye?tM(le,e):void 0,we=KR(le,e),Ee=Ye?nM(le,e):void 0,Se=function(){if(O.getFullYear()<0)return!0;var Dt=rM(le,e);return p&&p>=Dt}(),Fe=Ye&&function(){if(re.getFullYear()<0)return!0;var Dt=iM(le,e);return p&&p>=Dt}(),Ue=f&&f<we,Ot=Ye&&f&&f<Ee;function Te(){_t(O,"prev")}function ut(){_t(re,"prev2")}function ct(){_t(we,"next")}function Dn(){_t(Ee,"next2")}function Dr(Dt){var Un=function(){switch(le){case"century":return aM(h,u,Dt);case"decade":return XR(h,u,Dt);case"year":return u(h,Dt);case"month":return s(h,Dt);default:throw new Error("Invalid view: ".concat(le,"."))}}();return D?D({date:Dt,label:Un,locale:h||MR()||void 0,view:le}):Un}function vn(){var Dt="".concat(la,"__label");return I.jsxs("button",{"aria-label":b,"aria-live":A,className:Dt,disabled:!Oe,onClick:t,style:{flexGrow:1},type:"button",children:[I.jsx("span",{className:"".concat(Dt,"__labelText ").concat(Dt,"__labelText--from"),children:Dr(e)}),xe?I.jsxs(I.Fragment,{children:[I.jsx("span",{className:"".concat(Dt,"__divider"),children:" – "}),I.jsx("span",{className:"".concat(Dt,"__labelText ").concat(Dt,"__labelText--to"),children:Dr(we)})]}):null]})}return I.jsxs("div",{className:la,children:[N!==null&&Ye?I.jsx("button",{"aria-label":U,className:"".concat(la,"__arrow ").concat(la,"__prev2-button"),disabled:Fe,onClick:ut,type:"button",children:N}):null,j!==null&&I.jsx("button",{"aria-label":z,className:"".concat(la,"__arrow ").concat(la,"__prev-button"),disabled:Se,onClick:Te,type:"button",children:j}),vn(),de!==null&&I.jsx("button",{"aria-label":se,className:"".concat(la,"__arrow ").concat(la,"__next-button"),disabled:Ue,onClick:ct,type:"button",children:de}),H!==null&&Ye?I.jsx("button",{"aria-label":F,className:"".concat(la,"__arrow ").concat(la,"__next2-button"),disabled:Ot,onClick:Dn,type:"button",children:H}):null]})}var gh=function(){return gh=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},gh.apply(this,arguments)},uM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};function FA(n){return"".concat(n,"%")}function Ew(n){var e=n.children,t=n.className,r=n.count,s=n.direction,o=n.offset,u=n.style,h=n.wrap,f=uM(n,["children","className","count","direction","offset","style","wrap"]);return I.jsx("div",gh({className:t,style:gh({display:"flex",flexDirection:s,flexWrap:h?"wrap":"nowrap"},u)},f,{children:B.Children.map(e,function(p,v){var b=o&&v===0?FA(100*o/r):null;return B.cloneElement(p,gh(gh({},p.props),{style:{flexBasis:FA(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:b,marginInlineStart:b,marginInlineEnd:0}}))})}))}function cM(n,e,t){return e&&e>n?e:t&&t<n?t:n}function Gf(n,e){return e[0]<=n&&e[1]>=n}function hM(n,e){return n[0]<=e[0]&&n[1]>=e[1]}function JR(n,e){return Gf(n[0],e)||Gf(n[1],e)}function BA(n,e,t){var r=JR(e,n),s=[];if(r){s.push(t);var o=Gf(n[0],e),u=Gf(n[1],e);o&&s.push("".concat(t,"Start")),u&&s.push("".concat(t,"End")),o&&u&&s.push("".concat(t,"BothEnds"))}return s}function dM(n){return Array.isArray(n)?n[0]!==null&&n[1]!==null:n!==null}function fM(n){if(!n)throw new Error("args is required");var e=n.value,t=n.date,r=n.hover,s="react-calendar__tile",o=[s];if(!t)return o;var u=new Date,h=function(){if(Array.isArray(t))return t;var D=n.dateType;if(!D)throw new Error("dateType is required when date is not an array of two dates");return UA(D,t)}();if(Gf(u,h)&&o.push("".concat(s,"--now")),!e||!dM(e))return o;var f=function(){if(Array.isArray(e))return e;var D=n.valueType;if(!D)throw new Error("valueType is required when value is not an array of two dates");return UA(D,e)}();hM(f,h)?o.push("".concat(s,"--active")):JR(f,h)&&o.push("".concat(s,"--hasActive"));var p=BA(f,h,"".concat(s,"--range"));o.push.apply(o,p);var v=Array.isArray(e)?e:[e];if(r&&v.length===1){var b=r>f[0]?[f[0],r]:[r,f[0]],A=BA(b,h,"".concat(s,"--hover"));o.push.apply(o,A)}return o}function d_(n){for(var e=n.className,t=n.count,r=t===void 0?3:t,s=n.dateTransform,o=n.dateType,u=n.end,h=n.hover,f=n.offset,p=n.renderTile,v=n.start,b=n.step,A=b===void 0?1:b,D=n.value,M=n.valueType,F=[],V=v;V<=u;V+=A){var H=s(V);F.push(p({classes:fM({date:H,dateType:o,hover:h,value:D,valueType:M}),date:H}))}return I.jsx(Ew,{className:e,count:r,offset:f,wrap:!0,children:F})}function f_(n){var e=n.activeStartDate,t=n.children,r=n.classes,s=n.date,o=n.formatAbbr,u=n.locale,h=n.maxDate,f=n.maxDateTransform,p=n.minDate,v=n.minDateTransform,b=n.onClick,A=n.onMouseOver,D=n.style,M=n.tileClassName,F=n.tileContent,V=n.tileDisabled,H=n.view,J=B.useMemo(function(){var ue={activeStartDate:e,date:s,view:H};return typeof M=="function"?M(ue):M},[e,s,M,H]),se=B.useMemo(function(){var ue={activeStartDate:e,date:s,view:H};return typeof F=="function"?F(ue):F},[e,s,F,H]);return I.jsxs("button",{className:o_(r,J),disabled:p&&v(p)>s||h&&f(h)<s||(V==null?void 0:V({activeStartDate:e,date:s,view:H})),onClick:b?function(ue){return b(s,ue)}:void 0,onFocus:A?function(){return A(s)}:void 0,onMouseOver:A?function(){return A(s)}:void 0,style:D,type:"button",children:[o?I.jsx("abbr",{"aria-label":o(u,s),children:t}):t,se]})}var lb=function(){return lb=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},lb.apply(this,arguments)},mM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t},zA="react-calendar__century-view__decades__decade";function pM(n){var e=n.classes,t=e===void 0?[]:e,r=n.currentCentury,s=n.formatYear,o=s===void 0?h_:s,u=mM(n,["classes","currentCentury","formatYear"]),h=u.date,f=u.locale,p=[];return t&&p.push.apply(p,t),p.push(zA),Xh(h).getFullYear()!==r&&p.push("".concat(zA,"--neighboringCentury")),I.jsx(f_,lb({},u,{classes:p,maxDateTransform:u_,minDateTransform:zl,view:"century",children:XR(f,o,h)}))}var ub=function(){return ub=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},ub.apply(this,arguments)},qA=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};function gM(n){var e=n.activeStartDate,t=n.hover,r=n.showNeighboringCentury,s=n.value,o=n.valueType,u=qA(n,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),h=XV(e),f=h+(r?119:99);return I.jsx(d_,{className:"react-calendar__century-view__decades",dateTransform:zl,dateType:"decade",end:f,hover:t,renderTile:function(p){var v=p.date,b=qA(p,["date"]);return I.jsx(pM,ub({},u,b,{activeStartDate:e,currentCentury:h,date:v}),v.getTime())},start:h,step:10,value:s,valueType:o})}var cb=function(){return cb=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},cb.apply(this,arguments)};function _M(n){function e(){return I.jsx(gM,cb({},n))}return I.jsx("div",{className:"react-calendar__century-view",children:e()})}var hb=function(){return hb=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},hb.apply(this,arguments)},vM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t},HA="react-calendar__decade-view__years__year";function yM(n){var e=n.classes,t=e===void 0?[]:e,r=n.currentDecade,s=n.formatYear,o=s===void 0?h_:s,u=vM(n,["classes","currentDecade","formatYear"]),h=u.date,f=u.locale,p=[];return t&&p.push.apply(p,t),p.push(HA),zl(h).getFullYear()!==r&&p.push("".concat(HA,"--neighboringDecade")),I.jsx(f_,hb({},u,{classes:p,maxDateTransform:c_,minDateTransform:Zh,view:"decade",children:o(f,h)}))}var db=function(){return db=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},db.apply(this,arguments)},$A=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};function bM(n){var e=n.activeStartDate,t=n.hover,r=n.showNeighboringDecade,s=n.value,o=n.valueType,u=$A(n,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),h=ZV(e),f=h+(r?11:9);return I.jsx(d_,{className:"react-calendar__decade-view__years",dateTransform:Zh,dateType:"year",end:f,hover:t,renderTile:function(p){var v=p.date,b=$A(p,["date"]);return I.jsx(yM,db({},u,b,{activeStartDate:e,currentDecade:h,date:v}),v.getTime())},start:h,value:s,valueType:o})}var fb=function(){return fb=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},fb.apply(this,arguments)};function wM(n){function e(){return I.jsx(bM,fb({},n))}return I.jsx("div",{className:"react-calendar__decade-view",children:e()})}var mb=function(){return mb=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},mb.apply(this,arguments)},EM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t},GA=function(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},TM="react-calendar__year-view__months__month";function AM(n){var e=n.classes,t=e===void 0?[]:e,r=n.formatMonth,s=r===void 0?GV:r,o=n.formatMonthYear,u=o===void 0?WR:o,h=EM(n,["classes","formatMonth","formatMonthYear"]),f=h.date,p=h.locale;return I.jsx(f_,mb({},h,{classes:GA(GA([],t,!0),[TM],!1),formatAbbr:u,maxDateTransform:Tm,minDateTransform:rc,view:"year",children:s(p,f)}))}var pb=function(){return pb=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},pb.apply(this,arguments)},WA=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};function SM(n){var e=n.activeStartDate,t=n.hover,r=n.value,s=n.valueType,o=WA(n,["activeStartDate","hover","value","valueType"]),u=0,h=11,f=cn(e);return I.jsx(d_,{className:"react-calendar__year-view__months",dateTransform:function(p){var v=new Date;return v.setFullYear(f,p,1),rc(v)},dateType:"month",end:h,hover:t,renderTile:function(p){var v=p.date,b=WA(p,["date"]);return I.jsx(AM,pb({},o,b,{activeStartDate:e,date:v}),v.getTime())},start:u,value:r,valueType:s})}var gb=function(){return gb=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},gb.apply(this,arguments)};function IM(n){function e(){return I.jsx(SM,gb({},n))}return I.jsx("div",{className:"react-calendar__year-view",children:e()})}var _b=function(){return _b=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},_b.apply(this,arguments)},RM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t},Vy="react-calendar__month-view__days__day";function CM(n){var e=n.calendarType,t=n.classes,r=t===void 0?[]:t,s=n.currentMonthIndex,o=n.formatDay,u=o===void 0?HV:o,h=n.formatLongDate,f=h===void 0?$V:h,p=RM(n,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),v=p.date,b=p.locale,A=[];return r&&A.push.apply(A,r),A.push(Vy),ZR(v,e)&&A.push("".concat(Vy,"--weekend")),v.getMonth()!==s&&A.push("".concat(Vy,"--neighboringMonth")),I.jsx(f_,_b({},p,{classes:A,formatAbbr:f,maxDateTransform:bw,minDateTransform:Am,view:"month",children:u(b,v)}))}var vb=function(){return vb=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},vb.apply(this,arguments)},KA=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};function DM(n){var e=n.activeStartDate,t=n.calendarType,r=n.hover,s=n.showFixedNumberOfWeeks,o=n.showNeighboringMonth,u=n.value,h=n.valueType,f=KA(n,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),p=cn(e),v=Bl(e),b=s||o,A=$f(e,t),D=b?0:A,M=(b?-A:0)+1,F=function(){if(s)return M+6*7-1;var V=GR(e);if(o){var H=new Date;H.setFullYear(p,v,V),H.setHours(0,0,0,0);var J=7-$f(H,t)-1;return V+J}return V}();return I.jsx(d_,{className:"react-calendar__month-view__days",count:7,dateTransform:function(V){var H=new Date;return H.setFullYear(p,v,V),Am(H)},dateType:"day",hover:r,end:F,renderTile:function(V){var H=V.date,J=KA(V,["date"]);return I.jsx(CM,vb({},f,J,{activeStartDate:e,calendarType:t,currentMonthIndex:v,date:H}),H.getTime())},offset:D,start:M,value:u,valueType:h})}var eC="react-calendar__month-view__weekdays",My="".concat(eC,"__weekday");function xM(n){for(var e=n.calendarType,t=n.formatShortWeekday,r=t===void 0?WV:t,s=n.formatWeekday,o=s===void 0?KV:s,u=n.locale,h=n.onMouseLeave,f=new Date,p=rc(f),v=cn(p),b=Bl(p),A=[],D=1;D<=7;D+=1){var M=new Date(v,b,D-$f(p,e)),F=o(u,M);A.push(I.jsx("div",{className:o_(My,oM(M)&&"".concat(My,"--current"),ZR(M,e)&&"".concat(My,"--weekend")),children:I.jsx("abbr",{"aria-label":F,title:F,children:r(u,M).replace(".","")})},D))}return I.jsx(Ew,{className:eC,count:7,onFocus:h,onMouseOver:h,children:A})}var Dg=function(){return Dg=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},Dg.apply(this,arguments)},YA=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t},QA="react-calendar__tile";function OM(n){var e=n.onClickWeekNumber,t=n.weekNumber,r=I.jsx("span",{children:t});if(e){var s=n.date,o=n.onClickWeekNumber,u=n.weekNumber,h=YA(n,["date","onClickWeekNumber","weekNumber"]);return I.jsx("button",Dg({},h,{className:QA,onClick:function(f){return o(u,s,f)},type:"button",children:r}))}else{n.date,n.onClickWeekNumber,n.weekNumber;var h=YA(n,["date","onClickWeekNumber","weekNumber"]);return I.jsx("div",Dg({},h,{className:QA,children:r}))}}function NM(n){var e=n.activeStartDate,t=n.calendarType,r=n.onClickWeekNumber,s=n.onMouseLeave,o=n.showFixedNumberOfWeeks,u=function(){if(o)return 6;var p=GR(e),v=$f(e,t),b=p-(7-v);return 1+Math.ceil(b/7)}(),h=function(){for(var p=cn(e),v=Bl(e),b=l_(e),A=[],D=0;D<u;D+=1)A.push(ob(new Date(p,v,b+D*7),t));return A}(),f=h.map(function(p){return JV(p,t)});return I.jsx(Ew,{className:"react-calendar__month-view__weekNumbers",count:u,direction:"column",onFocus:s,onMouseOver:s,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:f.map(function(p,v){var b=h[v];if(!b)throw new Error("date is not defined");return I.jsx(OM,{date:b,onClickWeekNumber:r,weekNumber:p},p)})})}var yb=function(){return yb=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},yb.apply(this,arguments)},PM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};function kM(n){if(n)for(var e=0,t=Object.entries(kV);e<t.length;e++){var r=t[e],s=r[0],o=r[1];if(o.includes(n))return s}return Sr.ISO_8601}function VM(n){var e=n.activeStartDate,t=n.locale,r=n.onMouseLeave,s=n.showFixedNumberOfWeeks,o=n.calendarType,u=o===void 0?kM(t):o,h=n.formatShortWeekday,f=n.formatWeekday,p=n.onClickWeekNumber,v=n.showWeekNumbers,b=PM(n,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function A(){return I.jsx(xM,{calendarType:u,formatShortWeekday:h,formatWeekday:f,locale:t,onMouseLeave:r})}function D(){return v?I.jsx(NM,{activeStartDate:e,calendarType:u,onClickWeekNumber:p,onMouseLeave:r,showFixedNumberOfWeeks:s}):null}function M(){return I.jsx(DM,yb({calendarType:u},b))}var F="react-calendar__month-view";return I.jsx("div",{className:o_(F,v?"".concat(F,"--weekNumbers"):""),children:I.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[D(),I.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[A(),M()]})]})})}var _h=function(){return _h=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},_h.apply(this,arguments)},Jp="react-calendar",dg=["century","decade","year","month"],MM=["decade","year","month","day"],Tw=new Date;Tw.setFullYear(1,0,1);Tw.setHours(0,0,0,0);var LM=new Date(864e13);function Tf(n){return n instanceof Date?n:new Date(n)}function tC(n,e){return dg.slice(dg.indexOf(n),dg.indexOf(e)+1)}function jM(n,e,t){var r=tC(e,t);return r.indexOf(n)!==-1}function Aw(n,e,t){return n&&jM(n,e,t)?n:t}function nC(n){var e=dg.indexOf(n);return MM[e]}function UM(n,e){var t=Array.isArray(n)?n[e]:n;if(!t)return null;var r=Tf(t);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(n));return r}function rC(n,e){var t=n.value,r=n.minDate,s=n.maxDate,o=n.maxDetail,u=UM(t,e);if(!u)return null;var h=nC(o),f=function(){switch(e){case 0:return Fu(h,u);case 1:return YR(h,u);default:throw new Error("Invalid index value: ".concat(e))}}();return cM(f,r,s)}var Sw=function(n){return rC(n,0)},iC=function(n){return rC(n,1)},FM=function(n){return[Sw,iC].map(function(e){return e(n)})};function sC(n){var e=n.maxDate,t=n.maxDetail,r=n.minDate,s=n.minDetail,o=n.value,u=n.view,h=Aw(u,s,t),f=Sw({value:o,minDate:r,maxDate:e,maxDetail:t})||new Date;return Fu(h,f)}function BM(n){var e=n.activeStartDate,t=n.defaultActiveStartDate,r=n.defaultValue,s=n.defaultView,o=n.maxDate,u=n.maxDetail,h=n.minDate,f=n.minDetail,p=n.value,v=n.view,b=Aw(v,f,u),A=e||t;return A?Fu(b,A):sC({maxDate:o,maxDetail:u,minDate:h,minDetail:f,value:p||r,view:v||s})}function Ly(n){return n&&(!Array.isArray(n)||n.length===1)}function eg(n,e){return n instanceof Date&&e instanceof Date&&n.getTime()===e.getTime()}var zM=B.forwardRef(function(e,t){var r=e.activeStartDate,s=e.allowPartialRange,o=e.calendarType,u=e.className,h=e.defaultActiveStartDate,f=e.defaultValue,p=e.defaultView,v=e.formatDay,b=e.formatLongDate,A=e.formatMonth,D=e.formatMonthYear,M=e.formatShortWeekday,F=e.formatWeekday,V=e.formatYear,H=e.goToRangeStartOnSelect,J=H===void 0?!0:H,se=e.inputRef,ue=e.locale,de=e.maxDate,be=de===void 0?LM:de,U=e.maxDetail,P=U===void 0?"month":U,N=e.minDate,k=N===void 0?Tw:N,z=e.minDetail,W=z===void 0?"century":z,j=e.navigationAriaLabel,_t=e.navigationAriaLive,xe=e.navigationLabel,le=e.next2AriaLabel,Ne=e.next2Label,Oe=e.nextAriaLabel,Ye=e.nextLabel,O=e.onActiveStartDateChange,re=e.onChange,we=e.onClickDay,Ee=e.onClickDecade,Se=e.onClickMonth,Fe=e.onClickWeekNumber,Ue=e.onClickYear,Ot=e.onDrillDown,Te=e.onDrillUp,ut=e.onViewChange,ct=e.prev2AriaLabel,Dn=e.prev2Label,Dr=e.prevAriaLabel,vn=e.prevLabel,Dt=e.returnValue,Un=Dt===void 0?"start":Dt,kt=e.selectRange,$i=e.showDoubleView,_s=e.showFixedNumberOfWeeks,vs=e.showNavigation,ys=vs===void 0?!0:vs,$s=e.showNeighboringCentury,Ql=e.showNeighboringDecade,Gs=e.showNeighboringMonth,xn=Gs===void 0?!0:Gs,Br=e.showWeekNumbers,tn=e.tileClassName,Ht=e.tileContent,er=e.tileDisabled,zr=e.value,Si=e.view,Io=B.useState(h),Ii=Io[0],qr=Io[1],On=B.useState(null),Ca=On[0],Hr=On[1],Fn=B.useState(Array.isArray(f)?f.map(function(Me){return Me!==null?Tf(Me):null}):f!=null?Tf(f):null),bs=Fn[0],Da=Fn[1],Gi=B.useState(p),$r=Gi[0],hi=Gi[1],jt=r||Ii||BM({activeStartDate:r,defaultActiveStartDate:h,defaultValue:f,defaultView:p,maxDate:be,maxDetail:P,minDate:k,minDetail:W,value:zr,view:Si}),Vt=function(){var Me=function(){return kt&&Ly(bs)?bs:zr!==void 0?zr:bs}();return Me?Array.isArray(Me)?Me.map(function(Qe){return Qe!==null?Tf(Qe):null}):Me!==null?Tf(Me):null:null}(),Gr=nC(P),St=Aw(Si||$r,W,P),hn=tC(W,P),xr=kt?Ca:null,Wi=hn.indexOf(St)<hn.length-1,$t=hn.indexOf(St)>0,xa=B.useCallback(function(Me){var Qe=function(){switch(Un){case"start":return Sw;case"end":return iC;case"range":return FM;default:throw new Error("Invalid returnValue.")}}();return Qe({maxDate:be,maxDetail:P,minDate:k,value:Me})},[be,P,k,Un]),di=B.useCallback(function(Me,Qe){qr(Me);var nt={action:Qe,activeStartDate:Me,value:Vt,view:St};O&&!eg(jt,Me)&&O(nt)},[jt,O,Vt,St]),Wr=B.useCallback(function(Me,Qe){var nt=function(){switch(St){case"century":return Ee;case"decade":return Ue;case"year":return Se;case"month":return we;default:throw new Error("Invalid view: ".concat(St,"."))}}();nt&&nt(Me,Qe)},[we,Ee,Se,Ue,St]),Ki=B.useCallback(function(Me,Qe){if(Wi){Wr(Me,Qe);var nt=hn[hn.indexOf(St)+1];if(!nt)throw new Error("Attempted to drill down from the lowest view.");qr(Me),hi(nt);var ht={action:"drillDown",activeStartDate:Me,value:Vt,view:nt};O&&!eg(jt,Me)&&O(ht),ut&&St!==nt&&ut(ht),Ot&&Ot(ht)}},[jt,Wi,O,Wr,Ot,ut,Vt,St,hn]),Kr=B.useCallback(function(){if($t){var Me=hn[hn.indexOf(St)-1];if(!Me)throw new Error("Attempted to drill up from the highest view.");var Qe=Fu(Me,jt);qr(Qe),hi(Me);var nt={action:"drillUp",activeStartDate:Qe,value:Vt,view:Me};O&&!eg(jt,Qe)&&O(nt),ut&&St!==Me&&ut(nt),Te&&Te(nt)}},[jt,$t,O,Te,ut,Vt,St,hn]),mr=B.useCallback(function(Me,Qe){var nt=Vt;Wr(Me,Qe);var ht=kt&&!Ly(nt),rn;if(kt)if(ht)rn=Fu(Gr,Me);else{if(!nt)throw new Error("previousValue is required");if(Array.isArray(nt))throw new Error("previousValue must not be an array");rn=sM(Gr,nt,Me)}else rn=xa(Me);var yn=!kt||ht||J?sC({maxDate:be,maxDetail:P,minDate:k,minDetail:W,value:rn,view:St}):null;Qe.persist(),qr(yn),Da(rn);var Gn={action:"onChange",activeStartDate:yn,value:rn,view:St};if(O&&!eg(jt,yn)&&O(Gn),re)if(kt){var pr=Ly(rn);if(!pr)re(rn||null,Qe);else if(s){if(Array.isArray(rn))throw new Error("value must not be an array");re([rn||null,null],Qe)}}else re(rn||null,Qe)},[jt,s,xa,J,be,P,k,W,O,re,Wr,kt,Vt,Gr,St]);function fi(Me){Hr(Me)}function Gt(){Hr(null)}B.useImperativeHandle(t,function(){return{activeStartDate:jt,drillDown:Ki,drillUp:Kr,onChange:mr,setActiveStartDate:di,value:Vt,view:St}},[jt,Ki,Kr,mr,di,Vt,St]);function nn(Me){var Qe=Me?KR(St,jt):Fu(St,jt),nt=Wi?Ki:mr,ht={activeStartDate:Qe,hover:xr,locale:ue,maxDate:be,minDate:k,onClick:nt,onMouseOver:kt?fi:void 0,tileClassName:tn,tileContent:Ht,tileDisabled:er,value:Vt,valueType:Gr};switch(St){case"century":return I.jsx(_M,_h({formatYear:V,showNeighboringCentury:$s},ht));case"decade":return I.jsx(wM,_h({formatYear:V,showNeighboringDecade:Ql},ht));case"year":return I.jsx(IM,_h({formatMonth:A,formatMonthYear:D},ht));case"month":return I.jsx(VM,_h({calendarType:o,formatDay:v,formatLongDate:b,formatShortWeekday:M,formatWeekday:F,onClickWeekNumber:Fe,onMouseLeave:kt?Gt:void 0,showFixedNumberOfWeeks:typeof _s<"u"?_s:$i,showNeighboringMonth:xn,showWeekNumbers:Br},ht));default:throw new Error("Invalid view: ".concat(St,"."))}}function Ri(){return ys?I.jsx(lM,{activeStartDate:jt,drillUp:Kr,formatMonthYear:D,formatYear:V,locale:ue,maxDate:be,minDate:k,navigationAriaLabel:j,navigationAriaLive:_t,navigationLabel:xe,next2AriaLabel:le,next2Label:Ne,nextAriaLabel:Oe,nextLabel:Ye,prev2AriaLabel:ct,prev2Label:Dn,prevAriaLabel:Dr,prevLabel:vn,setActiveStartDate:di,showDoubleView:$i,view:St,views:hn}):null}var Or=Array.isArray(Vt)?Vt:[Vt];return I.jsxs("div",{className:o_(Jp,kt&&Or.length===1&&"".concat(Jp,"--selectRange"),$i&&"".concat(Jp,"--doubleView"),u),ref:se,children:[Ri(),I.jsxs("div",{className:"".concat(Jp,"__viewContainer"),onBlur:kt?Gt:void 0,onMouseLeave:kt?Gt:void 0,children:[nn(),$i?nn(!0):null]})]})});function qM(){const[n,e]=B.useState(new Date),t=(r,s)=>{e(r)};return I.jsx("div",{className:"calendar-widget",children:I.jsx(zM,{onChange:t,value:n})})}function HM(){const e=(()=>{const t=new Date,r=new Date(t);r.setFullYear(t.getFullYear()-1);const s=[],o=new Date(r);for(;o<=t;){const u=o.toISOString().split("T")[0],h=Math.floor(Math.random()*10);s.push({date:u,count:h}),o.setDate(o.getDate()+1)}return s})();return I.jsxs("div",{className:"dashboard-container",children:[I.jsxs("div",{className:"dashboard-left",children:[I.jsx("h1",{style:{padding:"2rem",fontSize:"3.8em"},children:"Dashboard"}),I.jsxs("div",{className:"dashboard-cards",children:[I.jsx("div",{className:"dashboard-card",children:"Problems Solved: 30"}),I.jsx("div",{className:"dashboard-card",children:"Pending Problems: 4"})]}),I.jsx("div",{children:I.jsx(mV,{activityData:e})}),I.jsx("div",{className:"dashboard-card",children:I.jsx(PR,{})})]}),I.jsxs("div",{className:"dashboard-right",children:[I.jsx("div",{style:{height:"8.8rem"}}),I.jsx(pV,{}),I.jsx(qM,{})]})]})}const $M=({children:n})=>I.jsx("div",{className:"sidebar-wrapper",children:I.jsxs("aside",{className:"sidebar","aria-label":"Sidebar navigation",children:[I.jsx("h2",{className:"sidebar_head",children:"Vcode"}),I.jsxs("div",{className:"listgroup",children:[I.jsx("div",{className:"listgroupitem",children:I.jsx(zi,{to:"/",children:"Dashboard"})}),I.jsx("div",{className:"listgroupitem",children:I.jsx(zi,{to:"/cproblems",children:"View Problems"})}),I.jsx("div",{className:"listgroupitem",children:I.jsx(zi,{to:"/client-submissions",children:"Submissions"})}),I.jsx("div",{className:"listgroupitem",children:I.jsx(zi,{to:"/settings",children:"Settings"})})]}),n]})});function GM(){const{hostIP:n}=Ra(),e=()=>{localStorage.removeItem("sessionId"),localStorage.removeItem("userEmail"),localStorage.removeItem("userRole"),localStorage.removeItem("userPort"),fetch(`http://${n}:9000/logout`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}).then(t=>{t.ok?(console.log("Logged out successfully"),window.location.href=`http://${n}:9000/`):(console.error("Logout failed:",t.statusText),alert("Logout failed. Please try again."))}).catch(t=>{console.error("Error during logout:",t),alert("Error during logout. Please try again."),window.location.href=`http://${n}:9000/`})};return I.jsx("div",{className:"client-layout",children:I.jsxs("div",{className:"main-content",children:[location.pathname!=="/problempage"&&I.jsx($M,{children:I.jsx(I.Fragment,{children:I.jsx("div",{className:"btn-wrapper",children:I.jsx("button",{className:"logout-button",onClick:e,children:"Logout"})})})}),I.jsx("div",{className:"content",children:I.jsx(_R,{})})]})})}const WM=()=>{const{port:n,hostIP:e}=Ra(),{id:t}=uw(),[r,s]=B.useState(null),[o,u]=B.useState("java"),[h,f]=B.useState("// Write your code here..."),[p,v]=B.useState("No output yet..."),[b,A]=B.useState("");B.useEffect(()=>{t&&(async()=>{try{const V=await fetch(`http://${e}:${n}/question/${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!V.ok)throw new Error(`HTTP error! Status: ${V.status}`);const H=await V.json();console.log("Fetched problem:",H),s({title:H.title||"No title available",difficulty:H.diff||"Unknown",description:H.desc||"No description available"})}catch(V){console.error("Error fetching problem details:",V)}})()},[t]);const D=async()=>{v("Submitting code...");const F={language:o,code:h,problemId:t};try{const V=await fetch(`http://${e}:${n}/submitCode`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!V.ok)throw new Error(`HTTP error! Status: ${V.status}`);const H=await V.json();v(H.result||"No result received from server.")}catch(V){console.error("Error submitting code:",V),v("Error submitting code.")}},M=async()=>{v("Running code...");const F={language:o,code:h,testInput:b||null};try{const H=await(await fetch(`http://${e}:${n}/compile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)})).json();v(H.output||"No output received.")}catch(V){console.error("Error running code:",V),v("Error running code.")}};return I.jsx("div",{className:"problem-page",children:r?I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"problem-container",children:[I.jsx("h2",{children:r.title}),I.jsxs("p",{children:[I.jsx("strong",{children:"Difficulty:"})," ",r.difficulty]}),I.jsxs("div",{className:"problem-description",children:[I.jsx("strong",{children:"Description:"}),r.description.replace(/\\n/g,`
`).split(`
`).map((F,V)=>I.jsx("p",{children:F},V))]})]}),I.jsxs("div",{className:"content",children:[I.jsxs("select",{className:"language-selector",value:o,onChange:F=>u(F.target.value),children:[I.jsx("option",{value:"python",children:"Python"}),I.jsx("option",{value:"java",children:"Java"}),I.jsx("option",{value:"c",children:"c"}),I.jsx("option",{value:"cpp",children:"C++"}),I.jsx("option",{value:"javascript",children:"JavaScript"})]}),I.jsx("div",{className:"code-editor",children:I.jsx(OR,{height:"400px",language:o,theme:"vs-dark",value:h,onChange:F=>f(F||""),options:{fontSize:18,automaticLayout:!0}})}),I.jsxs("div",{className:"custom-test",children:[I.jsx("p",{children:I.jsx("strong",{children:"Custom Test Cases:"})}),I.jsx("textarea",{placeholder:"Enter custom test cases...",value:b,onChange:F=>A(F.target.value)})]}),I.jsxs("div",{className:"controls",children:[I.jsx("button",{className:"btn run-btn",onClick:M,children:"Run"}),I.jsx("button",{className:"btn submit-btn",onClick:D,children:"Submit"})]}),I.jsxs("div",{className:"output-container",children:[I.jsx("h3",{children:"Output:"}),I.jsx("pre",{children:p})]})]})]}):I.jsx("p",{children:"Loading problem details..."})})},KM=()=>{const{port:n,hostIP:e}=Ra();console.log(`${n}`);const t=async r=>{const s=parseInt(r.id);if(isNaN(s)){alert("❗ Please enter a valid numeric ID.");return}const o={id:s,title:r.title,diff:r.difficulty,desc:r.description,tags:(r.tags||"").split(",").map(u=>u.trim()).filter(u=>u.length>0),code:r.code,cases:r.cases};console.log("📤 Submitted Problem Data:",o);try{const u=await fetch(`http://${e}:${n}/addQuestion`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(u.ok)alert("✅ Question sent to server and added to Firebase!");else{const h=await u.text();console.error("❌ Server Error Response:",h),alert("❌ Server failed to add question.")}}catch(u){console.error("⚠️ Error sending to server:",u),alert("⚠️ Could not reach server.")}};return I.jsx(NR,{formTitle:"Add New Problem",initialData:{id:"",title:"",difficulty:"",tags:"",description:"",code:"",cases:""},onSubmit:t})},YM=()=>{const{port:n,hostIP:e}=Ra(),t=i_(),[r,s]=B.useState([]),[o,u]=B.useState(!0),[h,f]=B.useState(null);B.useEffect(()=>{(async()=>{try{const A=await fetch(`http://${e}:${n}/submissions`);if(!A.ok)throw new Error("Failed to fetch submissions");const D=await A.json();s(D),localStorage.setItem("submissions",JSON.stringify(D))}catch(A){f(A.message)}finally{u(!1)}})()},[]);const p=b=>{const A=b.split(/\s+/);return A.slice(0,10).join(" ")+(A.length>10?"...":"")},v=b=>{t(`/submission/${b}`)};return I.jsxs("div",{className:"overflow-auto",children:[I.jsx("h2",{className:"problemList-title",children:"Your Submissions"}),o&&I.jsx("p",{className:"text-white",children:"Loading submissions..."}),h&&I.jsxs("p",{className:"text-danger",children:["Error: ",h]}),I.jsx("ul",{className:"list-group",children:r.map((b,A)=>I.jsx("li",{children:I.jsxs("div",{className:"pli cursor-pointer",onClick:()=>v(A),children:[I.jsxs("div",{className:"problem-content",children:[I.jsxs("strong",{children:["Language: ",b.language]}),I.jsxs("div",{className:"difficulty",children:["Time: ",b.timestamp]}),I.jsx("div",{className:"tags",children:I.jsxs("span",{className:"tag",children:["IP: ",b.ip]})})]}),I.jsx("div",{className:"text-white mt-2",children:I.jsx("code",{className:"bg-dark p-2 rounded d-block",children:p(b.code)})})]})},A))})]})},QM=()=>{const{id:n}=uw(),e=i_(),r=JSON.parse(localStorage.getItem("submissions")||"[]")[parseInt(n||"-1")];return r?I.jsxs("div",{className:"p-4 bg-dark text-white min-vh-100",children:[I.jsx("button",{className:"btn btn-secondary mb-3",onClick:()=>e(-1),children:"⬅ Back"}),I.jsx("h2",{className:"mb-3",children:"Submission Details"}),I.jsxs("p",{children:[I.jsx("strong",{children:"Language:"})," ",r.language]}),I.jsxs("p",{children:[I.jsx("strong",{children:"IP:"})," ",r.ip]}),I.jsxs("p",{children:[I.jsx("strong",{children:"Timestamp:"})," ",r.timestamp]}),I.jsx("pre",{className:"bg-black p-3 rounded mt-3 text-white",children:r.code})]}):I.jsx("div",{className:"text-white",children:"Submission not found"})},aC=B.createContext(void 0),XM=()=>{const n=B.useContext(aC);if(!n)throw new Error("useTheme must be used within ThemeProvider");return n},ZM=({children:n})=>{const[e,t]=B.useState(localStorage.getItem("theme")||"dark");B.useEffect(()=>{e==="light"?document.body.classList.add("light-theme"):document.body.classList.remove("light-theme"),localStorage.setItem("theme",e)},[e]);const r=()=>t(s=>s==="dark"?"light":"dark");return I.jsx(aC.Provider,{value:{theme:e,toggleTheme:r},children:n})},JM=()=>{};var XA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},eL=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],u=n[t++],h=n[t++],f=((s&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},lC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],u=s+1<n.length,h=u?n[s+1]:0,f=s+2<n.length,p=f?n[s+2]:0,v=o>>2,b=(o&3)<<4|h>>4;let A=(h&15)<<2|p>>6,D=p&63;f||(D=64,u||(A=64)),r.push(t[v],t[b],t[A],t[D])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(oC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):eL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const b=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||h==null||p==null||b==null)throw new tL;const A=o<<2|h>>4;if(r.push(A),p!==64){const D=h<<4&240|p>>2;if(r.push(D),b!==64){const M=p<<6&192|b;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class tL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nL=function(n){const e=oC(n);return lC.encodeByteArray(e,!0)},xg=function(n){return nL(n).replace(/\./g,"")},Iw=function(n){try{return lC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Og(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!rL(t)||(n[t]=Og(n[t],e[t]));return n}function rL(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=()=>uC().__FIREBASE_DEFAULTS__,sL=()=>{if(typeof process>"u"||typeof XA>"u")return;const n=XA.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},aL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Iw(n[1]);return e&&JSON.parse(e)},Rw=()=>{try{return JM()||iL()||sL()||aL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cC=()=>{var n;return(n=Rw())===null||n===void 0?void 0:n.config},oL=n=>{var e;return(e=Rw())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[xg(JSON.stringify(t)),xg(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function Cw(){var n;const e=(n=Rw())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hL(){return typeof window<"u"||hC()}function hC(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function dL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Dw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fC(){const n=gn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function mC(){return!Cw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wf(){try{return typeof indexedDB=="object"}catch{return!1}}function fL(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL="FirebaseError";class li extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=mL,Object.setPrototypeOf(this,li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sc.prototype.create)}}class sc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?pL(o,r):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new li(s,h,r)}}function pL(n,e){return n.replace(gL,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const gL=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function _L(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Cl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],u=e[s];if(JA(o)&&JA(u)){if(!Cl(o,u))return!1}else if(o!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function JA(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Af(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function pC(n,e){const t=new vL(n,e);return t.subscribe.bind(t)}class vL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");yL(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=jy),s.error===void 0&&(s.error=jy),s.complete===void 0&&(s.complete=jy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function jy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(n){return n&&n._delegate?n._delegate:n}class wa{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new lL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EL(e))try{this.getOrInitializeService({instanceIdentifier:Cu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Cu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cu){return this.instances.has(e)}getOptions(e=Cu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cu){return this.component?this.component.multipleInstances?e:Cu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wL(n){return n===Cu?void 0:n}function EL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=[];var lt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(lt||(lt={}));const _C={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},TL=lt.INFO,AL={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},SL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=AL[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class m_{constructor(e){this.name=e,this._logLevel=TL,this._logHandler=SL,this._userLogHandler=null,xw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_C[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}function IL(n){xw.forEach(e=>{e.setLogLevel(n)})}function RL(n,e){for(const t of xw){let r=null;e&&e.level&&(r=_C[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(s,o,...u)=>{const h=u.map(f=>{if(f==null)return null;if(typeof f=="string")return f;if(typeof f=="number"||typeof f=="boolean")return f.toString();if(f instanceof Error)return f.message;try{return JSON.stringify(f)}catch{return null}}).filter(f=>f).join(" ");o>=(r??s.logLevel)&&n({level:lt[o].toLowerCase(),message:h,args:u,type:s.name})}}}const CL=(n,e)=>e.some(t=>n instanceof t);let eS,tS;function DL(){return eS||(eS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xL(){return tS||(tS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vC=new WeakMap,bb=new WeakMap,yC=new WeakMap,Uy=new WeakMap,Ow=new WeakMap;function OL(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(El(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&vC.set(t,n)}).catch(()=>{}),Ow.set(e,n),e}function NL(n){if(bb.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});bb.set(n,e)}let wb={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bb.get(n);if(e==="objectStoreNames")return n.objectStoreNames||yC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return El(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function PL(n){wb=n(wb)}function kL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Fy(this),e,...t);return yC.set(r,e.sort?e.sort():[e]),El(r)}:xL().includes(n)?function(...e){return n.apply(Fy(this),e),El(vC.get(this))}:function(...e){return El(n.apply(Fy(this),e))}}function VL(n){return typeof n=="function"?kL(n):(n instanceof IDBTransaction&&NL(n),CL(n,DL())?new Proxy(n,wb):n)}function El(n){if(n instanceof IDBRequest)return OL(n);if(Uy.has(n))return Uy.get(n);const e=VL(n);return e!==n&&(Uy.set(n,e),Ow.set(e,n)),e}const Fy=n=>Ow.get(n);function ML(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const u=indexedDB.open(n,e),h=El(u);return r&&u.addEventListener("upgradeneeded",f=>{r(El(u.result),f.oldVersion,f.newVersion,El(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),s&&f.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const LL=["get","getKey","getAll","getAllKeys","count"],jL=["put","add","delete","clear"],By=new Map;function nS(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(By.get(e))return By.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=jL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||LL.includes(t)))return;const o=async function(u,...h){const f=this.transaction(u,s?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),s&&f.done]))[0]};return By.set(e,o),o}PL(n=>({...n,get:(e,t,r)=>nS(e,t)||n.get(e,t,r),has:(e,t)=>!!nS(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(FL(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function FL(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ng="@firebase/app",Eb="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new m_("@firebase/app"),BL="@firebase/app-compat",zL="@firebase/analytics-compat",qL="@firebase/analytics",HL="@firebase/app-check-compat",$L="@firebase/app-check",GL="@firebase/auth",WL="@firebase/auth-compat",KL="@firebase/database",YL="@firebase/data-connect",QL="@firebase/database-compat",XL="@firebase/functions",ZL="@firebase/functions-compat",JL="@firebase/installations",e2="@firebase/installations-compat",t2="@firebase/messaging",n2="@firebase/messaging-compat",r2="@firebase/performance",i2="@firebase/performance-compat",s2="@firebase/remote-config",a2="@firebase/remote-config-compat",o2="@firebase/storage",l2="@firebase/storage-compat",u2="@firebase/firestore",c2="@firebase/vertexai",h2="@firebase/firestore-compat",d2="firebase",f2="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl="[DEFAULT]",m2={[Ng]:"fire-core",[BL]:"fire-core-compat",[qL]:"fire-analytics",[zL]:"fire-analytics-compat",[$L]:"fire-app-check",[HL]:"fire-app-check-compat",[GL]:"fire-auth",[WL]:"fire-auth-compat",[KL]:"fire-rtdb",[YL]:"fire-data-connect",[QL]:"fire-rtdb-compat",[XL]:"fire-fn",[ZL]:"fire-fn-compat",[JL]:"fire-iid",[e2]:"fire-iid-compat",[t2]:"fire-fcm",[n2]:"fire-fcm-compat",[r2]:"fire-perf",[i2]:"fire-perf-compat",[s2]:"fire-rc",[a2]:"fire-rc-compat",[o2]:"fire-gcs",[l2]:"fire-gcs-compat",[u2]:"fire-fst",[h2]:"fire-fst-compat",[c2]:"fire-vertex","fire-js":"fire-js",[d2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=new Map,Ih=new Map,Rh=new Map;function Kf(n,e){try{n.container.addComponent(e)}catch(t){mo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function bC(n,e){n.container.addOrOverwriteComponent(e)}function Ol(n){const e=n.name;if(Rh.has(e))return mo.debug(`There were multiple attempts to register component ${e}.`),!1;Rh.set(e,n);for(const t of xl.values())Kf(t,n);for(const t of Ih.values())Kf(t,n);return!0}function wC(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function p2(n,e,t=Dl){wC(n,e).clearInstance(t)}function EC(n){return n.options!==void 0}function an(n){return n==null?!1:n.settings!==void 0}function g2(){Rh.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ps=new sc("app","Firebase",_2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TC=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ps.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(n,e){const t=Iw(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(t).exp*1e3,o=new Date().getTime();s-o<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class v2 extends TC{constructor(e,t,r,s){const o=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,u={name:r,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,u,s);else{const h=e;super(h.options,u,s)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:o},t),this._serverConfig.authIdToken&&rS(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&rS(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,zs(Ng,Eb,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Pw(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ps.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=f2;function Nw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Dl,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ps.create("bad-app-name",{appName:String(s)});if(t||(t=cC()),!t)throw ps.create("no-options");const o=xl.get(s);if(o){if(Cl(t,o.options)&&Cl(r,o.config))return o;throw ps.create("duplicate-app",{appName:s})}const u=new gC(s);for(const f of Rh.values())u.addComponent(f);const h=new TC(t,r,u);return xl.set(s,h),h}function y2(n,e){if(hL()&&!hC())throw ps.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;EC(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=p=>[...p].reduce((v,b)=>Math.imul(31,v)+b.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw ps.create("finalization-registry-not-supported",{});const o=""+s(JSON.stringify(r)),u=Ih.get(o);if(u)return u.incRefCount(e.releaseOnDeref),u;const h=new gC(o);for(const p of Rh.values())h.addComponent(p);const f=new v2(t,e,o,h);return Ih.set(o,f),f}function b2(n=Dl){const e=xl.get(n);if(!e&&n===Dl&&cC())return Nw();if(!e)throw ps.create("no-app",{appName:n});return e}function w2(){return Array.from(xl.values())}async function Pw(n){let e=!1;const t=n.name;xl.has(t)?(e=!0,xl.delete(t)):Ih.has(t)&&n.decRefCount()<=0&&(Ih.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function zs(n,e,t){var r;let s=(r=m2[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mo.warn(h.join(" "));return}Ol(new wa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function AC(n,e){if(n!==null&&typeof n!="function")throw ps.create("invalid-log-argument");RL(n,e)}function SC(n){IL(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="firebase-heartbeat-database",T2=1,Yf="firebase-heartbeat-store";let zy=null;function IC(){return zy||(zy=ML(E2,T2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yf)}catch(t){console.warn(t)}}}}).catch(n=>{throw ps.create("idb-open",{originalErrorMessage:n.message})})),zy}async function A2(n){try{const t=(await IC()).transaction(Yf),r=await t.objectStore(Yf).get(RC(n));return await t.done,r}catch(e){if(e instanceof li)mo.warn(e.message);else{const t=ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mo.warn(t.message)}}}async function iS(n,e){try{const r=(await IC()).transaction(Yf,"readwrite");await r.objectStore(Yf).put(e,RC(n)),await r.done}catch(t){if(t instanceof li)mo.warn(t.message);else{const r=ps.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});mo.warn(r.message)}}}function RC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=1024,I2=30;class R2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new D2(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=sS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>I2){const u=x2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){mo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=sS(),{heartbeatsToSend:r,unsentEntries:s}=C2(this._heartbeatsCache.heartbeats),o=xg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return mo.warn(t),""}}}function sS(){return new Date().toISOString().substring(0,10)}function C2(n,e=S2){const t=[];let r=n.slice();for(const s of n){const o=t.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),aS(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),aS(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class D2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wf()?fL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await A2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return iS(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return iS(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function aS(n){return xg(JSON.stringify({version:2,heartbeats:n})).length}function x2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(n){Ol(new wa("platform-logger",e=>new UL(e),"PRIVATE")),Ol(new wa("heartbeat",e=>new R2(e),"PRIVATE")),zs(Ng,Eb,n),zs(Ng,Eb,"esm2017"),zs("fire-js","")}O2("");const N2=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:li,SDK_VERSION:ql,_DEFAULT_ENTRY_NAME:Dl,_addComponent:Kf,_addOrOverwriteComponent:bC,_apps:xl,_clearComponents:g2,_components:Rh,_getProvider:wC,_isFirebaseApp:EC,_isFirebaseServerApp:an,_registerComponent:Ol,_removeServiceInstance:p2,_serverApps:Ih,deleteApp:Pw,getApp:b2,getApps:w2,initializeApp:Nw,initializeServerApp:y2,onLog:AC,registerVersion:zs,setLogLevel:SC},Symbol.toStringTag,{value:"Module"}));var oS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tl,CC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,P){function N(){}N.prototype=P.prototype,U.D=P.prototype,U.prototype=new N,U.prototype.constructor=U,U.C=function(k,z,W){for(var j=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)j[_t-2]=arguments[_t];return P.prototype[z].apply(k,j)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(U,P,N){N||(N=0);var k=Array(16);if(typeof P=="string")for(var z=0;16>z;++z)k[z]=P.charCodeAt(N++)|P.charCodeAt(N++)<<8|P.charCodeAt(N++)<<16|P.charCodeAt(N++)<<24;else for(z=0;16>z;++z)k[z]=P[N++]|P[N++]<<8|P[N++]<<16|P[N++]<<24;P=U.g[0],N=U.g[1],z=U.g[2];var W=U.g[3],j=P+(W^N&(z^W))+k[0]+3614090360&4294967295;P=N+(j<<7&4294967295|j>>>25),j=W+(z^P&(N^z))+k[1]+3905402710&4294967295,W=P+(j<<12&4294967295|j>>>20),j=z+(N^W&(P^N))+k[2]+606105819&4294967295,z=W+(j<<17&4294967295|j>>>15),j=N+(P^z&(W^P))+k[3]+3250441966&4294967295,N=z+(j<<22&4294967295|j>>>10),j=P+(W^N&(z^W))+k[4]+4118548399&4294967295,P=N+(j<<7&4294967295|j>>>25),j=W+(z^P&(N^z))+k[5]+1200080426&4294967295,W=P+(j<<12&4294967295|j>>>20),j=z+(N^W&(P^N))+k[6]+2821735955&4294967295,z=W+(j<<17&4294967295|j>>>15),j=N+(P^z&(W^P))+k[7]+4249261313&4294967295,N=z+(j<<22&4294967295|j>>>10),j=P+(W^N&(z^W))+k[8]+1770035416&4294967295,P=N+(j<<7&4294967295|j>>>25),j=W+(z^P&(N^z))+k[9]+2336552879&4294967295,W=P+(j<<12&4294967295|j>>>20),j=z+(N^W&(P^N))+k[10]+4294925233&4294967295,z=W+(j<<17&4294967295|j>>>15),j=N+(P^z&(W^P))+k[11]+2304563134&4294967295,N=z+(j<<22&4294967295|j>>>10),j=P+(W^N&(z^W))+k[12]+1804603682&4294967295,P=N+(j<<7&4294967295|j>>>25),j=W+(z^P&(N^z))+k[13]+4254626195&4294967295,W=P+(j<<12&4294967295|j>>>20),j=z+(N^W&(P^N))+k[14]+2792965006&4294967295,z=W+(j<<17&4294967295|j>>>15),j=N+(P^z&(W^P))+k[15]+1236535329&4294967295,N=z+(j<<22&4294967295|j>>>10),j=P+(z^W&(N^z))+k[1]+4129170786&4294967295,P=N+(j<<5&4294967295|j>>>27),j=W+(N^z&(P^N))+k[6]+3225465664&4294967295,W=P+(j<<9&4294967295|j>>>23),j=z+(P^N&(W^P))+k[11]+643717713&4294967295,z=W+(j<<14&4294967295|j>>>18),j=N+(W^P&(z^W))+k[0]+3921069994&4294967295,N=z+(j<<20&4294967295|j>>>12),j=P+(z^W&(N^z))+k[5]+3593408605&4294967295,P=N+(j<<5&4294967295|j>>>27),j=W+(N^z&(P^N))+k[10]+38016083&4294967295,W=P+(j<<9&4294967295|j>>>23),j=z+(P^N&(W^P))+k[15]+3634488961&4294967295,z=W+(j<<14&4294967295|j>>>18),j=N+(W^P&(z^W))+k[4]+3889429448&4294967295,N=z+(j<<20&4294967295|j>>>12),j=P+(z^W&(N^z))+k[9]+568446438&4294967295,P=N+(j<<5&4294967295|j>>>27),j=W+(N^z&(P^N))+k[14]+3275163606&4294967295,W=P+(j<<9&4294967295|j>>>23),j=z+(P^N&(W^P))+k[3]+4107603335&4294967295,z=W+(j<<14&4294967295|j>>>18),j=N+(W^P&(z^W))+k[8]+1163531501&4294967295,N=z+(j<<20&4294967295|j>>>12),j=P+(z^W&(N^z))+k[13]+2850285829&4294967295,P=N+(j<<5&4294967295|j>>>27),j=W+(N^z&(P^N))+k[2]+4243563512&4294967295,W=P+(j<<9&4294967295|j>>>23),j=z+(P^N&(W^P))+k[7]+1735328473&4294967295,z=W+(j<<14&4294967295|j>>>18),j=N+(W^P&(z^W))+k[12]+2368359562&4294967295,N=z+(j<<20&4294967295|j>>>12),j=P+(N^z^W)+k[5]+4294588738&4294967295,P=N+(j<<4&4294967295|j>>>28),j=W+(P^N^z)+k[8]+2272392833&4294967295,W=P+(j<<11&4294967295|j>>>21),j=z+(W^P^N)+k[11]+1839030562&4294967295,z=W+(j<<16&4294967295|j>>>16),j=N+(z^W^P)+k[14]+4259657740&4294967295,N=z+(j<<23&4294967295|j>>>9),j=P+(N^z^W)+k[1]+2763975236&4294967295,P=N+(j<<4&4294967295|j>>>28),j=W+(P^N^z)+k[4]+1272893353&4294967295,W=P+(j<<11&4294967295|j>>>21),j=z+(W^P^N)+k[7]+4139469664&4294967295,z=W+(j<<16&4294967295|j>>>16),j=N+(z^W^P)+k[10]+3200236656&4294967295,N=z+(j<<23&4294967295|j>>>9),j=P+(N^z^W)+k[13]+681279174&4294967295,P=N+(j<<4&4294967295|j>>>28),j=W+(P^N^z)+k[0]+3936430074&4294967295,W=P+(j<<11&4294967295|j>>>21),j=z+(W^P^N)+k[3]+3572445317&4294967295,z=W+(j<<16&4294967295|j>>>16),j=N+(z^W^P)+k[6]+76029189&4294967295,N=z+(j<<23&4294967295|j>>>9),j=P+(N^z^W)+k[9]+3654602809&4294967295,P=N+(j<<4&4294967295|j>>>28),j=W+(P^N^z)+k[12]+3873151461&4294967295,W=P+(j<<11&4294967295|j>>>21),j=z+(W^P^N)+k[15]+530742520&4294967295,z=W+(j<<16&4294967295|j>>>16),j=N+(z^W^P)+k[2]+3299628645&4294967295,N=z+(j<<23&4294967295|j>>>9),j=P+(z^(N|~W))+k[0]+4096336452&4294967295,P=N+(j<<6&4294967295|j>>>26),j=W+(N^(P|~z))+k[7]+1126891415&4294967295,W=P+(j<<10&4294967295|j>>>22),j=z+(P^(W|~N))+k[14]+2878612391&4294967295,z=W+(j<<15&4294967295|j>>>17),j=N+(W^(z|~P))+k[5]+4237533241&4294967295,N=z+(j<<21&4294967295|j>>>11),j=P+(z^(N|~W))+k[12]+1700485571&4294967295,P=N+(j<<6&4294967295|j>>>26),j=W+(N^(P|~z))+k[3]+2399980690&4294967295,W=P+(j<<10&4294967295|j>>>22),j=z+(P^(W|~N))+k[10]+4293915773&4294967295,z=W+(j<<15&4294967295|j>>>17),j=N+(W^(z|~P))+k[1]+2240044497&4294967295,N=z+(j<<21&4294967295|j>>>11),j=P+(z^(N|~W))+k[8]+1873313359&4294967295,P=N+(j<<6&4294967295|j>>>26),j=W+(N^(P|~z))+k[15]+4264355552&4294967295,W=P+(j<<10&4294967295|j>>>22),j=z+(P^(W|~N))+k[6]+2734768916&4294967295,z=W+(j<<15&4294967295|j>>>17),j=N+(W^(z|~P))+k[13]+1309151649&4294967295,N=z+(j<<21&4294967295|j>>>11),j=P+(z^(N|~W))+k[4]+4149444226&4294967295,P=N+(j<<6&4294967295|j>>>26),j=W+(N^(P|~z))+k[11]+3174756917&4294967295,W=P+(j<<10&4294967295|j>>>22),j=z+(P^(W|~N))+k[2]+718787259&4294967295,z=W+(j<<15&4294967295|j>>>17),j=N+(W^(z|~P))+k[9]+3951481745&4294967295,U.g[0]=U.g[0]+P&4294967295,U.g[1]=U.g[1]+(z+(j<<21&4294967295|j>>>11))&4294967295,U.g[2]=U.g[2]+z&4294967295,U.g[3]=U.g[3]+W&4294967295}r.prototype.u=function(U,P){P===void 0&&(P=U.length);for(var N=P-this.blockSize,k=this.B,z=this.h,W=0;W<P;){if(z==0)for(;W<=N;)s(this,U,W),W+=this.blockSize;if(typeof U=="string"){for(;W<P;)if(k[z++]=U.charCodeAt(W++),z==this.blockSize){s(this,k),z=0;break}}else for(;W<P;)if(k[z++]=U[W++],z==this.blockSize){s(this,k),z=0;break}}this.h=z,this.o+=P},r.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var P=1;P<U.length-8;++P)U[P]=0;var N=8*this.o;for(P=U.length-8;P<U.length;++P)U[P]=N&255,N/=256;for(this.u(U),U=Array(16),P=N=0;4>P;++P)for(var k=0;32>k;k+=8)U[N++]=this.g[P]>>>k&255;return U};function o(U,P){var N=h;return Object.prototype.hasOwnProperty.call(N,U)?N[U]:N[U]=P(U)}function u(U,P){this.h=P;for(var N=[],k=!0,z=U.length-1;0<=z;z--){var W=U[z]|0;k&&W==P||(N[z]=W,k=!1)}this.g=N}var h={};function f(U){return-128<=U&&128>U?o(U,function(P){return new u([P|0],0>P?-1:0)}):new u([U|0],0>U?-1:0)}function p(U){if(isNaN(U)||!isFinite(U))return b;if(0>U)return V(p(-U));for(var P=[],N=1,k=0;U>=N;k++)P[k]=U/N|0,N*=4294967296;return new u(P,0)}function v(U,P){if(U.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(U.charAt(0)=="-")return V(v(U.substring(1),P));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=p(Math.pow(P,8)),k=b,z=0;z<U.length;z+=8){var W=Math.min(8,U.length-z),j=parseInt(U.substring(z,z+W),P);8>W?(W=p(Math.pow(P,W)),k=k.j(W).add(p(j))):(k=k.j(N),k=k.add(p(j)))}return k}var b=f(0),A=f(1),D=f(16777216);n=u.prototype,n.m=function(){if(F(this))return-V(this).m();for(var U=0,P=1,N=0;N<this.g.length;N++){var k=this.i(N);U+=(0<=k?k:4294967296+k)*P,P*=4294967296}return U},n.toString=function(U){if(U=U||10,2>U||36<U)throw Error("radix out of range: "+U);if(M(this))return"0";if(F(this))return"-"+V(this).toString(U);for(var P=p(Math.pow(U,6)),N=this,k="";;){var z=ue(N,P).g;N=H(N,z.j(P));var W=((0<N.g.length?N.g[0]:N.h)>>>0).toString(U);if(N=z,M(N))return W+k;for(;6>W.length;)W="0"+W;k=W+k}},n.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h};function M(U){if(U.h!=0)return!1;for(var P=0;P<U.g.length;P++)if(U.g[P]!=0)return!1;return!0}function F(U){return U.h==-1}n.l=function(U){return U=H(this,U),F(U)?-1:M(U)?0:1};function V(U){for(var P=U.g.length,N=[],k=0;k<P;k++)N[k]=~U.g[k];return new u(N,~U.h).add(A)}n.abs=function(){return F(this)?V(this):this},n.add=function(U){for(var P=Math.max(this.g.length,U.g.length),N=[],k=0,z=0;z<=P;z++){var W=k+(this.i(z)&65535)+(U.i(z)&65535),j=(W>>>16)+(this.i(z)>>>16)+(U.i(z)>>>16);k=j>>>16,W&=65535,j&=65535,N[z]=j<<16|W}return new u(N,N[N.length-1]&-2147483648?-1:0)};function H(U,P){return U.add(V(P))}n.j=function(U){if(M(this)||M(U))return b;if(F(this))return F(U)?V(this).j(V(U)):V(V(this).j(U));if(F(U))return V(this.j(V(U)));if(0>this.l(D)&&0>U.l(D))return p(this.m()*U.m());for(var P=this.g.length+U.g.length,N=[],k=0;k<2*P;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(var z=0;z<U.g.length;z++){var W=this.i(k)>>>16,j=this.i(k)&65535,_t=U.i(z)>>>16,xe=U.i(z)&65535;N[2*k+2*z]+=j*xe,J(N,2*k+2*z),N[2*k+2*z+1]+=W*xe,J(N,2*k+2*z+1),N[2*k+2*z+1]+=j*_t,J(N,2*k+2*z+1),N[2*k+2*z+2]+=W*_t,J(N,2*k+2*z+2)}for(k=0;k<P;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=P;k<2*P;k++)N[k]=0;return new u(N,0)};function J(U,P){for(;(U[P]&65535)!=U[P];)U[P+1]+=U[P]>>>16,U[P]&=65535,P++}function se(U,P){this.g=U,this.h=P}function ue(U,P){if(M(P))throw Error("division by zero");if(M(U))return new se(b,b);if(F(U))return P=ue(V(U),P),new se(V(P.g),V(P.h));if(F(P))return P=ue(U,V(P)),new se(V(P.g),P.h);if(30<U.g.length){if(F(U)||F(P))throw Error("slowDivide_ only works with positive integers.");for(var N=A,k=P;0>=k.l(U);)N=de(N),k=de(k);var z=be(N,1),W=be(k,1);for(k=be(k,2),N=be(N,2);!M(k);){var j=W.add(k);0>=j.l(U)&&(z=z.add(N),W=j),k=be(k,1),N=be(N,1)}return P=H(U,z.j(P)),new se(z,P)}for(z=b;0<=U.l(P);){for(N=Math.max(1,Math.floor(U.m()/P.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),W=p(N),j=W.j(P);F(j)||0<j.l(U);)N-=k,W=p(N),j=W.j(P);M(W)&&(W=A),z=z.add(W),U=H(U,j)}return new se(z,U)}n.A=function(U){return ue(this,U).h},n.and=function(U){for(var P=Math.max(this.g.length,U.g.length),N=[],k=0;k<P;k++)N[k]=this.i(k)&U.i(k);return new u(N,this.h&U.h)},n.or=function(U){for(var P=Math.max(this.g.length,U.g.length),N=[],k=0;k<P;k++)N[k]=this.i(k)|U.i(k);return new u(N,this.h|U.h)},n.xor=function(U){for(var P=Math.max(this.g.length,U.g.length),N=[],k=0;k<P;k++)N[k]=this.i(k)^U.i(k);return new u(N,this.h^U.h)};function de(U){for(var P=U.g.length+1,N=[],k=0;k<P;k++)N[k]=U.i(k)<<1|U.i(k-1)>>>31;return new u(N,U.h)}function be(U,P){var N=P>>5;P%=32;for(var k=U.g.length-N,z=[],W=0;W<k;W++)z[W]=0<P?U.i(W+N)>>>P|U.i(W+N+1)<<32-P:U.i(W+N);return new u(z,U.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CC=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=v,Tl=u}).apply(typeof oS<"u"?oS:typeof self<"u"?self:typeof window<"u"?window:{});var tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DC,Sf,xC,fg,Tb,OC,NC,PC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,E){return d==Array.prototype||d==Object.prototype||(d[y]=E.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof tg=="object"&&tg];for(var y=0;y<d.length;++y){var E=d[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function s(d,y){if(y)e:{var E=r;d=d.split(".");for(var x=0;x<d.length-1;x++){var Q=d[x];if(!(Q in E))break e;E=E[Q]}d=d[d.length-1],x=E[d],y=y(x),y!=x&&y!=null&&e(E,d,{configurable:!0,writable:!0,value:y})}}function o(d,y){d instanceof String&&(d+="");var E=0,x=!1,Q={next:function(){if(!x&&E<d.length){var te=E++;return{value:y(te,d[te]),done:!1}}return x=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}s("Array.prototype.values",function(d){return d||function(){return o(this,function(y,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function p(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function v(d,y,E){return d.call.apply(d.bind,arguments)}function b(d,y,E){if(!d)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,x),d.apply(y,Q)}}return function(){return d.apply(y,arguments)}}function A(d,y,E){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,A.apply(null,arguments)}function D(d,y){var E=Array.prototype.slice.call(arguments,1);return function(){var x=E.slice();return x.push.apply(x,arguments),d.apply(this,x)}}function M(d,y){function E(){}E.prototype=y.prototype,d.aa=y.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(x,Q,te){for(var Ie=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)Ie[dt-2]=arguments[dt];return y.prototype[Q].apply(x,Ie)}}function F(d){const y=d.length;if(0<y){const E=Array(y);for(let x=0;x<y;x++)E[x]=d[x];return E}return[]}function V(d,y){for(let E=1;E<arguments.length;E++){const x=arguments[E];if(f(x)){const Q=d.length||0,te=x.length||0;d.length=Q+te;for(let Ie=0;Ie<te;Ie++)d[Q+Ie]=x[Ie]}else d.push(x)}}class H{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function J(d){return/^[\s\xa0]*$/.test(d)}function se(){var d=h.navigator;return d&&(d=d.userAgent)?d:""}function ue(d){return ue[" "](d),d}ue[" "]=function(){};var de=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function be(d,y,E){for(const x in d)y.call(E,d[x],x,d)}function U(d,y){for(const E in d)y.call(void 0,d[E],E,d)}function P(d){const y={};for(const E in d)y[E]=d[E];return y}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(d,y){let E,x;for(let Q=1;Q<arguments.length;Q++){x=arguments[Q];for(E in x)d[E]=x[E];for(let te=0;te<N.length;te++)E=N[te],Object.prototype.hasOwnProperty.call(x,E)&&(d[E]=x[E])}}function z(d){var y=1;d=d.split(":");const E=[];for(;0<y&&d.length;)E.push(d.shift()),y--;return d.length&&E.push(d.join(":")),E}function W(d){h.setTimeout(()=>{throw d},0)}function j(){var d=Ye;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class _t{constructor(){this.h=this.g=null}add(y,E){const x=xe.get();x.set(y,E),this.h?this.h.next=x:this.g=x,this.h=x}}var xe=new H(()=>new le,d=>d.reset());class le{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,Oe=!1,Ye=new _t,O=()=>{const d=h.Promise.resolve(void 0);Ne=()=>{d.then(re)}};var re=()=>{for(var d;d=j();){try{d.h.call(d.g)}catch(E){W(E)}var y=xe;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}Oe=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Se=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};h.addEventListener("test",E,y),h.removeEventListener("test",E,y)}catch{}return d}();function Fe(d,y){if(Ee.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,x=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(de){e:{try{ue(y.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(y=null)}}else E=="mouseover"?y=d.fromElement:E=="mouseout"&&(y=d.toElement);this.relatedTarget=y,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Ue[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Fe.aa.h.call(this)}}M(Fe,Ee);var Ue={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ot="closure_listenable_"+(1e6*Math.random()|0),Te=0;function ut(d,y,E,x,Q){this.listener=d,this.proxy=null,this.src=y,this.type=E,this.capture=!!x,this.ha=Q,this.key=++Te,this.da=this.fa=!1}function ct(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Dn(d){this.src=d,this.g={},this.h=0}Dn.prototype.add=function(d,y,E,x,Q){var te=d.toString();d=this.g[te],d||(d=this.g[te]=[],this.h++);var Ie=vn(d,y,x,Q);return-1<Ie?(y=d[Ie],E||(y.fa=!1)):(y=new ut(y,this.src,te,!!x,Q),y.fa=E,d.push(y)),y};function Dr(d,y){var E=y.type;if(E in d.g){var x=d.g[E],Q=Array.prototype.indexOf.call(x,y,void 0),te;(te=0<=Q)&&Array.prototype.splice.call(x,Q,1),te&&(ct(y),d.g[E].length==0&&(delete d.g[E],d.h--))}}function vn(d,y,E,x){for(var Q=0;Q<d.length;++Q){var te=d[Q];if(!te.da&&te.listener==y&&te.capture==!!E&&te.ha==x)return Q}return-1}var Dt="closure_lm_"+(1e6*Math.random()|0),Un={};function kt(d,y,E,x,Q){if(Array.isArray(y)){for(var te=0;te<y.length;te++)kt(d,y[te],E,x,Q);return null}return E=Br(E),d&&d[Ot]?d.K(y,E,p(x)?!!x.capture:!1,Q):$i(d,y,E,!1,x,Q)}function $i(d,y,E,x,Q,te){if(!y)throw Error("Invalid event type");var Ie=p(Q)?!!Q.capture:!!Q,dt=Gs(d);if(dt||(d[Dt]=dt=new Dn(d)),E=dt.add(y,E,x,Ie,te),E.proxy)return E;if(x=_s(),E.proxy=x,x.src=d,x.listener=E,d.addEventListener)Se||(Q=Ie),Q===void 0&&(Q=!1),d.addEventListener(y.toString(),x,Q);else if(d.attachEvent)d.attachEvent($s(y.toString()),x);else if(d.addListener&&d.removeListener)d.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return E}function _s(){function d(E){return y.call(d.src,d.listener,E)}const y=Ql;return d}function vs(d,y,E,x,Q){if(Array.isArray(y))for(var te=0;te<y.length;te++)vs(d,y[te],E,x,Q);else x=p(x)?!!x.capture:!!x,E=Br(E),d&&d[Ot]?(d=d.i,y=String(y).toString(),y in d.g&&(te=d.g[y],E=vn(te,E,x,Q),-1<E&&(ct(te[E]),Array.prototype.splice.call(te,E,1),te.length==0&&(delete d.g[y],d.h--)))):d&&(d=Gs(d))&&(y=d.g[y.toString()],d=-1,y&&(d=vn(y,E,x,Q)),(E=-1<d?y[d]:null)&&ys(E))}function ys(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Ot])Dr(y.i,d);else{var E=d.type,x=d.proxy;y.removeEventListener?y.removeEventListener(E,x,d.capture):y.detachEvent?y.detachEvent($s(E),x):y.addListener&&y.removeListener&&y.removeListener(x),(E=Gs(y))?(Dr(E,d),E.h==0&&(E.src=null,y[Dt]=null)):ct(d)}}}function $s(d){return d in Un?Un[d]:Un[d]="on"+d}function Ql(d,y){if(d.da)d=!0;else{y=new Fe(y,this);var E=d.listener,x=d.ha||d.src;d.fa&&ys(d),d=E.call(x,y)}return d}function Gs(d){return d=d[Dt],d instanceof Dn?d:null}var xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Br(d){return typeof d=="function"?d:(d[xn]||(d[xn]=function(y){return d.handleEvent(y)}),d[xn])}function tn(){we.call(this),this.i=new Dn(this),this.M=this,this.F=null}M(tn,we),tn.prototype[Ot]=!0,tn.prototype.removeEventListener=function(d,y,E,x){vs(this,d,y,E,x)};function Ht(d,y){var E,x=d.F;if(x)for(E=[];x;x=x.F)E.push(x);if(d=d.M,x=y.type||y,typeof y=="string")y=new Ee(y,d);else if(y instanceof Ee)y.target=y.target||d;else{var Q=y;y=new Ee(x,d),k(y,Q)}if(Q=!0,E)for(var te=E.length-1;0<=te;te--){var Ie=y.g=E[te];Q=er(Ie,x,!0,y)&&Q}if(Ie=y.g=d,Q=er(Ie,x,!0,y)&&Q,Q=er(Ie,x,!1,y)&&Q,E)for(te=0;te<E.length;te++)Ie=y.g=E[te],Q=er(Ie,x,!1,y)&&Q}tn.prototype.N=function(){if(tn.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var E=d.g[y],x=0;x<E.length;x++)ct(E[x]);delete d.g[y],d.h--}}this.F=null},tn.prototype.K=function(d,y,E,x){return this.i.add(String(d),y,!1,E,x)},tn.prototype.L=function(d,y,E,x){return this.i.add(String(d),y,!0,E,x)};function er(d,y,E,x){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var Q=!0,te=0;te<y.length;++te){var Ie=y[te];if(Ie&&!Ie.da&&Ie.capture==E){var dt=Ie.listener,Pn=Ie.ha||Ie.src;Ie.fa&&Dr(d.i,Ie),Q=dt.call(Pn,x)!==!1&&Q}}return Q&&!x.defaultPrevented}function zr(d,y,E){if(typeof d=="function")E&&(d=A(d,E));else if(d&&typeof d.handleEvent=="function")d=A(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(d,y||0)}function Si(d){d.g=zr(()=>{d.g=null,d.i&&(d.i=!1,Si(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class Io extends we{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Si(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ii(d){we.call(this),this.h=d,this.g={}}M(Ii,we);var qr=[];function On(d){be(d.g,function(y,E){this.g.hasOwnProperty(E)&&ys(y)},d),d.g={}}Ii.prototype.N=function(){Ii.aa.N.call(this),On(this)},Ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ca=h.JSON.stringify,Hr=h.JSON.parse,Fn=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function bs(){}bs.prototype.h=null;function Da(d){return d.h||(d.h=d.i())}function Gi(){}var $r={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hi(){Ee.call(this,"d")}M(hi,Ee);function jt(){Ee.call(this,"c")}M(jt,Ee);var Vt={},Gr=null;function St(){return Gr=Gr||new tn}Vt.La="serverreachability";function hn(d){Ee.call(this,Vt.La,d)}M(hn,Ee);function xr(d){const y=St();Ht(y,new hn(y))}Vt.STAT_EVENT="statevent";function Wi(d,y){Ee.call(this,Vt.STAT_EVENT,d),this.stat=y}M(Wi,Ee);function $t(d){const y=St();Ht(y,new Wi(y,d))}Vt.Ma="timingevent";function xa(d,y){Ee.call(this,Vt.Ma,d),this.size=y}M(xa,Ee);function di(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},y)}function Wr(){this.g=!0}Wr.prototype.xa=function(){this.g=!1};function Ki(d,y,E,x,Q,te){d.info(function(){if(d.g)if(te)for(var Ie="",dt=te.split("&"),Pn=0;Pn<dt.length;Pn++){var ft=dt[Pn].split("=");if(1<ft.length){var Nt=ft[0];ft=ft[1];var wn=Nt.split("_");Ie=2<=wn.length&&wn[1]=="type"?Ie+(Nt+"="+ft+"&"):Ie+(Nt+"=redacted&")}}else Ie=null;else Ie=te;return"XMLHTTP REQ ("+x+") [attempt "+Q+"]: "+y+`
`+E+`
`+Ie})}function Kr(d,y,E,x,Q,te,Ie){d.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+Q+"]: "+y+`
`+E+`
`+te+" "+Ie})}function mr(d,y,E,x){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Gt(d,E)+(x?" "+x:"")})}function fi(d,y){d.info(function(){return"TIMEOUT: "+y})}Wr.prototype.info=function(){};function Gt(d,y){if(!d.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var x=E[d];if(!(2>x.length)){var Q=x[1];if(Array.isArray(Q)&&!(1>Q.length)){var te=Q[0];if(te!="noop"&&te!="stop"&&te!="close")for(var Ie=1;Ie<Q.length;Ie++)Q[Ie]=""}}}}return Ca(E)}catch{return y}}var nn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ri={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Or;function Me(){}M(Me,bs),Me.prototype.g=function(){return new XMLHttpRequest},Me.prototype.i=function(){return{}},Or=new Me;function Qe(d,y,E,x){this.j=d,this.i=y,this.l=E,this.R=x||1,this.U=new Ii(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nt}function nt(){this.i=null,this.g="",this.h=!1}var ht={},rn={};function yn(d,y,E){d.L=1,d.v=Ss(Wt(y)),d.m=E,d.P=!0,Gn(d,null)}function Gn(d,y){d.F=Date.now(),Bt(d),d.A=Wt(d.v);var E=d.A,x=d.R;Array.isArray(x)||(x=[String(x)]),Xi(E.i,"t",x),d.C=0,E=d.j.J,d.h=new nt,d.g=yc(d.j,E?y:null,!d.m),0<d.O&&(d.M=new Io(A(d.Y,d,d.g),d.O)),y=d.U,E=d.g,x=d.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(qr[0]=Q.toString()),Q=qr);for(var te=0;te<Q.length;te++){var Ie=kt(E,Q[te],x||y.handleEvent,!1,y.h||y);if(!Ie)break;y.g[Ie.key]=Ie}y=d.H?P(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),xr(),Ki(d.i,d.u,d.A,d.l,d.R,d.m)}Qe.prototype.ca=function(d){d=d.target;const y=this.M;y&&ei(d)==3?y.j():this.Y(d)},Qe.prototype.Y=function(d){try{if(d==this.g)e:{const wn=ei(this.g);var y=this.g.Ba();const rs=this.g.Z();if(!(3>wn)&&(wn!=3||this.g&&(this.h.h||this.g.oa()||tu(this.g)))){this.J||wn!=4||y==7||(y==8||0>=rs?xr(3):xr(2)),Oa(this);var E=this.g.Z();this.X=E;t:if(pr(this)){var x=tu(this.g);d="";var Q=x.length,te=ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tr(this),gr(this);var Ie="";break t}this.h.i=new h.TextDecoder}for(y=0;y<Q;y++)this.h.h=!0,d+=this.h.i.decode(x[y],{stream:!(te&&y==Q-1)});x.length=0,this.h.g+=d,this.C=0,Ie=this.h.g}else Ie=this.g.oa();if(this.o=E==200,Kr(this.i,this.u,this.A,this.l,this.R,wn,E),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,Pn=this.g;if((dt=Pn.g?Pn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(dt)){var ft=dt;break t}}ft=null}if(E=ft)mr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nr(this,E);else{this.o=!1,this.s=3,$t(12),tr(this),gr(this);break e}}if(this.P){E=!0;let Bn;for(;!this.J&&this.C<Ie.length;)if(Bn=ws(this,Ie),Bn==rn){wn==4&&(this.s=4,$t(14),E=!1),mr(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==ht){this.s=4,$t(15),mr(this.i,this.l,Ie,"[Invalid Chunk]"),E=!1;break}else mr(this.i,this.l,Bn,null),Nr(this,Bn);if(pr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wn!=4||Ie.length!=0||this.h.h||(this.s=1,$t(16),E=!1),this.o=this.o&&E,!E)mr(this.i,this.l,Ie,"[Invalid Chunked Response]"),tr(this),gr(this);else if(0<Ie.length&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.ba&&!Nt.M&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+Ie.length),Qs(Nt),Nt.M=!0,$t(11))}}else mr(this.i,this.l,Ie,null),Nr(this,Ie);wn==4&&tr(this),this.o&&!this.J&&(wn==4?Vo(this.j,this):(this.o=!1,Bt(this)))}else dc(this.g),E==400&&0<Ie.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),tr(this),gr(this)}}}catch{}finally{}};function pr(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function ws(d,y){var E=d.C,x=y.indexOf(`
`,E);return x==-1?rn:(E=Number(y.substring(E,x)),isNaN(E)?ht:(x+=1,x+E>y.length?rn:(y=y.slice(x,x+E),d.C=x+E,y)))}Qe.prototype.cancel=function(){this.J=!0,tr(this)};function Bt(d){d.S=Date.now()+d.I,Yi(d,d.I)}function Yi(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=di(A(d.ba,d),y)}function Oa(d){d.B&&(h.clearTimeout(d.B),d.B=null)}Qe.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(fi(this.i,this.A),this.L!=2&&(xr(),$t(17)),tr(this),this.s=2,gr(this)):Yi(this,this.S-d)};function gr(d){d.j.G==0||d.J||Vo(d.j,d)}function tr(d){Oa(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,On(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function Nr(d,y){try{var E=d.j;if(E.G!=0&&(E.g==d||Es(E.h,d))){if(!d.K&&Es(E.h,d)&&E.G==3){try{var x=E.Da.g.parse(y)}catch{x=null}if(Array.isArray(x)&&x.length==3){var Q=x;if(Q[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)gi(E),Fa(E);else break e;Ba(E),$t(18)}}else E.za=Q[1],0<E.za-E.T&&37500>Q[2]&&E.F&&E.v==0&&!E.C&&(E.C=di(A(E.Za,E),6e3));if(1>=Xl(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else ns(E,11)}else if((d.K||E.g==d)&&gi(E),!J(y))for(Q=E.Da.g.parse(y),y=0;y<Q.length;y++){let ft=Q[y];if(E.T=ft[0],ft=ft[1],E.G==2)if(ft[0]=="c"){E.K=ft[1],E.ia=ft[2];const Nt=ft[3];Nt!=null&&(E.la=Nt,E.j.info("VER="+E.la));const wn=ft[4];wn!=null&&(E.Aa=wn,E.j.info("SVER="+E.Aa));const rs=ft[5];rs!=null&&typeof rs=="number"&&0<rs&&(x=1.5*rs,E.L=x,E.j.info("backChannelRequestTimeoutMs_="+x)),x=E;const Bn=d.g;if(Bn){const is=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(is){var te=x.h;te.g||is.indexOf("spdy")==-1&&is.indexOf("quic")==-1&&is.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Ts(te,te.h),te.h=null))}if(x.D){const iu=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;iu&&(x.ya=iu,rt(x.I,x.D,iu))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),x=E;var Ie=d;if(x.qa=vc(x,x.J?x.ia:null,x.W),Ie.K){Yr(x.h,Ie);var dt=Ie,Pn=x.L;Pn&&(dt.I=Pn),dt.B&&(Oa(dt),Bt(dt)),x.g=Ie}else gc(x);0<E.i.length&&Po(E)}else ft[0]!="stop"&&ft[0]!="close"||ns(E,7);else E.G==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?ns(E,7):Ua(E):ft[0]!="noop"&&E.l&&E.l.ta(ft),E.v=0)}}xr(4)}catch{}}var hc=class{constructor(d,y){this.g=d,this.map=y}};function Ro(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Co(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Xl(d){return d.h?1:d.g?d.g.size:0}function Es(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Ts(d,y){d.g?d.g.add(y):d.h=y}function Yr(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Ro.prototype.cancel=function(){if(this.i=nr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function nr(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const E of d.g.values())y=y.concat(E.D);return y}return F(d.i)}function Zl(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(f(d)){for(var y=[],E=d.length,x=0;x<E;x++)y.push(d[x]);return y}y=[],E=0;for(x in d)y[E++]=d[x];return y}function mi(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(f(d)||typeof d=="string"){var y=[];d=d.length;for(var E=0;E<d;E++)y.push(E);return y}y=[],E=0;for(const x in d)y[E++]=x;return y}}}function Nn(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(f(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var E=mi(d),x=Zl(d),Q=x.length,te=0;te<Q;te++)y.call(void 0,x[te],E&&E[te],d)}var Ci=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wn(d,y){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var x=d[E].indexOf("="),Q=null;if(0<=x){var te=d[E].substring(0,x);Q=d[E].substring(x+1)}else te=d[E];y(te,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Di(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Di){this.h=d.h,Kn(this,d.j),this.o=d.o,this.g=d.g,Qr(this,d.s),this.l=d.l;var y=d.i,E=new xi;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),As(this,E),this.m=d.m}else d&&(y=String(d).match(Ci))?(this.h=!1,Kn(this,y[1]||"",!0),this.o=Is(y[2]||""),this.g=Is(y[3]||"",!0),Qr(this,y[4]),this.l=Is(y[5]||"",!0),As(this,y[6]||"",!0),this.m=Is(y[7]||"")):(this.h=!1,this.i=new xi(null,this.h))}Di.prototype.toString=function(){var d=[],y=this.j;y&&d.push(Yn(y,Do,!0),":");var E=this.g;return(E||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Yn(y,Do,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Yn(E,E.charAt(0)=="/"?eu:pi,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Yn(E,xo)),d.join("")};function Wt(d){return new Di(d)}function Kn(d,y,E){d.j=E?Is(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Qr(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function As(d,y,E){y instanceof xi?(d.i=y,Oo(d.i,d.h)):(E||(y=Yn(y,Qi)),d.i=new xi(y,d.h))}function rt(d,y,E){d.i.set(y,E)}function Ss(d){return rt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Is(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Yn(d,y,E){return typeof d=="string"?(d=encodeURI(d).replace(y,Jl),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Jl(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Do=/[#\/\?@]/g,pi=/[#\?:]/g,eu=/[#\?]/g,Qi=/[#\?@]/g,xo=/#/g;function xi(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function rr(d){d.g||(d.g=new Map,d.h=0,d.i&&Wn(d.i,function(y,E){d.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}n=xi.prototype,n.add=function(d,y){rr(this),this.i=null,d=Zi(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(y),this.h+=1,this};function Ws(d,y){rr(d),y=Zi(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Xr(d,y){return rr(d),y=Zi(d,y),d.g.has(y)}n.forEach=function(d,y){rr(this),this.g.forEach(function(E,x){E.forEach(function(Q){d.call(y,Q,x,this)},this)},this)},n.na=function(){rr(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let x=0;x<y.length;x++){const Q=d[x];for(let te=0;te<Q.length;te++)E.push(y[x])}return E},n.V=function(d){rr(this);let y=[];if(typeof d=="string")Xr(this,d)&&(y=y.concat(this.g.get(Zi(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)y=y.concat(d[E])}return y},n.set=function(d,y){return rr(this),this.i=null,d=Zi(this,d),Xr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},n.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function Xi(d,y,E){Ws(d,y),0<E.length&&(d.i=null,d.g.set(Zi(d,y),F(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var x=y[E];const te=encodeURIComponent(String(x)),Ie=this.V(x);for(x=0;x<Ie.length;x++){var Q=te;Ie[x]!==""&&(Q+="="+encodeURIComponent(String(Ie[x]))),d.push(Q)}}return this.i=d.join("&")};function Zi(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function Oo(d,y){y&&!d.j&&(rr(d),d.i=null,d.g.forEach(function(E,x){var Q=x.toLowerCase();x!=Q&&(Ws(this,x),Xi(this,Q,E))},d)),d.j=y}function Rs(d,y){const E=new Wr;if(h.Image){const x=new Image;x.onload=D(Zr,E,"TestLoadImage: loaded",!0,y,x),x.onerror=D(Zr,E,"TestLoadImage: error",!1,y,x),x.onabort=D(Zr,E,"TestLoadImage: abort",!1,y,x),x.ontimeout=D(Zr,E,"TestLoadImage: timeout",!1,y,x),h.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=d}else y(!1)}function Na(d,y){const E=new Wr,x=new AbortController,Q=setTimeout(()=>{x.abort(),Zr(E,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:x.signal}).then(te=>{clearTimeout(Q),te.ok?Zr(E,"TestPingServer: ok",!0,y):Zr(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(Q),Zr(E,"TestPingServer: error",!1,y)})}function Zr(d,y,E,x,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),x(E)}catch{}}function Cs(){this.g=new Fn}function Jr(d,y,E){const x=E||"";try{Nn(d,function(Q,te){let Ie=Q;p(Q)&&(Ie=Ca(Q)),y.push(x+te+"="+encodeURIComponent(Ie))})}catch(Q){throw y.push(x+"type="+encodeURIComponent("_badmap")),Q}}function Ji(d){this.l=d.Ub||null,this.j=d.eb||!1}M(Ji,bs),Ji.prototype.g=function(){return new Ds(this.l,this.j)},Ji.prototype.i=function(d){return function(){return d}}({});function Ds(d,y){tn.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Ds,tn),n=Ds.prototype,n.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,Oi(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,es(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ks(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ks(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?es(this):Oi(this),this.readyState==3&&Ks(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,es(this))},n.Qa=function(d){this.g&&(this.response=d,es(this))},n.ga=function(){this.g&&es(this)};function es(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Oi(d)}n.setRequestHeader=function(d,y){this.u.append(d,y)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=y.next();return d.join(`\r
`)};function Oi(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ds.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Pa(d){let y="";return be(d,function(E,x){y+=x,y+=":",y+=E,y+=`\r
`}),y}function bn(d,y,E){e:{for(x in E){var x=!1;break e}x=!0}x||(E=Pa(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):rt(d,y,E))}function wt(d){tn.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(wt,tn);var ka=/^https?$/i,Ni=["POST","PUT"];n=wt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,y,E,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Or.g(),this.v=this.o?Da(this.o):Da(Or),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(te){No(this,te);return}if(d=E||"",E=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var Q in x)E.set(Q,x[Q]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const te of x.keys())E.set(te,x.get(te));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(E.keys()).find(te=>te.toLowerCase()=="content-type"),Q=h.FormData&&d instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Ni,y,void 0))||x||Q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,Ie]of E)this.g.setRequestHeader(te,Ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{La(this),this.u=!0,this.g.send(d),this.u=!1}catch(te){No(this,te)}};function No(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,Va(d),_r(d)}function Va(d){d.A||(d.A=!0,Ht(d,"complete"),Ht(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ht(this,"complete"),Ht(this,"abort"),_r(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_r(this,!0)),wt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ma(this):this.bb())},n.bb=function(){Ma(this)};function Ma(d){if(d.h&&typeof u<"u"&&(!d.v[1]||ei(d)!=4||d.Z()!=2)){if(d.u&&ei(d)==4)zr(d.Ea,0,d);else if(Ht(d,"readystatechange"),ei(d)==4){d.h=!1;try{const Ie=d.Z();e:switch(Ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var x;if(x=Ie===0){var Q=String(d.D).match(Ci)[1]||null;!Q&&h.self&&h.self.location&&(Q=h.self.location.protocol.slice(0,-1)),x=!ka.test(Q?Q.toLowerCase():"")}E=x}if(E)Ht(d,"complete"),Ht(d,"success");else{d.m=6;try{var te=2<ei(d)?d.g.statusText:""}catch{te=""}d.l=te+" ["+d.Z()+"]",Va(d)}}finally{_r(d)}}}}function _r(d,y){if(d.g){La(d);const E=d.g,x=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||Ht(d,"ready");try{E.onreadystatechange=x}catch{}}}function La(d){d.I&&(h.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function ei(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<ei(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),Hr(y)}};function tu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function dc(d){const y={};d=(d.g&&2<=ei(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<d.length;x++){if(J(d[x]))continue;var E=z(d[x]);const Q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const te=y[Q]||[];y[Q]=te,te.push(E)}U(y,function(x){return x.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ys(d,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||y}function ja(d){this.Aa=0,this.i=[],this.j=new Wr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ys("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ys("baseRetryDelayMs",5e3,d),this.cb=Ys("retryDelaySeedMs",1e4,d),this.Wa=Ys("forwardChannelMaxRetries",2,d),this.wa=Ys("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Ro(d&&d.concurrentRequestLimit),this.Da=new Cs,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ja.prototype,n.la=8,n.G=1,n.connect=function(d,y,E,x){$t(0),this.W=d,this.H=y||{},E&&x!==void 0&&(this.H.OSID=E,this.H.OAID=x),this.F=this.X,this.I=vc(this,null,this.W),Po(this)};function Ua(d){if(fc(d),d.G==3){var y=d.U++,E=Wt(d.I);if(rt(E,"SID",d.K),rt(E,"RID",y),rt(E,"TYPE","terminate"),ts(d,E),y=new Qe(d,d.j,y),y.L=2,y.v=Ss(Wt(E)),E=!1,h.navigator&&h.navigator.sendBeacon)try{E=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&h.Image&&(new Image().src=y.v,E=!0),E||(y.g=yc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Bt(y)}_c(d)}function Fa(d){d.g&&(Qs(d),d.g.cancel(),d.g=null)}function fc(d){Fa(d),d.u&&(h.clearTimeout(d.u),d.u=null),gi(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&h.clearTimeout(d.s),d.s=null)}function Po(d){if(!Co(d.h)&&!d.s){d.s=!0;var y=d.Ga;Ne||O(),Oe||(Ne(),Oe=!0),Ye.add(y,d),d.B=0}}function mc(d,y){return Xl(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=di(A(d.Ga,d,y),ru(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const Q=new Qe(this,this.j,d);let te=this.o;if(this.S&&(te?(te=P(te),k(te,this.S)):te=this.S),this.m!==null||this.O||(Q.H=te,te=null),this.P)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var x=this.i[E];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(y+=x,4096<y){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=pc(this,Q,y),E=Wt(this.I),rt(E,"RID",d),rt(E,"CVER",22),this.D&&rt(E,"X-HTTP-Session-Id",this.D),ts(this,E),te&&(this.O?y="headers="+encodeURIComponent(String(Pa(te)))+"&"+y:this.m&&bn(E,this.m,te)),Ts(this.h,Q),this.Ua&&rt(E,"TYPE","init"),this.P?(rt(E,"$req",y),rt(E,"SID","null"),Q.T=!0,yn(Q,E,null)):yn(Q,E,y),this.G=2}}else this.G==3&&(d?ko(this,d):this.i.length==0||Co(this.h)||ko(this))};function ko(d,y){var E;y?E=y.l:E=d.U++;const x=Wt(d.I);rt(x,"SID",d.K),rt(x,"RID",E),rt(x,"AID",d.T),ts(d,x),d.m&&d.o&&bn(x,d.m,d.o),E=new Qe(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),y&&(d.i=y.D.concat(d.i)),y=pc(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Ts(d.h,E),yn(E,x,y)}function ts(d,y){d.H&&be(d.H,function(E,x){rt(y,x,E)}),d.l&&Nn({},function(E,x){rt(y,x,E)})}function pc(d,y,E){E=Math.min(d.i.length,E);var x=d.l?A(d.l.Na,d.l,d):null;e:{var Q=d.i;let te=-1;for(;;){const Ie=["count="+E];te==-1?0<E?(te=Q[0].g,Ie.push("ofs="+te)):te=0:Ie.push("ofs="+te);let dt=!0;for(let Pn=0;Pn<E;Pn++){let ft=Q[Pn].g;const Nt=Q[Pn].map;if(ft-=te,0>ft)te=Math.max(0,Q[Pn].g-100),dt=!1;else try{Jr(Nt,Ie,"req"+ft+"_")}catch{x&&x(Nt)}}if(dt){x=Ie.join("&");break e}}}return d=d.i.splice(0,E),y.D=d,x}function gc(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;Ne||O(),Oe||(Ne(),Oe=!0),Ye.add(y,d),d.v=0}}function Ba(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=di(A(d.Fa,d),ru(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,nu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=di(A(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),Fa(this),nu(this))};function Qs(d){d.A!=null&&(h.clearTimeout(d.A),d.A=null)}function nu(d){d.g=new Qe(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=Wt(d.qa);rt(y,"RID","rpc"),rt(y,"SID",d.K),rt(y,"AID",d.T),rt(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&rt(y,"TO",d.ja),rt(y,"TYPE","xmlhttp"),ts(d,y),d.m&&d.o&&bn(y,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=Ss(Wt(y)),E.m=null,E.P=!0,Gn(E,d)}n.Za=function(){this.C!=null&&(this.C=null,Fa(this),Ba(this),$t(19))};function gi(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Vo(d,y){var E=null;if(d.g==y){gi(d),Qs(d),d.g=null;var x=2}else if(Es(d.h,y))E=y.D,Yr(d.h,y),x=1;else return;if(d.G!=0){if(y.o)if(x==1){E=y.m?y.m.length:0,y=Date.now()-y.F;var Q=d.B;x=St(),Ht(x,new xa(x,E)),Po(d)}else gc(d);else if(Q=y.s,Q==3||Q==0&&0<y.X||!(x==1&&mc(d,y)||x==2&&Ba(d)))switch(E&&0<E.length&&(y=d.h,y.i=y.i.concat(E)),Q){case 1:ns(d,5);break;case 4:ns(d,10);break;case 3:ns(d,6);break;default:ns(d,2)}}}function ru(d,y){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*y}function ns(d,y){if(d.j.info("Error code "+y),y==2){var E=A(d.fb,d),x=d.Xa;const Q=!x;x=new Di(x||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Kn(x,"https"),Ss(x),Q?Rs(x.toString(),E):Na(x.toString(),E)}else $t(2);d.G=0,d.l&&d.l.sa(y),_c(d),fc(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function _c(d){if(d.G=0,d.ka=[],d.l){const y=nr(d.h);(y.length!=0||d.i.length!=0)&&(V(d.ka,y),V(d.ka,d.i),d.h.i.length=0,F(d.i),d.i.length=0),d.l.ra()}}function vc(d,y,E){var x=E instanceof Di?Wt(E):new Di(E);if(x.g!="")y&&(x.g=y+"."+x.g),Qr(x,x.s);else{var Q=h.location;x=Q.protocol,y=y?y+"."+Q.hostname:Q.hostname,Q=+Q.port;var te=new Di(null);x&&Kn(te,x),y&&(te.g=y),Q&&Qr(te,Q),E&&(te.l=E),x=te}return E=d.D,y=d.ya,E&&y&&rt(x,E,y),rt(x,"VER",d.la),ts(d,x),x}function yc(d,y,E){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new wt(new Ji({eb:E})):new wt(d.pa),y.Ha(d.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function bc(){}n=bc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function za(){}za.prototype.g=function(d,y){return new ir(d,y)};function ir(d,y){tn.call(this),this.g=new ja(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!J(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!J(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new sr(this)}M(ir,tn),ir.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ir.prototype.close=function(){Ua(this.g)},ir.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=Ca(d),d=E);y.i.push(new hc(y.Ya++,d)),y.G==3&&Po(y)},ir.prototype.N=function(){this.g.l=null,delete this.j,Ua(this.g),delete this.g,ir.aa.N.call(this)};function wc(d){hi.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const E in y){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}M(wc,hi);function xs(){jt.call(this),this.status=1}M(xs,jt);function sr(d){this.g=d}M(sr,bc),sr.prototype.ua=function(){Ht(this.g,"a")},sr.prototype.ta=function(d){Ht(this.g,new wc(d))},sr.prototype.sa=function(d){Ht(this.g,new xs)},sr.prototype.ra=function(){Ht(this.g,"b")},za.prototype.createWebChannel=za.prototype.g,ir.prototype.send=ir.prototype.o,ir.prototype.open=ir.prototype.m,ir.prototype.close=ir.prototype.close,PC=function(){return new za},NC=function(){return St()},OC=Vt,Tb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nn.NO_ERROR=0,nn.TIMEOUT=8,nn.HTTP_ERROR=6,fg=nn,Ri.COMPLETE="complete",xC=Ri,Gi.EventType=$r,$r.OPEN="a",$r.CLOSE="b",$r.ERROR="c",$r.MESSAGE="d",tn.prototype.listen=tn.prototype.K,Sf=Gi,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,DC=wt}).apply(typeof tg<"u"?tg:typeof self<"u"?self:typeof window<"u"?window:{});const lS="@firebase/firestore",uS="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dr.UNAUTHENTICATED=new dr(null),dr.GOOGLE_CREDENTIALS=new dr("google-credentials-uid"),dr.FIRST_PARTY=new dr("first-party-uid"),dr.MOCK_USER=new dr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=new m_("@firebase/firestore");function ch(){return Nl.logLevel}function P2(n){Nl.setLogLevel(n)}function ge(n,...e){if(Nl.logLevel<=lt.DEBUG){const t=e.map(kw);Nl.debug(`Firestore (${ed}): ${n}`,...t)}}function Mn(n,...e){if(Nl.logLevel<=lt.ERROR){const t=e.map(kw);Nl.error(`Firestore (${ed}): ${n}`,...t)}}function Ea(n,...e){if(Nl.logLevel<=lt.WARN){const t=e.map(kw);Nl.warn(`Firestore (${ed}): ${n}`,...t)}}function kw(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(n="Unexpected state"){const e=`FIRESTORE (${ed}) INTERNAL ASSERTION FAILED: `+n;throw Mn(e),new Error(e)}function ke(n,e){n||De()}function k2(n,e){n||De()}function Ce(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends li{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(dr.UNAUTHENTICATED))}shutdown(){}}class M2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class L2{constructor(e){this.t=e,this.currentUser=dr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ke(this.o===void 0);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let o=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Rr,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const f=o;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},h=f=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Rr)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string"),new kC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string"),new dr(e)}}class j2{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=dr.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class U2{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new j2(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(dr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F2{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,an(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){ke(this.o===void 0);const r=o=>{o.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.R;return this.R=o.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new cS(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ke(typeof t.token=="string"),this.R=t.token,new cS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=B2(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Ke(n,e){return n<e?-1:n>e?1:0}function Ab(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return Ke(r,s);{const o=Vw(),u=z2(o.encode(hS(n,t)),o.encode(hS(e,t)));return u!==0?u:Ke(r,s)}}t+=r>65535?2:1}return Ke(n.length,e.length)}function hS(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function z2(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ke(n[t],e[t]);return Ke(n.length,e.length)}function Ch(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function MC(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=-62135596800,fS=1e6;class un{static now(){return un.fromMillis(Date.now())}static fromDate(e){return un.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*fS);return new un(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<dS)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fS}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-dS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new un(0,0))}static max(){return new je(new un(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="__name__";class ua{constructor(e,t,r){t===void 0?t=0:t>e.length&&De(),r===void 0?r=e.length-t:r>e.length-t&&De(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ua.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ua?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=ua.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Ke(e.length,t.length)}static compareSegments(e,t){const r=ua.isNumericId(e),s=ua.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?ua.extractNumericId(e).compare(ua.extractNumericId(t)):Ab(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tl.fromString(e.substring(4,e.length-2))}}class pt extends ua{construct(e,t,r){return new pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new pt(t)}static emptyPath(){return new pt([])}}const q2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends ua{construct(e,t,r){return new on(e,t,r)}static isValidIdentifier(e){return q2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mS}static keyField(){return new on([mS])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(r+=h,s++):(o(),s++)}if(o(),u)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(t)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(pt.fromString(e))}static fromName(e){return new Re(pt.fromString(e).popFirst(5))}static empty(){return new Re(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=-1;class Pg{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Sb(n){return n.fields.find(e=>e.kind===2)}function Du(n){return n.fields.filter(e=>e.kind!==2)}Pg.UNKNOWN_ID=-1;class mg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Qf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Qf(0,Hi.min())}}function LC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=je.fromTimestamp(r===1e9?new un(t+1,0):new un(t,r));return new Hi(s,Re.empty(),e)}function jC(n){return new Hi(n.readTime,n.key,Dh)}class Hi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Hi(je.min(),Re.empty(),Dh)}static max(){return new Hi(je.max(),Re.empty(),Dh)}}function Mw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Re.comparator(n.documentKey,e.documentKey),t!==0?t:Ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==UC)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):X.reject(t)}static resolve(e){return new X((t,r)=>{t(e)})}static reject(e){return new X((t,r)=>{r(e)})}static waitFor(e){return new X((t,r)=>{let s=0,o=0,u=!1;e.forEach(h=>{++s,h.next(()=>{++o,u&&o===s&&t()},f=>r(f))}),u=!0,o===s&&t()})}static or(e){let t=X.resolve(!1);for(const r of e)t=t.next(s=>s?X.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new X((r,s)=>{const o=e.length,u=new Array(o);let h=0;for(let f=0;f<o;f++){const p=f;t(e[p]).next(v=>{u[p]=v,++h,h===o&&r(u)},v=>s(v))}})}static doWhile(e,t){return new X((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi="SimpleDb";class p_{static open(e,t,r,s){try{return new p_(t,e.transaction(s,r))}catch(o){throw new Of(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new Rr,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Of(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const s=Lw(r.target.error);this.m.reject(new Of(e,s))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(ge(Fi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $2(t)}}class va{static delete(e){return ge(Fi,"Removing database:",e),Ou(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Wf())return!1;if(va.v())return!0;const e=gn(),t=va.C(e),r=0<t&&t<10,s=BC(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,va.C(gn())===12.2&&Mn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(ge(Fi,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const u=o.target.result;t(u)},s.onblocked=()=>{r(new Of(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const u=o.target.error;u.name==="VersionError"?r(new me(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new me(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new Of(e,u))},s.onupgradeneeded=o=>{ge(Fi,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const u=o.target.result;this.O.B(u,s.transaction,o.oldVersion,this.version).next(()=>{ge(Fi,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const o=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.N(e);const h=p_.open(this.db,e,o?"readonly":"readwrite",r),f=s(h).next(p=>(h.S(),p)).catch(p=>(h.abort(p),X.reject(p))).toPromise();return f.catch(()=>{}),await h.p,f}catch(h){const f=h,p=f.name!=="FirebaseError"&&u<3;if(ge(Fi,"Transaction failed with error:",f.message,"Retrying:",p),this.close(),!p)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function BC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class H2{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return Ou(this.q.delete())}}class Of extends me{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $l(n){return n.name==="IndexedDbTransactionError"}class $2{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ge(Fi,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ge(Fi,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ou(r)}add(e){return ge(Fi,"ADD",this.store.name,e,e),Ou(this.store.add(e))}get(e){return Ou(this.store.get(e)).next(t=>(t===void 0&&(t=null),ge(Fi,"GET",this.store.name,e,t),t))}delete(e){return ge(Fi,"DELETE",this.store.name,e),Ou(this.store.delete(e))}count(){return ge(Fi,"COUNT",this.store.name),Ou(this.store.count())}G(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(r.range);return new X((u,h)=>{o.onerror=f=>{h(f.target.error)},o.onsuccess=f=>{u(f.target.result)}})}{const o=this.cursor(r),u=[];return this.j(o,(h,f)=>{u.push(f)}).next(()=>u)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new X((s,o)=>{r.onerror=u=>{o(u.target.error)},r.onsuccess=u=>{s(u.target.result)}})}J(e,t){ge(Fi,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.j(s,(o,u,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.j(s,t)}X(e){const t=this.cursor({});return new X((r,s)=>{t.onerror=o=>{const u=Lw(o.target.error);s(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}j(e,t){const r=[];return new X((s,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void s();const f=new H2(h),p=t(h.primaryKey,h.value,f);if(p instanceof X){const v=p.catch(b=>(f.done(),X.reject(b)));r.push(v)}f.isDone?s():f.K===null?h.continue():h.continue(f.K)}}).next(()=>X.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ou(n){return new X((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=Lw(r.target.error);t(s)}})}let pS=!1;function Lw(n){const e=va.C(gn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pS||(pS=!0,setTimeout(()=>{throw r},0)),r}}return n}const Nf="IndexBackfiller";class G2{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){ge(Nf,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();ge(Nf,`Documents written: ${t}`)}catch(t){$l(t)?ge(Nf,"Ignoring IndexedDB error during index backfill: ",t):await Hl(t)}await this.te(6e4)})}}class W2{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const r=new Set;let s=t,o=!0;return X.doWhile(()=>o===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(u!==null&&!r.has(u))return ge(Nf,`Processing collection: ${u}`),this.ie(e,u,s).next(h=>{s-=h,r.add(u)});o=!1})).next(()=>t-s)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.se(s,o)).next(h=>(ge(Nf,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}se(e,t){let r=e;return t.changes.forEach((s,o)=>{const u=jC(o);Mw(u,r)>0&&(r=u)}),new Hi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Ei.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=-1;function Sm(n){return n==null}function Xf(n){return n===0&&1/n==-1/0}function zC(n){return typeof n=="number"&&Number.isInteger(n)&&!Xf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="";function Ur(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gS(e)),e=K2(n.get(t),e);return gS(e)}function K2(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case kg:t+="";break;default:t+=o}}return t}function gS(n){return n+kg+""}function pa(n){const e=n.length;if(ke(e>=2),e===2)return ke(n.charAt(0)===kg&&n.charAt(1)===""),pt.emptyPath();const t=e-2,r=[];let s="";for(let o=0;o<e;){const u=n.indexOf(kg,o);switch((u<0||u>t)&&De(),n.charAt(u+1)){case"":const h=n.substring(o,u);let f;s.length===0?f=h:(s+=h,f=s,s=""),r.push(f);break;case"":s+=n.substring(o,u),s+="\0";break;case"":s+=n.substring(o,u+1);break;default:De()}o=u+2}return new pt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu="remoteDocuments",Im="owner",rh="owner",Zf="mutationQueues",Y2="userId",Bs="mutations",_S="batchId",Mu="userMutationsIndex",vS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(n,e){return[n,Ur(e)]}function qC(n,e,t){return[n,Ur(e),t]}const Q2={},xh="documentMutations",Vg="remoteDocumentsV14",X2=["prefixPath","collectionGroup","readTime","documentId"],gg="documentKeyIndex",Z2=["prefixPath","collectionGroup","documentId"],HC="collectionGroupIndex",J2=["collectionGroup","readTime","prefixPath","documentId"],Jf="remoteDocumentGlobal",Ib="remoteDocumentGlobalKey",Oh="targets",$C="queryTargetsIndex",ej=["canonicalId","targetId"],Nh="targetDocuments",tj=["targetId","path"],jw="documentTargetsIndex",nj=["path","targetId"],Mg="targetGlobalKey",Bu="targetGlobal",em="collectionParents",rj=["collectionId","parent"],Ph="clientMetadata",ij="clientId",g_="bundles",sj="bundleId",__="namedQueries",aj="name",Uw="indexConfiguration",oj="indexId",Rb="collectionGroupIndex",lj="collectionGroup",Lg="indexState",uj=["indexId","uid"],GC="sequenceNumberIndex",cj=["uid","sequenceNumber"],jg="indexEntries",hj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],WC="documentKeyIndex",dj=["indexId","uid","orderedDocumentKey"],v_="documentOverlays",fj=["userId","collectionPath","documentId"],Cb="collectionPathOverlayIndex",mj=["userId","collectionPath","largestBatchId"],KC="collectionGroupOverlayIndex",pj=["userId","collectionGroup","largestBatchId"],Fw="globals",gj="name",YC=[Zf,Bs,xh,xu,Oh,Im,Bu,Nh,Ph,Jf,em,g_,__],_j=[...YC,v_],QC=[Zf,Bs,xh,Vg,Oh,Im,Bu,Nh,Ph,Jf,em,g_,__,v_],XC=QC,Bw=[...XC,Uw,Lg,jg],vj=Bw,yj=[...Bw,Fw];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db extends FC{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function Jn(n,e){const t=Ce(n);return va.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t){this.comparator=e,this.root=t||Ar.EMPTY}insert(e,t){return new Zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ar.BLACK,null,null))}remove(e){return new Zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ar.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ng(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ng(this.root,e,this.comparator,!1)}getReverseIterator(){return new ng(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ng(this.root,e,this.comparator,!0)}}class ng{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ar{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Ar.RED,this.left=s??Ar.EMPTY,this.right=o??Ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new Ar(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ar.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Ar.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}Ar.EMPTY=null,Ar.RED=!0,Ar.BLACK=!1;Ar.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,t,r,s,o){return this}insert(e,t,r){return new Ar(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new Zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bS(this.data.getIterator())}getIteratorFrom(e){return new bS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Lt(this.comparator);return t.data=e,t}}class bS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ih(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Ti([])}unionWith(e){let t=new Lt(on.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ch(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new JC("Invalid base64 string: "+o):o}}(e);return new In(t)}static fromUint8Array(e){const t=function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o}(e);return new In(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}In.EMPTY_BYTE_STRING=new In("");const wj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function po(n){if(ke(!!n),typeof n=="string"){let e=0;const t=wj.exec(n);if(ke(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:sn(n.seconds),nanos:sn(n.nanos)}}function sn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function go(n){return typeof n=="string"?In.fromBase64String(n):In.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="server_timestamp",tD="__type__",nD="__previous_value__",rD="__local_write_time__";function y_(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[tD])===null||t===void 0?void 0:t.stringValue)===eD}function b_(n){const e=n.mapValue.fields[nD];return y_(e)?b_(e):e}function tm(n){const e=po(n.mapValue.fields[rD].timestampValue);return new un(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,t,r,s,o,u,h,f,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p}}const xb="(default)";class Pl{constructor(e,t){this.projectId=e,this.database=t||xb}static empty(){return new Pl("","")}get isDefaultDatabase(){return this.database===xb}isEqual(e){return e instanceof Pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="__type__",iD="__max__",vl={mapValue:{fields:{__type__:{stringValue:iD}}}},qw="__vector__",kh="value",_g={nullValue:"NULL_VALUE"};function kl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?y_(n)?4:sD(n)?9007199254740991:w_(n)?10:11:De()}function Ta(n,e){if(n===e)return!0;const t=kl(n);if(t!==kl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return tm(n).isEqual(tm(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=po(s.timestampValue),h=po(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return go(s.bytesValue).isEqual(go(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return sn(s.geoPointValue.latitude)===sn(o.geoPointValue.latitude)&&sn(s.geoPointValue.longitude)===sn(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return sn(s.integerValue)===sn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=sn(s.doubleValue),h=sn(o.doubleValue);return u===h?Xf(u)===Xf(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return Ch(n.arrayValue.values||[],e.arrayValue.values||[],Ta);case 10:case 11:return function(s,o){const u=s.mapValue.fields||{},h=o.mapValue.fields||{};if(yS(u)!==yS(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!Ta(u[f],h[f])))return!1;return!0}(n,e);default:return De()}}function nm(n,e){return(n.values||[]).find(t=>Ta(t,e))!==void 0}function Vl(n,e){if(n===e)return 0;const t=kl(n),r=kl(e);if(t!==r)return Ke(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=sn(o.integerValue||o.doubleValue),f=sn(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,e);case 3:return wS(n.timestampValue,e.timestampValue);case 4:return wS(tm(n),tm(e));case 5:return Ab(n.stringValue,e.stringValue);case 6:return function(o,u){const h=go(o),f=go(u);return h.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),f=u.split("/");for(let p=0;p<h.length&&p<f.length;p++){const v=Ke(h[p],f[p]);if(v!==0)return v}return Ke(h.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=Ke(sn(o.latitude),sn(u.latitude));return h!==0?h:Ke(sn(o.longitude),sn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ES(n.arrayValue,e.arrayValue);case 10:return function(o,u){var h,f,p,v;const b=o.fields||{},A=u.fields||{},D=(h=b[kh])===null||h===void 0?void 0:h.arrayValue,M=(f=A[kh])===null||f===void 0?void 0:f.arrayValue,F=Ke(((p=D==null?void 0:D.values)===null||p===void 0?void 0:p.length)||0,((v=M==null?void 0:M.values)===null||v===void 0?void 0:v.length)||0);return F!==0?F:ES(D,M)}(n.mapValue,e.mapValue);case 11:return function(o,u){if(o===vl.mapValue&&u===vl.mapValue)return 0;if(o===vl.mapValue)return 1;if(u===vl.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),p=u.fields||{},v=Object.keys(p);f.sort(),v.sort();for(let b=0;b<f.length&&b<v.length;++b){const A=Ab(f[b],v[b]);if(A!==0)return A;const D=Vl(h[f[b]],p[v[b]]);if(D!==0)return D}return Ke(f.length,v.length)}(n.mapValue,e.mapValue);default:throw De()}}function wS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ke(n,e);const t=po(n),r=po(e),s=Ke(t.seconds,r.seconds);return s!==0?s:Ke(t.nanos,r.nanos)}function ES(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=Vl(t[s],r[s]);if(o)return o}return Ke(t.length,r.length)}function Vh(n){return Ob(n)}function Ob(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=po(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return go(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Re.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=Ob(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const u of r)o?o=!1:s+=",",s+=`${u}:${Ob(t.fields[u])}`;return s+"}"}(n.mapValue):De()}function vg(n){switch(kl(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=b_(n);return e?16+vg(e):16;case 5:return 2*n.stringValue.length;case 6:return go(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+vg(o),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Gl(r.fields,(o,u)=>{s+=o.length+vg(u)}),s}(n.mapValue);default:throw De()}}function Hu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Nb(n){return!!n&&"integerValue"in n}function rm(n){return!!n&&"arrayValue"in n}function TS(n){return!!n&&"nullValue"in n}function AS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yg(n){return!!n&&"mapValue"in n}function w_(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[zw])===null||t===void 0?void 0:t.stringValue)===qw}function Pf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Gl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function sD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===iD}const aD={mapValue:{fields:{[zw]:{stringValue:qw},[kh]:{arrayValue:{}}}}};function Tj(n){return"nullValue"in n?_g:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Hu(Pl.empty(),Re.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?w_(n)?aD:{mapValue:{}}:De()}function Aj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Hu(Pl.empty(),Re.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?aD:"mapValue"in n?w_(n)?{mapValue:{}}:vl:De()}function SS(n,e){const t=Vl(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function IS(n,e){const t=Vl(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.value=e}static empty(){return new Ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!yg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pf(t)}setAll(e){let t=on.emptyPath(),r={},s=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=h.popLast()}u?r[h.lastSegment()]=Pf(u):s.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());yg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ta(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];yg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Gl(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Ir(Pf(this.value))}}function oD(n){const e=[];return Gl(n.fields,(t,r)=>{const s=new on([t]);if(yg(r)){const o=oD(r.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)}),new Ti(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t,r,s,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new en(e,0,je.min(),je.min(),je.min(),Ir.empty(),0)}static newFoundDocument(e,t,r,s){return new en(e,1,t,je.min(),r,s,0)}static newNoDocument(e,t){return new en(e,2,t,je.min(),je.min(),Ir.empty(),0)}static newUnknownDocument(e,t){return new en(e,3,t,je.min(),je.min(),Ir.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,t){this.position=e,this.inclusive=t}}function RS(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],u=n.position[s];if(o.field.isKeyField()?r=Re.comparator(Re.fromName(u.referenceValue),t.key):r=Vl(u,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function CS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ta(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,t="asc"){this.field=e,this.dir=t}}function Sj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{}class gt extends lD{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ij(e,t,r):t==="array-contains"?new Dj(e,r):t==="in"?new mD(e,r):t==="not-in"?new xj(e,r):t==="array-contains-any"?new Oj(e,r):new gt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Rj(e,r):new Cj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Vl(t,this.value)):t!==null&&kl(this.value)===kl(t)&&this.matchesComparison(Vl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mt extends lD{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Mt(e,t)}matches(e){return Mh(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Mh(n){return n.op==="and"}function Pb(n){return n.op==="or"}function Hw(n){return uD(n)&&Mh(n)}function uD(n){for(const e of n.filters)if(e instanceof Mt)return!1;return!0}function kb(n){if(n instanceof gt)return n.field.canonicalString()+n.op.toString()+Vh(n.value);if(Hw(n))return n.filters.map(e=>kb(e)).join(",");{const e=n.filters.map(t=>kb(t)).join(",");return`${n.op}(${e})`}}function cD(n,e){return n instanceof gt?function(r,s){return s instanceof gt&&r.op===s.op&&r.field.isEqual(s.field)&&Ta(r.value,s.value)}(n,e):n instanceof Mt?function(r,s){return s instanceof Mt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,u,h)=>o&&cD(u,s.filters[h]),!0):!1}(n,e):void De()}function hD(n,e){const t=n.filters.concat(e);return Mt.create(t,n.op)}function dD(n){return n instanceof gt?function(t){return`${t.field.canonicalString()} ${t.op} ${Vh(t.value)}`}(n):n instanceof Mt?function(t){return t.op.toString()+" {"+t.getFilters().map(dD).join(" ,")+"}"}(n):"Filter"}class Ij extends gt{constructor(e,t,r){super(e,t,r),this.key=Re.fromName(r.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class Rj extends gt{constructor(e,t){super(e,"in",t),this.keys=fD("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Cj extends gt{constructor(e,t){super(e,"not-in",t),this.keys=fD("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fD(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Re.fromName(r.referenceValue))}class Dj extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rm(t)&&nm(t.arrayValue,this.value)}}class mD extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nm(this.value.arrayValue,t)}}class xj extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(nm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!nm(this.value.arrayValue,t)}}class Oj extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>nm(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,t=null,r=[],s=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=u,this.endAt=h,this.le=null}}function Vb(n,e=null,t=[],r=[],s=null,o=null,u=null){return new Nj(n,e,t,r,s,o,u)}function $u(n){const e=Ce(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>kb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Sm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vh(r)).join(",")),e.le=t}return e.le}function Rm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Sj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cD(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!CS(n.startAt,e.startAt)&&CS(n.endAt,e.endAt)}function Ug(n){return Re.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Fg(n,e){return n.filters.filter(t=>t instanceof gt&&t.field.isEqual(e))}function DS(n,e,t){let r=_g,s=!0;for(const o of Fg(n,e)){let u=_g,h=!0;switch(o.op){case"<":case"<=":u=Tj(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,h=!1;break;case"!=":case"not-in":u=_g}SS({value:r,inclusive:s},{value:u,inclusive:h})<0&&(r=u,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];SS({value:r,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(r=u,s=t.inclusive);break}}return{value:r,inclusive:s}}function xS(n,e,t){let r=vl,s=!0;for(const o of Fg(n,e)){let u=vl,h=!0;switch(o.op){case">=":case">":u=Aj(o.value),h=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,h=!1;break;case"!=":case"not-in":u=vl}IS({value:r,inclusive:s},{value:u,inclusive:h})>0&&(r=u,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];IS({value:r,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(r=u,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t=null,r=[],s=[],o=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=f,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function pD(n,e,t,r,s,o,u,h){return new bo(n,e,t,r,s,o,u,h)}function td(n){return new bo(n)}function OS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $w(n){return n.collectionGroup!==null}function bh(n){const e=Ce(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Lt(on.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new im(o,r))}),t.has(on.keyField().canonicalString())||e.he.push(new im(on.keyField(),r))}return e.he}function ui(n){const e=Ce(n);return e.Pe||(e.Pe=Pj(e,bh(n))),e.Pe}function Pj(n,e){if(n.limitType==="F")return Vb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new im(s.field,o)});const t=n.endAt?new Ml(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ml(n.startAt.position,n.startAt.inclusive):null;return Vb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Mb(n,e){const t=n.filters.concat([e]);return new bo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Bg(n,e,t){return new bo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cm(n,e){return Rm(ui(n),ui(e))&&n.limitType===e.limitType}function gD(n){return`${$u(ui(n))}|lt:${n.limitType}`}function hh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>dD(s)).join(", ")}]`),Sm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Vh(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Vh(s)).join(",")),`Target(${r})`}(ui(n))}; limitType=${n.limitType})`}function Dm(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Re.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of bh(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(u,h,f){const p=RS(u,h,f);return u.inclusive?p<=0:p<0}(r.startAt,bh(r),s)||r.endAt&&!function(u,h,f){const p=RS(u,h,f);return u.inclusive?p>=0:p>0}(r.endAt,bh(r),s))}(n,e)}function _D(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vD(n){return(e,t)=>{let r=!1;for(const s of bh(n)){const o=kj(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function kj(n,e,t){const r=n.field.isKeyField()?Re.comparator(e.key,t.key):function(o,u,h){const f=u.data.field(o),p=h.data.field(o);return f!==null&&p!==null?Vl(f,p):De()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return De()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Gl(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return ZC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=new Zt(Re.comparator);function Ai(){return Vj}const yD=new Zt(Re.comparator);function If(...n){let e=yD;for(const t of n)e=e.insert(t.key,t);return e}function bD(n){let e=yD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ga(){return kf()}function wD(){return kf()}function kf(){return new wo(n=>n.toString(),(n,e)=>n.isEqual(e))}const Mj=new Zt(Re.comparator),Lj=new Lt(Re.comparator);function et(...n){let e=Lj;for(const t of n)e=e.add(t);return e}const jj=new Lt(Ke);function Gw(){return jj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xf(e)?"-0":e}}function ED(n){return{integerValue:""+n}}function TD(n,e){return zC(e)?ED(e):Ww(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(){this._=void 0}}function Uj(n,e,t){return n instanceof Lh?function(s,o){const u={fields:{[tD]:{stringValue:eD},[rD]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&y_(o)&&(o=b_(o)),o&&(u.fields[nD]=o),{mapValue:u}}(t,e):n instanceof Gu?SD(n,e):n instanceof Wu?ID(n,e):function(s,o){const u=AD(s,o),h=NS(u)+NS(s.Ie);return Nb(u)&&Nb(s.Ie)?ED(h):Ww(s.serializer,h)}(n,e)}function Fj(n,e,t){return n instanceof Gu?SD(n,e):n instanceof Wu?ID(n,e):t}function AD(n,e){return n instanceof jh?function(r){return Nb(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Lh extends E_{}class Gu extends E_{constructor(e){super(),this.elements=e}}function SD(n,e){const t=RD(e);for(const r of n.elements)t.some(s=>Ta(s,r))||t.push(r);return{arrayValue:{values:t}}}class Wu extends E_{constructor(e){super(),this.elements=e}}function ID(n,e){let t=RD(e);for(const r of n.elements)t=t.filter(s=>!Ta(s,r));return{arrayValue:{values:t}}}class jh extends E_{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function NS(n){return sn(n.integerValue||n.doubleValue)}function RD(n){return rm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,t){this.field=e,this.transform=t}}function Bj(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Gu&&s instanceof Gu||r instanceof Wu&&s instanceof Wu?Ch(r.elements,s.elements,Ta):r instanceof jh&&s instanceof jh?Ta(r.Ie,s.Ie):r instanceof Lh&&s instanceof Lh}(n.transform,e.transform)}class zj{constructor(e,t){this.version=e,this.transformResults=t}}class ln{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ln}static exists(e){return new ln(void 0,e)}static updateTime(e){return new ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class T_{}function CD(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new rd(n.key,ln.none()):new nd(n.key,n.data,ln.none());{const t=n.data,r=Ir.empty();let s=new Lt(on.comparator);for(let o of e.fields)if(!s.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?r.delete(o):r.set(o,u),s=s.add(o)}return new Eo(n.key,r,new Ti(s.toArray()),ln.none())}}function qj(n,e,t){n instanceof nd?function(s,o,u){const h=s.value.clone(),f=kS(s.fieldTransforms,o,u.transformResults);h.setAll(f),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Eo?function(s,o,u){if(!bg(s.precondition,o))return void o.convertToUnknownDocument(u.version);const h=kS(s.fieldTransforms,o,u.transformResults),f=o.data;f.setAll(DD(s)),f.setAll(h),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Vf(n,e,t,r){return n instanceof nd?function(o,u,h,f){if(!bg(o.precondition,u))return h;const p=o.value.clone(),v=VS(o.fieldTransforms,f,u);return p.setAll(v),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Eo?function(o,u,h,f){if(!bg(o.precondition,u))return h;const p=VS(o.fieldTransforms,f,u),v=u.data;return v.setAll(DD(o)),v.setAll(p),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(b=>b.field))}(n,e,t,r):function(o,u,h){return bg(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function Hj(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=AD(r.transform,s||null);o!=null&&(t===null&&(t=Ir.empty()),t.set(r.field,o))}return t||null}function PS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ch(r,s,(o,u)=>Bj(o,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class nd extends T_{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Eo extends T_{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function DD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function kS(n,e,t){const r=new Map;ke(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],u=o.transform,h=e.data.field(o.field);r.set(o.field,Fj(u,h,t[s]))}return r}function VS(n,e,t){const r=new Map;for(const s of n){const o=s.transform,u=t.data.field(s.field);r.set(s.field,Uj(o,u,e))}return r}class rd extends T_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kw extends T_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&qj(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Vf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=wD();return this.mutations.forEach(s=>{const o=e.get(s.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=t.has(s.key)?null:h;const f=CD(u,h);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(je.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),et())}isEqual(e){return this.batchId===e.batchId&&Ch(this.mutations,e.mutations,(t,r)=>PS(t,r))&&Ch(this.baseMutations,e.baseMutations,(t,r)=>PS(t,r))}}class Qw{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ke(e.mutations.length===r.length);let s=function(){return Mj}();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,r[u].version);return new Qw(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hn,Tt;function xD(n){switch(n){case ne.OK:return De();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return De()}}function OD(n){if(n===void 0)return Mn("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Hn.OK:return ne.OK;case Hn.CANCELLED:return ne.CANCELLED;case Hn.UNKNOWN:return ne.UNKNOWN;case Hn.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Hn.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Hn.INTERNAL:return ne.INTERNAL;case Hn.UNAVAILABLE:return ne.UNAVAILABLE;case Hn.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Hn.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Hn.NOT_FOUND:return ne.NOT_FOUND;case Hn.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Hn.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Hn.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Hn.ABORTED:return ne.ABORTED;case Hn.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Hn.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Hn.DATA_LOSS:return ne.DATA_LOSS;default:return De()}}(Tt=Hn||(Hn={}))[Tt.OK=0]="OK",Tt[Tt.CANCELLED=1]="CANCELLED",Tt[Tt.UNKNOWN=2]="UNKNOWN",Tt[Tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tt[Tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tt[Tt.NOT_FOUND=5]="NOT_FOUND",Tt[Tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tt[Tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tt[Tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tt[Tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tt[Tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tt[Tt.ABORTED=10]="ABORTED",Tt[Tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tt[Tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tt[Tt.INTERNAL=13]="INTERNAL",Tt[Tt.UNAVAILABLE=14]="UNAVAILABLE",Tt[Tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=new Tl([4294967295,4294967295],0);function MS(n){const e=Vw().encode(n),t=new CC;return t.update(e),new Uint8Array(t.digest())}function LS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Tl([t,r],0),new Tl([s,o],0)]}class Zw{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Rf(`Invalid padding: ${t}`);if(r<0)throw new Rf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rf(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Rf(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Tl.fromNumber(this.Ee)}Ae(e,t,r){let s=e.add(t.multiply(Tl.fromNumber(r)));return s.compare(Gj)===1&&(s=new Tl([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=MS(e),[r,s]=LS(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(r,s,o);if(!this.Re(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new Zw(o,s,t);return r.forEach(h=>u.insert(h)),u}insert(e){if(this.Ee===0)return;const t=MS(e),[r,s]=LS(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(r,s,o);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Rf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Nm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Om(je.min(),s,new Zt(Ke),Ai(),et())}}class Nm{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Nm(r,t,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,t,r,s){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=s}}class ND{constructor(e,t){this.targetId=e,this.ge=t}}class PD{constructor(e,t,r=In.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class jS{constructor(){this.pe=0,this.ye=US(),this.we=In.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=et(),t=et(),r=et();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:De()}}),new Nm(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=US()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,ke(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Wj{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ai(),this.$e=rg(),this.Ue=rg(),this.Ke=new Zt(Ke)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:De()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,r=e.ge.count,s=this.Xe(t);if(s){const o=s.target;if(Ug(o))if(r===0){const u=new Re(o.path);this.ze(t,u,en.newNoDocument(u,je.min()))}else ke(r===1);else{const u=this.et(t);if(u!==r){const h=this.tt(e),f=h?this.nt(h,e,u):1;if(f!==0){this.Ye(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let u,h;try{u=go(r).toUint8Array()}catch(f){if(f instanceof JC)return Ea("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Zw(u,s,o)}catch(f){return Ea(f instanceof Rf?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ee===0?null:h}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const u=this.ke.it(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.ze(t,o,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((o,u)=>{const h=this.Xe(u);if(h){if(o.current&&Ug(h.target)){const f=new Re(h.target.path);this._t(f).has(u)||this.ut(u,f)||this.ze(u,f,en.newNoDocument(f,e))}o.ve&&(t.set(u,o.Fe()),o.Me())}});let r=et();this.Ue.forEach((o,u)=>{let h=!0;u.forEachWhile(f=>{const p=this.Xe(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.Qe.forEach((o,u)=>u.setReadTime(e));const s=new Om(e,t,this.Ke,this.Qe,r);return this.Qe=Ai(),this.$e=rg(),this.Ue=rg(),this.Ke=new Zt(Ke),s}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new jS,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Lt(Ke),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Lt(Ke),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new jS),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function rg(){return new Zt(Re.comparator)}function US(){return new Zt(Re.comparator)}const Kj={asc:"ASCENDING",desc:"DESCENDING"},Yj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qj={and:"AND",or:"OR"};class Xj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Lb(n,e){return n.useProto3Json||Sm(e)?e:{value:e}}function Uh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kD(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Zj(n,e){return Uh(n,e.toTimestamp())}function Ln(n){return ke(!!n),je.fromTimestamp(function(t){const r=po(t);return new un(r.seconds,r.nanos)}(n))}function Jw(n,e){return jb(n,e).canonicalString()}function jb(n,e){const t=function(s){return new pt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function VD(n){const e=pt.fromString(n);return ke($D(e)),e}function sm(n,e){return Jw(n.databaseId,e.path)}function ya(n,e){const t=VD(e);if(t.get(1)!==n.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Re(jD(t))}function MD(n,e){return Jw(n.databaseId,e)}function LD(n){const e=VD(n);return e.length===4?pt.emptyPath():jD(e)}function Ub(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jD(n){return ke(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function FS(n,e,t){return{name:sm(n,e),fields:t.value.mapValue.fields}}function UD(n,e,t){const r=ya(n,e.name),s=Ln(e.updateTime),o=e.createTime?Ln(e.createTime):je.min(),u=new Ir({mapValue:{fields:e.fields}}),h=en.newFoundDocument(r,s,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Jj(n,e){return"found"in e?function(r,s){ke(!!s.found),s.found.name,s.found.updateTime;const o=ya(r,s.found.name),u=Ln(s.found.updateTime),h=s.found.createTime?Ln(s.found.createTime):je.min(),f=new Ir({mapValue:{fields:s.found.fields}});return en.newFoundDocument(o,u,h,f)}(n,e):"missing"in e?function(r,s){ke(!!s.missing),ke(!!s.readTime);const o=ya(r,s.missing),u=Ln(s.readTime);return en.newNoDocument(o,u)}(n,e):De()}function eU(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:De()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,v){return p.useProto3Json?(ke(v===void 0||typeof v=="string"),In.fromBase64String(v||"")):(ke(v===void 0||v instanceof Buffer||v instanceof Uint8Array),In.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(p){const v=p.code===void 0?ne.UNKNOWN:OD(p.code);return new me(v,p.message||"")}(u);t=new PD(r,s,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ya(n,r.document.name),o=Ln(r.document.updateTime),u=r.document.createTime?Ln(r.document.createTime):je.min(),h=new Ir({mapValue:{fields:r.document.fields}}),f=en.newFoundDocument(s,o,u,h),p=r.targetIds||[],v=r.removedTargetIds||[];t=new wg(p,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ya(n,r.document),o=r.readTime?Ln(r.readTime):je.min(),u=en.newNoDocument(s,o),h=r.removedTargetIds||[];t=new wg([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ya(n,r.document),o=r.removedTargetIds||[];t=new wg([],o,s,null)}else{if(!("filter"in e))return De();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,u=new $j(s,o),h=r.targetId;t=new ND(h,u)}}return t}function am(n,e){let t;if(e instanceof nd)t={update:FS(n,e.key,e.value)};else if(e instanceof rd)t={delete:sm(n,e.key)};else if(e instanceof Eo)t={update:FS(n,e.key,e.data),updateMask:aU(e.fieldMask)};else{if(!(e instanceof Kw))return De();t={verify:sm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof Lh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Gu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Wu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof jh)return{fieldPath:u.field.canonicalString(),increment:h.Ie};throw De()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:Zj(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:De()}(n,e.precondition)),t}function Fb(n,e){const t=e.currentDocument?function(o){return o.updateTime!==void 0?ln.updateTime(Ln(o.updateTime)):o.exists!==void 0?ln.exists(o.exists):ln.none()}(e.currentDocument):ln.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,h){let f=null;if("setToServerValue"in h)ke(h.setToServerValue==="REQUEST_TIME"),f=new Lh;else if("appendMissingElements"in h){const v=h.appendMissingElements.values||[];f=new Gu(v)}else if("removeAllFromArray"in h){const v=h.removeAllFromArray.values||[];f=new Wu(v)}else"increment"in h?f=new jh(u,h.increment):De();const p=on.fromServerFormat(h.fieldPath);return new xm(p,f)}(n,s)):[];if(e.update){e.update.name;const s=ya(n,e.update.name),o=new Ir({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=function(f){const p=f.fieldPaths||[];return new Ti(p.map(v=>on.fromServerFormat(v)))}(e.updateMask);return new Eo(s,o,u,t,r)}return new nd(s,o,t,r)}if(e.delete){const s=ya(n,e.delete);return new rd(s,t)}if(e.verify){const s=ya(n,e.verify);return new Kw(s,t)}return De()}function tU(n,e){return n&&n.length>0?(ke(e!==void 0),n.map(t=>function(s,o){let u=s.updateTime?Ln(s.updateTime):Ln(o);return u.isEqual(je.min())&&(u=Ln(o)),new zj(u,s.transformResults||[])}(t,e))):[]}function FD(n,e){return{documents:[MD(n,e.path)]}}function BD(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=MD(n,s);const o=function(p){if(p.length!==0)return HD(Mt.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(p){if(p.length!==0)return p.map(v=>function(A){return{field:dh(A.field),direction:rU(A.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=Lb(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:s}}function zD(n){let e=LD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ke(r===1);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let o=[];t.where&&(o=function(b){const A=qD(b);return A instanceof Mt&&Hw(A)?A.getFilters():[A]}(t.where));let u=[];t.orderBy&&(u=function(b){return b.map(A=>function(M){return new im(fh(M.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(A))}(t.orderBy));let h=null;t.limit&&(h=function(b){let A;return A=typeof b=="object"?b.value:b,Sm(A)?null:A}(t.limit));let f=null;t.startAt&&(f=function(b){const A=!!b.before,D=b.values||[];return new Ml(D,A)}(t.startAt));let p=null;return t.endAt&&(p=function(b){const A=!b.before,D=b.values||[];return new Ml(D,A)}(t.endAt)),pD(e,s,u,o,h,"F",f,p)}function nU(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qD(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=fh(t.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=fh(t.unaryFilter.field);return gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=fh(t.unaryFilter.field);return gt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=fh(t.unaryFilter.field);return gt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(n):n.fieldFilter!==void 0?function(t){return gt.create(fh(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Mt.create(t.compositeFilter.filters.map(r=>qD(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return De()}}(t.compositeFilter.op))}(n):De()}function rU(n){return Kj[n]}function iU(n){return Yj[n]}function sU(n){return Qj[n]}function dh(n){return{fieldPath:n.canonicalString()}}function fh(n){return on.fromServerFormat(n.fieldPath)}function HD(n){return n instanceof gt?function(t){if(t.op==="=="){if(AS(t.value))return{unaryFilter:{field:dh(t.field),op:"IS_NAN"}};if(TS(t.value))return{unaryFilter:{field:dh(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(AS(t.value))return{unaryFilter:{field:dh(t.field),op:"IS_NOT_NAN"}};if(TS(t.value))return{unaryFilter:{field:dh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dh(t.field),op:iU(t.op),value:t.value}}}(n):n instanceof Mt?function(t){const r=t.getFilters().map(s=>HD(s));return r.length===1?r[0]:{compositeFilter:{op:sU(t.op),filters:r}}}(n):De()}function aU(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $D(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,t,r,s,o=je.min(),u=je.min(),h=In.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new oo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.Tt=e}}function oU(n,e){let t;if(e.document)t=UD(n.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Re.fromSegments(e.noDocument.path),s=Yu(e.noDocument.readTime);t=en.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return De();{const r=Re.fromSegments(e.unknownDocument.path),s=Yu(e.unknownDocument.version);t=en.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const o=new un(s[0],s[1]);return je.fromTimestamp(o)}(e.readTime)),t}function BS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:zg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,u){return{name:sm(o,u.key),fields:u.data.value.mapValue.fields,updateTime:Uh(o,u.version.toTimestamp()),createTime:Uh(o,u.createTime.toTimestamp())}}(n.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ku(e.version)};else{if(!e.isUnknownDocument())return De();r.unknownDocument={path:t.path.toArray(),version:Ku(e.version)}}return r}function zg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ku(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yu(n){const e=new un(n.seconds,n.nanoseconds);return je.fromTimestamp(e)}function Nu(n,e){const t=(e.baseMutations||[]).map(o=>Fb(n.Tt,o));for(let o=0;o<e.mutations.length-1;++o){const u=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const h=e.mutations[o+1];u.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>Fb(n.Tt,o)),s=un.fromMillis(e.localWriteTimeMs);return new Yw(e.batchId,s,t,r)}function Cf(n){const e=Yu(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Yu(n.lastLimboFreeSnapshotVersion):je.min();let r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return ke(o.documents.length===1),ui(td(LD(o.documents[0])))}(n.query):function(o){return ui(zD(o))}(n.query),new oo(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,In.fromBase64String(n.resumeToken))}function WD(n,e){const t=Ku(e.snapshotVersion),r=Ku(e.lastLimboFreeSnapshotVersion);let s;s=Ug(e.target)?FD(n.Tt,e.target):BD(n.Tt,e.target).ht;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$u(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function eE(n){const e=zD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Bg(e,e.limit,"L"):e}function qy(n,e){return new Xw(e.largestBatchId,Fb(n.Tt,e.overlayMutation))}function zS(n,e){const t=e.path.lastSegment();return[n,Ur(e.path.popLast()),t]}function qS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ku(r.readTime),documentKey:Ur(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{getBundleMetadata(e,t){return HS(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Yu(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return HS(e).put(function(s){return{bundleId:s.id,createTime:Ku(Ln(s.createTime)),version:s.version}}(t))}getNamedQuery(e,t){return $S(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:eE(o.bundledQuery),readTime:Yu(o.readTime)}}(r)})}saveNamedQuery(e,t){return $S(e).put(function(s){return{name:s.name,readTime:Ku(Ln(s.readTime)),bundledQuery:s.bundledQuery}}(t))}}function HS(n){return Jn(n,g_)}function $S(n){return Jn(n,__)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const r=t.uid||"";return new A_(e,r)}getOverlay(e,t){return df(e).get(zS(this.userId,t)).next(r=>r?qy(this.serializer,r):null)}getOverlays(e,t){const r=ga();return X.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((o,u)=>{const h=new Xw(t,u);s.push(this.Et(e,h))}),X.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(u=>s.add(Ur(u.getCollectionPath())));const o=[];return s.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);o.push(df(e).J(Cb,h))}),X.waitFor(o)}getOverlaysForCollection(e,t,r){const s=ga(),o=Ur(t),u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return df(e).G(Cb,u).next(h=>{for(const f of h){const p=qy(this.serializer,f);s.set(p.getKey(),p)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const o=ga();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return df(e).Z({index:KC,range:h},(f,p,v)=>{const b=qy(this.serializer,p);o.size()<s||b.largestBatchId===u?(o.set(b.getKey(),b),u=b.largestBatchId):v.done()}).next(()=>o)}Et(e,t){return df(e).put(function(s,o,u){const[h,f,p]=zS(o,u.mutation.key);return{userId:o,collectionPath:f,documentId:p,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:am(s.Tt,u.mutation)}}(this.serializer,this.userId,t))}}function df(n){return Jn(n,v_)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{dt(e){return Jn(e,Fw)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?In.fromUint8Array(r):In.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(sn(e.integerValue));else if("doubleValue"in e){const r=sn(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),Xf(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=po(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(go(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?sD(e)?this.ft(t,Number.MAX_SAFE_INTEGER):w_(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):De()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const s of Object.keys(r))this.wt(s,t),this.Rt(r[s],t)}vt(e,t){var r,s;const o=e.fields||{};this.ft(t,53);const u=kh,h=((s=(r=o[u].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.ft(t,15),t.gt(sn(h)),this.wt(u,t),this.Rt(o[u],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const s of r)this.Rt(s,t)}Dt(e,t){this.ft(t,37),Re.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}}Pu.xt=new Pu;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=255;function cU(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function GS(n){const e=64-function(r){let s=0;for(let o=0;o<8;++o){const u=cU(255&r[o]);if(s+=u,u!==8)break}return s}(n);return Math.ceil(e/8)}class hU{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const s=t.codePointAt(0);this.Nt(240|s>>>18),this.Nt(128|63&s>>>12),this.Nt(128|63&s>>>6),this.Nt(128|63&s)}}this.Bt()}$t(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const s=t.codePointAt(0);this.kt(240|s>>>18),this.kt(128|63&s>>>12),this.kt(128|63&s>>>6),this.kt(128|63&s)}}this.qt()}Ut(e){const t=this.Kt(e),r=GS(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Gt(e){const t=this.Kt(e),r=GS(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}zt(){this.jt(sh),this.jt(255)}Ht(){this.Jt(sh),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===sh?(this.jt(sh),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===sh?(this.Jt(sh),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class dU{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class fU{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class ff{constructor(){this.Zt=new hU,this.Xt=new dU(this.Zt),this.en=new fU(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ku(this.indexId,this.documentKey,this.arrayValue,r)}}function fl(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=WS(n.arrayValue,e.arrayValue),t!==0?t:(t=WS(n.directionalValue,e.directionalValue),t!==0?t:Re.comparator(n.documentKey,e.documentKey)))}function WS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){this.rn=new Lt((t,r)=>on.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(ke(e.collectionGroup===this.collectionId),this.an)return!1;const t=Sb(e);if(t!==void 0&&!this.cn(t))return!1;const r=Du(e);let s=new Set,o=0,u=0;for(;o<r.length&&this.cn(r[o]);++o)s=s.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.rn.size>0){const h=this.rn.getIterator().getNext();if(!s.has(h.field.canonicalString())){const f=r[o];if(!this.ln(h,f)||!this.hn(this.sn[u++],f))return!1}++o}for(;o<r.length;++o){const h=r[o];if(u>=this.sn.length||!this.hn(this.sn[u++],h))return!1}return!0}Pn(){if(this.an)return null;let e=new Lt(on.comparator);const t=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new mg(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new mg(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new mg(r.field,r.dir==="asc"?0:1)));return new Pg(Pg.UNKNOWN_ID,this.collectionId,t,Qf.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(n){var e,t;if(ke(n instanceof gt||n instanceof Mt),n instanceof gt){if(n instanceof mD){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>gt.create(n.field,"==",o)))||[];return Mt.create(s,"or")}return n}const r=n.filters.map(s=>KD(s));return Mt.create(r,n.op)}function mU(n){if(n.getFilters().length===0)return[];const e=qb(KD(n));return ke(YD(e)),Bb(e)||zb(e)?[e]:e.getFilters()}function Bb(n){return n instanceof gt}function zb(n){return n instanceof Mt&&Hw(n)}function YD(n){return Bb(n)||zb(n)||function(t){if(t instanceof Mt&&Pb(t)){for(const r of t.getFilters())if(!Bb(r)&&!zb(r))return!1;return!0}return!1}(n)}function qb(n){if(ke(n instanceof gt||n instanceof Mt),n instanceof gt)return n;if(n.filters.length===1)return qb(n.filters[0]);const e=n.filters.map(r=>qb(r));let t=Mt.create(e,n.op);return t=qg(t),YD(t)?t:(ke(t instanceof Mt),ke(Mh(t)),ke(t.filters.length>1),t.filters.reduce((r,s)=>tE(r,s)))}function tE(n,e){let t;return ke(n instanceof gt||n instanceof Mt),ke(e instanceof gt||e instanceof Mt),t=n instanceof gt?e instanceof gt?function(s,o){return Mt.create([s,o],"and")}(n,e):YS(n,e):e instanceof gt?YS(e,n):function(s,o){if(ke(s.filters.length>0&&o.filters.length>0),Mh(s)&&Mh(o))return hD(s,o.getFilters());const u=Pb(s)?s:o,h=Pb(s)?o:s,f=u.filters.map(p=>tE(p,h));return Mt.create(f,"or")}(n,e),qg(t)}function YS(n,e){if(Mh(e))return hD(e,n.getFilters());{const t=e.filters.map(r=>tE(n,r));return Mt.create(t,"or")}}function qg(n){if(ke(n instanceof gt||n instanceof Mt),n instanceof gt)return n;const e=n.getFilters();if(e.length===1)return qg(e[0]);if(uD(n))return n;const t=e.map(s=>qg(s)),r=[];return t.forEach(s=>{s instanceof gt?r.push(s):s instanceof Mt&&(s.op===n.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Mt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(){this.Tn=new nE}addToCollectionParentIndex(e,t){return this.Tn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Hi.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Hi.min())}updateCollectionGroup(e,t,r){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class nE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Lt(pt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Lt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="IndexedDbIndexManager",ig=new Uint8Array(0);class gU{constructor(e,t){this.databaseId=t,this.In=new nE,this.En=new wo(r=>$u(r),(r,s)=>Rm(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const o={collectionId:r,parent:Ur(s)};return XS(e).put(o)}return X.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[MC(t),""],!1,!0);return XS(e).G(s).next(o=>{for(const u of o){if(u.collectionId!==t)break;r.push(pa(u.parent))}return r})}addFieldIndex(e,t){const r=mf(e),s=function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])}}(t);delete s.indexId;const o=r.add(s);if(t.indexState){const u=oh(e);return o.next(h=>{u.put(qS(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=mf(e),s=oh(e),o=ah(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=mf(e),r=ah(e),s=oh(e);return t.J().next(()=>r.J()).next(()=>s.J())}createTargetIndexes(e,t){return X.forEach(this.dn(t),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const o=new KS(r).Pn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=ah(e);let s=!0;const o=new Map;return X.forEach(this.dn(t),u=>this.An(e,u).next(h=>{s&&(s=!!h),o.set(u,h)})).next(()=>{if(s){let u=et();const h=[];return X.forEach(o,(f,p)=>{ge(QS,`Using index ${function(se){return`id=${se.indexId}|cg=${se.collectionGroup}|f=${se.fields.map(ue=>`${ue.fieldPath}:${ue.kind}`).join(",")}`}(f)} to execute ${$u(t)}`);const v=function(se,ue){const de=Sb(ue);if(de===void 0)return null;for(const be of Fg(se,de.fieldPath))switch(be.op){case"array-contains-any":return be.value.arrayValue.values||[];case"array-contains":return[be.value]}return null}(p,f),b=function(se,ue){const de=new Map;for(const be of Du(ue))for(const U of Fg(se,be.fieldPath))switch(U.op){case"==":case"in":de.set(be.fieldPath.canonicalString(),U.value);break;case"not-in":case"!=":return de.set(be.fieldPath.canonicalString(),U.value),Array.from(de.values())}return null}(p,f),A=function(se,ue){const de=[];let be=!0;for(const U of Du(ue)){const P=U.kind===0?DS(se,U.fieldPath,se.startAt):xS(se,U.fieldPath,se.startAt);de.push(P.value),be&&(be=P.inclusive)}return new Ml(de,be)}(p,f),D=function(se,ue){const de=[];let be=!0;for(const U of Du(ue)){const P=U.kind===0?xS(se,U.fieldPath,se.endAt):DS(se,U.fieldPath,se.endAt);de.push(P.value),be&&(be=P.inclusive)}return new Ml(de,be)}(p,f),M=this.Rn(f,p,A),F=this.Rn(f,p,D),V=this.Vn(f,p,b),H=this.mn(f.indexId,v,M,A.inclusive,F,D.inclusive,V);return X.forEach(H,J=>r.H(J,t.limit).next(se=>{se.forEach(ue=>{const de=Re.fromSegments(ue.documentKey);u.has(de)||(u=u.add(de),h.push(de))})}))}).next(()=>h)}return X.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=mU(Mt.create(e.filters,"and")).map(r=>Vb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,s,o,u,h){const f=(t!=null?t.length:1)*Math.max(r.length,o.length),p=f/(t!=null?t.length:1),v=[];for(let b=0;b<f;++b){const A=t?this.fn(t[b/p]):ig,D=this.gn(e,A,r[b%p],s),M=this.pn(e,A,o[b%p],u),F=h.map(V=>this.gn(e,A,V,!0));v.push(...this.createRange(D,M,F))}return v}gn(e,t,r,s){const o=new ku(e,Re.empty(),t,r);return s?o:o.nn()}pn(e,t,r,s){const o=new ku(e,Re.empty(),t,r);return s?o.nn():o}An(e,t){const r=new KS(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(o=>{let u=null;for(const h of o)r.un(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;const s=this.dn(t);return X.forEach(s,o=>this.An(e,o).next(u=>{u?r!==0&&u.fields.length<function(f){let p=new Lt(on.comparator),v=!1;for(const b of f.filters)for(const A of b.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?v=!0:p=p.add(A.field));for(const b of f.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(v?1:0)}(o)&&(r=1):r=0})).next(()=>function(u){return u.limit!==null}(t)&&s.length>1&&r===2?1:r)}yn(e,t){const r=new ff;for(const s of Du(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const u=r.tn(s.kind);Pu.xt.At(o,u)}return r.Yt()}fn(e){const t=new ff;return Pu.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const r=new ff;return Pu.xt.At(Hu(this.databaseId,t),r.tn(function(o){const u=Du(o);return u.length===0?0:u[u.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let s=[];s.push(new ff);let o=0;for(const u of Du(e)){const h=r[o++];for(const f of s)if(this.Sn(t,u.fieldPath)&&rm(h))s=this.bn(s,u,h);else{const p=f.tn(u.kind);Pu.xt.At(h,p)}}return this.Dn(s)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}bn(e,t,r){const s=[...e],o=[];for(const u of r.arrayValue.values||[])for(const h of s){const f=new ff;f.seed(h.Yt()),Pu.xt.At(u,f.tn(t.kind)),o.push(f)}return o}Sn(e,t){return!!e.filters.find(r=>r instanceof gt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=mf(e),s=oh(e);return(t?r.G(Rb,IDBKeyRange.bound(t,t)):r.G()).next(o=>{const u=[];return X.forEach(o,h=>s.get([h.indexId,this.uid]).next(f=>{u.push(function(v,b){const A=b?new Qf(b.sequenceNumber,new Hi(Yu(b.readTime),new Re(pa(b.documentKey)),b.largestBatchId)):Qf.empty(),D=v.fields.map(([M,F])=>new mg(on.fromServerFormat(M),F));return new Pg(v.indexId,v.collectionGroup,D,A)}(h,f))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,s)=>{const o=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Ke(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=mf(e),o=oh(e);return this.vn(e).next(u=>s.G(Rb,IDBKeyRange.bound(t,t)).next(h=>X.forEach(h,f=>o.put(qS(f.indexId,this.uid,u,r)))))}updateIndexEntries(e,t){const r=new Map;return X.forEach(t,(s,o)=>{const u=r.get(s.collectionGroup);return(u?X.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next(h=>(r.set(s.collectionGroup,h),X.forEach(h,f=>this.Cn(e,s,f).next(p=>{const v=this.Fn(o,f);return p.isEqual(v)?X.resolve():this.Mn(e,o,f,p,v)}))))})}xn(e,t,r,s){return ah(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,s){return ah(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){const s=ah(e);let o=new Lt(fl);return s.Z({index:WC,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(u,h)=>{o=o.add(new ku(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}Fn(e,t){let r=new Lt(fl);const s=this.yn(t,e);if(s==null)return r;const o=Sb(t);if(o!=null){const u=e.data.field(o.fieldPath);if(rm(u))for(const h of u.arrayValue.values||[])r=r.add(new ku(t.indexId,e.key,this.fn(h),s))}else r=r.add(new ku(t.indexId,e.key,ig,s));return r}Mn(e,t,r,s,o){ge(QS,"Updating index entries for document '%s'",t.key);const u=[];return function(f,p,v,b,A){const D=f.getIterator(),M=p.getIterator();let F=ih(D),V=ih(M);for(;F||V;){let H=!1,J=!1;if(F&&V){const se=v(F,V);se<0?J=!0:se>0&&(H=!0)}else F!=null?J=!0:H=!0;H?(b(V),V=ih(M)):J?(A(F),F=ih(D)):(F=ih(D),V=ih(M))}}(s,o,fl,h=>{u.push(this.xn(e,t,r,h))},h=>{u.push(this.On(e,t,r,h))}),X.waitFor(u)}vn(e){let t=1;return oh(e).Z({index:GC,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,o)=>{o.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>fl(u,h)).filter((u,h,f)=>!h||fl(u,f[h-1])!==0);const s=[];s.push(e);for(const u of r){const h=fl(u,e),f=fl(u,t);if(h===0)s[0]=e.nn();else if(h>0&&f<0)s.push(u),s.push(u.nn());else if(f>0)break}s.push(t);const o=[];for(let u=0;u<s.length;u+=2){if(this.Nn(s[u],s[u+1]))return[];const h=[s[u].indexId,this.uid,s[u].arrayValue,s[u].directionalValue,ig,[]],f=[s[u+1].indexId,this.uid,s[u+1].arrayValue,s[u+1].directionalValue,ig,[]];o.push(IDBKeyRange.bound(h,f))}return o}Nn(e,t){return fl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ZS)}getMinOffset(e,t){return X.mapArray(this.dn(t),r=>this.An(e,r).next(s=>s||De())).next(ZS)}}function XS(n){return Jn(n,em)}function ah(n){return Jn(n,jg)}function mf(n){return Jn(n,Uw)}function oh(n){return Jn(n,Lg)}function ZS(n){ke(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Mw(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Hi(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QD=41943040;class jr{static withCacheSize(e){return new jr(e,jr.DEFAULT_COLLECTION_PERCENTILE,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(n,e,t){const r=n.store(Bs),s=n.store(xh),o=[],u=IDBKeyRange.only(t.batchId);let h=0;const f=r.Z({range:u},(v,b,A)=>(h++,A.delete()));o.push(f.next(()=>{ke(h===1)}));const p=[];for(const v of t.mutations){const b=qC(e,v.key.path,t.batchId);o.push(s.delete(b)),p.push(v.key)}return X.waitFor(o).next(()=>p)}function Hg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw De();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr.DEFAULT_COLLECTION_PERCENTILE=10,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jr.DEFAULT=new jr(QD,jr.DEFAULT_COLLECTION_PERCENTILE,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jr.DISABLED=new jr(-1,0,0);class S_{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Bn={}}static It(e,t,r,s){ke(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new S_(o,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ml(e).Z({index:Mu,range:r},(s,o,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const o=mh(e),u=ml(e);return u.add({}).next(h=>{ke(typeof h=="number");const f=new Yw(h,t,r,s),p=function(D,M,F){const V=F.baseMutations.map(J=>am(D.Tt,J)),H=F.mutations.map(J=>am(D.Tt,J));return{userId:M,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:V,mutations:H}}(this.serializer,this.userId,f),v=[];let b=new Lt((A,D)=>Ke(A.canonicalString(),D.canonicalString()));for(const A of s){const D=qC(this.userId,A.key.path,h);b=b.add(A.key.path.popLast()),v.push(u.put(p)),v.push(o.put(D,Q2))}return b.forEach(A=>{v.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.Bn[h]=f.keys()}),X.waitFor(v).next(()=>f)})}lookupMutationBatch(e,t){return ml(e).get(t).next(r=>r?(ke(r.userId===this.userId),Nu(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?X.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Bn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return ml(e).Z({index:Mu,range:s},(u,h,f)=>{h.userId===this.userId&&(ke(h.batchId>=r),o=Nu(this.serializer,h)),f.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Al;return ml(e).Z({index:Mu,range:t,reverse:!0},(s,o,u)=>{r=o.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Al],[this.userId,Number.POSITIVE_INFINITY]);return ml(e).G(Mu,t).next(r=>r.map(s=>Nu(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=pg(this.userId,t.path),s=IDBKeyRange.lowerBound(r),o=[];return mh(e).Z({range:s},(u,h,f)=>{const[p,v,b]=u,A=pa(v);if(p===this.userId&&t.path.isEqual(A))return ml(e).get(b).next(D=>{if(!D)throw De();ke(D.userId===this.userId),o.push(Nu(this.serializer,D))});f.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Lt(Ke);const s=[];return t.forEach(o=>{const u=pg(this.userId,o.path),h=IDBKeyRange.lowerBound(u),f=mh(e).Z({range:h},(p,v,b)=>{const[A,D,M]=p,F=pa(D);A===this.userId&&o.path.isEqual(F)?r=r.add(M):b.done()});s.push(f)}),X.waitFor(s).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,o=pg(this.userId,r),u=IDBKeyRange.lowerBound(o);let h=new Lt(Ke);return mh(e).Z({range:u},(f,p,v)=>{const[b,A,D]=f,M=pa(A);b===this.userId&&r.isPrefixOf(M)?M.length===s&&(h=h.add(D)):v.done()}).next(()=>this.kn(e,h))}kn(e,t){const r=[],s=[];return t.forEach(o=>{s.push(ml(e).get(o).next(u=>{if(u===null)throw De();ke(u.userId===this.userId),r.push(Nu(this.serializer,u))}))}),X.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return XD(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),X.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return X.resolve();const r=IDBKeyRange.lowerBound(function(u){return[u]}(this.userId)),s=[];return mh(e).Z({range:r},(o,u,h)=>{if(o[0]===this.userId){const f=pa(o[1]);s.push(f)}else h.done()}).next(()=>{ke(s.length===0)})})}containsKey(e,t){return ZD(e,this.userId,t)}Qn(e){return JD(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Al,lastStreamToken:""})}}function ZD(n,e,t){const r=pg(e,t.path),s=r[1],o=IDBKeyRange.lowerBound(r);let u=!1;return mh(n).Z({range:o,Y:!0},(h,f,p)=>{const[v,b,A]=h;v===e&&b===s&&(u=!0),p.done()}).next(()=>u)}function ml(n){return Jn(n,Bs)}function mh(n){return Jn(n,xh)}function JD(n){return Jn(n,Zf)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Qu(0)}static Kn(){return new Qu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const r=new Qu(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>je.fromTimestamp(new un(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Gn(e,s)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>lh(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(ke(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let s=0;const o=[];return lh(e).Z((u,h)=>{const f=Cf(h);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(s++,o.push(this.removeTargetData(e,f)))}).next(()=>X.waitFor(o)).next(()=>s)}forEachTarget(e,t){return lh(e).Z((r,s)=>{const o=Cf(s);t(o)})}Wn(e){return eI(e).get(Mg).next(t=>(ke(t!==null),t))}Gn(e,t){return eI(e).put(Mg,t)}zn(e,t){return lh(e).put(WD(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=$u(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return lh(e).Z({range:s,index:$C},(u,h,f)=>{const p=Cf(h);Rm(t,p.target)&&(o=p,f.done())}).next(()=>o)}addMatchingKeys(e,t,r){const s=[],o=_l(e);return t.forEach(u=>{const h=Ur(u.path);s.push(o.put({targetId:r,path:h})),s.push(this.referenceDelegate.addReference(e,r,u))}),X.waitFor(s)}removeMatchingKeys(e,t,r){const s=_l(e);return X.forEach(t,o=>{const u=Ur(o.path);return X.waitFor([s.delete([r,u]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=_l(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=_l(e);let o=et();return s.Z({range:r,Y:!0},(u,h,f)=>{const p=pa(u[1]),v=new Re(p);o=o.add(v)}).next(()=>o)}containsKey(e,t){const r=Ur(t.path),s=IDBKeyRange.bound([r],[MC(r)],!1,!0);let o=0;return _l(e).Z({index:jw,Y:!0,range:s},([u,h],f,p)=>{u!==0&&(o++,p.done())}).next(()=>o>0)}lt(e,t){return lh(e).get(t).next(r=>r?Cf(r):null)}}function lh(n){return Jn(n,Oh)}function eI(n){return Jn(n,Bu)}function _l(n){return Jn(n,Nh)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="LruGarbageCollector",vU=1048576;function nI([n,e],[t,r]){const s=Ke(n,t);return s===0?Ke(e,r):s}class yU{constructor(e){this.Hn=e,this.buffer=new Lt(nI),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ex{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ge(tI,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$l(t)?ge(tI,"Ignoring IndexedDB error during garbage collection: ",t):await Hl(t)}await this.er(3e5)})}}class bU{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return X.resolve(Ei.ae);const r=new yU(t);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(JS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JS):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,s,o,u,h,f,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),s=this.params.maximumSequenceNumbersToCollect):s=b,u=Date.now(),this.nthSequenceNumber(e,s))).next(b=>(r=b,h=Date.now(),this.removeTargets(e,r,t))).next(b=>(o=b,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(b=>(p=Date.now(),ch()<=lt.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${s} in `+(h-u)+`ms
	Removed ${o} targets in `+(f-h)+`ms
	Removed ${b} documents in `+(p-f)+`ms
Total Duration: ${p-v}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:b})))}}function tx(n,e){return new bU(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e,t){this.db=e,this.garbageCollector=tx(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,s)=>t(s))}addReference(e,t,r){return sg(e,r)}removeReference(e,t,r){return sg(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return sg(e,t)}ar(e,t){return function(s,o){let u=!1;return JD(s).X(h=>ZD(s,h,o).next(f=>(f&&(u=!0),X.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this._r(e,(u,h)=>{if(h<=t){const f=this.ar(e,u).next(p=>{if(!p)return o++,r.getEntry(e,u).next(()=>(r.removeEntry(u,je.min()),_l(e).delete(function(b){return[0,Ur(b.path)]}(u))))});s.push(f)}}).next(()=>X.waitFor(s)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return sg(e,t)}_r(e,t){const r=_l(e);let s,o=Ei.ae;return r.Z({index:jw},([u,h],{path:f,sequenceNumber:p})=>{u===0?(o!==Ei.ae&&t(new Re(pa(s)),o),o=p,s=f):o=Ei.ae}).next(()=>{o!==Ei.ae&&t(new Re(pa(s)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sg(n,e){return _l(n).put(function(r,s){return{targetId:0,path:Ur(r.path),sequenceNumber:s}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.changes=new wo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?X.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ru(e).put(r)}removeEntry(e,t,r){return Ru(e).delete(function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],zg(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=en.newInvalidDocument(t);return Ru(e).Z({index:gg,range:IDBKeyRange.only(pf(t))},(s,o)=>{r=this.cr(t,o)}).next(()=>r)}lr(e,t){let r={size:0,document:en.newInvalidDocument(t)};return Ru(e).Z({index:gg,range:IDBKeyRange.only(pf(t))},(s,o)=>{r={document:this.cr(t,o),size:Hg(o)}}).next(()=>r)}getEntries(e,t){let r=Ai();return this.hr(e,t,(s,o)=>{const u=this.cr(s,o);r=r.insert(s,u)}).next(()=>r)}Pr(e,t){let r=Ai(),s=new Zt(Re.comparator);return this.hr(e,t,(o,u)=>{const h=this.cr(o,u);r=r.insert(o,h),s=s.insert(o,Hg(u))}).next(()=>({documents:r,Tr:s}))}hr(e,t,r){if(t.isEmpty())return X.resolve();let s=new Lt(sI);t.forEach(f=>s=s.add(f));const o=IDBKeyRange.bound(pf(s.first()),pf(s.last())),u=s.getIterator();let h=u.getNext();return Ru(e).Z({index:gg,range:o},(f,p,v)=>{const b=Re.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;h&&sI(h,b)<0;)r(h,null),h=u.getNext();h&&h.isEqual(b)&&(r(h,p),h=u.hasNext()?u.getNext():null),h?v.W(pf(h)):v.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,o){const u=t.path,h=[u.popLast().toArray(),u.lastSegment(),zg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ru(e).G(IDBKeyRange.bound(h,f,!0)).next(p=>{o==null||o.incrementDocumentReadCount(p.length);let v=Ai();for(const b of p){const A=this.cr(Re.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);A.isFoundDocument()&&(Dm(t,A)||s.has(A.key))&&(v=v.insert(A.key,A))}return v})}getAllFromCollectionGroup(e,t,r,s){let o=Ai();const u=iI(t,r),h=iI(t,Hi.max());return Ru(e).Z({index:HC,range:IDBKeyRange.bound(u,h,!0)},(f,p,v)=>{const b=this.cr(Re.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);o=o.insert(b.key,b),o.size===s&&v.done()}).next(()=>o)}newChangeBuffer(e){return new TU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return rI(e).get(Ib).next(t=>(ke(!!t),t))}ur(e,t){return rI(e).put(Ib,t)}cr(e,t){if(t){const r=oU(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(je.min())))return r}return en.newInvalidDocument(e)}}function rx(n){return new EU(n)}class TU extends nx{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new wo(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Lt((o,u)=>Ke(o.canonicalString(),u.canonicalString()));return this.changes.forEach((o,u)=>{const h=this.Er.get(o);if(t.push(this.Ir.removeEntry(e,o,h.readTime)),u.isValidDocument()){const f=BS(this.Ir.serializer,u);s=s.add(o.path.popLast());const p=Hg(f);r+=p-h.size,t.push(this.Ir.addEntry(e,o,f))}else if(r-=h.size,this.trackRemovals){const f=BS(this.Ir.serializer,u.convertToNoDocument(je.min()));t.push(this.Ir.addEntry(e,o,f))}}),s.forEach(o=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Ir.updateMetadata(e,r)),X.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:s})=>(s.forEach((o,u)=>{this.Er.set(o,{size:u,readTime:r.get(o).readTime})}),r))}}function rI(n){return Jn(n,Jf)}function Ru(n){return Jn(n,Vg)}function pf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function iI(n,e){const t=e.documentKey.path.toArray();return[n,zg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function sI(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(s=Ke(t[o],r[o]),s)return s;return s=Ke(t.length,r.length),s||(s=Ke(t[t.length-2],r[r.length-2]),s||Ke(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Vf(r.mutation,s,Ti.empty(),un.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,et()).next(()=>r))}getLocalViewOfDocuments(e,t,r=et()){const s=ga();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let u=If();return o.forEach((h,f)=>{u=u.insert(h,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=ga();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,et()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,s){let o=Ai();const u=kf(),h=function(){return kf()}();return t.forEach((f,p)=>{const v=r.get(p.key);s.has(p.key)&&(v===void 0||v.mutation instanceof Eo)?o=o.insert(p.key,p):v!==void 0?(u.set(p.key,v.mutation.getFieldMask()),Vf(v.mutation,p,v.mutation.getFieldMask(),un.now())):u.set(p.key,Ti.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((p,v)=>u.set(p,v)),t.forEach((p,v)=>{var b;return h.set(p,new AU(v,(b=u.get(p))!==null&&b!==void 0?b:null))}),h))}recalculateAndSaveOverlays(e,t){const r=kf();let s=new Zt((u,h)=>u-h),o=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(f=>{const p=t.get(f);if(p===null)return;let v=r.get(f)||Ti.empty();v=h.applyToLocalView(p,v),r.set(f,v);const b=(s.get(h.batchId)||et()).add(f);s=s.insert(h.batchId,b)})}).next(()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,v=f.value,b=wD();v.forEach(A=>{if(!o.has(A)){const D=CD(t.get(A),r.get(A));D!==null&&b.set(A,D),o=o.add(A)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,b))}return X.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(u){return Re.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$w(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):X.resolve(ga());let h=Dh,f=o;return u.next(p=>X.forEach(p,(v,b)=>(h<b.largestBatchId&&(h=b.largestBatchId),o.get(v)?X.resolve():this.remoteDocumentCache.getEntry(e,v).next(A=>{f=f.insert(v,A)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,f,p,et())).next(v=>({batchId:h,changes:bD(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next(r=>{let s=If();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let u=If();return this.indexManager.getCollectionParents(e,o).next(h=>X.forEach(h,f=>{const p=function(b,A){return new bo(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(t,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next(v=>{v.forEach((b,A)=>{u=u.insert(b,A)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(u=>{o.forEach((f,p)=>{const v=p.getKey();u.get(v)===null&&(u=u.insert(v,en.newInvalidDocument(v)))});let h=If();return u.forEach((f,p)=>{const v=o.get(f);v!==void 0&&Vf(v.mutation,p,Ti.empty(),un.now()),Dm(t,p)&&(h=h.insert(f,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return X.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Ln(s.createTime)}}(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:eE(s.bundledQuery),readTime:Ln(s.readTime)}}(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(){this.overlays=new Zt(Re.comparator),this.Rr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ga();return X.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.Et(e,t,o)}),X.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),X.resolve()}getOverlaysForCollection(e,t,r){const s=ga(),o=t.length+1,u=new Re(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&f.largestBatchId>r&&s.set(f.getKey(),f)}return X.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new Zt((p,v)=>p-v);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let v=o.get(p.largestBatchId);v===null&&(v=ga(),o=o.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=ga(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,v)=>h.set(p,v)),!(h.size()>=s)););return X.resolve(h)}Et(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Xw(t,r));let o=this.Rr.get(t);o===void 0&&(o=et(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(){this.sessionToken=In.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(){this.Vr=new Lt(hr.mr),this.gr=new Lt(hr.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new hr(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new hr(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new Re(new pt([])),r=new hr(t,e),s=new hr(t,e+1),o=[];return this.gr.forEachInRange([r,s],u=>{this.wr(u),o.push(u.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Re(new pt([])),r=new hr(t,e),s=new hr(t,e+1);let o=et();return this.gr.forEachInRange([r,s],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new hr(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class hr{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Re.comparator(e.key,t.key)||Ke(e.Cr,t.Cr)}static pr(e,t){return Ke(e.Cr,t.Cr)||Re.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Lt(hr.mr)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Yw(o,t,r,s);this.mutationQueue.push(u);for(const h of s)this.Mr=this.Mr.add(new hr(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return X.resolve(u)}lookupMutationBatch(e,t){return X.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Nr(r),o=s<0?0:s;return X.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Al:this.Fr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hr(t,0),s=new hr(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,s],u=>{const h=this.Or(u.Cr);o.push(h)}),X.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Lt(Ke);return t.forEach(s=>{const o=new hr(s,0),u=new hr(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,u],h=>{r=r.add(h.Cr)})}),X.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;Re.isDocumentKey(o)||(o=o.child(""));const u=new hr(new Re(o),0);let h=new Lt(Ke);return this.Mr.forEachWhile(f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(h=h.add(f.Cr)),!0)},u),X.resolve(this.Br(h))}Br(e){const t=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){ke(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return X.forEach(t.mutations,s=>{const o=new hr(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new hr(t,0),s=this.Mr.firstAfterOrEqual(r);return X.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e){this.kr=e,this.docs=function(){return new Zt(Re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,u=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return X.resolve(r?r.document.mutableCopy():en.newInvalidDocument(t))}getEntries(e,t){let r=Ai();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():en.newInvalidDocument(s))}),X.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=Ai();const u=t.path,h=new Re(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:v}}=f.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||Mw(jC(v),r)<=0||(s.has(v.key)||Dm(t,v))&&(o=o.insert(v.key,v.mutableCopy()))}return X.resolve(o)}getAllFromCollectionGroup(e,t,r,s){De()}qr(e,t){return X.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new xU(this)}getSize(e){return X.resolve(this.size)}}class xU extends nx{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),X.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e){this.persistence=e,this.Qr=new wo(t=>$u(t),Rm),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.$r=0,this.Ur=new rE,this.targetCount=0,this.Kr=Qu.Un()}forEachTarget(e,t){return this.Qr.forEach((r,s)=>t(s)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),X.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Qu(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.zn(t),X.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Qr.forEach((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Qr.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),X.waitFor(o).next(()=>s)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return X.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),X.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(u=>{o.push(s.markPotentiallyOrphaned(e,u))}),X.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),X.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return X.resolve(r)}containsKey(e,t){return X.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Ei(0),this.zr=!1,this.zr=!0,this.jr=new RU,this.referenceDelegate=e(this),this.Hr=new OU(this),this.indexManager=new pU,this.remoteDocumentCache=function(s){return new DU(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new GD(t),this.Yr=new SU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new IU,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new CU(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const s=new NU(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,t){return X.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class NU extends FC{constructor(e){super(),this.currentSequenceNumber=e}}class I_{constructor(e){this.persistence=e,this.ti=new rE,this.ni=null}static ri(e){return new I_(e)}get ii(){if(this.ni)return this.ni;throw De()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),X.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),X.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.ii,r=>{const s=Re.fromPath(r);return this.si(e,s).next(o=>{o||t.removeEntry(s,je.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return X.or([()=>X.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class $g{constructor(e,t){this.persistence=e,this.oi=new wo(r=>Ur(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=tx(this,t)}static ri(e,t){return new $g(e,t)}Zr(){}Xr(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return X.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(o=>o?X.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,u=>this.ar(e,u,t).next(h=>{h||(r++,o.removeEntry(u,je.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),X.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vg(e.data.value)),t}ar(e,t,r){return X.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return X.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e){this.serializer=e}B(e,t,r,s){const o=new p_("createOrUpgrade",t);r<1&&s>=1&&(function(f){f.createObjectStore(Im)}(e),function(f){f.createObjectStore(Zf,{keyPath:Y2}),f.createObjectStore(Bs,{keyPath:_S,autoIncrement:!0}).createIndex(Mu,vS,{unique:!0}),f.createObjectStore(xh)}(e),aI(e),function(f){f.createObjectStore(xu)}(e));let u=X.resolve();return r<3&&s>=3&&(r!==0&&(function(f){f.deleteObjectStore(Nh),f.deleteObjectStore(Oh),f.deleteObjectStore(Bu)}(e),aI(e)),u=u.next(()=>function(f){const p=f.store(Bu),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:je.min().toTimestamp(),targetCount:0};return p.put(Mg,v)}(o))),r<4&&s>=4&&(r!==0&&(u=u.next(()=>function(f,p){return p.store(Bs).G().next(b=>{f.deleteObjectStore(Bs),f.createObjectStore(Bs,{keyPath:_S,autoIncrement:!0}).createIndex(Mu,vS,{unique:!0});const A=p.store(Bs),D=b.map(M=>A.put(M));return X.waitFor(D)})}(e,o))),u=u.next(()=>{(function(f){f.createObjectStore(Ph,{keyPath:ij})})(e)})),r<5&&s>=5&&(u=u.next(()=>this._i(o))),r<6&&s>=6&&(u=u.next(()=>(function(f){f.createObjectStore(Jf)}(e),this.ai(o)))),r<7&&s>=7&&(u=u.next(()=>this.ui(o))),r<8&&s>=8&&(u=u.next(()=>this.ci(e,o))),r<9&&s>=9&&(u=u.next(()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(u=u.next(()=>this.li(o))),r<11&&s>=11&&(u=u.next(()=>{(function(f){f.createObjectStore(g_,{keyPath:sj})})(e),function(f){f.createObjectStore(__,{keyPath:aj})}(e)})),r<12&&s>=12&&(u=u.next(()=>{(function(f){const p=f.createObjectStore(v_,{keyPath:fj});p.createIndex(Cb,mj,{unique:!1}),p.createIndex(KC,pj,{unique:!1})})(e)})),r<13&&s>=13&&(u=u.next(()=>function(f){const p=f.createObjectStore(Vg,{keyPath:X2});p.createIndex(gg,Z2),p.createIndex(HC,J2)}(e)).next(()=>this.hi(e,o)).next(()=>e.deleteObjectStore(xu))),r<14&&s>=14&&(u=u.next(()=>this.Pi(e,o))),r<15&&s>=15&&(u=u.next(()=>function(f){f.createObjectStore(Uw,{keyPath:oj,autoIncrement:!0}).createIndex(Rb,lj,{unique:!1}),f.createObjectStore(Lg,{keyPath:uj}).createIndex(GC,cj,{unique:!1}),f.createObjectStore(jg,{keyPath:hj}).createIndex(WC,dj,{unique:!1})}(e))),r<16&&s>=16&&(u=u.next(()=>{t.objectStore(Lg).clear()}).next(()=>{t.objectStore(jg).clear()})),r<17&&s>=17&&(u=u.next(()=>{(function(f){f.createObjectStore(Fw,{keyPath:gj})})(e)})),u}ai(e){let t=0;return e.store(xu).Z((r,s)=>{t+=Hg(s)}).next(()=>{const r={byteSize:t};return e.store(Jf).put(Ib,r)})}_i(e){const t=e.store(Zf),r=e.store(Bs);return t.G().next(s=>X.forEach(s,o=>{const u=IDBKeyRange.bound([o.userId,Al],[o.userId,o.lastAcknowledgedBatchId]);return r.G(Mu,u).next(h=>X.forEach(h,f=>{ke(f.userId===o.userId);const p=Nu(this.serializer,f);return XD(e,o.userId,p).next(()=>{})}))}))}ui(e){const t=e.store(Nh),r=e.store(xu);return e.store(Bu).get(Mg).next(s=>{const o=[];return r.Z((u,h)=>{const f=new pt(u),p=function(b){return[0,Ur(b)]}(f);o.push(t.get(p).next(v=>v?X.resolve():(b=>t.put({targetId:0,path:Ur(b),sequenceNumber:s.highestListenSequenceNumber}))(f)))}).next(()=>X.waitFor(o))})}ci(e,t){e.createObjectStore(em,{keyPath:rj});const r=t.store(em),s=new nE,o=u=>{if(s.add(u)){const h=u.lastSegment(),f=u.popLast();return r.put({collectionId:h,parent:Ur(f)})}};return t.store(xu).Z({Y:!0},(u,h)=>{const f=new pt(u);return o(f.popLast())}).next(()=>t.store(xh).Z({Y:!0},([u,h,f],p)=>{const v=pa(h);return o(v.popLast())}))}li(e){const t=e.store(Oh);return t.Z((r,s)=>{const o=Cf(s),u=WD(this.serializer,o);return t.put(u)})}hi(e,t){const r=t.store(xu),s=[];return r.Z((o,u)=>{const h=t.store(Vg),f=function(b){return b.document?new Re(pt.fromString(b.document.name).popFirst(5)):b.noDocument?Re.fromSegments(b.noDocument.path):b.unknownDocument?Re.fromSegments(b.unknownDocument.path):De()}(u).path.toArray(),p={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};s.push(h.put(p))}).next(()=>X.waitFor(s))}Pi(e,t){const r=t.store(Bs),s=rx(this.serializer),o=new iE(I_.ri,this.serializer.Tt);return r.G().next(u=>{const h=new Map;return u.forEach(f=>{var p;let v=(p=h.get(f.userId))!==null&&p!==void 0?p:et();Nu(this.serializer,f).keys().forEach(b=>v=v.add(b)),h.set(f.userId,v)}),X.forEach(h,(f,p)=>{const v=new dr(p),b=A_.It(this.serializer,v),A=o.getIndexManager(v),D=S_.It(v,this.serializer,A,o.referenceDelegate);return new ix(s,D,b,A).recalculateAndSaveOverlaysForDocumentKeys(new Db(t,Ei.ae),f).next()})})}}function aI(n){n.createObjectStore(Nh,{keyPath:tj}).createIndex(jw,nj,{unique:!0}),n.createObjectStore(Oh,{keyPath:"targetId"}).createIndex($C,ej,{unique:!0}),n.createObjectStore(Bu)}const pl="IndexedDbPersistence",Hy=18e5,$y=5e3,Gy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sx="main";class sE{constructor(e,t,r,s,o,u,h,f,p,v,b=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=o,this.window=u,this.document=h,this.Ii=p,this.Ei=v,this.di=b,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=A=>Promise.resolve(),!sE.D())throw new me(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wU(this,s),this.gi=t+sx,this.serializer=new GD(f),this.pi=new va(this.gi,this.di,new PU(this.serializer)),this.jr=new uU,this.Hr=new _U(this.referenceDelegate,this.serializer),this.remoteDocumentCache=rx(this.serializer),this.Yr=new lU,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,v===!1&&Mn(pl,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new me(ne.FAILED_PRECONDITION,Gy);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new Ei(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ag(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if($l(e))return ge(pl,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ge(pl,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return gf(e).get(rh).next(t=>X.resolve(this.Ni(t)))}Bi(e){return ag(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Hy)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Jn(t,Ph);return r.G().next(s=>{const o=this.qi(s,Hy),u=s.filter(h=>o.indexOf(h)===-1);return X.forEach(u,h=>r.delete(h.clientId)).next(()=>u)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?X.resolve(!0):gf(e).get(rh).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,$y)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new me(ne.FAILED_PRECONDITION,Gy);return!1}}return!(!this.networkEnabled||!this.inForeground)||ag(e).G().next(r=>this.qi(r,$y).find(s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,u=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(o||u&&h)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&ge(pl,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Im,Ph],e=>{const t=new Db(e,Ei.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>ag(e).G().next(t=>this.qi(t,Hy).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return S_.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gU(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return A_.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){ge(pl,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=function(f){return f===17?yj:f===16?vj:f===15?Bw:f===14?XC:f===13?QC:f===12?_j:f===11?YC:void De()}(this.di);let u;return this.pi.runTransaction(e,s,o,h=>(u=new Db(h,this.Gr?this.Gr.next():Ei.ae),t==="readwrite-primary"?this.Fi(u).next(f=>!!f||this.Mi(u)).next(f=>{if(!f)throw Mn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new me(ne.FAILED_PRECONDITION,UC);return r(u)}).next(f=>this.Oi(u).next(()=>f)):this.ji(u).next(()=>r(u)))).then(h=>(u.raiseOnCommittedEvent(),h))}ji(e){return gf(e).get(rh).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,$y)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new me(ne.FAILED_PRECONDITION,Gy)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gf(e).put(rh,t)}static D(){return va.D()}xi(e){const t=gf(e);return t.get(rh).next(r=>this.Ni(r)?(ge(pl,"Releasing primary lease."),t.delete(rh)):X.resolve())}ki(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Mn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const t=/(?:Version|Mobile)\/1[456]/;mC()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return ge(pl,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mn(pl,"Failed to get zombied client id.",r),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Mn("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gf(n){return Jn(n,Im)}function ag(n){return Jn(n,Ph)}function aE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=s}static Yi(e,t){let r=et(),s=et();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new oE(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return mC()?8:BC(gn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.rs(e,t).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.ss(e,t,s,r).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new kU;return this._s(e,t,u).next(h=>{if(o.result=h,this.Xi)return this.us(e,t,u,h.size)})}).next(()=>o.result)}us(e,t,r,s){return r.documentReadCount<this.es?(ch()<=lt.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",hh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),X.resolve()):(ch()<=lt.DEBUG&&ge("QueryEngine","Query:",hh(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(ch()<=lt.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",hh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ui(t))):X.resolve())}rs(e,t){if(OS(t))return X.resolve(null);let r=ui(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Bg(t,null,"F"),r=ui(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=et(...o);return this.ns.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{const p=this.cs(t,h);return this.ls(t,p,u,f.readTime)?this.rs(e,Bg(t,null,"F")):this.hs(e,p,t,f)}))})))}ss(e,t,r,s){return OS(t)||s.isEqual(je.min())?X.resolve(null):this.ns.getDocuments(e,r).next(o=>{const u=this.cs(t,o);return this.ls(t,u,r,s)?X.resolve(null):(ch()<=lt.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),hh(t)),this.hs(e,u,t,LC(s,Dh)).next(h=>h))})}cs(e,t){let r=new Lt(vD(e));return t.forEach((s,o)=>{Dm(e,o)&&(r=r.add(o))}),r}ls(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,t,r){return ch()<=lt.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",hh(t)),this.ns.getDocumentsMatchingQuery(e,t,Hi.min(),r)}hs(e,t,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="LocalStore",VU=3e8;class MU{constructor(e,t,r,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new Zt(Ke),this.Is=new wo(o=>$u(o),Rm),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ix(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function ox(n,e,t,r){return new MU(n,e,t,r)}async function lx(n,e){const t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],h=[];let f=et();for(const p of s){u.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}for(const p of o){h.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(r,f).next(p=>({Rs:p,removedBatchIds:u,addedBatchIds:h}))})})}function LU(n,e){const t=Ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(h,f,p,v){const b=p.batch,A=b.keys();let D=X.resolve();return A.forEach(M=>{D=D.next(()=>v.getEntry(f,M)).next(F=>{const V=p.docVersions.get(M);ke(V!==null),F.version.compareTo(V)<0&&(b.applyToRemoteDocument(F,p),F.isValidDocument()&&(F.setReadTime(p.commitVersion),v.addEntry(F)))})}),D.next(()=>h.mutationQueue.removeMutationBatch(f,b))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=et();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function ux(n){const e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function jU(n,e){const t=Ce(n),r=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const h=[];e.targetChanges.forEach((v,b)=>{const A=s.get(b);if(!A)return;h.push(t.Hr.removeMatchingKeys(o,v.removedDocuments,b).next(()=>t.Hr.addMatchingKeys(o,v.addedDocuments,b)));let D=A.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?D=D.withResumeToken(In.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):v.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(v.resumeToken,r)),s=s.insert(b,D),function(F,V,H){return F.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=VU?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(A,D,v)&&h.push(t.Hr.updateTargetData(o,D))});let f=Ai(),p=et();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,v))}),h.push(cx(o,u,e.documentUpdates).next(v=>{f=v.Vs,p=v.fs})),!r.isEqual(je.min())){const v=t.Hr.getLastRemoteSnapshotVersion(o).next(b=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(v)}return X.waitFor(h).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,f,p)).next(()=>f)}).then(o=>(t.Ts=s,o))}function cx(n,e,t){let r=et(),s=et();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Ai();return t.forEach((h,f)=>{const p=o.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(je.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):ge(lE,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)}),{Vs:u,fs:s}})}function UU(n,e){const t=Ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Al),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fh(n,e){const t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Hr.getTargetData(r,e).next(o=>o?(s=o,X.resolve(s)):t.Hr.allocateTargetId(r).next(u=>(s=new oo(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function Bh(n,e,t){const r=Ce(n),s=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!$l(u))throw u;ge(lE,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function Gg(n,e,t){const r=Ce(n);let s=je.min(),o=et();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,p,v){const b=Ce(f),A=b.Is.get(v);return A!==void 0?X.resolve(b.Ts.get(A)):b.Hr.getTargetData(p,v)}(r,u,ui(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(u,h.targetId).next(f=>{o=f})}).next(()=>r.Ps.getDocumentsMatchingQuery(u,e,t?s:je.min(),t?o:et())).next(h=>(fx(r,_D(e),h),{documents:h,gs:o})))}function hx(n,e){const t=Ce(n),r=Ce(t.Hr),s=t.Ts.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",o=>r.lt(o,e).next(u=>u?u.target:null))}function dx(n,e){const t=Ce(n),r=t.Es.get(e)||je.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.ds.getAllFromCollectionGroup(s,e,LC(r,Dh),Number.MAX_SAFE_INTEGER)).then(s=>(fx(t,e,s),s))}function fx(n,e,t){let r=n.Es.get(e)||je.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}async function FU(n,e,t,r){const s=Ce(n);let o=et(),u=Ai();for(const p of t){const v=e.ps(p.metadata.name);p.document&&(o=o.add(v));const b=e.ys(p);b.setReadTime(e.ws(p.metadata.readTime)),u=u.insert(v,b)}const h=s.ds.newChangeBuffer({trackRemovals:!0}),f=await Fh(s,function(v){return ui(td(pt.fromString(`__bundle__/docs/${v}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",p=>cx(p,h,u).next(v=>(h.apply(p),v)).next(v=>s.Hr.removeMatchingKeysForTargetId(p,f.targetId).next(()=>s.Hr.addMatchingKeys(p,o,f.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(p,v.Vs,v.fs)).next(()=>v.Vs)))}async function BU(n,e,t=et()){const r=await Fh(n,ui(eE(e.bundledQuery))),s=Ce(n);return s.persistence.runTransaction("Save named query","readwrite",o=>{const u=Ln(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return s.Yr.saveNamedQuery(o,e);const h=r.withResumeToken(In.EMPTY_BYTE_STRING,u);return s.Ts=s.Ts.insert(h.targetId,h),s.Hr.updateTargetData(o,h).next(()=>s.Hr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>s.Hr.addMatchingKeys(o,t,r.targetId)).next(()=>s.Yr.saveNamedQuery(o,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="firestore_clients";function oI(n,e){return`${mx}_${n}_${e}`}const px="firestore_mutations";function lI(n,e,t){let r=`${px}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const gx="firestore_targets";function Wy(n,e){return`${gx}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="SharedClientState";class Wg{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Ss(e,t,r){const s=JSON.parse(r);let o,u=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string",u&&(o=new me(s.error.code,s.error.message))),u?new Wg(e,t,s.state,o):(Mn(ca,`Failed to parse mutation state for ID '${t}': ${r}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ss(e,t){const r=JSON.parse(t);let s,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new me(r.error.code,r.error.message))),o?new Mf(e,r.state,s):(Mn(ca,`Failed to parse target state for ID '${e}': ${t}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ss(e,t){const r=JSON.parse(t);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Gw();for(let u=0;s&&u<r.activeTargetIds.length;++u)s=zC(r.activeTargetIds[u]),o=o.add(r.activeTargetIds[u]);return s?new Kg(e,o):(Mn(ca,`Failed to parse client data for instance '${e}': ${t}`),null)}}class uE{constructor(e,t){this.clientId=e,this.onlineState=t}static Ss(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new uE(t.clientId,t.onlineState):(Mn(ca,`Failed to parse online state: ${e}`),null)}}class Hb{constructor(){this.activeTargetIds=Gw()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ky{constructor(e,t,r,s,o){this.window=e,this.Ti=t,this.persistenceKey=r,this.Cs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new Zt(Ke),this.started=!1,this.Os=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ns=oI(this.persistenceKey,this.Cs),this.Bs=function(f){return`firestore_sequence_number_${f}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new Hb),this.Ls=new RegExp(`^${mx}_${u}_([^_]*)$`),this.ks=new RegExp(`^${px}_${u}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${gx}_${u}_(\\d+)$`),this.Qs=function(f){return`firestore_online_state_${f}`}(this.persistenceKey),this.$s=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const r of e){if(r===this.Cs)continue;const s=this.getItem(oI(this.persistenceKey,r));if(s){const o=Kg.Ss(r,s);o&&(this.xs=this.xs.insert(o.clientId,o))}}this.Us();const t=this.storage.getItem(this.Qs);if(t){const r=this.Ks(t);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,r){this.zs(e,t,r),this.js(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Wy(this.persistenceKey,e));if(s){const o=Mf.Ss(e,s);o&&(r=o.state)}}return t&&this.Hs.Ds(e),this.Us(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Us()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Wy(this.persistenceKey,e))}updateQueryState(e,t,r){this.Js(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.js(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ge(ca,"READ",e,t),t}setItem(e,t){ge(ca,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ge(ca,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(ge(ca,"EVENT",t.key,t.newValue),t.key===this.Ns)return void Mn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){const r=this.Xs(t.key);return this.eo(r,null)}{const r=this.no(t.key,t.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(t.key)){if(t.newValue!==null){const r=this.ro(t.key,t.newValue);if(r)return this.io(r)}}else if(this.qs.test(t.key)){if(t.newValue!==null){const r=this.so(t.key,t.newValue);if(r)return this.oo(r)}}else if(t.key===this.Qs){if(t.newValue!==null){const r=this.Ks(t.newValue);if(r)return this.Ws(r)}}else if(t.key===this.Bs){const r=function(o){let u=Ei.ae;if(o!=null)try{const h=JSON.parse(o);ke(typeof h=="number"),u=h}catch(h){Mn(ca,"Failed to read sequence number from WebStorage",h)}return u}(t.newValue);r!==Ei.ae&&this.sequenceNumberHandler(r)}else if(t.key===this.$s){const r=this._o(t.newValue);await Promise.all(r.map(s=>this.syncEngine.ao(s)))}}}else this.Os.push(t)})}}get Hs(){return this.xs.get(this.Cs)}Us(){this.setItem(this.Ns,this.Hs.bs())}zs(e,t,r){const s=new Wg(this.currentUser,e,t,r),o=lI(this.persistenceKey,this.currentUser,e);this.setItem(o,s.bs())}js(e){const t=lI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,r){const s=Wy(this.persistenceKey,e),o=new Mf(e,t,r);this.setItem(s,o.bs())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const r=this.Xs(e);return Kg.Ss(r,t)}ro(e,t){const r=this.ks.exec(e),s=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Wg.Ss(new dr(o),s,t)}so(e,t){const r=this.qs.exec(e),s=Number(r[1]);return Mf.Ss(s,t)}Ks(e){return uE.Ss(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);ge(ca,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const r=t?this.xs.insert(e,t):this.xs.remove(e),s=this.Gs(this.xs),o=this.Gs(r),u=[],h=[];return o.forEach(f=>{s.has(f)||u.push(f)}),s.forEach(f=>{o.has(f)||h.push(f)}),this.syncEngine.lo(u,h).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=Gw();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class _x{constructor(){this.ho=new Hb,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Hb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="ConnectivityMonitor";class cI{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ge(uI,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ge(uI,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let og=null;function $b(){return og===null?og=function(){return 268435456+Math.round(2147483648*Math.random())}():og++,"0x"+og.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="RestConnection",qU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HU{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===xb?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(e,t,r,s,o){const u=$b(),h=this.bo(e,t.toUriEncodedString());ge(Yy,`Sending RPC '${e}' ${u}:`,h,r);const f={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(f,s,o),this.vo(e,h,f,r).then(p=>(ge(Yy,`Received RPC '${e}' ${u}: `,p),p),p=>{throw Ea(Yy,`RPC '${e}' ${u} failed with error: `,p,"url: ",h,"request:",r),p})}Co(e,t,r,s,o,u){return this.So(e,t,r,s,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ed}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}bo(e,t){const r=qU[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr="WebChannelConnection";class GU extends HU{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,s){const o=$b();return new Promise((u,h)=>{const f=new DC;f.setWithCredentials(!0),f.listenOnce(xC.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case fg.NO_ERROR:const v=f.getResponseJson();ge(Lr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),u(v);break;case fg.TIMEOUT:ge(Lr,`RPC '${e}' ${o} timed out`),h(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case fg.HTTP_ERROR:const b=f.getStatus();if(ge(Lr,`RPC '${e}' ${o} failed with status:`,b,"response text:",f.getResponseText()),b>0){let A=f.getResponseJson();Array.isArray(A)&&(A=A[0]);const D=A==null?void 0:A.error;if(D&&D.status&&D.message){const M=function(V){const H=V.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(H)>=0?H:ne.UNKNOWN}(D.status);h(new me(M,D.message))}else h(new me(ne.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new me(ne.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{ge(Lr,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(s);ge(Lr,`RPC '${e}' ${o} sending request:`,s),f.send(t,"POST",p,r,15)})}Wo(e,t,r){const s=$b(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=PC(),h=NC(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Do(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const v=o.join("");ge(Lr,`Creating RPC '${e}' stream ${s}: ${v}`,f);const b=u.createWebChannel(v,f);let A=!1,D=!1;const M=new $U({Fo:V=>{D?ge(Lr,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(A||(ge(Lr,`Opening RPC '${e}' stream ${s} transport.`),b.open(),A=!0),ge(Lr,`RPC '${e}' stream ${s} sending:`,V),b.send(V))},Mo:()=>b.close()}),F=(V,H,J)=>{V.listen(H,se=>{try{J(se)}catch(ue){setTimeout(()=>{throw ue},0)}})};return F(b,Sf.EventType.OPEN,()=>{D||(ge(Lr,`RPC '${e}' stream ${s} transport opened.`),M.Qo())}),F(b,Sf.EventType.CLOSE,()=>{D||(D=!0,ge(Lr,`RPC '${e}' stream ${s} transport closed`),M.Uo())}),F(b,Sf.EventType.ERROR,V=>{D||(D=!0,Ea(Lr,`RPC '${e}' stream ${s} transport errored:`,V),M.Uo(new me(ne.UNAVAILABLE,"The operation could not be completed")))}),F(b,Sf.EventType.MESSAGE,V=>{var H;if(!D){const J=V.data[0];ke(!!J);const se=J,ue=(se==null?void 0:se.error)||((H=se[0])===null||H===void 0?void 0:H.error);if(ue){ge(Lr,`RPC '${e}' stream ${s} received error:`,ue);const de=ue.status;let be=function(N){const k=Hn[N];if(k!==void 0)return OD(k)}(de),U=ue.message;be===void 0&&(be=ne.INTERNAL,U="Unknown error status: "+de+" with message "+ue.message),D=!0,M.Uo(new me(be,U)),b.close()}else ge(Lr,`RPC '${e}' stream ${s} received:`,J),M.Ko(J)}}),F(h,OC.STAT_EVENT,V=>{V.stat===Tb.PROXY?ge(Lr,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===Tb.NOPROXY&&ge(Lr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{M.$o()},0),M}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(){return typeof window<"u"?window:null}function Eg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(n){return new Xj(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-r);s>0&&ge("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="PersistentStream";class yx{constructor(e,t,r,s,o,u,h,f){this.Ti=e,this.n_=r,this.r_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new cE(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Mn(t.toString()),Mn("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===t&&this.V_(r,s)},r=>{e(()=>{const s=new me(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ge(hI,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ge(hI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WU extends yx{constructor(e,t,r,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=eU(this.serializer,e),r=function(o){if(!("targetChange"in o))return je.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?je.min():u.readTime?Ln(u.readTime):je.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=Ub(this.serializer),t.addTarget=function(o,u){let h;const f=u.target;if(h=Ug(f)?{documents:FD(o,f)}:{query:BD(o,f).ht},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=kD(o,u.resumeToken);const p=Lb(o,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(je.min())>0){h.readTime=Uh(o,u.snapshotVersion.toTimestamp());const p=Lb(o,u.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const r=nU(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=Ub(this.serializer),t.removeTarget=e,this.I_(t)}}class KU extends yx{constructor(e,t,r,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return ke(!!e.streamToken),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=tU(e.writeResults,e.commitTime),r=Ln(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=Ub(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>am(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{}class QU extends YU{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.So(e,jb(t,r),s,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new me(ne.UNKNOWN,o.toString())})}Co(e,t,r,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Co(e,jb(t,r),s,u,h,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(ne.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class XU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Mn(t),this.N_=!1):ge("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu="RemoteStore";class ZU{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(u=>{r.enqueueAndForget(async()=>{Wl(this)&&(ge(Xu,"Restarting streams for network reachability change."),await async function(f){const p=Ce(f);p.W_.add(4),await id(p),p.j_.set("Unknown"),p.W_.delete(4),await km(p)}(this))})}),this.j_=new XU(r,s)}}async function km(n){if(Wl(n))for(const e of n.G_)await e(!0)}async function id(n){for(const e of n.G_)await e(!1)}function R_(n,e){const t=Ce(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),fE(t)?dE(t):ad(t).c_()&&hE(t,e))}function zh(n,e){const t=Ce(n),r=ad(t);t.K_.delete(e),r.c_()&&bx(t,e),t.K_.size===0&&(r.c_()?r.P_():Wl(t)&&t.j_.set("Unknown"))}function hE(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ad(n).y_(e)}function bx(n,e){n.H_.Ne(e),ad(n).w_(e)}function dE(n){n.H_=new Wj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),ad(n).start(),n.j_.B_()}function fE(n){return Wl(n)&&!ad(n).u_()&&n.K_.size>0}function Wl(n){return Ce(n).W_.size===0}function wx(n){n.H_=void 0}async function JU(n){n.j_.set("Online")}async function eF(n){n.K_.forEach((e,t)=>{hE(n,e)})}async function tF(n,e){wx(n),fE(n)?(n.j_.q_(e),dE(n)):n.j_.set("Unknown")}async function nF(n,e,t){if(n.j_.set("Online"),e instanceof PD&&e.state===2&&e.cause)try{await async function(s,o){const u=o.cause;for(const h of o.targetIds)s.K_.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.K_.delete(h),s.H_.removeTarget(h))}(n,e)}catch(r){ge(Xu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yg(n,r)}else if(e instanceof wg?n.H_.We(e):e instanceof ND?n.H_.Ze(e):n.H_.je(e),!t.isEqual(je.min()))try{const r=await ux(n.localStore);t.compareTo(r)>=0&&await function(o,u){const h=o.H_.ot(u);return h.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const v=o.K_.get(p);v&&o.K_.set(p,v.withResumeToken(f.resumeToken,u))}}),h.targetMismatches.forEach((f,p)=>{const v=o.K_.get(f);if(!v)return;o.K_.set(f,v.withResumeToken(In.EMPTY_BYTE_STRING,v.snapshotVersion)),bx(o,f);const b=new oo(v.target,f,p,v.sequenceNumber);hE(o,b)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){ge(Xu,"Failed to raise snapshot:",r),await Yg(n,r)}}async function Yg(n,e,t){if(!$l(e))throw e;n.W_.add(1),await id(n),n.j_.set("Offline"),t||(t=()=>ux(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ge(Xu,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await km(n)})}function Ex(n,e){return e().catch(t=>Yg(n,t,e))}async function sd(n){const e=Ce(n),t=Ll(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:Al;for(;rF(e);)try{const s=await UU(e.localStore,r);if(s===null){e.U_.length===0&&t.P_();break}r=s.batchId,iF(e,s)}catch(s){await Yg(e,s)}Tx(e)&&Ax(e)}function rF(n){return Wl(n)&&n.U_.length<10}function iF(n,e){n.U_.push(e);const t=Ll(n);t.c_()&&t.S_&&t.b_(e.mutations)}function Tx(n){return Wl(n)&&!Ll(n).u_()&&n.U_.length>0}function Ax(n){Ll(n).start()}async function sF(n){Ll(n).C_()}async function aF(n){const e=Ll(n);for(const t of n.U_)e.b_(t.mutations)}async function oF(n,e,t){const r=n.U_.shift(),s=Qw.from(r,e,t);await Ex(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await sd(n)}async function lF(n,e){e&&Ll(n).S_&&await async function(r,s){if(function(u){return xD(u)&&u!==ne.ABORTED}(s.code)){const o=r.U_.shift();Ll(r).h_(),await Ex(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await sd(r)}}(n,e),Tx(n)&&Ax(n)}async function dI(n,e){const t=Ce(n);t.asyncQueue.verifyOperationInProgress(),ge(Xu,"RemoteStore received new credentials");const r=Wl(t);t.W_.add(3),await id(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await km(t)}async function Gb(n,e){const t=Ce(n);e?(t.W_.delete(2),await km(t)):e||(t.W_.add(2),await id(t),t.j_.set("Unknown"))}function ad(n){return n.J_||(n.J_=function(t,r,s){const o=Ce(t);return o.M_(),new WU(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:JU.bind(null,n),No:eF.bind(null,n),Lo:tF.bind(null,n),p_:nF.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),fE(n)?dE(n):n.j_.set("Unknown")):(await n.J_.stop(),wx(n))})),n.J_}function Ll(n){return n.Y_||(n.Y_=function(t,r,s){const o=Ce(t);return o.M_(),new KU(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:sF.bind(null,n),Lo:lF.bind(null,n),D_:aF.bind(null,n),v_:oF.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await sd(n)):(await n.Y_.stop(),n.U_.length>0&&(ge(Xu,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const u=Date.now()+r,h=new mE(e,t,u,s,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function od(n,e){if(Mn("AsyncQueue",`${e}: ${n}`),$l(n))return new me(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{static emptySet(e){return new wh(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Re.comparator(t.key,r.key):(t,r)=>Re.comparator(t.key,r.key),this.keyedMap=If(),this.sortedSet=new Zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new wh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(){this.Z_=new Zt(Re.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):De():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class qh{constructor(e,t,r,s,o,u,h,f,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new qh(e,t,wh.emptySet(t),u,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class cF{constructor(){this.queries=mI(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const s=Ce(t),o=s.queries;s.queries=mI(),o.forEach((u,h)=>{for(const f of h.ta)f.onError(r)})})(this,new me(ne.ABORTED,"Firestore shutting down"))}}function mI(){return new wo(n=>gD(n),Cm)}async function pE(n,e){const t=Ce(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.na()&&e.ra()&&(r=2):(o=new uF,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(s,!0);break;case 1:o.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const h=od(u,`Initialization of query '${hh(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&_E(t)}async function gE(n,e){const t=Ce(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const u=o.ta.indexOf(e);u>=0&&(o.ta.splice(u,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function hF(n,e){const t=Ce(n);let r=!1;for(const s of e){const o=s.query,u=t.queries.get(o);if(u){for(const h of u.ta)h.oa(s)&&(r=!0);u.ea=s}}r&&_E(t)}function dF(n,e,t){const r=Ce(n),s=r.queries.get(e);if(s)for(const o of s.ta)o.onError(t);r.queries.delete(e)}function _E(n){n.ia.forEach(e=>{e.next()})}var Wb,pI;(pI=Wb||(Wb={}))._a="default",pI.Cache="cache";class vE{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new qh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=qh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Wb.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.serializer=e}ps(e){return ya(this.serializer,e)}ys(e){return e.metadata.exists?UD(this.serializer,e.document,!1):en.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return Ln(e)}}class mF{constructor(e,t,r){this.da=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Sx(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;const r=pt.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){const t=new Map,r=new gI(this.serializer);for(const s of e)if(s.metadata.queries){const o=r.ps(s.metadata.name);for(const u of s.metadata.queries){const h=(t.get(u)||et()).add(o);t.set(u,h)}}return t}async complete(){const e=await FU(this.localStore,new gI(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(const r of this.queries)await BU(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}}}function Sx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this.key=e}}class Rx{constructor(e){this.key=e}}class Cx{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=et(),this.mutatedKeys=et(),this.ya=vD(e),this.wa=new wh(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new fI,s=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,u=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,b)=>{const A=s.get(v),D=Dm(this.query,b)?b:null,M=!!A&&this.mutatedKeys.has(A.key),F=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let V=!1;A&&D?A.data.isEqual(D.data)?M!==F&&(r.track({type:3,doc:D}),V=!0):this.va(A,D)||(r.track({type:2,doc:D}),V=!0,(f&&this.ya(D,f)>0||p&&this.ya(D,p)<0)&&(h=!0)):!A&&D?(r.track({type:0,doc:D}),V=!0):A&&!D&&(r.track({type:1,doc:A}),V=!0,(f||p)&&(h=!0)),V&&(D?(u=u.add(D),o=F?o.add(v):o.delete(v)):(u=u.delete(v),o=o.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),o=o.delete(v.key),r.track({type:1,doc:v})}return{wa:u,Da:r,ls:h,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((v,b)=>function(D,M){const F=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return F(D)-F(M)}(v.type,b.type)||this.ya(v.doc,b.doc)),this.Ca(r),s=s!=null&&s;const h=t&&!s?this.Fa():[],f=this.pa.size===0&&this.current&&!s?1:0,p=f!==this.ga;return this.ga=f,u.length!==0||p?{snapshot:new qh(this.query,e.wa,o,u,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new fI,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=et(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new Rx(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new Ix(r))}),t}Oa(e){this.fa=e.gs,this.pa=et();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return qh.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Kl="SyncEngine";class pF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class gF{constructor(e){this.key=e,this.Ba=!1}}class _F{constructor(e,t,r,s,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new wo(h=>gD(h),Cm),this.qa=new Map,this.Qa=new Set,this.$a=new Zt(Re.comparator),this.Ua=new Map,this.Ka=new rE,this.Wa={},this.Ga=new Map,this.za=Qu.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function vF(n,e,t=!0){const r=C_(n);let s;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await Dx(r,e,t,!0),s}async function yF(n,e){const t=C_(n);await Dx(t,e,!0,!1)}async function Dx(n,e,t,r){const s=await Fh(n.localStore,ui(e)),o=s.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let h;return r&&(h=await yE(n,e,o,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&R_(n.remoteStore,s),h}async function yE(n,e,t,r,s){n.Ha=(b,A,D)=>async function(F,V,H,J){let se=V.view.ba(H);se.ls&&(se=await Gg(F.localStore,V.query,!1).then(({documents:U})=>V.view.ba(U,se)));const ue=J&&J.targetChanges.get(V.targetId),de=J&&J.targetMismatches.get(V.targetId)!=null,be=V.view.applyChanges(se,F.isPrimaryClient,ue,de);return Kb(F,V.targetId,be.Ma),be.snapshot}(n,b,A,D);const o=await Gg(n.localStore,e,!0),u=new Cx(e,o.gs),h=u.ba(o.documents),f=Nm.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=u.applyChanges(h,n.isPrimaryClient,f);Kb(n,t,p.Ma);const v=new pF(e,t,u);return n.ka.set(e,v),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),p.snapshot}async function bF(n,e,t){const r=Ce(n),s=r.ka.get(e),o=r.qa.get(s.targetId);if(o.length>1)return r.qa.set(s.targetId,o.filter(u=>!Cm(u,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Bh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&zh(r.remoteStore,s.targetId),Hh(r,s.targetId)}).catch(Hl)):(Hh(r,s.targetId),await Bh(r.localStore,s.targetId,!0))}async function wF(n,e){const t=Ce(n),r=t.ka.get(e),s=t.qa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zh(t.remoteStore,r.targetId))}async function EF(n,e,t){const r=TE(n);try{const s=await function(u,h){const f=Ce(u),p=un.now(),v=h.reduce((D,M)=>D.add(M.key),et());let b,A;return f.persistence.runTransaction("Locally write mutations","readwrite",D=>{let M=Ai(),F=et();return f.ds.getEntries(D,v).next(V=>{M=V,M.forEach((H,J)=>{J.isValidDocument()||(F=F.add(H))})}).next(()=>f.localDocuments.getOverlayedDocuments(D,M)).next(V=>{b=V;const H=[];for(const J of h){const se=Hj(J,b.get(J.key).overlayedDocument);se!=null&&H.push(new Eo(J.key,se,oD(se.value.mapValue),ln.exists(!0)))}return f.mutationQueue.addMutationBatch(D,p,H,h)}).next(V=>{A=V;const H=V.applyToLocalDocumentSet(b,F);return f.documentOverlayCache.saveOverlays(D,V.batchId,H)})}).then(()=>({batchId:A.batchId,changes:bD(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,h,f){let p=u.Wa[u.currentUser.toKey()];p||(p=new Zt(Ke)),p=p.insert(h,f),u.Wa[u.currentUser.toKey()]=p}(r,s.batchId,t),await To(r,s.changes),await sd(r.remoteStore)}catch(s){const o=od(s,"Failed to persist write");t.reject(o)}}async function xx(n,e){const t=Ce(n);try{const r=await jU(t.localStore,e);e.targetChanges.forEach((s,o)=>{const u=t.Ua.get(o);u&&(ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.Ba=!0:s.modifiedDocuments.size>0?ke(u.Ba):s.removedDocuments.size>0&&(ke(u.Ba),u.Ba=!1))}),await To(t,r,e)}catch(r){await Hl(r)}}function _I(n,e,t){const r=Ce(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ka.forEach((o,u)=>{const h=u.view.sa(e);h.snapshot&&s.push(h.snapshot)}),function(u,h){const f=Ce(u);f.onlineState=h;let p=!1;f.queries.forEach((v,b)=>{for(const A of b.ta)A.sa(h)&&(p=!0)}),p&&_E(f)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function TF(n,e,t){const r=Ce(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ua.get(e),o=s&&s.key;if(o){let u=new Zt(Re.comparator);u=u.insert(o,en.newNoDocument(o,je.min()));const h=et().add(o),f=new Om(je.min(),new Map,new Zt(Ke),u,h);await xx(r,f),r.$a=r.$a.remove(o),r.Ua.delete(e),EE(r)}else await Bh(r.localStore,e,!1).then(()=>Hh(r,e,t)).catch(Hl)}async function AF(n,e){const t=Ce(n),r=e.batch.batchId;try{const s=await LU(t.localStore,e);wE(t,r,null),bE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await To(t,s)}catch(s){await Hl(s)}}async function SF(n,e,t){const r=Ce(n);try{const s=await function(u,h){const f=Ce(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return f.mutationQueue.lookupMutationBatch(p,h).next(b=>(ke(b!==null),v=b.keys(),f.mutationQueue.removeMutationBatch(p,b))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,v,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>f.localDocuments.getDocuments(p,v))})}(r.localStore,e);wE(r,e,t),bE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await To(r,s)}catch(s){await Hl(s)}}async function IF(n,e){const t=Ce(n);Wl(t.remoteStore)||ge(Kl,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(u){const h=Ce(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>h.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(r===Al)return void e.resolve();const s=t.Ga.get(r)||[];s.push(e),t.Ga.set(r,s)}catch(r){const s=od(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function bE(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function wE(n,e,t){const r=Ce(n);let s=r.Wa[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function Hh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||Ox(n,r)})}function Ox(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(zh(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),EE(n))}function Kb(n,e,t){for(const r of t)r instanceof Ix?(n.Ka.addReference(r.key,e),RF(n,r)):r instanceof Rx?(ge(Kl,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||Ox(n,r.key)):De()}function RF(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(ge(Kl,"New document in limbo: "+t),n.Qa.add(r),EE(n))}function EE(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Re(pt.fromString(e)),r=n.za.next();n.Ua.set(r,new gF(t)),n.$a=n.$a.insert(t,r),R_(n.remoteStore,new oo(ui(td(t.path)),r,"TargetPurposeLimboResolution",Ei.ae))}}async function To(n,e,t){const r=Ce(n),s=[],o=[],u=[];r.ka.isEmpty()||(r.ka.forEach((h,f)=>{u.push(r.Ha(f,e,t).then(p=>{var v;if((p||t)&&r.isPrimaryClient){const b=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,b?"current":"not-current")}if(p){s.push(p);const b=oE.Yi(f.targetId,p);o.push(b)}}))}),await Promise.all(u),r.La.p_(s),await async function(f,p){const v=Ce(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>X.forEach(p,A=>X.forEach(A.Hi,D=>v.persistence.referenceDelegate.addReference(b,A.targetId,D)).next(()=>X.forEach(A.Ji,D=>v.persistence.referenceDelegate.removeReference(b,A.targetId,D)))))}catch(b){if(!$l(b))throw b;ge(lE,"Failed to update sequence numbers: "+b)}for(const b of p){const A=b.targetId;if(!b.fromCache){const D=v.Ts.get(A),M=D.snapshotVersion,F=D.withLastLimboFreeSnapshotVersion(M);v.Ts=v.Ts.insert(A,F)}}}(r.localStore,o))}async function CF(n,e){const t=Ce(n);if(!t.currentUser.isEqual(e)){ge(Kl,"User change. New user:",e.toKey());const r=await lx(t.localStore,e);t.currentUser=e,function(o,u){o.Ga.forEach(h=>{h.forEach(f=>{f.reject(new me(ne.CANCELLED,u))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await To(t,r.Rs)}}function DF(n,e){const t=Ce(n),r=t.Ua.get(e);if(r&&r.Ba)return et().add(r.key);{let s=et();const o=t.qa.get(e);if(!o)return s;for(const u of o){const h=t.ka.get(u);s=s.unionWith(h.view.Sa)}return s}}async function xF(n,e){const t=Ce(n),r=await Gg(t.localStore,e.query,!0),s=e.view.Oa(r);return t.isPrimaryClient&&Kb(t,e.targetId,s.Ma),s}async function OF(n,e){const t=Ce(n);return dx(t.localStore,e).then(r=>To(t,r))}async function NF(n,e,t,r){const s=Ce(n),o=await function(h,f){const p=Ce(h),v=Ce(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",b=>v.Ln(b,f).next(A=>A?p.localDocuments.getDocuments(b,A):X.resolve(null)))}(s.localStore,e);o!==null?(t==="pending"?await sd(s.remoteStore):t==="acknowledged"||t==="rejected"?(wE(s,e,r||null),bE(s,e),function(h,f){Ce(Ce(h).mutationQueue).qn(f)}(s.localStore,e)):De(),await To(s,o)):ge(Kl,"Cannot apply mutation batch with id: "+e)}async function PF(n,e){const t=Ce(n);if(C_(t),TE(t),e===!0&&t.ja!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),s=await vI(t,r.toArray());t.ja=!0,await Gb(t.remoteStore,!0);for(const o of s)R_(t.remoteStore,o)}else if(e===!1&&t.ja!==!1){const r=[];let s=Promise.resolve();t.qa.forEach((o,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):s=s.then(()=>(Hh(t,u),Bh(t.localStore,u,!0))),zh(t.remoteStore,u)}),await s,await vI(t,r),function(u){const h=Ce(u);h.Ua.forEach((f,p)=>{zh(h.remoteStore,p)}),h.Ka.Dr(),h.Ua=new Map,h.$a=new Zt(Re.comparator)}(t),t.ja=!1,await Gb(t.remoteStore,!1)}}async function vI(n,e,t){const r=Ce(n),s=[],o=[];for(const u of e){let h;const f=r.qa.get(u);if(f&&f.length!==0){h=await Fh(r.localStore,ui(f[0]));for(const p of f){const v=r.ka.get(p),b=await xF(r,v);b.snapshot&&o.push(b.snapshot)}}else{const p=await hx(r.localStore,u);h=await Fh(r.localStore,p),await yE(r,Nx(p),u,!1,h.resumeToken)}s.push(h)}return r.La.p_(o),s}function Nx(n){return pD(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function kF(n){return function(t){return Ce(Ce(t).persistence).zi()}(Ce(n).localStore)}async function VF(n,e,t,r){const s=Ce(n);if(s.ja)return void ge(Kl,"Ignoring unexpected query state notification.");const o=s.qa.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const u=await dx(s.localStore,_D(o[0])),h=Om.createSynthesizedRemoteEventForCurrentChange(e,t==="current",In.EMPTY_BYTE_STRING);await To(s,u,h);break}case"rejected":await Bh(s.localStore,e,!0),Hh(s,e,r);break;default:De()}}async function MF(n,e,t){const r=C_(n);if(r.ja){for(const s of e){if(r.qa.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){ge(Kl,"Adding an already active target "+s);continue}const o=await hx(r.localStore,s),u=await Fh(r.localStore,o);await yE(r,Nx(o),u.targetId,!1,u.resumeToken),R_(r.remoteStore,u)}for(const s of t)r.qa.has(s)&&await Bh(r.localStore,s,!1).then(()=>{zh(r.remoteStore,s),Hh(r,s)}).catch(Hl)}}function C_(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TF.bind(null,e),e.La.p_=hF.bind(null,e.eventManager),e.La.Ja=dF.bind(null,e.eventManager),e}function TE(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SF.bind(null,e),e}function LF(n,e,t){const r=Ce(n);(async function(o,u,h){try{const f=await u.getMetadata();if(await function(D,M){const F=Ce(D),V=Ln(M.createTime);return F.persistence.runTransaction("hasNewerBundle","readonly",H=>F.Yr.getBundleMetadata(H,M.id)).then(H=>!!H&&H.createTime.compareTo(V)>=0)}(o.localStore,f))return await u.close(),h._completeWith(function(D){return{taskState:"Success",documentsLoaded:D.totalDocuments,bytesLoaded:D.totalBytes,totalDocuments:D.totalDocuments,totalBytes:D.totalBytes}}(f)),Promise.resolve(new Set);h._updateProgress(Sx(f));const p=new mF(f,o.localStore,u.serializer);let v=await u.Ya();for(;v;){const A=await p.Aa(v);A&&h._updateProgress(A),v=await u.Ya()}const b=await p.complete();return await To(o,b.ma,void 0),await function(D,M){const F=Ce(D);return F.persistence.runTransaction("Save bundle","readwrite",V=>F.Yr.saveBundleMetadata(V,M))}(o.localStore,f),h._completeWith(b.progress),Promise.resolve(b.Va)}catch(f){return Ea(Kl,`Loading bundle failed with ${f}`),h._failWith(f),Promise.resolve(new Set)}})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class om{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pm(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return ox(this.persistence,new ax,e.initialUser,this.serializer)}Xa(e){return new iE(I_.ri,this.serializer)}Za(e){return new _x}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}om.provider={build:()=>new om};class jF extends om{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){ke(this.persistence.referenceDelegate instanceof $g);const r=this.persistence.referenceDelegate.garbageCollector;return new ex(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?jr.withCacheSize(this.cacheSizeBytes):jr.DEFAULT;return new iE(r=>$g.ri(r,t),this.serializer)}}class Px extends om{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await TE(this.ru.syncEngine),await sd(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return ox(this.persistence,new ax,e.initialUser,this.serializer)}tu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new ex(r,e.asyncQueue,t)}nu(e,t){const r=new W2(t,this.persistence);return new G2(e.asyncQueue,r)}Xa(e){const t=aE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?jr.withCacheSize(this.cacheSizeBytes):jr.DEFAULT;return new sE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,vx(),Eg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new _x}}class UF extends Px{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof Ky&&(this.sharedClientState.syncEngine={uo:NF.bind(null,t),co:VF.bind(null,t),lo:MF.bind(null,t),zi:kF.bind(null,t),ao:OF.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await PF(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(e){const t=vx();if(!Ky.D(t))throw new me(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=aE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ky(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class lm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_I(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CF.bind(null,this.syncEngine),await Gb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new cF}()}createDatastore(e){const t=Pm(e.databaseInfo.databaseId),r=function(o){return new GU(o)}(e.databaseInfo);return function(o,u,h,f){return new QU(o,u,h,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,u,h){return new ZU(r,s,o,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>_I(this.syncEngine,t,0),function(){return cI.D()?new cI:new zU}())}createSyncEngine(e,t){return function(s,o,u,h,f,p,v){const b=new _F(s,o,u,h,f,p);return v&&(b.ja=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=Ce(s);ge(Xu,"RemoteStore shutting down."),o.W_.add(5),await id(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}lm.provider={build:()=>new lm};function yI(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Mn("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new Rr,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const e=await this.uu();if(e===null)return null;const t=this._u.decode(e),r=Number(t);isNaN(r)&&this.cu(`length string (${t}) is not valid number`);const s=await this.lu(r);return new fF(JSON.parse(s),e.length+r)}hu(){return this.buffer.findIndex(e=>e===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async lu(e){for(;this.buffer.length<e;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}async Pu(){const e=await this.ou.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new me(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(s,o){const u=Ce(s),h={documents:o.map(b=>sm(u.serializer,b))},f=await u.Co("BatchGetDocuments",u.serializer.databaseId,pt.emptyPath(),h,o.length),p=new Map;f.forEach(b=>{const A=Jj(u.serializer,b);p.set(A.key.toString(),A)});const v=[];return o.forEach(b=>{const A=p.get(b.toString());ke(!!A),v.push(A)}),v}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new rd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const s=Re.fromPath(r);this.mutations.push(new Kw(s,this.precondition(s)))}),await async function(r,s){const o=Ce(r),u={writes:s.map(h=>am(o.serializer,h))};await o.So("Commit",o.serializer.databaseId,pt.emptyPath(),u)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw De();t=je.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new me(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(je.min())?ln.exists(!1):ln.updateTime(t):ln.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(je.min()))throw new me(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ln.updateTime(t)}return ln.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e,t,r,s,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=o,this.Tu=r.maxAttempts,this.a_=new cE(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const e=new BF(this.datastore),t=this.du(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Au(s)}))}).catch(r=>{this.Au(r)})})}du(e){try{const t=this.updateFunction(e);return!Sm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!xD(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl="FirestoreClient";class qF{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=dr.UNAUTHENTICATED,this.clientId=VC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async u=>{ge(jl,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(ge(jl,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=od(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Qy(n,e){n.asyncQueue.verifyOperationInProgress(),ge(jl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await lx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function bI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await AE(n);ge(jl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>dI(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>dI(e.remoteStore,s)),n._onlineComponents=e}async function AE(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(jl,"Using user provided OfflineComponentProvider");try{await Qy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ne.FAILED_PRECONDITION||s.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Ea("Error using user provided cache. Falling back to memory cache: "+t),await Qy(n,new om)}}else ge(jl,"Using default OfflineComponentProvider"),await Qy(n,new jF(void 0));return n._offlineComponents}async function x_(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(jl,"Using user provided OnlineComponentProvider"),await bI(n,n._uninitializedComponentsProvider._online)):(ge(jl,"Using default OnlineComponentProvider"),await bI(n,new lm))),n._onlineComponents}function kx(n){return AE(n).then(e=>e.persistence)}function SE(n){return AE(n).then(e=>e.localStore)}function Vx(n){return x_(n).then(e=>e.remoteStore)}function IE(n){return x_(n).then(e=>e.syncEngine)}function HF(n){return x_(n).then(e=>e.datastore)}async function $h(n){const e=await x_(n),t=e.eventManager;return t.onListen=vF.bind(null,e.syncEngine),t.onUnlisten=bF.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=yF.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wF.bind(null,e.syncEngine),t}function $F(n){return n.asyncQueue.enqueue(async()=>{const e=await kx(n),t=await Vx(n);return e.setNetworkEnabled(!0),function(s){const o=Ce(s);return o.W_.delete(0),km(o)}(t)})}function GF(n){return n.asyncQueue.enqueue(async()=>{const e=await kx(n),t=await Vx(n);return e.setNetworkEnabled(!1),async function(s){const o=Ce(s);o.W_.add(0),await id(o),o.j_.set("Offline")}(t)})}function WF(n,e){const t=new Rr;return n.asyncQueue.enqueueAndForget(async()=>async function(s,o,u){try{const h=await function(p,v){const b=Ce(p);return b.persistence.runTransaction("read document","readonly",A=>b.localDocuments.getDocument(A,v))}(s,o);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new me(ne.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const f=od(h,`Failed to get document '${o} from cache`);u.reject(f)}}(await SE(n),e,t)),t.promise}function Mx(n,e,t={}){const r=new Rr;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,f,p){const v=new D_({next:A=>{v.su(),u.enqueueAndForget(()=>gE(o,b));const D=A.docs.has(h);!D&&A.fromCache?p.reject(new me(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&A.fromCache&&f&&f.source==="server"?p.reject(new me(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(A)},error:A=>p.reject(A)}),b=new vE(td(h.path),v,{includeMetadataChanges:!0,Ta:!0});return pE(o,b)}(await $h(n),n.asyncQueue,e,t,r)),r.promise}function KF(n,e){const t=new Rr;return n.asyncQueue.enqueueAndForget(async()=>async function(s,o,u){try{const h=await Gg(s,o,!0),f=new Cx(o,h.gs),p=f.ba(h.documents),v=f.applyChanges(p,!1);u.resolve(v.snapshot)}catch(h){const f=od(h,`Failed to execute query '${o} against cache`);u.reject(f)}}(await SE(n),e,t)),t.promise}function Lx(n,e,t={}){const r=new Rr;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,f,p){const v=new D_({next:A=>{v.su(),u.enqueueAndForget(()=>gE(o,b)),A.fromCache&&f.source==="server"?p.reject(new me(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(A)},error:A=>p.reject(A)}),b=new vE(h,v,{includeMetadataChanges:!0,Ta:!0});return pE(o,b)}(await $h(n),n.asyncQueue,e,t,r)),r.promise}function YF(n,e){const t=new D_(e);return n.asyncQueue.enqueueAndForget(async()=>function(s,o){Ce(s).ia.add(o),o.next()}(await $h(n),t)),()=>{t.su(),n.asyncQueue.enqueueAndForget(async()=>function(s,o){Ce(s).ia.delete(o)}(await $h(n),t))}}function QF(n,e,t,r){const s=function(u,h){let f;return f=typeof u=="string"?Vw().encode(u):u,function(v,b){return new FF(v,b)}(function(v,b){if(v instanceof Uint8Array)return yI(v,b);if(v instanceof ArrayBuffer)return yI(new Uint8Array(v),b);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),h)}(t,Pm(e));n.asyncQueue.enqueueAndForget(async()=>{LF(await IE(n),s,r)})}function XF(n,e){return n.asyncQueue.enqueue(async()=>function(r,s){const o=Ce(r);return o.persistence.runTransaction("Get named query","readonly",u=>o.Yr.getNamedQuery(u,s))}(await SE(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(n,e,t){if(!t)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ux(n,e,t,r){if(e===!0&&r===!0)throw new me(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function EI(n){if(!Re.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TI(n){if(Re.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function O_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De()}function Ct(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=O_(n);throw new me(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Fx(n,e){if(e<=0)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="firestore.googleapis.com",AI=!0;class SI{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Bx,this.ssl=AI}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:AI;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vU)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ux("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vm{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new V2;switch(r.type){case"firstParty":return new U2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=wI.get(t);r&&(ge("ComponentProvider","Removing Datastore"),wI.delete(t),r.terminate())}(this),Promise.resolve()}}function ZF(n,e,t,r={}){var s;const o=(n=Ct(n,Vm))._getSettings(),u=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),h=`${e}:${t}`;o.host!==Bx&&o.host!==h&&Ea("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},o),{host:h,ssl:!1,emulatorOptions:r});if(!Cl(f,u)&&(n._setSettings(f),r.mockUserToken)){let p,v;if(typeof r.mockUserToken=="string")p=r.mockUserToken,v=dr.MOCK_USER;else{p=uL(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new me(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new dr(b)}n._authCredentials=new M2(new kC(p,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ci=class zx{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zx(this.firestore,e,this._query)}},pn=class qx{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qx(this.firestore,e,this._key)}},Sl=class Hx extends ci{constructor(e,t,r){super(e,t,td(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new Re(e))}withConverter(e){return new Hx(this.firestore,e,this._path)}};function CE(n,e,...t){if(n=He(n),RE("collection","path",e),n instanceof Vm){const r=pt.fromString(e,...t);return TI(r),new Sl(n,null,r)}{if(!(n instanceof pn||n instanceof Sl))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return TI(r),new Sl(n.firestore,null,r)}}function JF(n,e){if(n=Ct(n,Vm),RE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ci(n,null,function(r){return new bo(pt.emptyPath(),r)}(e))}function Qg(n,e,...t){if(n=He(n),arguments.length===1&&(e=VC.newId()),RE("doc","path",e),n instanceof Vm){const r=pt.fromString(e,...t);return EI(r),new pn(n,null,new Re(r))}{if(!(n instanceof pn||n instanceof Sl))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return EI(r),new pn(n.firestore,n instanceof Sl?n.converter:null,new Re(r))}}function $x(n,e){return n=He(n),e=He(e),(n instanceof pn||n instanceof Sl)&&(e instanceof pn||e instanceof Sl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Gx(n,e){return n=He(n),e=He(e),n instanceof ci&&e instanceof ci&&n.firestore===e.firestore&&Cm(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="AsyncQueue";class RI{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new cE(this,"async_queue_retry"),this.Su=()=>{const r=Eg();r&&ge(II,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=Eg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Eg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Rr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!$l(e))throw e;ge(II,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(r);throw Mn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=mE.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&De()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function Yb(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1}(n,["next","error","complete"])}class e4{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=-1;let jn=class extends Vm{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new RI,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new RI(e),this._firestoreClient=void 0,await e}}};function Fr(n){if(n._terminated)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Wx(n),n._firestoreClient}function Wx(n){var e,t,r;const s=n._freezeSettings(),o=function(h,f,p,v){return new Ej(h,f,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,jx(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new qF(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(n._componentsProvider))}function n4(n,e){Ea("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return Kx(n,lm.provider,{build:r=>new Px(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function r4(n){Ea("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();Kx(n,lm.provider,{build:t=>new UF(t,e.cacheSizeBytes)})}function Kx(n,e,t){if((n=Ct(n,jn))._firestoreClient||n._terminated)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new me(ne.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Wx(n)}function i4(n){if(n._initialized&&!n._terminated)throw new me(ne.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rr;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!va.D())return Promise.resolve();const s=r+sx;await va.delete(s)}(aE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function s4(n){return function(t){const r=new Rr;return t.asyncQueue.enqueueAndForget(async()=>IF(await IE(t),r)),r.promise}(Fr(n=Ct(n,jn)))}function a4(n){return $F(Fr(n=Ct(n,jn)))}function o4(n){return GF(Fr(n=Ct(n,jn)))}function l4(n,e){const t=Fr(n=Ct(n,jn)),r=new e4;return QF(t,n._databaseId,e,r),r}function u4(n,e){return XF(Fr(n=Ct(n,jn)),e).then(t=>t?new ci(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Aa(In.fromBase64String(e))}catch(t){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Aa(In.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ac=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=/^__.*__$/;class h4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Eo(e,this.data,this.fieldMask,t,this.fieldTransforms):new nd(e,this.data,t,this.fieldTransforms)}}class Yx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Eo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Qx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class P_{constructor(e,t,r,s,o,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new P_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Xg(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Qx(this.Lu)&&c4.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class d4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Pm(e)}ju(e,t,r,s=!1){return new P_({Lu:e,methodName:t,zu:r,path:on.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oc(n){const e=n._freezeSettings(),t=Pm(n._databaseId);return new d4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function k_(n,e,t,r,s,o={}){const u=n.ju(o.merge||o.mergeFields?2:0,e,t,s);ME("Data must be an object, but it was:",u,r);const h=Jx(r,u);let f,p;if(o.merge)f=new Ti(u.fieldMask),p=u.fieldTransforms;else if(o.mergeFields){const v=[];for(const b of o.mergeFields){const A=Qb(e,b,t);if(!u.contains(A))throw new me(ne.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);tO(v,A)||v.push(A)}f=new Ti(v),p=u.fieldTransforms.filter(b=>f.covers(b.field))}else f=null,p=u.fieldTransforms;return new h4(new Ir(h),f,p)}class Mm extends ac{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mm}}function Xx(n,e,t){return new P_({Lu:3,zu:e.settings.zu,methodName:n._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class xE extends ac{_toFieldTransform(e){return new xm(e.path,new Lh)}isEqual(e){return e instanceof xE}}class OE extends ac{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=Xx(this,e,!0),r=this.Hu.map(o=>lc(o,t)),s=new Gu(r);return new xm(e.path,s)}isEqual(e){return e instanceof OE&&Cl(this.Hu,e.Hu)}}class NE extends ac{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=Xx(this,e,!0),r=this.Hu.map(o=>lc(o,t)),s=new Wu(r);return new xm(e.path,s)}isEqual(e){return e instanceof NE&&Cl(this.Hu,e.Hu)}}class PE extends ac{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new jh(e.serializer,TD(e.serializer,this.Ju));return new xm(e.path,t)}isEqual(e){return e instanceof PE&&this.Ju===e.Ju}}function kE(n,e,t,r){const s=n.ju(1,e,t);ME("Data must be an object, but it was:",s,r);const o=[],u=Ir.empty();Gl(r,(f,p)=>{const v=LE(e,f,t);p=He(p);const b=s.Uu(v);if(p instanceof Mm)o.push(v);else{const A=lc(p,b);A!=null&&(o.push(v),u.set(v,A))}});const h=new Ti(o);return new Yx(u,h,s.fieldTransforms)}function VE(n,e,t,r,s,o){const u=n.ju(1,e,t),h=[Qb(e,r,t)],f=[s];if(o.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<o.length;A+=2)h.push(Qb(e,o[A])),f.push(o[A+1]);const p=[],v=Ir.empty();for(let A=h.length-1;A>=0;--A)if(!tO(p,h[A])){const D=h[A];let M=f[A];M=He(M);const F=u.Uu(D);if(M instanceof Mm)p.push(D);else{const V=lc(M,F);V!=null&&(p.push(D),v.set(D,V))}}const b=new Ti(p);return new Yx(v,b,u.fieldTransforms)}function Zx(n,e,t,r=!1){return lc(t,n.ju(r?4:3,e))}function lc(n,e){if(eO(n=He(n)))return ME("Unsupported field value:",e,n),Jx(n,e);if(n instanceof ac)return function(r,s){if(!Qx(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const o=[];let u=0;for(const h of r){let f=lc(h,s.Ku(u));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),u++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TD(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=un.fromDate(r);return{timestampValue:Uh(s.serializer,o)}}if(r instanceof un){const o=new un(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Uh(s.serializer,o)}}if(r instanceof N_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Aa)return{bytesValue:kD(s.serializer,r._byteString)};if(r instanceof pn){const o=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw s.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Jw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof DE)return function(u,h){return{mapValue:{fields:{[zw]:{stringValue:qw},[kh]:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw h.Wu("VectorValues must only contain numeric values.");return Ww(h.serializer,p)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${O_(r)}`)}(n,e)}function Jx(n,e){const t={};return ZC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gl(n,(r,s)=>{const o=lc(s,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function eO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof un||n instanceof N_||n instanceof Aa||n instanceof pn||n instanceof ac||n instanceof DE)}function ME(n,e,t){if(!eO(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=O_(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function Qb(n,e,t){if((e=He(e))instanceof Ul)return e._internalPath;if(typeof e=="string")return LE(n,e);throw Xg("Field path arguments must be of type string or ",n,!1,void 0,t)}const f4=new RegExp("[~\\*/\\[\\]]");function LE(n,e,t){if(e.search(f4)>=0)throw Xg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ul(...e.split("."))._internalPath}catch{throw Xg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xg(n,e,t,r,s){const o=r&&!r.isEmpty(),u=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||u)&&(f+=" (found",o&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new me(ne.INVALID_ARGUMENT,h+n+f)}function tO(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new m4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(V_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class m4 extends um{data(){return super.data()}}function V_(n,e){return typeof e=="string"?LE(n,e):e instanceof Ul?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new me(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jE{}class Lm extends jE{}function ao(n,e,...t){let r=[];e instanceof jE&&r.push(e),r=r.concat(t),function(o){const u=o.filter(f=>f instanceof UE).length,h=o.filter(f=>f instanceof M_).length;if(u>1||u>0&&h>0)throw new me(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class M_ extends Lm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new M_(e,t,r)}_apply(e){const t=this._parse(e);return sO(e._query,t),new ci(e.firestore,e.converter,Mb(e._query,t))}_parse(e){const t=oc(e.firestore);return function(o,u,h,f,p,v,b){let A;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new me(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){DI(b,v);const M=[];for(const F of b)M.push(CI(f,o,F));A={arrayValue:{values:M}}}else A=CI(f,o,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||DI(b,v),A=Zx(h,u,b,v==="in"||v==="not-in");return gt.create(p,v,A)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function rO(n,e,t){const r=e,s=V_("where",n);return M_._create(s,r,t)}class UE extends jE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new UE(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Mt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let u=s;const h=o.getFlattenedFilters();for(const f of h)sO(u,f),u=Mb(u,f)}(e._query,t),new ci(e.firestore,e.converter,Mb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class FE extends Lm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new FE(e,t)}_apply(e){const t=function(s,o,u){if(s.startAt!==null)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new im(o,u)}(e._query,this._field,this._direction);return new ci(e.firestore,e.converter,function(s,o){const u=s.explicitOrderBy.concat([o]);return new bo(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function p4(n,e="asc"){const t=e,r=V_("orderBy",n);return FE._create(r,t)}class L_ extends Lm{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new L_(e,t,r)}_apply(e){return new ci(e.firestore,e.converter,Bg(e._query,this._limit,this._limitType))}}function g4(n){return Fx("limit",n),L_._create("limit",n,"F")}function _4(n){return Fx("limitToLast",n),L_._create("limitToLast",n,"L")}class j_ extends Lm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new j_(e,t,r)}_apply(e){const t=iO(e,this.type,this._docOrFields,this._inclusive);return new ci(e.firestore,e.converter,function(s,o){return new bo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,o,s.endAt)}(e._query,t))}}function v4(...n){return j_._create("startAt",n,!0)}function y4(...n){return j_._create("startAfter",n,!1)}class U_ extends Lm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new U_(e,t,r)}_apply(e){const t=iO(e,this.type,this._docOrFields,this._inclusive);return new ci(e.firestore,e.converter,function(s,o){return new bo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,o)}(e._query,t))}}function b4(...n){return U_._create("endBefore",n,!1)}function w4(...n){return U_._create("endAt",n,!0)}function iO(n,e,t,r){if(t[0]=He(t[0]),t[0]instanceof um)return function(o,u,h,f,p){if(!f)throw new me(ne.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const v=[];for(const b of bh(o))if(b.field.isKeyField())v.push(Hu(u,f.key));else{const A=f.data.field(b.field);if(y_(A))throw new me(ne.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(A===null){const D=b.field.canonicalString();throw new me(ne.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${D}' (used as the orderBy) does not exist.`)}v.push(A)}return new Ml(v,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=oc(n.firestore);return function(u,h,f,p,v,b){const A=u.explicitOrderBy;if(v.length>A.length)throw new me(ne.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const D=[];for(let M=0;M<v.length;M++){const F=v[M];if(A[M].field.isKeyField()){if(typeof F!="string")throw new me(ne.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof F}`);if(!$w(u)&&F.indexOf("/")!==-1)throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${F}' contains a slash.`);const V=u.path.child(pt.fromString(F));if(!Re.isDocumentKey(V))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const H=new Re(V);D.push(Hu(h,H))}else{const V=Zx(f,p,F);D.push(V)}}return new Ml(D,b)}(n._query,n.firestore._databaseId,s,e,t,r)}}function CI(n,e,t){if(typeof(t=He(t))=="string"){if(t==="")throw new me(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$w(e)&&t.indexOf("/")!==-1)throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pt.fromString(t));if(!Re.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hu(n,new Re(r))}if(t instanceof pn)return Hu(n,t._key);throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${O_(t)}.`)}function DI(n,e){if(!Array.isArray(n)||n.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sO(n,e){const t=function(s,o){for(const u of s)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class BE{convertValue(e,t="none"){switch(kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Gl(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[kh].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>sn(u.doubleValue));return new DE(o)}convertGeoPoint(e){return new N_(sn(e.latitude),sn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=b_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(tm(e));default:return null}}convertTimestamp(e){const t=po(e);return new un(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pt.fromString(e);ke($D(r));const s=new Pl(r.get(1),r.get(3)),o=new Re(r.popFirst(5));return s.isEqual(t)||Mn(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class E4 extends BE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let _o=class extends um{constructor(e,t,r,s,o,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(V_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Lf=class extends _o{data(e={}){return super.data(e)}},Fl=class{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Lu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Lf(this._firestore,this._userDataWriter,r.key,r,new Lu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(h=>{const f=new Lf(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Lu(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const f=new Lf(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Lu(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,v=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:T4(h.type),doc:f,oldIndex:p,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function T4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}function aO(n,e){return n instanceof _o&&e instanceof _o?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Fl&&e instanceof Fl&&n._firestore===e._firestore&&Gx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(n){n=Ct(n,pn);const e=Ct(n.firestore,jn);return Mx(Fr(e),n._key).then(t=>zE(e,n,t))}class uc extends BE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}function S4(n){n=Ct(n,pn);const e=Ct(n.firestore,jn),t=Fr(e),r=new uc(e);return WF(t,n._key).then(s=>new _o(e,r,n._key,s,new Lu(s!==null&&s.hasLocalMutations,!0),n.converter))}function I4(n){n=Ct(n,pn);const e=Ct(n.firestore,jn);return Mx(Fr(e),n._key,{source:"server"}).then(t=>zE(e,n,t))}function oO(n){n=Ct(n,ci);const e=Ct(n.firestore,jn),t=Fr(e),r=new uc(e);return nO(n._query),Lx(t,n._query).then(s=>new Fl(e,r,n,s))}function R4(n){n=Ct(n,ci);const e=Ct(n.firestore,jn),t=Fr(e),r=new uc(e);return KF(t,n._query).then(s=>new Fl(e,r,n,s))}function C4(n){n=Ct(n,ci);const e=Ct(n.firestore,jn),t=Fr(e),r=new uc(e);return Lx(t,n._query,{source:"server"}).then(s=>new Fl(e,r,n,s))}function xI(n,e,t){n=Ct(n,pn);const r=Ct(n.firestore,jn),s=F_(n.converter,e,t);return jm(r,[k_(oc(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,ln.none())])}function OI(n,e,t,...r){n=Ct(n,pn);const s=Ct(n.firestore,jn),o=oc(s);let u;return u=typeof(e=He(e))=="string"||e instanceof Ul?VE(o,"updateDoc",n._key,e,t,r):kE(o,"updateDoc",n._key,e),jm(s,[u.toMutation(n._key,ln.exists(!0))])}function D4(n){return jm(Ct(n.firestore,jn),[new rd(n._key,ln.none())])}function x4(n,e){const t=Ct(n.firestore,jn),r=Qg(n),s=F_(n.converter,e);return jm(t,[k_(oc(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,ln.exists(!1))]).then(()=>r)}function lO(n,...e){var t,r,s;n=He(n);let o={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||Yb(e[u])||(o=e[u],u++);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Yb(e[u])){const b=e[u];e[u]=(t=b.next)===null||t===void 0?void 0:t.bind(b),e[u+1]=(r=b.error)===null||r===void 0?void 0:r.bind(b),e[u+2]=(s=b.complete)===null||s===void 0?void 0:s.bind(b)}let f,p,v;if(n instanceof pn)p=Ct(n.firestore,jn),v=td(n._key.path),f={next:b=>{e[u]&&e[u](zE(p,n,b))},error:e[u+1],complete:e[u+2]};else{const b=Ct(n,ci);p=Ct(b.firestore,jn),v=b._query;const A=new uc(p);f={next:D=>{e[u]&&e[u](new Fl(p,A,b,D))},error:e[u+1],complete:e[u+2]},nO(n._query)}return function(A,D,M,F){const V=new D_(F),H=new vE(D,V,M);return A.asyncQueue.enqueueAndForget(async()=>pE(await $h(A),H)),()=>{V.su(),A.asyncQueue.enqueueAndForget(async()=>gE(await $h(A),H))}}(Fr(p),v,h,f)}function O4(n,e){return YF(Fr(n=Ct(n,jn)),Yb(e)?e:{next:e})}function jm(n,e){return function(r,s){const o=new Rr;return r.asyncQueue.enqueueAndForget(async()=>EF(await IE(r),s,o)),o.promise}(Fr(n),e)}function zE(n,e,t){const r=t.docs.get(e._key),s=new uc(n);return new _o(n,s,e._key,r,new Lu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P4=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=oc(e)}set(e,t,r){this._verifyNotCommitted();const s=yl(e,this._firestore),o=F_(s.converter,t,r),u=k_(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(u.toMutation(s._key,ln.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const o=yl(e,this._firestore);let u;return u=typeof(t=He(t))=="string"||t instanceof Ul?VE(this._dataReader,"WriteBatch.update",o._key,t,r,s):kE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(u.toMutation(o._key,ln.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yl(e,this._firestore);return this._mutations=this._mutations.concat(new rd(t._key,ln.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new me(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function yl(n,e){if((n=He(n)).firestore!==e)throw new me(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=oc(e)}get(e){const t=yl(e,this._firestore),r=new E4(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||s.length!==1)return De();const o=s[0];if(o.isFoundDocument())return new um(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new um(this._firestore,r,t._key,null,t.converter);throw De()})}set(e,t,r){const s=yl(e,this._firestore),o=F_(s.converter,t,r),u=k_(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,u),this}update(e,t,r,...s){const o=yl(e,this._firestore);let u;return u=typeof(t=He(t))=="string"||t instanceof Ul?VE(this._dataReader,"Transaction.update",o._key,t,r,s):kE(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,u),this}delete(e){const t=yl(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V4=class extends k4{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yl(e,this._firestore),r=new uc(this._firestore);return super.get(e).then(s=>new _o(this._firestore,r,t._key,s._document,new Lu(!1,!1),t.converter))}};function M4(n,e,t){n=Ct(n,jn);const r=Object.assign(Object.assign({},N4),t);return function(o){if(o.maxAttempts<1)throw new me(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,h){const f=new Rr;return o.asyncQueue.enqueueAndForget(async()=>{const p=await HF(o);new zF(o.asyncQueue,p,h,u,f).Iu()}),f.promise}(Fr(n),s=>e(new V4(n,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(){return new Mm("deleteField")}function j4(){return new xE("serverTimestamp")}function U4(...n){return new OE("arrayUnion",n)}function F4(...n){return new NE("arrayRemove",n)}function B4(n){return new PE("increment",n)}(function(e,t=!0){(function(s){ed=s})(ql),Ol(new wa("firestore",(r,{instanceIdentifier:s,options:o})=>{const u=r.getProvider("app").getImmediate(),h=new jn(new L2(r.getProvider("auth-internal")),new F2(u,r.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pl(p.options.projectId,v)}(u,s),u);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),zs(lS,uS,e),zs(lS,uS,"esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,t){this._delegate=e,this.firebase=t,Kf(e,new wa("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Pw(this._delegate)))}_getService(e,t=Dl){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:t})}_removeServiceInstance(e,t=Dl){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Kf(this._delegate,e)}_addOrOverwriteComponent(e){bC(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},NI=new sc("app-compat","Firebase",q4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(n){const e={},t={__esModule:!0,initializeApp:o,app:s,registerVersion:zs,setLogLevel:SC,onLog:AC,apps:null,SDK_VERSION:ql,INTERNAL:{registerComponent:h,removeApp:r,useAsService:f,modularAPIs:N2}};t.default=t,Object.defineProperty(t,"apps",{get:u});function r(p){delete e[p]}function s(p){if(p=p||Dl,!ZA(e,p))throw NI.create("no-app",{appName:p});return e[p]}s.App=n;function o(p,v={}){const b=Nw(p,v);if(ZA(e,b.name))return e[b.name];const A=new n(b,t);return e[b.name]=A,A}function u(){return Object.keys(e).map(p=>e[p])}function h(p){const v=p.name,b=v.replace("-compat","");if(Ol(p)&&p.type==="PUBLIC"){const A=(D=s())=>{if(typeof D[b]!="function")throw NI.create("invalid-app-argument",{appName:v});return D[b]()};p.serviceProps!==void 0&&Og(A,p.serviceProps),t[b]=A,n.prototype[b]=function(...D){return this._getService.bind(this,v).apply(this,p.multipleInstances?D:[])}}return p.type==="PUBLIC"?t[b]:null}function f(p,v){return v==="serverAuth"?null:v}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(){const n=H4(z4);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:uO,extendNamespace:e,createSubscribe:pC,ErrorFactory:sc,deepExtend:Og});function e(t){Og(n,t)}return n}const $4=uO();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=new m_("@firebase/app-compat"),G4="@firebase/app-compat",W4="0.2.52";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(n){zs(G4,W4,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=uC();if(n.firebase!==void 0){PI.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&PI.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const ld=$4;K4();var Y4="firebase",Q4="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ld.registerVersion(Y4,Q4,"app-compat");function qE(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}const _f={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},uh={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function cO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Z4=X4,J4=cO,hO=new sc("auth","Firebase",cO());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=new m_("@firebase/auth");function eB(n,...e){Zg.logLevel<=lt.WARN&&Zg.warn(`Auth (${ql}): ${n}`,...e)}function Tg(n,...e){Zg.logLevel<=lt.ERROR&&Zg.error(`Auth (${ql}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(n,...e){throw $E(n,...e)}function Zn(n,...e){return $E(n,...e)}function HE(n,e,t){const r=Object.assign(Object.assign({},J4()),{[e]:t});return new sc("auth","Firebase",r).create(e,{appName:n.name})}function fr(n){return HE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ud(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Cr(n,"argument-error"),HE(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $E(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return hO.create(n,...e)}function _e(n,e,...t){if(!n)throw $E(e,...t)}function _a(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Tg(e),new Error(e)}function qs(n,e){n||_a(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function GE(){return kI()==="http:"||kI()==="https:"}function kI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GE()||dC()||"connection"in navigator)?navigator.onLine:!0}function nB(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t){this.shortDelay=e,this.longDelay=t,qs(t>e,"Short delay should be less than long delay!"),this.isMobile=cL()||Dw()}get(){return tB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(n,e){qs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_a("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_a("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_a("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB=new Um(3e4,6e4);function Rn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Cn(n,e,t,r,s={}){return fO(n,s,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const h=Jh(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:f},o);return dL()||(p.referrerPolicy="no-referrer"),dO.fetch()(mO(n,n.config.apiHost,t,h),p)})}async function fO(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},rB),e);try{const s=new aB(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Df(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Df(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Df(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Df(n,"user-disabled",u);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw HE(n,v,p);Cr(n,v)}}catch(s){if(s instanceof li)throw s;Cr(n,"network-request-failed",{message:String(s)})}}async function Ao(n,e,t,r,s={}){const o=await Cn(n,e,t,r,s);return"mfaPendingCredential"in o&&Cr(n,"multi-factor-auth-required",{_serverResponse:o}),o}function mO(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?WE(n.config,s):`${n.config.apiScheme}://${s}`}function sB(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zn(this.auth,"network-request-failed")),iB.get())})}}function Df(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Zn(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(n){return n!==void 0&&n.getResponse!==void 0}function MI(n){return n!==void 0&&n.enterprise!==void 0}class pO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return sB(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oB(n){return(await Cn(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function gO(n,e){return Cn(n,"GET","/v2/recaptchaConfig",Rn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lB(n,e){return Cn(n,"POST","/v1/accounts:delete",e)}async function uB(n,e){return Cn(n,"POST","/v1/accounts:update",e)}async function _O(n,e){return Cn(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cB(n,e=!1){const t=He(n),r=await t.getIdToken(e),s=B_(r);_e(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:jf(Xy(s.auth_time)),issuedAtTime:jf(Xy(s.iat)),expirationTime:jf(Xy(s.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Xy(n){return Number(n)*1e3}function B_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Tg("JWT malformed, contained fewer than 3 sections"),null;try{const s=Iw(t);return s?JSON.parse(s):(Tg("Failed to decode base64 JWT payload"),null)}catch(s){return Tg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function LI(n){const e=B_(n);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vo(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof li&&hB(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function hB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=jf(this.lastLoginAt),this.creationTime=jf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hm(n){var e;const t=n.auth,r=await n.getIdToken(),s=await vo(n,_O(t,{idToken:r}));_e(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?vO(o.providerUserInfo):[],h=mB(n.providerData,u),f=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),v=f?p:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Xb(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(n,b)}async function fB(n){const e=He(n);await hm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mB(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function vO(n){return n.map(e=>{var{providerId:t}=e,r=qE(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pB(n,e){const t=await fO(n,{},async()=>{const r=Jh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,u=mO(n,s,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",dO.fetch()(u,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function gB(n,e){return Cn(n,"POST","/v2/accounts:revokeToken",Rn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const t=LI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await pB(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,u=new Eh;return r&&(_e(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(_e(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(_e(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eh,this.toJSON())}_performRefresh(){return _a("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(n,e){_e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class lo{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=qE(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Xb(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await vo(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return cB(this,e)}reload(){return fB(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new lo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await hm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(fr(this.auth));const e=await this.getIdToken();return await vo(this,lB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,u,h,f,p,v;const b=(r=t.displayName)!==null&&r!==void 0?r:void 0,A=(s=t.email)!==null&&s!==void 0?s:void 0,D=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,M=(u=t.photoURL)!==null&&u!==void 0?u:void 0,F=(h=t.tenantId)!==null&&h!==void 0?h:void 0,V=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,H=(p=t.createdAt)!==null&&p!==void 0?p:void 0,J=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:se,emailVerified:ue,isAnonymous:de,providerData:be,stsTokenManager:U}=t;_e(se&&U,e,"internal-error");const P=Eh.fromJSON(this.name,U);_e(typeof se=="string",e,"internal-error"),gl(b,e.name),gl(A,e.name),_e(typeof ue=="boolean",e,"internal-error"),_e(typeof de=="boolean",e,"internal-error"),gl(D,e.name),gl(M,e.name),gl(F,e.name),gl(V,e.name),gl(H,e.name),gl(J,e.name);const N=new lo({uid:se,auth:e,email:A,emailVerified:ue,displayName:b,isAnonymous:de,photoURL:M,phoneNumber:D,tenantId:F,stsTokenManager:P,createdAt:H,lastLoginAt:J});return be&&Array.isArray(be)&&(N.providerData=be.map(k=>Object.assign({},k))),V&&(N._redirectEventId=V),N}static async _fromIdTokenResponse(e,t,r=!1){const s=new Eh;s.updateFromServerResponse(t);const o=new lo({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await hm(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];_e(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?vO(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new Eh;h.updateFromIdToken(r);const f=new lo({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Xb(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=new Map;function qi(n){qs(n instanceof Function,"Expected a class definition");let e=jI.get(n);return e?(qs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,jI.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yO.type="NONE";const Gh=yO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(n,e,t){return`firebase:${n}:${e}:${t}`}class Th{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=zu(this.userKey,s.apiKey,o),this.fullPersistenceKey=zu("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?lo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Th(qi(Gh),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||qi(Gh);const u=zu(r,e.config.apiKey,e.name);let h=null;for(const p of t)try{const v=await p._get(u);if(v){const b=lo._fromJSON(e,v);p!==o&&(h=b),o=p;break}}catch{}const f=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new Th(o,e,r):(o=f[0],h&&await o._set(u,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(u)}catch{}})),new Th(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(TO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AO(e))return"Blackberry";if(SO(e))return"Webos";if(wO(e))return"Safari";if((e.includes("chrome/")||EO(e))&&!e.includes("edge/"))return"Chrome";if(Fm(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bO(n=gn()){return/firefox\//i.test(n)}function wO(n=gn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function EO(n=gn()){return/crios\//i.test(n)}function TO(n=gn()){return/iemobile/i.test(n)}function Fm(n=gn()){return/android/i.test(n)}function AO(n=gn()){return/blackberry/i.test(n)}function SO(n=gn()){return/webos/i.test(n)}function Bm(n=gn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function _B(n=gn()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function vB(n=gn()){var e;return Bm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yB(){return fC()&&document.documentMode===10}function IO(n=gn()){return Bm(n)||Fm(n)||SO(n)||AO(n)||/windows phone/i.test(n)||TO(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(n,e=[]){let t;switch(n){case"Browser":t=UI(gn());break;case"Worker":t=`${UI(gn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ql}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((u,h)=>{try{const f=e(o);u(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wB(n,e={}){return Cn(n,"GET","/v2/passwordPolicy",Rn(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB=6;class TB{constructor(e){var t,r,s,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:EB,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,u,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new FI(this),this.idTokenSubscription=new FI(this),this.beforeStateQueue=new bB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qi(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Th.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await _O(this,{idToken:e}),r=await lo._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(an(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===h)&&(f!=null&&f.user)&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hm(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(fr(this));const t=e?He(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wB(this),t=new TB(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new sc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await gB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qi(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=await Th.create(this,[qi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&eB(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function _n(n){return He(n)}class FI{constructor(e){this.auth=e,this.observer=null,this.addObserver=pC(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SB(n){zm=n}function KE(n){return zm.loadJS(n)}function IB(){return zm.recaptchaV2Script}function RB(){return zm.recaptchaEnterpriseScript}function CB(){return zm.gapiScript}function CO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB=500,xB=6e4,lg=1e12;class OB{constructor(e){this.auth=e,this.counter=lg,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new kB(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||lg;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||lg;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||lg;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class NB{constructor(){this.enterprise=new PB}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class PB{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class kB{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;_e(s,"argument-error",{appName:t}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=VB(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},xB)},DB))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function VB(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const MB="recaptcha-enterprise",Uf="NO_RECAPTCHA";class DO{constructor(e){this.type=MB,this.auth=_n(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,h)=>{gO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new pO(f);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,u(p.siteKey)}}).catch(f=>{h(f)})})}function s(o,u,h){const f=window.grecaptcha;MI(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(p=>{u(p)}).catch(()=>{u(Uf)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NB().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(h=>{if(!t&&MI(window.grecaptcha))s(h,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=RB();f.length!==0&&(f+=h),KE(f).then(()=>{s(h,o,u)}).catch(p=>{u(p)})}}).catch(h=>{u(h)})})}}async function vf(n,e,t,r=!1,s=!1){const o=new DO(n);let u;if(s)u=Uf;else try{u=await o.verify(t)}catch{u=await o.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Il(n,e,t,r,s){var o,u;if(s==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await vf(n,e,t,t==="getOobCode");return r(n,h)}else return r(n,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await vf(n,e,t,t==="getOobCode");return r(n,f)}else return Promise.reject(h)});else if(s==="PHONE_PROVIDER")if(!((u=n._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("PHONE_PROVIDER")){const h=await vf(n,e,t);return r(n,h).catch(async f=>{var p;if(((p=n._getRecaptchaConfig())===null||p===void 0?void 0:p.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(f.code==="auth/missing-recaptcha-token"||f.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const v=await vf(n,e,t,!1,!0);return r(n,v)}return Promise.reject(f)})}else{const h=await vf(n,e,t,!1,!0);return r(n,h)}else return Promise.reject(s+" provider is not supported.")}async function LB(n){const e=_n(n),t=await gO(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new pO(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new DO(e).verify()}function jB(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(qi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function UB(n,e,t){const r=_n(n);_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(t!=null&&t.disableWarnings),o=xO(e),{host:u,port:h}=FB(e),f=h===null?"":`:${h}`,p={url:`${o}//${u}${f}/`},v=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){_e(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_e(Cl(p,r.config.emulator)&&Cl(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,s||BB()}function xO(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function FB(n){const e=xO(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:BI(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:BI(u)}}}function BI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function BB(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _a("not implemented")}_getIdTokenResponse(e){return _a("not implemented")}_linkToIdToken(e,t){return _a("not implemented")}_getReauthenticationResolver(e){return _a("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OO(n,e){return Cn(n,"POST","/v1/accounts:resetPassword",Rn(n,e))}async function zB(n,e){return Cn(n,"POST","/v1/accounts:update",e)}async function qB(n,e){return Cn(n,"POST","/v1/accounts:signUp",e)}async function HB(n,e){return Cn(n,"POST","/v1/accounts:update",Rn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $B(n,e){return Ao(n,"POST","/v1/accounts:signInWithPassword",Rn(n,e))}async function z_(n,e){return Cn(n,"POST","/v1/accounts:sendOobCode",Rn(n,e))}async function GB(n,e){return z_(n,e)}async function WB(n,e){return z_(n,e)}async function KB(n,e){return z_(n,e)}async function YB(n,e){return z_(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QB(n,e){return Ao(n,"POST","/v1/accounts:signInWithEmailLink",Rn(n,e))}async function XB(n,e){return Ao(n,"POST","/v1/accounts:signInWithEmailLink",Rn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm extends cd{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new dm(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new dm(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Il(e,t,"signInWithPassword",$B,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return QB(e,{email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Il(e,r,"signUpPassword",qB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return XB(e,{idToken:t,email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(n,e){return Ao(n,"POST","/v1/accounts:signInWithIdp",Rn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB="http://localhost";class Sa extends cd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Cr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=qE(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new Sa(r,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return fo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,fo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fo(e,t)}buildRequest(){const e={requestUri:ZB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Jh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(n,e){return Cn(n,"POST","/v1/accounts:sendVerificationCode",Rn(n,e))}async function JB(n,e){return Ao(n,"POST","/v1/accounts:signInWithPhoneNumber",Rn(n,e))}async function ez(n,e){const t=await Ao(n,"POST","/v1/accounts:signInWithPhoneNumber",Rn(n,e));if(t.temporaryProof)throw Df(n,"account-exists-with-different-credential",t);return t}const tz={USER_NOT_FOUND:"user-not-found"};async function nz(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Ao(n,"POST","/v1/accounts:signInWithPhoneNumber",Rn(n,t),tz)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu extends cd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new qu({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new qu({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return JB(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return ez(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return nz(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:s}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:s,temporaryProof:o}=e;return!r&&!t&&!s&&!o?null:new qu({verificationId:t,verificationCode:r,phoneNumber:s,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iz(n){const e=vh(Af(n)).link,t=e?vh(Af(e)).deep_link_id:null,r=vh(Af(n)).deep_link_id;return(r?vh(Af(r)).link:null)||r||t||e||n}class q_{constructor(e){var t,r,s,o,u,h;const f=vh(Af(e)),p=(t=f.apiKey)!==null&&t!==void 0?t:null,v=(r=f.oobCode)!==null&&r!==void 0?r:null,b=rz((s=f.mode)!==null&&s!==void 0?s:null);_e(p&&v&&b,"argument-error"),this.apiKey=p,this.operation=b,this.code=v,this.continueUrl=(o=f.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=f.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=iz(e);try{return new q_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(){this.providerId=Yl.PROVIDER_ID}static credential(e,t){return dm._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=q_.parseLink(t);return _e(r,"argument-error"),dm._fromEmailAndCode(e,r.code,r.tenantId)}}Yl.PROVIDER_ID="password";Yl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd extends So{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ah extends hd{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return _e("providerId"in t&&"signInMethod"in t,"argument-error"),Sa._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return _e(e.idToken||e.accessToken,"argument-error"),Sa._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ah.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ah.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:o,nonce:u,providerId:h}=e;if(!r&&!s&&!t&&!o||!h)return null;try{return new Ah(h)._credential({idToken:t,accessToken:r,nonce:u,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends hd{constructor(){super("facebook.com")}static credential(e){return Sa._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.FACEBOOK_SIGN_IN_METHOD="facebook.com";ha.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends hd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Sa._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return da.credential(t,r)}catch{return null}}}da.GOOGLE_SIGN_IN_METHOD="google.com";da.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends hd{constructor(){super("github.com")}static credential(e){return Sa._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fa.credential(e.oauthAccessToken)}catch{return null}}}fa.GITHUB_SIGN_IN_METHOD="github.com";fa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sz="http://localhost";class Wh extends cd{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return fo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,fo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fo(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,pendingToken:o}=t;return!r||!s||!o||r!==s?null:new Wh(r,o)}static _create(e,t){return new Wh(e,t)}buildRequest(){return{requestUri:sz,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const az="saml.";class Jg extends So{constructor(e){_e(e.startsWith(az),"argument-error"),super(e)}static credentialFromResult(e){return Jg.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Jg.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Wh.fromJSON(e);return _e(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return Wh._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends hd{constructor(){super("twitter.com")}static credential(e,t){return Sa._fromParams({providerId:ma.PROVIDER_ID,signInMethod:ma.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ma.credentialFromTaggedObject(e)}static credentialFromError(e){return ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ma.credential(t,r)}catch{return null}}}ma.TWITTER_SIGN_IN_METHOD="twitter.com";ma.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(n,e){return Ao(n,"POST","/v1/accounts:signUp",Rn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await lo._fromIdTokenResponse(e,r,s),u=qI(r);return new gs({user:o,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=qI(r);return new gs({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function qI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oz(n){var e;if(an(n.app))return Promise.reject(fr(n));const t=_n(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new gs({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await NO(t,{returnSecureToken:!0}),s=await gs._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_ extends li{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,e_.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new e_(e,t,r,s)}}function PO(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?e_._fromErrorAndOperation(n,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lz(n,e){const t=He(n);await H_(!0,t,e);const{providerUserInfo:r}=await uB(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),s=kO(r||[]);return t.providerData=t.providerData.filter(o=>s.has(o.providerId)),s.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function YE(n,e,t=!1){const r=await vo(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return gs._forOperation(n,"link",r)}async function H_(n,e,t){await hm(e);const r=kO(e.providerData),s=n===!1?"provider-already-linked":"no-such-provider";_e(r.has(t)===n,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VO(n,e,t=!1){const{auth:r}=n;if(an(r.app))return Promise.reject(fr(r));const s="reauthenticate";try{const o=await vo(n,PO(r,s,e,n),t);_e(o.idToken,r,"internal-error");const u=B_(o.idToken);_e(u,r,"internal-error");const{sub:h}=u;return _e(n.uid===h,r,"user-mismatch"),gs._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Cr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MO(n,e,t=!1){if(an(n.app))return Promise.reject(fr(n));const r="signIn",s=await PO(n,r,e),o=await gs._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function $_(n,e){return MO(_n(n),e)}async function LO(n,e){const t=He(n);return await H_(!1,t,e.providerId),YE(t,e)}async function jO(n,e){return VO(He(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uz(n,e){return Ao(n,"POST","/v1/accounts:signInWithCustomToken",Rn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cz(n,e){if(an(n.app))return Promise.reject(fr(n));const t=_n(n),r=await uz(t,{token:e,returnSecureToken:!0}),s=await gs._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?QE._fromServerResponse(e,t):"totpInfo"in t?XE._fromServerResponse(e,t):Cr(e,"internal-error")}}class QE extends qm{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new QE(t)}}class XE extends qm{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new XE(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(n,e,t){var r;_e(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),_e(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),_e(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(_e(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(_e(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZE(n){const e=_n(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hz(n,e,t){const r=_n(n),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&G_(r,s,t),await Il(r,s,"getOobCode",WB,"EMAIL_PASSWORD_PROVIDER")}async function dz(n,e,t){await OO(He(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ZE(n),r})}async function fz(n,e){await HB(He(n),{oobCode:e})}async function UO(n,e){const t=He(n),r=await OO(t,{oobCode:e}),s=r.requestType;switch(_e(s,t,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":_e(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":_e(r.mfaInfo,t,"internal-error");default:_e(r.email,t,"internal-error")}let o=null;return r.mfaInfo&&(o=qm._fromServerResponse(_n(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}}async function mz(n,e){const{data:t}=await UO(He(n),e);return t.email}async function pz(n,e,t){if(an(n.app))return Promise.reject(fr(n));const r=_n(n),u=await Il(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",NO,"EMAIL_PASSWORD_PROVIDER").catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&ZE(n),f}),h=await gs._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(h.user),h}function gz(n,e,t){return an(n.app)?Promise.reject(fr(n)):$_(He(n),Yl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ZE(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _z(n,e,t){const r=_n(n),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(u,h){_e(h.handleCodeInApp,r,"argument-error"),h&&G_(r,u,h)}o(s,t),await Il(r,s,"getOobCode",KB,"EMAIL_PASSWORD_PROVIDER")}function vz(n,e){const t=q_.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function yz(n,e,t){if(an(n.app))return Promise.reject(fr(n));const r=He(n),s=Yl.credentialWithLink(e,t||cm());return _e(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),$_(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bz(n,e){return Cn(n,"POST","/v1/accounts:createAuthUri",Rn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wz(n,e){const t=GE()?cm():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:s}=await bz(He(n),r);return s||[]}async function Ez(n,e){const t=He(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&G_(t.auth,s,e);const{email:o}=await GB(t.auth,s);o!==n.email&&await n.reload()}async function Tz(n,e,t){const r=He(n),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&G_(r.auth,o,t);const{email:u}=await YB(r.auth,o);u!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Az(n,e){return Cn(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sz(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=He(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await vo(r,Az(r.auth,o));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function Iz(n,e){const t=He(n);return an(t.auth.app)?Promise.reject(fr(t.auth)):FO(t,e,null)}function Rz(n,e){return FO(He(n),null,e)}async function FO(n,e,t){const{auth:r}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);const u=await vo(n,zB(r,o));await n._updateTokensIfNecessary(u,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cz(n){var e,t;if(!n)return null;const{providerId:r}=n,s=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},o=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const u=(t=(e=B_(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(u){const h=u!=="anonymous"&&u!=="custom"?u:null;return new Sh(o,h)}}if(!r)return null;switch(r){case"facebook.com":return new Dz(o,s);case"github.com":return new xz(o,s);case"google.com":return new Oz(o,s);case"twitter.com":return new Nz(o,s,n.screenName||null);case"custom":case"anonymous":return new Sh(o,null);default:return new Sh(o,r,s)}}class Sh{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class BO extends Sh{constructor(e,t,r,s){super(e,t,r),this.username=s}}class Dz extends Sh{constructor(e,t){super(e,"facebook.com",t)}}class xz extends BO{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class Oz extends Sh{constructor(e,t){super(e,"google.com",t)}}class Nz extends BO{constructor(e,t,r){super(e,"twitter.com",t,r)}}function Pz(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:Cz(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new ju("enroll",e,t)}static _fromMfaPendingCredential(e){return new ju("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return ju._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return ju._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=_n(e),s=t.customData._serverResponse,o=(s.mfaInfo||[]).map(h=>qm._fromServerResponse(r,h));_e(s.mfaPendingCredential,r,"internal-error");const u=ju._fromMfaPendingCredential(s.mfaPendingCredential);return new JE(u,o,async h=>{const f=await h._process(r,u);delete s.mfaInfo,delete s.mfaPendingCredential;const p=Object.assign(Object.assign({},s),{idToken:f.idToken,refreshToken:f.refreshToken});switch(t.operationType){case"signIn":const v=await gs._fromIdTokenResponse(r,t.operationType,p);return await r._updateCurrentUser(v.user),v;case"reauthenticate":return _e(t.user,r,"internal-error"),gs._forOperation(t.user,t.operationType,p);default:Cr(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function kz(n,e){var t;const r=He(n),s=e;return _e(e.customData.operationType,r,"argument-error"),_e((t=s.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),JE._fromError(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(n,e){return Cn(n,"POST","/v2/accounts/mfaEnrollment:start",Rn(n,e))}function Vz(n,e){return Cn(n,"POST","/v2/accounts/mfaEnrollment:finalize",Rn(n,e))}function Mz(n,e){return Cn(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Rn(n,e))}class eT{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>qm._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new eT(e)}async getSession(){return ju._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,s=await this.getSession(),o=await vo(this.user,r._process(this.user.auth,s,t));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const s=await vo(this.user,Mz(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==t),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const Zy=new WeakMap;function Lz(n){const e=He(n);return Zy.has(e)||Zy.set(e,eT._fromUser(e)),Zy.get(e)}const t_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(t_,"1"),this.storage.removeItem(t_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jz=1e3,Uz=10;class qO extends zO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);yB()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Uz):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},jz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}qO.type="LOCAL";const tT=qO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO extends zO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}HO.type="SESSION";const Zu=HO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fz(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new W_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(u).map(async p=>p(t.origin,o)),f=await Fz(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}W_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((h,f)=>{const p=Hm("",20);s.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(b){const A=b;if(A.data.eventId===p)switch(A.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(A.data.response);break;default:clearTimeout(v),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(){return window}function zz(n){$n().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(){return typeof $n().WorkerGlobalScope<"u"&&typeof $n().importScripts=="function"}async function qz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Hz(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function $z(){return nT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O="firebaseLocalStorageDb",Gz=1,n_="firebaseLocalStorage",GO="fbase_key";class $m{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function K_(n,e){return n.transaction([n_],e?"readwrite":"readonly").objectStore(n_)}function Wz(){const n=indexedDB.deleteDatabase($O);return new $m(n).toPromise()}function Zb(){const n=indexedDB.open($O,Gz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(n_,{keyPath:GO})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(n_)?e(r):(r.close(),await Wz(),e(await Zb()))})})}async function $I(n,e,t){const r=K_(n,!0).put({[GO]:e,value:t});return new $m(r).toPromise()}async function Kz(n,e){const t=K_(n,!1).get(e),r=await new $m(t).toPromise();return r===void 0?null:r.value}function GI(n,e){const t=K_(n,!0).delete(e);return new $m(t).toPromise()}const Yz=800,Qz=3;class WO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zb(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Qz)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=W_._getInstance($z()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await qz(),!this.activeServiceWorker)return;this.sender=new Bz(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Hz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zb();return await $I(e,t_,"1"),await GI(e,t_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>$I(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Kz(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>GI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=K_(s,!1).getAll();return new $m(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Yz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WO.type="LOCAL";const fm=WO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(n,e){return Cn(n,"POST","/v2/accounts/mfaSignIn:start",Rn(n,e))}function Xz(n,e){return Cn(n,"POST","/v2/accounts/mfaSignIn:finalize",Rn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=CO("rcb"),Zz=new Um(3e4,6e4);class Jz{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=$n().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return _e(eq(t),e,"argument-error"),this.shouldResolveImmediately(t)&&VI($n().grecaptcha)?Promise.resolve($n().grecaptcha):new Promise((r,s)=>{const o=$n().setTimeout(()=>{s(Zn(e,"network-request-failed"))},Zz.get());$n()[Jy]=()=>{$n().clearTimeout(o),delete $n()[Jy];const h=$n().grecaptcha;if(!h||!VI(h)){s(Zn(e,"internal-error"));return}const f=h.render;h.render=(p,v)=>{const b=f(p,v);return this.counter++,b},this.hostLanguage=t,r(h)};const u=`${IB()}?${Jh({onload:Jy,render:"explicit",hl:t})}`;KE(u).catch(()=>{clearTimeout(o),s(Zn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=$n().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function eq(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class tq{async load(e){return new OB(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="recaptcha",nq={theme:"light",type:"image"};let rq=class{constructor(e,t,r=Object.assign({},nq)){this.parameters=r,this.type=Ff,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_n(e),this.isInvisible=this.parameters.size==="invisible",_e(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof t=="string"?document.getElementById(t):t;_e(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tq:new Jz,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(s=>{const o=u=>{u&&(this.tokenChangeListeners.delete(o),s(u))};this.tokenChangeListeners.add(o),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){_e(!this.parameters.sitekey,this.auth,"argument-error"),_e(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_e(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=$n()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){_e(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){_e(GE()&&!nT(),this.auth,"internal-error"),await iq(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await oB(this.auth);_e(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return _e(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function iq(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=qu._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function sq(n,e,t){if(an(n.app))return Promise.reject(fr(n));const r=_n(n),s=await Y_(r,e,He(t));return new rT(s,o=>$_(r,o))}async function aq(n,e,t){const r=He(n);await H_(!1,r,"phone");const s=await Y_(r.auth,e,He(t));return new rT(s,o=>LO(r,o))}async function oq(n,e,t){const r=He(n);if(an(r.auth.app))return Promise.reject(fr(r.auth));const s=await Y_(r.auth,e,He(t));return new rT(s,o=>jO(r,o))}async function Y_(n,e,t){var r;if(!n._getRecaptchaConfig())try{await LB(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s){_e(o.type==="enroll",n,"internal-error");const u={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Il(n,u,"mfaSmsEnrollment",async(v,b)=>{if(b.phoneEnrollmentInfo.captchaResponse===Uf){_e((t==null?void 0:t.type)===Ff,v,"argument-error");const A=await eb(v,b,t);return HI(v,A)}return HI(v,b)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).phoneSessionInfo.sessionInfo}else{_e(o.type==="signin",n,"internal-error");const u=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;_e(u,n,"missing-multi-factor-info");const h={mfaPendingCredential:o.credential,mfaEnrollmentId:u,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Il(n,h,"mfaSmsSignIn",async(b,A)=>{if(A.phoneSignInInfo.captchaResponse===Uf){_e((t==null?void 0:t.type)===Ff,b,"argument-error");const D=await eb(b,A,t);return WI(b,D)}return WI(b,A)},"PHONE_PROVIDER").catch(b=>Promise.reject(b))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Il(n,o,"sendVerificationCode",async(p,v)=>{if(v.captchaResponse===Uf){_e((t==null?void 0:t.type)===Ff,p,"argument-error");const b=await eb(p,v,t);return zI(p,b)}return zI(p,v)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).sessionInfo}}finally{t==null||t._reset()}}async function lq(n,e){const t=He(n);if(an(t.auth.app))return Promise.reject(fr(t.auth));await YE(t,e)}async function eb(n,e,t){_e(t.type===Ff,n,"argument-error");const r=await t.verify();_e(typeof r=="string",n,"argument-error");const s=Object.assign({},e);if("phoneEnrollmentInfo"in s){const o=s.phoneEnrollmentInfo.phoneNumber,u=s.phoneEnrollmentInfo.captchaResponse,h=s.phoneEnrollmentInfo.clientType,f=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r,captchaResponse:u,clientType:h,recaptchaVersion:f}}),s}else if("phoneSignInInfo"in s){const o=s.phoneSignInInfo.captchaResponse,u=s.phoneSignInInfo.clientType,h=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:o,clientType:u,recaptchaVersion:h}}),s}else return Object.assign(s,{recaptchaToken:r}),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju=class Ag{constructor(e){this.providerId=Ag.PROVIDER_ID,this.auth=_n(e)}verifyPhoneNumber(e,t){return Y_(this.auth,e,He(t))}static credential(e,t){return qu._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ag.credentialFromTaggedObject(t)}static credentialFromError(e){return Ag.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?qu._fromTokenResponse(t,r):null}};Ju.PROVIDER_ID="phone";Ju.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(n,e){return e?qi(e):(_e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT extends cd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uq(n){return MO(n.auth,new iT(n),n.bypassAuthState)}function cq(n){const{auth:e,user:t}=n;return _e(t,e,"internal-error"),VO(t,new iT(n),n.bypassAuthState)}async function hq(n){const{auth:e,user:t}=n;return _e(t,e,"internal-error"),YE(t,new iT(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uq;case"linkViaPopup":case"linkViaRedirect":return hq;case"reauthViaPopup":case"reauthViaRedirect":return cq;default:Cr(this.auth,"internal-error")}}resolve(e){qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dq=new Um(2e3,1e4);async function fq(n,e,t){if(an(n.app))return Promise.reject(Zn(n,"operation-not-supported-in-this-environment"));const r=_n(n);ud(n,e,So);const s=cc(r,t);return new uo(r,"signInViaPopup",e,s).executeNotNull()}async function mq(n,e,t){const r=He(n);if(an(r.auth.app))return Promise.reject(Zn(r.auth,"operation-not-supported-in-this-environment"));ud(r.auth,e,So);const s=cc(r.auth,t);return new uo(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function pq(n,e,t){const r=He(n);ud(r.auth,e,So);const s=cc(r.auth,t);return new uo(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class uo extends KO{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,uo.currentPopupAction&&uo.currentPopupAction.cancel(),uo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){qs(this.filter.length===1,"Popup operations only handle one event");const e=Hm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,uo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dq.get())};e()}}uo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gq="pendingRedirect",Bf=new Map;class _q extends KO{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Bf.get(this.auth._key());if(!e){try{const r=await vq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Bf.set(this.auth._key(),e)}return this.bypassAuthState||Bf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vq(n,e){const t=QO(e),r=YO(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}async function sT(n,e){return YO(n)._set(QO(e),"true")}function yq(){Bf.clear()}function aT(n,e){Bf.set(n._key(),e)}function YO(n){return qi(n._redirectPersistence)}function QO(n){return zu(gq,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bq(n,e,t){return wq(n,e,t)}async function wq(n,e,t){if(an(n.app))return Promise.reject(fr(n));const r=_n(n);ud(n,e,So),await r._initializationPromise;const s=cc(r,t);return await sT(s,r),s._openRedirect(r,e,"signInViaRedirect")}function Eq(n,e,t){return Tq(n,e,t)}async function Tq(n,e,t){const r=He(n);if(ud(r.auth,e,So),an(r.auth.app))return Promise.reject(fr(r.auth));await r.auth._initializationPromise;const s=cc(r.auth,t);await sT(s,r.auth);const o=await XO(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",o)}function Aq(n,e,t){return Sq(n,e,t)}async function Sq(n,e,t){const r=He(n);ud(r.auth,e,So),await r.auth._initializationPromise;const s=cc(r.auth,t);await H_(!1,r,e.providerId),await sT(s,r.auth);const o=await XO(r);return s._openRedirect(r.auth,e,"linkViaRedirect",o)}async function Iq(n,e){return await _n(n)._initializationPromise,Q_(n,e,!1)}async function Q_(n,e,t=!1){if(an(n.app))return Promise.reject(fr(n));const r=_n(n),s=cc(r,e),u=await new _q(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}async function XO(n){const e=Hm(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rq=10*60*1e3;class ZO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Cq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!JO(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Zn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Rq&&this.cachedEventUids.clear(),this.cachedEventUids.has(KI(e))}saveEventToCache(e){this.cachedEventUids.add(KI(e)),this.lastProcessedEventTime=Date.now()}}function KI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function JO({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Cq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JO(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(n,e={}){return Cn(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xq=/^https?/;async function Oq(n){if(n.config.emulator)return;const{authorizedDomains:e}=await eN(n);for(const t of e)try{if(Nq(t))return}catch{}Cr(n,"unauthorized-domain")}function Nq(n){const e=cm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!xq.test(t))return!1;if(Dq.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pq=new Um(3e4,6e4);function YI(){const n=$n().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function kq(n){return new Promise((e,t)=>{var r,s,o;function u(){YI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{YI(),t(Zn(n,"network-request-failed"))},timeout:Pq.get()})}if(!((s=(r=$n().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=$n().gapi)===null||o===void 0)&&o.load)u();else{const h=CO("iframefcb");return $n()[h]=()=>{gapi.load?u():t(Zn(n,"network-request-failed"))},KE(`${CB()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw Sg=null,e})}let Sg=null;function Vq(n){return Sg=Sg||kq(n),Sg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mq=new Um(5e3,15e3),Lq="__/auth/iframe",jq="emulator/auth/iframe",Uq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bq(n){const e=n.config;_e(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?WE(e,jq):`https://${n.config.authDomain}/${Lq}`,r={apiKey:e.apiKey,appName:n.name,v:ql},s=Fq.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Jh(r).slice(1)}`}async function zq(n){const e=await Vq(n),t=$n().gapi;return _e(t,n,"internal-error"),e.open({where:document.body,url:Bq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uq,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const u=Zn(n,"network-request-failed"),h=$n().setTimeout(()=>{o(u)},Mq.get());function f(){$n().clearTimeout(h),s(r)}r.ping(f).then(f,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Hq=500,$q=600,Gq="_blank",Wq="http://localhost";class QI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Kq(n,e,t,r=Hq,s=$q){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},qq),{width:r.toString(),height:s.toString(),top:o,left:u}),p=gn().toLowerCase();t&&(h=EO(p)?Gq:t),bO(p)&&(e=e||Wq,f.scrollbars="yes");const v=Object.entries(f).reduce((A,[D,M])=>`${A}${D}=${M},`,"");if(vB(p)&&h!=="_self")return Yq(e||"",h),new QI(null);const b=window.open(e||"",h,v);_e(b,n,"popup-blocked");try{b.focus()}catch{}return new QI(b)}function Yq(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq="__/auth/handler",Xq="emulator/auth/handler",Zq=encodeURIComponent("fac");async function Jb(n,e,t,r,s,o){_e(n.config.authDomain,n,"auth-domain-config-required"),_e(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ql,eventId:s};if(e instanceof So){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",_L(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries(o||{}))u[v]=b}if(e instanceof hd){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const f=await n._getAppCheckToken(),p=f?`#${Zq}=${encodeURIComponent(f)}`:"";return`${Jq(n)}?${Jh(h).slice(1)}${p}`}function Jq({config:n}){return n.emulator?WE(n,Xq):`https://${n.authDomain}/${Qq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="webStorageSupport";class e9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zu,this._completeRedirectFn=Q_,this._overrideRedirectResult=aT}async _openPopup(e,t,r,s){var o;qs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await Jb(e,t,r,cm(),s);return Kq(e,u,Hm())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await Jb(e,t,r,cm(),s);return zz(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(qs(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await zq(e),r=new ZO(e);return t.register("authEvent",s=>(_e(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tb,{type:tb},s=>{var o;const u=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[tb];u!==void 0&&t(!!u),Cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Oq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return IO()||wO()||Bm()}}const t9=e9;class n9{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return _a("unexpected MultiFactorSessionType")}}}class oT extends n9{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new oT(e)}_finalizeEnroll(e,t,r){return Vz(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Xz(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class tN{constructor(){}static assertion(e){return oT._fromCredential(e)}}tN.FACTOR_ID="phone";var XI="@firebase/auth",ZI="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function s9(n){Ol(new wa("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;_e(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RO(n)},p=new AB(r,s,o,f);return jB(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ol(new wa("auth-internal",e=>{const t=_n(e.getProvider("auth").getImmediate());return(r=>new r9(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),zs(XI,ZI,i9(n)),zs(XI,ZI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=5*60;oL("authIdTokenMaxAge");function o9(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}SB({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Zn("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",o9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});s9("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9=2e3;async function u9(n,e,t){var r;const{BuildInfo:s}=ec();qs(e.sessionId,"AuthEvent did not contain a session ID");const o=await m9(e.sessionId),u={};return Bm()?u.ibi=s.packageName:Fm()?u.apn=s.packageName:Cr(n,"operation-not-supported-in-this-environment"),s.displayName&&(u.appDisplayName=s.displayName),u.sessionId=o,Jb(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,u)}async function c9(n){const{BuildInfo:e}=ec(),t={};Bm()?t.iosBundleId=e.packageName:Fm()?t.androidPackageName=e.packageName:Cr(n,"operation-not-supported-in-this-environment"),await eN(n,t)}function h9(n){const{cordova:e}=ec();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let s=null;r?e.plugins.browsertab.openUrl(n):s=e.InAppBrowser.open(n,_B()?"_blank":"_system","location=yes"),t(s)})})}async function d9(n,e,t){const{cordova:r}=ec();let s=()=>{};try{await new Promise((o,u)=>{let h=null;function f(){var b;o();const A=(b=r.plugins.browsertab)===null||b===void 0?void 0:b.close;typeof A=="function"&&A(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function p(){h||(h=window.setTimeout(()=>{u(Zn(n,"redirect-cancelled-by-user"))},l9))}function v(){(document==null?void 0:document.visibilityState)==="visible"&&p()}e.addPassiveListener(f),document.addEventListener("resume",p,!1),Fm()&&document.addEventListener("visibilitychange",v,!1),s=()=>{e.removePassiveListener(f),document.removeEventListener("resume",p,!1),document.removeEventListener("visibilitychange",v,!1),h&&window.clearTimeout(h)}})}finally{s()}}function f9(n){var e,t,r,s,o,u,h,f,p,v;const b=ec();_e(typeof((e=b==null?void 0:b.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),_e(typeof((t=b==null?void 0:b.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),_e(typeof((o=(s=(r=b==null?void 0:b.cordova)===null||r===void 0?void 0:r.plugins)===null||s===void 0?void 0:s.browsertab)===null||o===void 0?void 0:o.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_e(typeof((f=(h=(u=b==null?void 0:b.cordova)===null||u===void 0?void 0:u.plugins)===null||h===void 0?void 0:h.browsertab)===null||f===void 0?void 0:f.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_e(typeof((v=(p=b==null?void 0:b.cordova)===null||p===void 0?void 0:p.InAppBrowser)===null||v===void 0?void 0:v.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function m9(n){const e=p9(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(s=>s.toString(16).padStart(2,"0")).join("")}function p9(n){if(qs(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9=20;class _9 extends ZO{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function v9(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:w9(),postBody:null,tenantId:n.tenantId,error:Zn(n,"no-auth-event")}}function y9(n,e){return ew()._set(tw(n),e)}async function JI(n){const e=await ew()._get(tw(n));return e&&await ew()._remove(tw(n)),e}function b9(n,e){var t,r;const s=T9(e);if(s.includes("/__/auth/callback")){const o=Ig(s),u=o.firebaseError?E9(decodeURIComponent(o.firebaseError)):null,h=(r=(t=u==null?void 0:u.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],f=h?Zn(h):null;return f?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:f,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:s,postBody:null}}return null}function w9(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<g9;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function ew(){return qi(tT)}function tw(n){return zu("authEvent",n.config.apiKey,n.name)}function E9(n){try{return JSON.parse(n)}catch{return null}}function T9(n){const e=Ig(n),t=e.link?decodeURIComponent(e.link):void 0,r=Ig(t).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Ig(s).link||s||r||t||n}function Ig(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return vh(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9=500;class S9{constructor(){this._redirectPersistence=Zu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Q_,this._overrideRedirectResult=aT}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new _9(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Cr(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,s){f9(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),yq(),await this._originValidation(e);const u=v9(e,r,s);await y9(e,u);const h=await u9(e,u,t),f=await h9(h);return d9(e,o,f)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=c9(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:s,BuildInfo:o}=ec(),u=setTimeout(async()=>{await JI(e),t.onEvent(eR())},A9),h=async v=>{clearTimeout(u);const b=await JI(e);let A=null;b&&(v!=null&&v.url)&&(A=b9(b,v.url)),t.onEvent(A||eR())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,h);const f=s,p=`${o.packageName.toLowerCase()}://`;ec().handleOpenURL=async v=>{if(v.toLowerCase().startsWith(p)&&h({url:v}),typeof f=="function")try{f(v)}catch(b){console.error(b)}}}}const I9=S9;function eR(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Zn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(n,e){_n(n)._logFramework(e)}var C9="@firebase/auth-compat",D9="0.5.19";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9=1e3;function zf(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function O9(){return zf()==="http:"||zf()==="https:"}function nN(n=gn()){return!!((zf()==="file:"||zf()==="ionic:"||zf()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function N9(){return Dw()||Cw()}function P9(){return fC()&&(document==null?void 0:document.documentMode)===11}function k9(n=gn()){return/Edge\/\d+/.test(n)}function V9(n=gn()){return P9()||k9(n)}function rN(){try{const n=self.localStorage,e=Hm();if(n)return n.setItem(e,"1"),n.removeItem(e),V9()?Wf():!0}catch{return lT()&&Wf()}return!1}function lT(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function nb(){return(O9()||dC()||nN())&&!N9()&&rN()&&!lT()}function iN(){return nN()&&typeof document<"u"}async function M9(){return iN()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},x9);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function L9(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi={LOCAL:"local",NONE:"none",SESSION:"session"},yf=_e,sN="persistence";function j9(n,e){if(yf(Object.values(Bi).includes(e),n,"invalid-persistence-type"),Dw()){yf(e!==Bi.SESSION,n,"unsupported-persistence-type");return}if(Cw()){yf(e===Bi.NONE,n,"unsupported-persistence-type");return}if(lT()){yf(e===Bi.NONE||e===Bi.LOCAL&&Wf(),n,"unsupported-persistence-type");return}yf(e===Bi.NONE||rN(),n,"unsupported-persistence-type")}async function nw(n){await n._initializationPromise;const e=aN(),t=zu(sN,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function U9(n,e){const t=aN();if(!t)return[];const r=zu(sN,n,e);switch(t.getItem(r)){case Bi.NONE:return[Gh];case Bi.LOCAL:return[fm,Zu];case Bi.SESSION:return[Zu];default:return[]}}function aN(){var n;try{return((n=L9())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9=_e;class bl{constructor(){this.browserResolver=qi(t9),this.cordovaResolver=qi(I9),this.underlyingResolver=null,this._redirectPersistence=Zu,this._completeRedirectFn=Q_,this._overrideRedirectResult=aT}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,s)}async _openRedirect(e,t,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,s)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return iN()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return F9(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await M9();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(n){return n.unwrap()}function B9(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(n){return lN(n)}function q9(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const s=e;s.resolver=new H9(n,kz(n,e))}else if(r){const s=lN(e),o=e;s&&(o.credential=s,o.tenantId=r.tenantId||void 0,o.email=r.email||void 0,o.phoneNumber=r.phoneNumber||void 0)}}function lN(n){const{_tokenResponse:e}=n instanceof li?n.customData:n;if(!e)return null;if(!(n instanceof li)&&"temporaryProof"in e&&"phoneNumber"in e)return Ju.credentialFromResult(n);const t=e.providerId;if(!t||t===_f.PASSWORD)return null;let r;switch(t){case _f.GOOGLE:r=da;break;case _f.FACEBOOK:r=ha;break;case _f.GITHUB:r=fa;break;case _f.TWITTER:r=ma;break;default:const{oauthIdToken:s,oauthAccessToken:o,oauthTokenSecret:u,pendingToken:h,nonce:f}=e;return!o&&!u&&!s&&!h?null:h?t.startsWith("saml.")?Wh._create(t,h):Sa._fromParams({providerId:t,signInMethod:t,pendingToken:h,idToken:s,accessToken:o}):new Ah(t).credential({idToken:s,accessToken:o,rawNonce:f})}return n instanceof li?r.credentialFromError(n):r.credentialFromResult(n)}function wi(n,e){return e.catch(t=>{throw t instanceof li&&q9(n,t),t}).then(t=>{const r=t.operationType,s=t.user;return{operationType:r,credential:z9(t),additionalUserInfo:Pz(t),user:co.getOrCreate(s)}})}async function rw(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>wi(n,t.confirm(r))}}class H9{constructor(e,t){this.resolver=t,this.auth=B9(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return wi(oN(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this._delegate=e,this.multiFactor=Lz(e)}static getOrCreate(e){return co.USER_MAP.has(e)||co.USER_MAP.set(e,new co(e)),co.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return wi(this.auth,LO(this._delegate,e))}async linkWithPhoneNumber(e,t){return rw(this.auth,aq(this._delegate,e,t))}async linkWithPopup(e){return wi(this.auth,pq(this._delegate,e,bl))}async linkWithRedirect(e){return await nw(_n(this.auth)),Aq(this._delegate,e,bl)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return wi(this.auth,jO(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return rw(this.auth,oq(this._delegate,e,t))}reauthenticateWithPopup(e){return wi(this.auth,mq(this._delegate,e,bl))}async reauthenticateWithRedirect(e){return await nw(_n(this.auth)),Eq(this._delegate,e,bl)}sendEmailVerification(e){return Ez(this._delegate,e)}async unlink(e){return await lz(this._delegate,e),this}updateEmail(e){return Iz(this._delegate,e)}updatePassword(e){return Rz(this._delegate,e)}updatePhoneNumber(e){return lq(this._delegate,e)}updateProfile(e){return Sz(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Tz(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}co.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=_e;class iw{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;bf(r,"invalid-api-key",{appName:e.name}),bf(r,"invalid-api-key",{appName:e.name});const s=typeof window<"u"?bl:void 0;this._delegate=t.initialize({options:{persistence:$9(r,e.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(Z4),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?co.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){UB(this._delegate,e,t)}applyActionCode(e){return fz(this._delegate,e)}checkActionCode(e){return UO(this._delegate,e)}confirmPasswordReset(e,t){return dz(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return wi(this._delegate,pz(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return wz(this._delegate,e)}isSignInWithEmailLink(e){return vz(this._delegate,e)}async getRedirectResult(){bf(nb(),this._delegate,"operation-not-supported-in-this-environment");const e=await Iq(this._delegate,bl);return e?wi(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){R9(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:s,error:o,complete:u}=tR(e,t,r);return this._delegate.onAuthStateChanged(s,o,u)}onIdTokenChanged(e,t,r){const{next:s,error:o,complete:u}=tR(e,t,r);return this._delegate.onIdTokenChanged(s,o,u)}sendSignInLinkToEmail(e,t){return _z(this._delegate,e,t)}sendPasswordResetEmail(e,t){return hz(this._delegate,e,t||void 0)}async setPersistence(e){j9(this._delegate,e);let t;switch(e){case Bi.SESSION:t=Zu;break;case Bi.LOCAL:t=await qi(fm)._isAvailable()?fm:tT;break;case Bi.NONE:t=Gh;break;default:return Cr("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return wi(this._delegate,oz(this._delegate))}signInWithCredential(e){return wi(this._delegate,$_(this._delegate,e))}signInWithCustomToken(e){return wi(this._delegate,cz(this._delegate,e))}signInWithEmailAndPassword(e,t){return wi(this._delegate,gz(this._delegate,e,t))}signInWithEmailLink(e,t){return wi(this._delegate,yz(this._delegate,e,t))}signInWithPhoneNumber(e,t){return rw(this._delegate,sq(this._delegate,e,t))}async signInWithPopup(e){return bf(nb(),this._delegate,"operation-not-supported-in-this-environment"),wi(this._delegate,fq(this._delegate,e,bl))}async signInWithRedirect(e){return bf(nb(),this._delegate,"operation-not-supported-in-this-environment"),await nw(this._delegate),bq(this._delegate,e,bl)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return mz(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}iw.Persistence=Bi;function tR(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const s=r;return{next:u=>s(u&&co.getOrCreate(u)),error:e,complete:t}}function $9(n,e){const t=U9(n,e);if(typeof self<"u"&&!t.includes(fm)&&t.push(fm),typeof window<"u")for(const r of[tT,Zu])t.includes(r)||t.push(r);return t.includes(Gh)||t.push(Gh),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{static credential(e,t){return Ju.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new Ju(oN(ld.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}uT.PHONE_SIGN_IN_METHOD=Ju.PHONE_SIGN_IN_METHOD;uT.PROVIDER_ID=Ju.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9=_e;class W9{constructor(e,t,r=ld.app()){var s;G9((s=r.options)===null||s===void 0?void 0:s.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new rq(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9="auth-compat";function Y9(n){n.INTERNAL.registerComponent(new wa(K9,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new iw(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:uh.EMAIL_SIGNIN,PASSWORD_RESET:uh.PASSWORD_RESET,RECOVER_EMAIL:uh.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:uh.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:uh.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:uh.VERIFY_EMAIL}},EmailAuthProvider:Yl,FacebookAuthProvider:ha,GithubAuthProvider:fa,GoogleAuthProvider:da,OAuthProvider:Ah,SAMLAuthProvider:Jg,PhoneAuthProvider:uT,PhoneMultiFactorGenerator:tN,RecaptchaVerifier:W9,TwitterAuthProvider:ma,Auth:iw,AuthCredential:cd,Error:li}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(C9,D9)}Y9(ld);const Q9="@firebase/firestore-compat",X9="0.3.45";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(){if(typeof Uint8Array>"u")throw new me("unimplemented","Uint8Arrays are not available in this environment.")}function rR(){if(!bj())throw new me("unimplemented","Blobs are unavailable in Firestore in this environment.")}class mm{constructor(e){this._delegate=e}static fromBase64String(e){return rR(),new mm(Aa.fromBase64String(e))}static fromUint8Array(e){return nR(),new mm(Aa.fromUint8Array(e))}toBase64(){return rR(),this._delegate.toBase64()}toUint8Array(){return nR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(n){return Z9(n,["next","error","complete"])}function Z9(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{enableIndexedDbPersistence(e,t){return n4(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return r4(e._delegate)}clearIndexedDbPersistence(e){return i4(e._delegate)}}class uN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Pl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ea("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){ZF(this._delegate,e,t,r)}enableNetwork(){return a4(this._delegate)}disableNetwork(){return o4(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Ux("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return s4(this._delegate)}onSnapshotsInSync(e){return O4(this._delegate,e)}get app(){if(!this._appCompat)throw new me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Kh(this,CE(this._delegate,e))}catch(t){throw oi(t,"collection()","Firestore.collection()")}}doc(e){try{return new ms(this,Qg(this._delegate,e))}catch(t){throw oi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ai(this,JF(this._delegate,e))}catch(t){throw oi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return M4(this._delegate,t=>e(new cN(this,t)))}batch(){return Fr(this._delegate),new hN(new P4(this._delegate,e=>jm(this._delegate,e)))}loadBundle(e){return l4(this._delegate,e)}namedQuery(e){return u4(this._delegate,e).then(t=>t?new ai(this,t):null)}}class X_ extends BE{constructor(e){super(),this.firestore=e}convertBytes(e){return new mm(new Aa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ms.forKey(t,this.firestore,null)}}function e6(n){P2(n)}class cN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new X_(e)}get(e){const t=Uu(e);return this._delegate.get(t).then(r=>new pm(this._firestore,new _o(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Uu(e);return r?(cT("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const o=Uu(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...s),this}delete(e){const t=Uu(e);return this._delegate.delete(t),this}}class hN{constructor(e){this._delegate=e}set(e,t,r){const s=Uu(e);return r?(cT("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const o=Uu(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...s),this}delete(e){const t=Uu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class tc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Lf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gm(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=tc.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let o=s.get(t);return o||(o=new tc(e,new X_(e),t),s.set(t,o)),o}}tc.INSTANCES=new WeakMap;class ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new X_(e)}static forPath(e,t,r){if(e.length%2!==0)throw new me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ms(t,new pn(t._delegate,r,new Re(e)))}static forKey(e,t,r){return new ms(t,new pn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Kh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Kh(this.firestore,CE(this._delegate,e))}catch(t){throw oi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=He(e),e instanceof pn?$x(this._delegate,e):!1}set(e,t){t=cT("DocumentReference.set",t);try{return t?xI(this._delegate,e,t):xI(this._delegate,e)}catch(r){throw oi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?OI(this._delegate,e):OI(this._delegate,e,t,...r)}catch(s){throw oi(s,"updateDoc()","DocumentReference.update()")}}delete(){return D4(this._delegate)}onSnapshot(...e){const t=dN(e),r=fN(e,s=>new pm(this.firestore,new _o(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return lO(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=S4(this._delegate):(e==null?void 0:e.source)==="server"?t=I4(this._delegate):t=A4(this._delegate),t.then(r=>new pm(this.firestore,new _o(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ms(this.firestore,e?this._delegate.withConverter(tc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function oi(n,e,t){return n.message=n.message.replace(e,t),n}function dN(n){for(const e of n)if(typeof e=="object"&&!sw(e))return e;return{}}function fN(n,e){var t,r;let s;return sw(n[0])?s=n[0]:sw(n[1])?s=n[1]:typeof n[0]=="function"?s={next:n[0],error:n[1],complete:n[2]}:s={next:n[1],error:n[2],complete:n[3]},{next:o=>{s.next&&s.next(e(o))},error:(t=s.error)===null||t===void 0?void 0:t.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}class pm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ms(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return aO(this._delegate,e._delegate)}}class gm extends pm{data(e){const t=this._delegate.data(e);return this._delegate._converter||k2(t!==void 0),t}}class ai{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new X_(e)}where(e,t,r){try{return new ai(this.firestore,ao(this._delegate,rO(e,t,r)))}catch(s){throw oi(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ai(this.firestore,ao(this._delegate,p4(e,t)))}catch(r){throw oi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ai(this.firestore,ao(this._delegate,g4(e)))}catch(t){throw oi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ai(this.firestore,ao(this._delegate,_4(e)))}catch(t){throw oi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ai(this.firestore,ao(this._delegate,v4(...e)))}catch(t){throw oi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ai(this.firestore,ao(this._delegate,y4(...e)))}catch(t){throw oi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ai(this.firestore,ao(this._delegate,b4(...e)))}catch(t){throw oi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ai(this.firestore,ao(this._delegate,w4(...e)))}catch(t){throw oi(t,"endAt()","Query.endAt()")}}isEqual(e){return Gx(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=R4(this._delegate):(e==null?void 0:e.source)==="server"?t=C4(this._delegate):t=oO(this._delegate),t.then(r=>new aw(this.firestore,new Fl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=dN(e),r=fN(e,s=>new aw(this.firestore,new Fl(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return lO(this._delegate,t,r)}withConverter(e){return new ai(this.firestore,e?this._delegate.withConverter(tc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class t6{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new gm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class aw{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ai(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new gm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new t6(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new gm(this._firestore,r))})}isEqual(e){return aO(this._delegate,e._delegate)}}class Kh extends ai{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ms(this.firestore,e):null}doc(e){try{return e===void 0?new ms(this.firestore,Qg(this._delegate)):new ms(this.firestore,Qg(this._delegate,e))}catch(t){throw oi(t,"doc()","CollectionReference.doc()")}}add(e){return x4(this._delegate,e).then(t=>new ms(this.firestore,t))}isEqual(e){return $x(this._delegate,e._delegate)}withConverter(e){return new Kh(this.firestore,e?this._delegate.withConverter(tc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Uu(n){return Ct(n,pn)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(...e){this._delegate=new Ul(...e)}static documentId(){return new hT(on.keyField().canonicalString())}isEqual(e){return e=He(e),e instanceof Ul?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{static serverTimestamp(){const e=j4();return e._methodName="FieldValue.serverTimestamp",new Vu(e)}static delete(){const e=L4();return e._methodName="FieldValue.delete",new Vu(e)}static arrayUnion(...e){const t=U4(...e);return t._methodName="FieldValue.arrayUnion",new Vu(t)}static arrayRemove(...e){const t=F4(...e);return t._methodName="FieldValue.arrayRemove",new Vu(t)}static increment(e){const t=B4(e);return t._methodName="FieldValue.increment",new Vu(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6={Firestore:uN,GeoPoint:N_,Timestamp:un,Blob:mm,Transaction:cN,WriteBatch:hN,DocumentReference:ms,DocumentSnapshot:pm,Query:ai,QueryDocumentSnapshot:gm,QuerySnapshot:aw,CollectionReference:Kh,FieldPath:hT,FieldValue:Vu,setLogLevel:e6,CACHE_SIZE_UNLIMITED:t4};function r6(n,e){n.INTERNAL.registerComponent(new wa("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},n6)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(n){r6(n,(e,t)=>new uN(e,t,new J9)),n.registerVersion(Q9,X9)}i6(ld);const s6={apiKey:"AIzaSyAd0yxPkMVoerKq6pPZvXyTbOEaMILss4A",authDomain:"vcode-3b099.firebaseapp.com",projectId:"vcode-3b099",storageBucket:"vcode-3b099.appspot.com",messagingSenderId:"230736955287",appId:"1:230736955287:web:926fc8df65c6386eb326d2",measurementId:"G-NMDL4TH3T3"},mN=ld.initializeApp(s6),a6=mN.auth(),o6=mN.firestore(),iR=()=>{const{email:n}=Ra(),[e,t]=B.useState(null),[r,s]=B.useState(null),{theme:o,toggleTheme:u}=XM();B.useEffect(()=>{if(!n)return;(async()=>{try{const p=CE(o6,"users"),v=ao(p,rO("email","==",n)),b=await oO(v);if(!b.empty){const D=b.docs[0].data();t({email:D.email||"",regNo:D.regNo||"",role:D.role||""})}}catch(p){console.error("Error fetching user details:",p)}})()},[n]);const h=async()=>{try{await a6.sendPasswordResetEmail((e==null?void 0:e.email)||""),s("Password reset email sent!")}catch{s("Failed to send reset email.")}};return I.jsxs("div",{className:`settings-panel ${o}`,children:[I.jsxs("div",{className:"settings-profile-row",children:[I.jsx("img",{src:"https://randomuser.me/api/portraits/men/1.jpg",alt:"Profile",className:"settings-avatar"}),I.jsx("h2",{className:"settings-heading",children:"Profile"})]}),I.jsxs("div",{className:"settings-details",children:[I.jsxs("div",{children:[I.jsx("span",{className:"settings-label",children:"Email:"}),I.jsx("span",{className:"settings-label-details",children:(e==null?void 0:e.email)||"Loading..."})]}),I.jsxs("div",{children:[I.jsx("span",{className:"settings-label",children:"Username:"}),I.jsx("span",{className:"settings-label-details",children:(e==null?void 0:e.regNo)||"Loading..."})]}),I.jsxs("div",{children:[I.jsx("span",{className:"settings-label",children:"Role:"}),I.jsx("span",{className:"settings-label-details",children:(e==null?void 0:e.role)||"Loading..."})]})]}),I.jsxs("div",{className:"settings-actions",children:[I.jsx("button",{className:"settings-reset-btn",onClick:h,children:"Reset Password"}),r&&I.jsx("div",{className:"settings-reset-status",children:r}),I.jsxs("div",{className:"settings-theme-toggle",children:[I.jsx("span",{className:"settings-label",children:"Dark"}),I.jsxs("label",{className:"switch",children:[I.jsx("input",{type:"checkbox",checked:o==="light",onChange:u,"aria-label":"Toggle dark mode"}),I.jsxs("span",{className:"slider",children:[I.jsx("div",{className:"star star_1"}),I.jsx("div",{className:"star star_2"}),I.jsx("div",{className:"star star_3"}),I.jsx("svg",{viewBox:"0 0 16 16",className:"cloud_1 cloud",children:I.jsx("path",{transform:"matrix(.77976 0 0 .78395-299.99-418.63)",fill:"#fff",d:"m391.84 540.91c-.421-.329-.949-.524-1.523-.524-1.351 0-2.451 1.084-2.485 2.435-1.395.526-2.388 1.88-2.388 3.466 0 1.874 1.385 3.423 3.182 3.667v.034h12.73v-.006c1.775-.104 3.182-1.584 3.182-3.395 0-1.747-1.309-3.186-2.994-3.379.007-.106.011-.214.011-.322 0-2.707-2.271-4.901-5.072-4.901-2.073 0-3.856 1.202-4.643 2.925"})})]})]}),I.jsx("span",{className:"settings-label",children:"Light"})]})]})]})};function l6(){const{role:n}=Ra(),e=()=>n==="teacher",t=()=>n==="student";return I.jsx($1,{children:I.jsx(w1,{children:e()?I.jsxs(Xn,{path:"/",element:I.jsx(rk,{}),children:[I.jsx(Xn,{index:!0,element:I.jsx(sk,{})}),I.jsx(Xn,{path:"problems",element:I.jsx(mw,{})}),I.jsx(Xn,{path:"manage-problem",element:I.jsx(SA,{})}),I.jsx(Xn,{path:"submissions",element:I.jsx(sb,{})}),I.jsx(Xn,{path:"analytics",element:I.jsx(SA,{})}),I.jsx(Xn,{path:"settings",element:I.jsx(iR,{})}),I.jsx(Xn,{path:"/editProblem/:id",element:I.jsx(fV,{})}),I.jsx(Xn,{path:"add-problem",element:I.jsx(KM,{})})]}):t()?I.jsxs(Xn,{path:"/",element:I.jsx(GM,{}),children:[I.jsx(Xn,{index:!0,element:I.jsx(HM,{})}),I.jsx(Xn,{path:"cproblems",element:I.jsx("div",{style:{margin:"0 auto",marginTop:"2rem",maxWidth:"80%",background:"var(--card-bg)",color:"var(--text-color)",padding:"2rem",borderRadius:"1rem",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.3)"},children:I.jsx(PR,{})})}),I.jsx(Xn,{path:"csubmissions",element:I.jsx(sb,{})}),I.jsx(Xn,{path:"problempage/:id",element:I.jsx(WM,{})}),I.jsx(Xn,{path:"client-submissions",element:I.jsx(YM,{})}),I.jsx(Xn,{path:"/submission/:id",element:I.jsx(QM,{})}),I.jsx(Xn,{path:"settings",element:I.jsx(iR,{})})]}):I.jsx(Xn,{path:"*",element:I.jsx("div",{children:"Unauthorized or unknown role"})})})})}DP.createRoot(document.getElementById("root")).render(I.jsx(B.StrictMode,{children:I.jsx(nk,{children:I.jsx(ZM,{children:I.jsx(l6,{})})})}));

(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function EN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Fy={exports:{}},Qd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zw;function bN(){if(Zw)return Qd;Zw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:l}}return Qd.Fragment=e,Qd.jsx=t,Qd.jsxs=t,Qd}var Jw;function TN(){return Jw||(Jw=1,Fy.exports=bN()),Fy.exports}var N=TN(),zy={exports:{}},Ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eA;function wN(){if(eA)return Ze;eA=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function I(D){return D===null||typeof D!="object"?null:(D=b&&D[b]||D["@@iterator"],typeof D=="function"?D:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,G={};function j(D,re,Ae){this.props=D,this.context=re,this.refs=G,this.updater=Ae||P}j.prototype.isReactComponent={},j.prototype.setState=function(D,re){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,re,"setState")},j.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function Z(){}Z.prototype=j.prototype;function ie(D,re,Ae){this.props=D,this.context=re,this.refs=G,this.updater=Ae||P}var se=ie.prototype=new Z;se.constructor=ie,U(se,j.prototype),se.isPureReactComponent=!0;var _e=Array.isArray,pe={H:null,A:null,T:null,S:null},Re=Object.prototype.hasOwnProperty;function L(D,re,Ae,be,Ie,Be){return Ae=Be.ref,{$$typeof:n,type:D,key:re,ref:Ae!==void 0?Ae:null,props:Be}}function O(D,re){return L(D.type,re,void 0,void 0,void 0,D.props)}function x(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function k(D){var re={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Ae){return re[Ae]})}var B=/\/+/g;function K(D,re){return typeof D=="object"&&D!==null&&D.key!=null?k(""+D.key):re.toString(36)}function M(){}function Rt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(M,M):(D.status="pending",D.then(function(re){D.status==="pending"&&(D.status="fulfilled",D.value=re)},function(re){D.status==="pending"&&(D.status="rejected",D.reason=re)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function xe(D,re,Ae,be,Ie){var Be=typeof D;(Be==="undefined"||Be==="boolean")&&(D=null);var Fe=!1;if(D===null)Fe=!0;else switch(Be){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(D.$$typeof){case n:case e:Fe=!0;break;case v:return Fe=D._init,xe(Fe(D._payload),re,Ae,be,Ie)}}if(Fe)return Ie=Ie(D),Fe=be===""?"."+K(D,0):be,_e(Ie)?(Ae="",Fe!=null&&(Ae=Fe.replace(B,"$&/")+"/"),xe(Ie,re,Ae,"",function(xt){return xt})):Ie!=null&&(x(Ie)&&(Ie=O(Ie,Ae+(Ie.key==null||D&&D.key===Ie.key?"":(""+Ie.key).replace(B,"$&/")+"/")+Fe)),re.push(Ie)),1;Fe=0;var zt=be===""?".":be+":";if(_e(D))for(var Te=0;Te<D.length;Te++)be=D[Te],Be=zt+K(be,Te),Fe+=xe(be,re,Ae,Be,Ie);else if(Te=I(D),typeof Te=="function")for(D=Te.call(D),Te=0;!(be=D.next()).done;)be=be.value,Be=zt+K(be,Te++),Fe+=xe(be,re,Ae,Be,Ie);else if(Be==="object"){if(typeof D.then=="function")return xe(Rt(D),re,Ae,be,Ie);throw re=String(D),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function de(D,re,Ae){if(D==null)return D;var be=[],Ie=0;return xe(D,be,"","",function(Be){return re.call(Ae,Be,Ie++)}),be}function ke(D){if(D._status===-1){var re=D._result;re=re(),re.then(function(Ae){(D._status===0||D._status===-1)&&(D._status=1,D._result=Ae)},function(Ae){(D._status===0||D._status===-1)&&(D._status=2,D._result=Ae)}),D._status===-1&&(D._status=0,D._result=re)}if(D._status===1)return D._result.default;throw D._result}var Pe=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Je(){}return Ze.Children={map:de,forEach:function(D,re,Ae){de(D,function(){re.apply(this,arguments)},Ae)},count:function(D){var re=0;return de(D,function(){re++}),re},toArray:function(D){return de(D,function(re){return re})||[]},only:function(D){if(!x(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ze.Component=j,Ze.Fragment=t,Ze.Profiler=a,Ze.PureComponent=ie,Ze.StrictMode=i,Ze.Suspense=m,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=pe,Ze.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ze.cache=function(D){return function(){return D.apply(null,arguments)}},Ze.cloneElement=function(D,re,Ae){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var be=U({},D.props),Ie=D.key,Be=void 0;if(re!=null)for(Fe in re.ref!==void 0&&(Be=void 0),re.key!==void 0&&(Ie=""+re.key),re)!Re.call(re,Fe)||Fe==="key"||Fe==="__self"||Fe==="__source"||Fe==="ref"&&re.ref===void 0||(be[Fe]=re[Fe]);var Fe=arguments.length-2;if(Fe===1)be.children=Ae;else if(1<Fe){for(var zt=Array(Fe),Te=0;Te<Fe;Te++)zt[Te]=arguments[Te+2];be.children=zt}return L(D.type,Ie,void 0,void 0,Be,be)},Ze.createContext=function(D){return D={$$typeof:u,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},Ze.createElement=function(D,re,Ae){var be,Ie={},Be=null;if(re!=null)for(be in re.key!==void 0&&(Be=""+re.key),re)Re.call(re,be)&&be!=="key"&&be!=="__self"&&be!=="__source"&&(Ie[be]=re[be]);var Fe=arguments.length-2;if(Fe===1)Ie.children=Ae;else if(1<Fe){for(var zt=Array(Fe),Te=0;Te<Fe;Te++)zt[Te]=arguments[Te+2];Ie.children=zt}if(D&&D.defaultProps)for(be in Fe=D.defaultProps,Fe)Ie[be]===void 0&&(Ie[be]=Fe[be]);return L(D,Be,void 0,void 0,null,Ie)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(D){return{$$typeof:d,render:D}},Ze.isValidElement=x,Ze.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:ke}},Ze.memo=function(D,re){return{$$typeof:g,type:D,compare:re===void 0?null:re}},Ze.startTransition=function(D){var re=pe.T,Ae={};pe.T=Ae;try{var be=D(),Ie=pe.S;Ie!==null&&Ie(Ae,be),typeof be=="object"&&be!==null&&typeof be.then=="function"&&be.then(Je,Pe)}catch(Be){Pe(Be)}finally{pe.T=re}},Ze.unstable_useCacheRefresh=function(){return pe.H.useCacheRefresh()},Ze.use=function(D){return pe.H.use(D)},Ze.useActionState=function(D,re,Ae){return pe.H.useActionState(D,re,Ae)},Ze.useCallback=function(D,re){return pe.H.useCallback(D,re)},Ze.useContext=function(D){return pe.H.useContext(D)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(D,re){return pe.H.useDeferredValue(D,re)},Ze.useEffect=function(D,re){return pe.H.useEffect(D,re)},Ze.useId=function(){return pe.H.useId()},Ze.useImperativeHandle=function(D,re,Ae){return pe.H.useImperativeHandle(D,re,Ae)},Ze.useInsertionEffect=function(D,re){return pe.H.useInsertionEffect(D,re)},Ze.useLayoutEffect=function(D,re){return pe.H.useLayoutEffect(D,re)},Ze.useMemo=function(D,re){return pe.H.useMemo(D,re)},Ze.useOptimistic=function(D,re){return pe.H.useOptimistic(D,re)},Ze.useReducer=function(D,re,Ae){return pe.H.useReducer(D,re,Ae)},Ze.useRef=function(D){return pe.H.useRef(D)},Ze.useState=function(D){return pe.H.useState(D)},Ze.useSyncExternalStore=function(D,re,Ae){return pe.H.useSyncExternalStore(D,re,Ae)},Ze.useTransition=function(){return pe.H.useTransition()},Ze.version="19.0.0",Ze}var tA;function oE(){return tA||(tA=1,zy.exports=wN()),zy.exports}var z=oE();const ah=EN(z);var qy={exports:{}},Wd={},Hy={exports:{}},$y={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nA;function AN(){return nA||(nA=1,function(n){function e(de,ke){var Pe=de.length;de.push(ke);e:for(;0<Pe;){var Je=Pe-1>>>1,D=de[Je];if(0<a(D,ke))de[Je]=ke,de[Pe]=D,Pe=Je;else break e}}function t(de){return de.length===0?null:de[0]}function i(de){if(de.length===0)return null;var ke=de[0],Pe=de.pop();if(Pe!==ke){de[0]=Pe;e:for(var Je=0,D=de.length,re=D>>>1;Je<re;){var Ae=2*(Je+1)-1,be=de[Ae],Ie=Ae+1,Be=de[Ie];if(0>a(be,Pe))Ie<D&&0>a(Be,be)?(de[Je]=Be,de[Ie]=Pe,Je=Ie):(de[Je]=be,de[Ae]=Pe,Je=Ae);else if(Ie<D&&0>a(Be,Pe))de[Je]=Be,de[Ie]=Pe,Je=Ie;else break e}}return ke}function a(de,ke){var Pe=de.sortIndex-ke.sortIndex;return Pe!==0?Pe:de.id-ke.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var m=[],g=[],v=1,b=null,I=3,P=!1,U=!1,G=!1,j=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function se(de){for(var ke=t(g);ke!==null;){if(ke.callback===null)i(g);else if(ke.startTime<=de)i(g),ke.sortIndex=ke.expirationTime,e(m,ke);else break;ke=t(g)}}function _e(de){if(G=!1,se(de),!U)if(t(m)!==null)U=!0,Rt();else{var ke=t(g);ke!==null&&xe(_e,ke.startTime-de)}}var pe=!1,Re=-1,L=5,O=-1;function x(){return!(n.unstable_now()-O<L)}function k(){if(pe){var de=n.unstable_now();O=de;var ke=!0;try{e:{U=!1,G&&(G=!1,Z(Re),Re=-1),P=!0;var Pe=I;try{t:{for(se(de),b=t(m);b!==null&&!(b.expirationTime>de&&x());){var Je=b.callback;if(typeof Je=="function"){b.callback=null,I=b.priorityLevel;var D=Je(b.expirationTime<=de);if(de=n.unstable_now(),typeof D=="function"){b.callback=D,se(de),ke=!0;break t}b===t(m)&&i(m),se(de)}else i(m);b=t(m)}if(b!==null)ke=!0;else{var re=t(g);re!==null&&xe(_e,re.startTime-de),ke=!1}}break e}finally{b=null,I=Pe,P=!1}ke=void 0}}finally{ke?B():pe=!1}}}var B;if(typeof ie=="function")B=function(){ie(k)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,M=K.port2;K.port1.onmessage=k,B=function(){M.postMessage(null)}}else B=function(){j(k,0)};function Rt(){pe||(pe=!0,B())}function xe(de,ke){Re=j(function(){de(n.unstable_now())},ke)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(de){de.callback=null},n.unstable_continueExecution=function(){U||P||(U=!0,Rt())},n.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<de?Math.floor(1e3/de):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(de){switch(I){case 1:case 2:case 3:var ke=3;break;default:ke=I}var Pe=I;I=ke;try{return de()}finally{I=Pe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(de,ke){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var Pe=I;I=de;try{return ke()}finally{I=Pe}},n.unstable_scheduleCallback=function(de,ke,Pe){var Je=n.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?Je+Pe:Je):Pe=Je,de){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=Pe+D,de={id:v++,callback:ke,priorityLevel:de,startTime:Pe,expirationTime:D,sortIndex:-1},Pe>Je?(de.sortIndex=Pe,e(g,de),t(m)===null&&de===t(g)&&(G?(Z(Re),Re=-1):G=!0,xe(_e,Pe-Je))):(de.sortIndex=D,e(m,de),U||P||(U=!0,Rt())),de},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(de){var ke=I;return function(){var Pe=I;I=ke;try{return de.apply(this,arguments)}finally{I=Pe}}}}($y)),$y}var iA;function IN(){return iA||(iA=1,Hy.exports=AN()),Hy.exports}var Gy={exports:{}},wi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rA;function SN(){if(rA)return wi;rA=1;var n=oE();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:m,containerInfo:g,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return wi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,wi.createPortal=function(m,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,v)},wi.flushSync=function(m){var g=u.T,v=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=g,i.p=v,i.d.f()}},wi.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},wi.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},wi.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var v=g.as,b=d(v,g.crossOrigin),I=typeof g.integrity=="string"?g.integrity:void 0,P=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:I,fetchPriority:P}):v==="script"&&i.d.X(m,{crossOrigin:b,integrity:I,fetchPriority:P,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},wi.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},wi.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,b=d(v,g.crossOrigin);i.d.L(m,v,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},wi.preloadModule=function(m,g){if(typeof m=="string")if(g){var v=d(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},wi.requestFormReset=function(m){i.d.r(m)},wi.unstable_batchedUpdates=function(m,g){return m(g)},wi.useFormState=function(m,g,v){return u.H.useFormState(m,g,v)},wi.useFormStatus=function(){return u.H.useHostTransitionStatus()},wi.version="19.0.0",wi}var sA;function RN(){if(sA)return Gy.exports;sA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Gy.exports=SN(),Gy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aA;function CN(){if(aA)return Wd;aA=1;var n=IN(),e=oE(),t=RN();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var l=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),P=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),_e=Symbol.for("react.memo_cache_sentinel"),pe=Symbol.iterator;function Re(r){return r===null||typeof r!="object"?null:(r=pe&&r[pe]||r["@@iterator"],typeof r=="function"?r:null)}var L=Symbol.for("react.client.reference");function O(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===L?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case m:return"Fragment";case d:return"Portal";case v:return"Profiler";case g:return"StrictMode";case G:return"Suspense";case j:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case P:return(r.displayName||"Context")+".Provider";case I:return(r._context.displayName||"Context")+".Consumer";case U:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Z:return s=r.displayName||null,s!==null?s:O(r.type)||"Memo";case ie:s=r._payload,r=r._init;try{return O(r(s))}catch{}}return null}var x=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=Object.assign,B,K;function M(r){if(B===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);B=s&&s[1]||"",K=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+B+r+K}var Rt=!1;function xe(r,s){if(!r||Rt)return"";Rt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ae){var J=ae}Reflect.construct(r,[],fe)}else{try{fe.call()}catch(ae){J=ae}r.call(fe.prototype)}}else{try{throw Error()}catch(ae){J=ae}(fe=r())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ae){if(ae&&J&&typeof ae.stack=="string")return[ae.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),w=_[0],S=_[1];if(w&&S){var V=w.split(`
`),H=S.split(`
`);for(f=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(c===V.length||f===H.length)for(c=V.length-1,f=H.length-1;1<=c&&0<=f&&V[c]!==H[f];)f--;for(;1<=c&&0<=f;c--,f--)if(V[c]!==H[f]){if(c!==1||f!==1)do if(c--,f--,0>f||V[c]!==H[f]){var oe=`
`+V[c].replace(" at new "," at ");return r.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",r.displayName)),oe}while(1<=c&&0<=f);break}}}finally{Rt=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?M(o):""}function de(r){switch(r.tag){case 26:case 27:case 5:return M(r.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 15:return r=xe(r.type,!1),r;case 11:return r=xe(r.type.render,!1),r;case 1:return r=xe(r.type,!0),r;default:return""}}function ke(r){try{var s="";do s+=de(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Pe(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function Je(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function D(r){if(Pe(r)!==r)throw Error(i(188))}function re(r){var s=r.alternate;if(!s){if(s=Pe(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,c=s;;){var f=o.return;if(f===null)break;var _=f.alternate;if(_===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===_.child){for(_=f.child;_;){if(_===o)return D(f),r;if(_===c)return D(f),s;_=_.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=_;else{for(var w=!1,S=f.child;S;){if(S===o){w=!0,o=f,c=_;break}if(S===c){w=!0,c=f,o=_;break}S=S.sibling}if(!w){for(S=_.child;S;){if(S===o){w=!0,o=_,c=f;break}if(S===c){w=!0,c=_,o=f;break}S=S.sibling}if(!w)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function Ae(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=Ae(r),s!==null)return s;r=r.sibling}return null}var be=Array.isArray,Ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Be={pending:!1,data:null,method:null,action:null},Fe=[],zt=-1;function Te(r){return{current:r}}function xt(r){0>zt||(r.current=Fe[zt],Fe[zt]=null,zt--)}function yt(r,s){zt++,Fe[zt]=r.current,r.current=s}var ni=Te(null),Zr=Te(null),Bn=Te(null),Jr=Te(null);function $i(r,s){switch(yt(Bn,s),yt(Zr,r),yt(ni,null),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?Rw(s):0;break;default:if(r=r===8?s.parentNode:s,s=r.tagName,r=r.namespaceURI)r=Rw(r),s=Cw(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}xt(ni),yt(ni,s)}function _i(){xt(ni),xt(Zr),xt(Bn)}function Ul(r){r.memoizedState!==null&&yt(Jr,r);var s=ni.current,o=Cw(s,r.type);s!==o&&(yt(Zr,r),yt(ni,o))}function uo(r){Zr.current===r&&(xt(ni),xt(Zr)),Jr.current===r&&(xt(Jr),qd._currentValue=Be)}var co=Object.prototype.hasOwnProperty,ma=n.unstable_scheduleCallback,ho=n.unstable_cancelCallback,Xh=n.unstable_shouldYield,jl=n.unstable_requestPaint,Nn=n.unstable_now,ar=n.unstable_getCurrentPriorityLevel,sn=n.unstable_ImmediatePriority,qt=n.unstable_UserBlockingPriority,yi=n.unstable_NormalPriority,es=n.unstable_LowPriority,Ds=n.unstable_IdlePriority,Zh=n.log,ts=n.unstable_setDisableYieldValue,xs=null,Fn=null;function Bl(r){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(xs,r,void 0,(r.current.flags&128)===128)}catch{}}function Sr(r){if(typeof Zh=="function"&&ts(r),Fn&&typeof Fn.setStrictMode=="function")try{Fn.setStrictMode(xs,r)}catch{}}var ii=Math.clz32?Math.clz32:pa,Fl=Math.log,zl=Math.LN2;function pa(r){return r>>>=0,r===0?32:31-(Fl(r)/zl|0)|0}var or=128,ns=4194304;function lr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Gi(r,s){var o=r.pendingLanes;if(o===0)return 0;var c=0,f=r.suspendedLanes,_=r.pingedLanes,w=r.warmLanes;r=r.finishedLanes!==0;var S=o&134217727;return S!==0?(o=S&~f,o!==0?c=lr(o):(_&=S,_!==0?c=lr(_):r||(w=S&~w,w!==0&&(c=lr(w))))):(S=o&~f,S!==0?c=lr(S):_!==0?c=lr(_):r||(w=o&~w,w!==0&&(c=lr(w)))),c===0?0:s!==0&&s!==c&&(s&f)===0&&(f=c&-c,w=s&-s,f>=w||f===32&&(w&4194176)!==0)?s:c}function Ns(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function fo(r,s){switch(r){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rr(){var r=or;return or<<=1,(or&4194176)===0&&(or=128),r}function Ki(){var r=ns;return ns<<=1,(ns&62914560)===0&&(ns=4194304),r}function mo(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Xt(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ju(r,s,o,c,f,_){var w=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var S=r.entanglements,V=r.expirationTimes,H=r.hiddenUpdates;for(o=w&~o;0<o;){var oe=31-ii(o),fe=1<<oe;S[oe]=0,V[oe]=-1;var J=H[oe];if(J!==null)for(H[oe]=null,oe=0;oe<J.length;oe++){var ae=J[oe];ae!==null&&(ae.lane&=-536870913)}o&=~fe}c!==0&&Ps(r,c,0),_!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=_&~(w&~s))}function Ps(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-ii(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|o&4194218}function Os(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var c=31-ii(o),f=1<<c;f&s|r[c]&s&&(r[c]|=s),o&=~f}}function po(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function is(){var r=Ie.p;return r!==0?r:(r=window.event,r===void 0?32:Gw(r.type))}function ur(r,s){var o=Ie.p;try{return Ie.p=r,s()}finally{Ie.p=o}}var Cr=Math.random().toString(36).slice(2),an="__reactFiber$"+Cr,_n="__reactProps$"+Cr,rs="__reactContainer$"+Cr,Qi="__reactEvents$"+Cr,on="__reactListeners$"+Cr,Ht="__reactHandles$"+Cr,Pn="__reactResources$"+Cr,$t="__reactMarker$"+Cr;function Dr(r){delete r[an],delete r[_n],delete r[Qi],delete r[on],delete r[Ht]}function zn(r){var s=r[an];if(s)return s;for(var o=r.parentNode;o;){if(s=o[rs]||o[an]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=Nw(r);r!==null;){if(o=r[an])return o;r=Nw(r)}return s}r=o,o=r.parentNode}return null}function ri(r){if(r=r[an]||r[rs]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function Ci(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function ss(r){var s=r[Pn];return s||(s=r[Pn]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Nt(r){r[$t]=!0}var xr=new Set,ga={};function si(r,s){qn(r,s),qn(r+"Capture",s)}function qn(r,s){for(ga[r]=s,r=0;r<s.length;r++)xr.add(s[r])}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ec=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),go={},_o={};function ql(r){return co.call(_o,r)?!0:co.call(go,r)?!1:ec.test(r)?_o[r]=!0:(go[r]=!0,!1)}function as(r,s,o){if(ql(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function os(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Di(r,s,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+c)}}function Hn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Hl(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Wi(r){var s=Hl(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,_=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,_.call(this,w)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function yn(r){r._valueTracker||(r._valueTracker=Wi(r))}function cr(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return r&&(c=Hl(r)?r.checked?"true":"false":r.value),r=c,r!==o?(s.setValue(r),!0):!1}function On(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var hr=/[\n"\\]/g;function kt(r){return r.replace(hr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function kn(r,s,o,c,f,_,w,S){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),s!=null?w==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Hn(s)):r.value!==""+Hn(s)&&(r.value=""+Hn(s)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),s!=null?ls(r,w,Hn(s)):o!=null?ls(r,w,Hn(o)):c!=null&&r.removeAttribute("value"),f==null&&_!=null&&(r.defaultChecked=!!_),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.name=""+Hn(S):r.removeAttribute("name")}function xi(r,s,o,c,f,_,w,S){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),s!=null||o!=null){if(!(_!=="submit"&&_!=="reset"||s!=null))return;o=o!=null?""+Hn(o):"",s=s!=null?""+Hn(s):o,S||s===r.value||(r.value=s),r.defaultValue=s}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=S?r.checked:!!c,r.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w)}function ls(r,s,o){s==="number"&&On(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function et(r,s,o,c){if(r=r.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=s.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&c&&(r[o].defaultSelected=!0)}else{for(o=""+Hn(o),s=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,c&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function us(r,s,o){if(s!=null&&(s=""+Hn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+Hn(o):""}function cs(r,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(i(92));if(be(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=Hn(s),r.defaultValue=o,c=r.textContent,c===o&&c!==""&&c!==null&&(r.value=c)}function Vn(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var $l=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yo(r,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,o):typeof o!="number"||o===0||$l.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Yi(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var f in s)c=s[f],s.hasOwnProperty(f)&&o[f]!==c&&yo(r,f,c)}else for(var _ in s)s.hasOwnProperty(_)&&yo(r,_,s[_])}function Gl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dr(r){return vo.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var $n=null;function ks(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ni=null,Pr=null;function Or(r){var s=ri(r);if(s&&(r=s.stateNode)){var o=r[_n]||null;e:switch(r=s.stateNode,s.type){case"input":if(kn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+kt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==r&&c.form===r.form){var f=c[_n]||null;if(!f)throw Error(i(90));kn(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===r.form&&cr(c)}break e;case"textarea":us(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&et(r,!!o.multiple,s,!1)}}}var Eo=!1;function hs(r,s,o){if(Eo)return r(s,o);Eo=!0;try{var c=r(s);return c}finally{if(Eo=!1,(Ni!==null||Pr!==null)&&(lp(),Ni&&(s=Ni,r=Pr,Pr=Ni=null,Or(s),r)))for(s=0;s<r.length;s++)Or(r[s])}}function _a(r,s){var o=r.stateNode;if(o===null)return null;var c=o[_n]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Pi=!1;if(vi)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){Pi=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{Pi=!1}var Oi=null,kr=null,fs=null;function Vs(){if(fs)return fs;var r,s=kr,o=s.length,c,f="value"in Oi?Oi.value:Oi.textContent,_=f.length;for(r=0;r<o&&s[r]===f[r];r++);var w=o-r;for(c=1;c<=w&&s[o-c]===f[_-c];c++);return fs=f.slice(r,1<c?1-c:void 0)}function Vr(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function fr(){return!0}function ya(){return!1}function ln(r){function s(o,c,f,_,w){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=_,this.target=w,this.currentTarget=null;for(var S in r)r.hasOwnProperty(S)&&(o=r[S],this[S]=o?o(_):_[S]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?fr:ya,this.isPropagationStopped=ya,this}return k(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=fr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=fr)},persist:function(){},isPersistent:fr}),s}var mt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},va=ln(mt),mr=k({},mt,{view:0,detail:0}),bo=ln(mr),Ea,ba,ai,Ta=k({},mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ai&&(ai&&r.type==="mousemove"?(Ea=r.screenX-ai.screenX,ba=r.screenY-ai.screenY):ba=Ea=0,ai=r),Ea)},movementY:function(r){return"movementY"in r?r.movementY:ba}}),ki=ln(Ta),Kl=k({},Ta,{dataTransfer:0}),tc=ln(Kl),Ms=k({},mr,{relatedTarget:0}),wa=ln(Ms),Aa=k({},mt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ia=ln(Aa),nc=k({},mt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),To=ln(nc),ic=k({},mt,{data:0}),wo=ln(ic),Mr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sa(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=sc[r])?!!s[r]:!1}function Ls(){return Sa}var Ql=k({},mr,{key:function(r){if(r.key){var s=Mr[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Vr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?rc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(r){return r.type==="keypress"?Vr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Vr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Xi=ln(Ql),Ao=k({},Ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wl=ln(Ao),Lr=k({},mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),ac=ln(Lr),oc=k({},mt,{propertyName:0,elapsedTime:0,pseudoElement:0}),lc=ln(oc),uc=k({},Ta,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ra=ln(uc),Gn=k({},mt,{newState:0,oldState:0}),cc=ln(Gn),ms=[9,13,27,32],Kn=vi&&"CompositionEvent"in window,h=null;vi&&"documentMode"in document&&(h=document.documentMode);var y=vi&&"TextEvent"in window&&!h,T=vi&&(!Kn||h&&8<h&&11>=h),C=" ",W=!1;function ee(r,s){switch(r){case"keyup":return ms.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function we(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var at=!1;function vn(r,s){switch(r){case"compositionend":return we(s);case"keypress":return s.which!==32?null:(W=!0,C);case"textInput":return r=s.data,r===C&&W?null:r;default:return null}}function ot(r,s){if(at)return r==="compositionend"||!Kn&&ee(r,s)?(r=Vs(),fs=kr=Oi=null,at=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return T&&s.locale!=="ko"?null:s.data;default:return null}}var wt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function un(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!wt[r.type]:s==="textarea"}function Ur(r,s,o,c){Ni?Pr?Pr.push(c):Pr=[c]:Ni=c,s=fp(s,"onChange"),0<s.length&&(o=new va("onChange","change",null,o,c),r.push({event:o,listeners:s}))}var In=null,jr=null;function Yl(r){Tw(r,0)}function Xl(r){var s=Ci(r);if(cr(s))return r}function Zl(r,s){if(r==="change")return s}var Im=!1;if(vi){var Jh;if(vi){var hc="oninput"in document;if(!hc){var Sm=document.createElement("div");Sm.setAttribute("oninput","return;"),hc=typeof Sm.oninput=="function"}Jh=hc}else Jh=!1;Im=Jh&&(!document.documentMode||9<document.documentMode)}function Rm(){In&&(In.detachEvent("onpropertychange",ed),jr=In=null)}function ed(r){if(r.propertyName==="value"&&Xl(jr)){var s=[];Ur(s,jr,r,ks(r)),hs(Yl,s)}}function Cm(r,s,o){r==="focusin"?(Rm(),In=s,jr=o,In.attachEvent("onpropertychange",ed)):r==="focusout"&&Rm()}function Dm(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Xl(jr)}function dc(r,s){if(r==="click")return Xl(s)}function xm(r,s){if(r==="input"||r==="change")return Xl(s)}function td(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Vt=typeof Object.is=="function"?Object.is:td;function Jl(r,s){if(Vt(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!co.call(s,f)||!Vt(r[f],s[f]))return!1}return!0}function Nm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function nd(r,s){var o=Nm(r);r=0;for(var c;o;){if(o.nodeType===3){if(c=r+o.textContent.length,r<=s&&c>=s)return{node:o,offset:s-r};r=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Nm(o)}}function id(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?id(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Pm(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=On(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=On(r.document)}return s}function rd(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function v_(r,s){var o=Pm(s);s=r.focusedElem;var c=r.selectionRange;if(o!==s&&s&&s.ownerDocument&&id(s.ownerDocument.documentElement,s)){if(c!==null&&rd(s)){if(r=c.start,o=c.end,o===void 0&&(o=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(o,s.value.length);else if(o=(r=s.ownerDocument||document)&&r.defaultView||window,o.getSelection){o=o.getSelection();var f=s.textContent.length,_=Math.min(c.start,f);c=c.end===void 0?_:Math.min(c.end,f),!o.extend&&_>c&&(f=c,c=_,_=f),f=nd(s,_);var w=nd(s,c);f&&w&&(o.rangeCount!==1||o.anchorNode!==f.node||o.anchorOffset!==f.offset||o.focusNode!==w.node||o.focusOffset!==w.offset)&&(r=r.createRange(),r.setStart(f.node,f.offset),o.removeAllRanges(),_>c?(o.addRange(r),o.extend(w.node,w.offset)):(r.setEnd(w.node,w.offset),o.addRange(r)))}}for(r=[],o=s;o=o.parentNode;)o.nodeType===1&&r.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)o=r[s],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var E_=vi&&"documentMode"in document&&11>=document.documentMode,Io=null,sd=null,So=null,fc=!1;function mc(r,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;fc||Io==null||Io!==On(c)||(c=Io,"selectionStart"in c&&rd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),So&&Jl(So,c)||(So=c,c=fp(sd,"onSelect"),0<c.length&&(s=new va("onSelect","select",null,s,o),r.push({event:s,listeners:c}),s.target=Io)))}function Ca(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Ro={animationend:Ca("Animation","AnimationEnd"),animationiteration:Ca("Animation","AnimationIteration"),animationstart:Ca("Animation","AnimationStart"),transitionrun:Ca("Transition","TransitionRun"),transitionstart:Ca("Transition","TransitionStart"),transitioncancel:Ca("Transition","TransitionCancel"),transitionend:Ca("Transition","TransitionEnd")},ps={},Br={};vi&&(Br=document.createElement("div").style,"AnimationEvent"in window||(delete Ro.animationend.animation,delete Ro.animationiteration.animation,delete Ro.animationstart.animation),"TransitionEvent"in window||delete Ro.transitionend.transition);function Us(r){if(ps[r])return ps[r];if(!Ro[r])return r;var s=Ro[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Br)return ps[r]=s[o];return r}var Om=Us("animationend"),ad=Us("animationiteration"),od=Us("animationstart"),km=Us("transitionrun"),Vm=Us("transitionstart"),b_=Us("transitioncancel"),Mm=Us("transitionend"),Lm=new Map,ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Zi(r,s){Lm.set(r,s),si(s,[r])}var Ji=[],Co=0,ud=0;function pc(){for(var r=Co,s=ud=Co=0;s<r;){var o=Ji[s];Ji[s++]=null;var c=Ji[s];Ji[s++]=null;var f=Ji[s];Ji[s++]=null;var _=Ji[s];if(Ji[s++]=null,c!==null&&f!==null){var w=c.pending;w===null?f.next=f:(f.next=w.next,w.next=f),c.pending=f}_!==0&&Um(o,f,_)}}function gc(r,s,o,c){Ji[Co++]=r,Ji[Co++]=s,Ji[Co++]=o,Ji[Co++]=c,ud|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function pr(r,s,o,c){return gc(r,s,o,c),_c(r)}function gs(r,s){return gc(r,null,null,s),_c(r)}function Um(r,s,o){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o);for(var f=!1,_=r.return;_!==null;)_.childLanes|=o,c=_.alternate,c!==null&&(c.childLanes|=o),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(f=!0)),r=_,_=_.return;f&&s!==null&&r.tag===3&&(_=r.stateNode,f=31-ii(o),_=_.hiddenUpdates,r=_[f],r===null?_[f]=[s]:r.push(s),s.lane=o|536870912)}function _c(r){if(50<Md)throw Md=0,hy=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Do={},jm=new WeakMap;function er(r,s){if(typeof r=="object"&&r!==null){var o=jm.get(r);return o!==void 0?o:(s={value:r,source:s,stack:ke(s)},jm.set(r,s),s)}return{value:r,source:s,stack:ke(s)}}var xo=[],No=0,yc=null,Po=0,oi=[],Vi=0,js=null,Mi=1,gr="";function Da(r,s){xo[No++]=Po,xo[No++]=yc,yc=r,Po=s}function Bm(r,s,o){oi[Vi++]=Mi,oi[Vi++]=gr,oi[Vi++]=js,js=r;var c=Mi;r=gr;var f=32-ii(c)-1;c&=~(1<<f),o+=1;var _=32-ii(s)+f;if(30<_){var w=f-f%5;_=(c&(1<<w)-1).toString(32),c>>=w,f-=w,Mi=1<<32-ii(s)+f|o<<f|c,gr=_+r}else Mi=1<<_|o<<f|c,gr=r}function cd(r){r.return!==null&&(Da(r,1),Bm(r,1,0))}function _s(r){for(;r===yc;)yc=xo[--No],xo[No]=null,Po=xo[--No],xo[No]=null;for(;r===js;)js=oi[--Vi],oi[Vi]=null,gr=oi[--Vi],oi[Vi]=null,Mi=oi[--Vi],oi[Vi]=null}var li=null,Mn=null,it=!1,Li=null,Fr=!1,vc=Error(i(519));function xa(r){var s=Error(i(418,""));throw tu(er(s,r)),vc}function Na(r){var s=r.stateNode,o=r.type,c=r.memoizedProps;switch(s[an]=r,s[_n]=c,o){case"dialog":ft("cancel",s),ft("close",s);break;case"iframe":case"object":case"embed":ft("load",s);break;case"video":case"audio":for(o=0;o<Ud.length;o++)ft(Ud[o],s);break;case"source":ft("error",s);break;case"img":case"image":case"link":ft("error",s),ft("load",s);break;case"details":ft("toggle",s);break;case"input":ft("invalid",s),xi(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),yn(s);break;case"select":ft("invalid",s);break;case"textarea":ft("invalid",s),cs(s,c.value,c.defaultValue,c.children),yn(s)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||Sw(s.textContent,o)?(c.popover!=null&&(ft("beforetoggle",s),ft("toggle",s)),c.onScroll!=null&&ft("scroll",s),c.onScrollEnd!=null&&ft("scrollend",s),c.onClick!=null&&(s.onclick=mp),s=!0):s=!1,s||xa(r)}function Ec(r){for(li=r.return;li;)switch(li.tag){case 3:case 27:Fr=!0;return;case 5:case 13:Fr=!1;return;default:li=li.return}}function Oo(r){if(r!==li)return!1;if(!it)return Ec(r),it=!0,!1;var s=!1,o;if((o=r.tag!==3&&r.tag!==27)&&((o=r.tag===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Cy(r.type,r.memoizedProps)),o=!o),o&&(s=!0),s&&Mn&&xa(r),Ec(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){Mn=As(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}Mn=null}}else Mn=li?As(r.stateNode.nextSibling):null;return!0}function eu(){Mn=li=null,it=!1}function tu(r){Li===null?Li=[r]:Li.push(r)}var nu=Error(i(460)),ko=Error(i(474)),ys={then:function(){}};function Fm(r){return r=r.status,r==="fulfilled"||r==="rejected"}function bc(){}function zm(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(bc,bc),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===nu?Error(i(483)):r;default:if(typeof s.status=="string")s.then(bc,bc);else{if(r=Lt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=c}},function(c){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===nu?Error(i(483)):r}throw iu=s,nu}}var iu=null;function qm(){if(iu===null)throw Error(i(459));var r=iu;return iu=null,r}var Vo=null,ru=0;function Tc(r){var s=ru;return ru+=1,Vo===null&&(Vo=[]),zm(Vo,r,s)}function Mo(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function wc(r,s){throw s.$$typeof===l?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function hd(r){var s=r._init;return s(r._payload)}function Ac(r){function s(Q,q){if(r){var X=Q.deletions;X===null?(Q.deletions=[q],Q.flags|=16):X.push(q)}}function o(Q,q){if(!r)return null;for(;q!==null;)s(Q,q),q=q.sibling;return null}function c(Q){for(var q=new Map;Q!==null;)Q.key!==null?q.set(Q.key,Q):q.set(Q.index,Q),Q=Q.sibling;return q}function f(Q,q){return Q=Qo(Q,q),Q.index=0,Q.sibling=null,Q}function _(Q,q,X){return Q.index=X,r?(X=Q.alternate,X!==null?(X=X.index,X<q?(Q.flags|=33554434,q):X):(Q.flags|=33554434,q)):(Q.flags|=1048576,q)}function w(Q){return r&&Q.alternate===null&&(Q.flags|=33554434),Q}function S(Q,q,X,le){return q===null||q.tag!==6?(q=iy(X,Q.mode,le),q.return=Q,q):(q=f(q,X),q.return=Q,q)}function V(Q,q,X,le){var Ne=X.type;return Ne===m?oe(Q,q,X.props.children,le,X.key):q!==null&&(q.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===ie&&hd(Ne)===q.type)?(q=f(q,X.props),Mo(q,X),q.return=Q,q):(q=ip(X.type,X.key,X.props,null,Q.mode,le),Mo(q,X),q.return=Q,q)}function H(Q,q,X,le){return q===null||q.tag!==4||q.stateNode.containerInfo!==X.containerInfo||q.stateNode.implementation!==X.implementation?(q=ry(X,Q.mode,le),q.return=Q,q):(q=f(q,X.children||[]),q.return=Q,q)}function oe(Q,q,X,le,Ne){return q===null||q.tag!==7?(q=pu(X,Q.mode,le,Ne),q.return=Q,q):(q=f(q,X),q.return=Q,q)}function fe(Q,q,X){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=iy(""+q,Q.mode,X),q.return=Q,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case u:return X=ip(q.type,q.key,q.props,null,Q.mode,X),Mo(X,q),X.return=Q,X;case d:return q=ry(q,Q.mode,X),q.return=Q,q;case ie:var le=q._init;return q=le(q._payload),fe(Q,q,X)}if(be(q)||Re(q))return q=pu(q,Q.mode,X,null),q.return=Q,q;if(typeof q.then=="function")return fe(Q,Tc(q),X);if(q.$$typeof===P)return fe(Q,ep(Q,q),X);wc(Q,q)}return null}function J(Q,q,X,le){var Ne=q!==null?q.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Ne!==null?null:S(Q,q,""+X,le);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case u:return X.key===Ne?V(Q,q,X,le):null;case d:return X.key===Ne?H(Q,q,X,le):null;case ie:return Ne=X._init,X=Ne(X._payload),J(Q,q,X,le)}if(be(X)||Re(X))return Ne!==null?null:oe(Q,q,X,le,null);if(typeof X.then=="function")return J(Q,q,Tc(X),le);if(X.$$typeof===P)return J(Q,q,ep(Q,X),le);wc(Q,X)}return null}function ae(Q,q,X,le,Ne){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Q=Q.get(X)||null,S(q,Q,""+le,Ne);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case u:return Q=Q.get(le.key===null?X:le.key)||null,V(q,Q,le,Ne);case d:return Q=Q.get(le.key===null?X:le.key)||null,H(q,Q,le,Ne);case ie:var nt=le._init;return le=nt(le._payload),ae(Q,q,X,le,Ne)}if(be(le)||Re(le))return Q=Q.get(X)||null,oe(q,Q,le,Ne,null);if(typeof le.then=="function")return ae(Q,q,X,Tc(le),Ne);if(le.$$typeof===P)return ae(Q,q,X,ep(q,le),Ne);wc(q,le)}return null}function Me(Q,q,X,le){for(var Ne=null,nt=null,je=q,Ge=q=0,Zn=null;je!==null&&Ge<X.length;Ge++){je.index>Ge?(Zn=je,je=null):Zn=je.sibling;var Et=J(Q,je,X[Ge],le);if(Et===null){je===null&&(je=Zn);break}r&&je&&Et.alternate===null&&s(Q,je),q=_(Et,q,Ge),nt===null?Ne=Et:nt.sibling=Et,nt=Et,je=Zn}if(Ge===X.length)return o(Q,je),it&&Da(Q,Ge),Ne;if(je===null){for(;Ge<X.length;Ge++)je=fe(Q,X[Ge],le),je!==null&&(q=_(je,q,Ge),nt===null?Ne=je:nt.sibling=je,nt=je);return it&&Da(Q,Ge),Ne}for(je=c(je);Ge<X.length;Ge++)Zn=ae(je,Q,Ge,X[Ge],le),Zn!==null&&(r&&Zn.alternate!==null&&je.delete(Zn.key===null?Ge:Zn.key),q=_(Zn,q,Ge),nt===null?Ne=Zn:nt.sibling=Zn,nt=Zn);return r&&je.forEach(function(tl){return s(Q,tl)}),it&&Da(Q,Ge),Ne}function Ye(Q,q,X,le){if(X==null)throw Error(i(151));for(var Ne=null,nt=null,je=q,Ge=q=0,Zn=null,Et=X.next();je!==null&&!Et.done;Ge++,Et=X.next()){je.index>Ge?(Zn=je,je=null):Zn=je.sibling;var tl=J(Q,je,Et.value,le);if(tl===null){je===null&&(je=Zn);break}r&&je&&tl.alternate===null&&s(Q,je),q=_(tl,q,Ge),nt===null?Ne=tl:nt.sibling=tl,nt=tl,je=Zn}if(Et.done)return o(Q,je),it&&Da(Q,Ge),Ne;if(je===null){for(;!Et.done;Ge++,Et=X.next())Et=fe(Q,Et.value,le),Et!==null&&(q=_(Et,q,Ge),nt===null?Ne=Et:nt.sibling=Et,nt=Et);return it&&Da(Q,Ge),Ne}for(je=c(je);!Et.done;Ge++,Et=X.next())Et=ae(je,Q,Ge,Et.value,le),Et!==null&&(r&&Et.alternate!==null&&je.delete(Et.key===null?Ge:Et.key),q=_(Et,q,Ge),nt===null?Ne=Et:nt.sibling=Et,nt=Et);return r&&je.forEach(function(vN){return s(Q,vN)}),it&&Da(Q,Ge),Ne}function fn(Q,q,X,le){if(typeof X=="object"&&X!==null&&X.type===m&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case u:e:{for(var Ne=X.key;q!==null;){if(q.key===Ne){if(Ne=X.type,Ne===m){if(q.tag===7){o(Q,q.sibling),le=f(q,X.props.children),le.return=Q,Q=le;break e}}else if(q.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===ie&&hd(Ne)===q.type){o(Q,q.sibling),le=f(q,X.props),Mo(le,X),le.return=Q,Q=le;break e}o(Q,q);break}else s(Q,q);q=q.sibling}X.type===m?(le=pu(X.props.children,Q.mode,le,X.key),le.return=Q,Q=le):(le=ip(X.type,X.key,X.props,null,Q.mode,le),Mo(le,X),le.return=Q,Q=le)}return w(Q);case d:e:{for(Ne=X.key;q!==null;){if(q.key===Ne)if(q.tag===4&&q.stateNode.containerInfo===X.containerInfo&&q.stateNode.implementation===X.implementation){o(Q,q.sibling),le=f(q,X.children||[]),le.return=Q,Q=le;break e}else{o(Q,q);break}else s(Q,q);q=q.sibling}le=ry(X,Q.mode,le),le.return=Q,Q=le}return w(Q);case ie:return Ne=X._init,X=Ne(X._payload),fn(Q,q,X,le)}if(be(X))return Me(Q,q,X,le);if(Re(X)){if(Ne=Re(X),typeof Ne!="function")throw Error(i(150));return X=Ne.call(X),Ye(Q,q,X,le)}if(typeof X.then=="function")return fn(Q,q,Tc(X),le);if(X.$$typeof===P)return fn(Q,q,ep(Q,X),le);wc(Q,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,q!==null&&q.tag===6?(o(Q,q.sibling),le=f(q,X),le.return=Q,Q=le):(o(Q,q),le=iy(X,Q.mode,le),le.return=Q,Q=le),w(Q)):o(Q,q)}return function(Q,q,X,le){try{ru=0;var Ne=fn(Q,q,X,le);return Vo=null,Ne}catch(je){if(je===nu)throw je;var nt=Gr(29,je,null,Q.mode);return nt.lanes=le,nt.return=Q,nt}finally{}}}var Bs=Ac(!0),Fs=Ac(!1),Pa=Te(null),Lo=Te(0);function dd(r,s){r=za,yt(Lo,r),yt(Pa,s),za=r|s.baseLanes}function su(){yt(Lo,za),yt(Pa,Pa.current)}function Ic(){za=Lo.current,xt(Pa),xt(Lo)}var Ei=Te(null),zr=null;function bi(r){var s=r.alternate;yt(En,En.current&1),yt(Ei,r),zr===null&&(s===null||Pa.current!==null||s.memoizedState!==null)&&(zr=r)}function vs(r){if(r.tag===22){if(yt(En,En.current),yt(Ei,r),zr===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(zr=r)}}else zs()}function zs(){yt(En,En.current),yt(Ei,Ei.current)}function Es(r){xt(Ei),zr===r&&(zr=null),xt(En)}var En=Te(0);function Sc(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var T_=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},w_=n.unstable_scheduleCallback,A_=n.unstable_NormalPriority,bn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rc(){return{controller:new T_,data:new Map,refCount:0}}function qs(r){r.refCount--,r.refCount===0&&w_(A_,function(){r.controller.abort()})}var Hs=null,fd=0,Uo=0,qr=null;function A(r,s){if(Hs===null){var o=Hs=[];fd=0,Uo=vy(),qr={status:"pending",value:void 0,then:function(c){o.push(c)}}}return fd++,s.then(p,p),s}function p(){if(--fd===0&&Hs!==null){qr!==null&&(qr.status="fulfilled");var r=Hs;Hs=null,Uo=0,qr=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function E(r,s){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var R=x.S;x.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&A(r,s),R!==null&&R(r,s)};var F=Te(null);function $(){var r=F.current;return r!==null?r:Lt.pooledCache}function ne(r,s){s===null?yt(F,F.current):yt(F,s.pool)}function ue(){var r=$();return r===null?null:{parent:bn._currentValue,pool:r}}var Ee=0,ce=null,ye=null,ve=null,Qe=!1,Ue=!1,ze=!1,He=0,$e=0,ht=null,Ct=0;function Ve(){throw Error(i(321))}function dt(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Vt(r[o],s[o]))return!1;return!0}function We(r,s,o,c,f,_){return Ee=_,ce=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,x.H=r===null||r.memoizedState===null?uu:Bo,ze=!1,_=o(c,f),ze=!1,Ue&&(_=vt(s,o,c,f)),tt(r),_}function tt(r){x.H=Gs;var s=ye!==null&&ye.next!==null;if(Ee=0,ve=ye=ce=null,Qe=!1,$e=0,ht=null,s)throw Error(i(300));r===null||Yn||(r=r.dependencies,r!==null&&Jm(r)&&(Yn=!0))}function vt(r,s,o,c){ce=r;var f=0;do{if(Ue&&(ht=null),$e=0,Ue=!1,25<=f)throw Error(i(301));if(f+=1,ve=ye=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}x.H=cu,_=s(o,c)}while(Ue);return _}function At(){var r=x.H,s=r.useState()[0];return s=typeof s.then=="function"?Qn(s):s,r=r.useState()[0],(ye!==null?ye.memoizedState:null)!==r&&(ce.flags|=1024),s}function _t(){var r=He!==0;return He=0,r}function Bt(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function ui(r){if(Qe){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Qe=!1}Ee=0,ve=ye=ce=null,Ue=!1,$e=He=0,ht=null}function Mt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ve===null?ce.memoizedState=ve=r:ve=ve.next=r,ve}function lt(){if(ye===null){var r=ce.alternate;r=r!==null?r.memoizedState:null}else r=ye.next;var s=ve===null?ce.memoizedState:ve.next;if(s!==null)ve=s,ye=r;else{if(r===null)throw ce.alternate===null?Error(i(467)):Error(i(310));ye=r,r={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},ve===null?ce.memoizedState=ve=r:ve=ve.next=r}return ve}var ci;ci=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Qn(r){var s=$e;return $e+=1,ht===null&&(ht=[]),r=zm(ht,r,s),s=ce,(ve===null?s.memoizedState:ve.next)===null&&(s=s.alternate,x.H=s===null||s.memoizedState===null?uu:Bo),r}function Pt(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Qn(r);if(r.$$typeof===P)return Ti(r)}throw Error(i(438,String(r)))}function tr(r){var s=null,o=ce.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=ce.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=ci(),ce.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),c=0;c<r;c++)o[c]=_e;return s.index++,o}function Sn(r,s){return typeof s=="function"?s(r):s}function bs(r){var s=lt();return cn(s,ye,r)}function cn(r,s,o){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=r.baseQueue,_=c.pending;if(_!==null){if(f!==null){var w=f.next;f.next=_.next,_.next=w}s.baseQueue=f=_,c.pending=null}if(_=r.baseState,f===null)r.memoizedState=_;else{s=f.next;var S=w=null,V=null,H=s,oe=!1;do{var fe=H.lane&-536870913;if(fe!==H.lane?(pt&fe)===fe:(Ee&fe)===fe){var J=H.revertLane;if(J===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),fe===Uo&&(oe=!0);else if((Ee&J)===J){H=H.next,J===Uo&&(oe=!0);continue}else fe={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},V===null?(S=V=fe,w=_):V=V.next=fe,ce.lanes|=J,Wo|=J;fe=H.action,ze&&o(_,fe),_=H.hasEagerState?H.eagerState:o(_,fe)}else J={lane:fe,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},V===null?(S=V=J,w=_):V=V.next=J,ce.lanes|=fe,Wo|=fe;H=H.next}while(H!==null&&H!==s);if(V===null?w=_:V.next=S,!Vt(_,r.memoizedState)&&(Yn=!0,oe&&(o=qr,o!==null)))throw o;r.memoizedState=_,r.baseState=w,r.baseQueue=V,c.lastRenderedState=_}return f===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function Tt(r){var s=lt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var c=o.dispatch,f=o.pending,_=s.memoizedState;if(f!==null){o.pending=null;var w=f=f.next;do _=r(_,w.action),w=w.next;while(w!==f);Vt(_,s.memoizedState)||(Yn=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),o.lastRenderedState=_}return[_,c]}function Wn(r,s,o){var c=ce,f=lt(),_=it;if(_){if(o===void 0)throw Error(i(407));o=o()}else o=s();var w=!Vt((ye||f).memoizedState,o);if(w&&(f.memoizedState=o,Yn=!0),f=f.queue,Nc(au.bind(null,c,f,r),[r]),f.getSnapshot!==s||w||ve!==null&&ve.memoizedState.tag&1){if(c.flags|=2048,Oa(9,Ts.bind(null,c,f,o,s),{destroy:void 0},null),Lt===null)throw Error(i(349));_||(Ee&60)!==0||Ui(c,s,o)}return o}function Ui(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=ce.updateQueue,s===null?(s=ci(),ce.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function Ts(r,s,o,c){s.value=o,s.getSnapshot=c,md(s)&&pd(r)}function au(r,s,o){return o(function(){md(s)&&pd(r)})}function md(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Vt(r,o)}catch{return!0}}function pd(r){var s=gs(r,2);s!==null&&ji(s,r,2)}function jo(r){var s=Mt();if(typeof r=="function"){var o=r;if(r=o(),ze){Sr(!0);try{o()}finally{Sr(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:r},s}function Hm(r,s,o,c){return r.baseState=o,cn(r,ye,typeof c=="function"?c:Sn)}function I_(r,s,o,c,f){if(Ym(r))throw Error(i(485));if(r=s.action,r!==null){var _={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){_.listeners.push(w)}};x.T!==null?o(!0):_.isTransition=!1,c(_),o=s.pending,o===null?(_.next=s.pending=_,Cc(s,_)):(_.next=o.next,s.pending=o.next=_)}}function Cc(r,s){var o=s.action,c=s.payload,f=r.state;if(s.isTransition){var _=x.T,w={};x.T=w;try{var S=o(f,c),V=x.S;V!==null&&V(w,S),$m(r,s,S)}catch(H){_d(r,s,H)}finally{x.T=_}}else try{_=o(f,c),$m(r,s,_)}catch(H){_d(r,s,H)}}function $m(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){gd(r,s,c)},function(c){return _d(r,s,c)}):gd(r,s,o)}function gd(r,s,o){s.status="fulfilled",s.value=o,yd(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,Cc(r,o)))}function _d(r,s,o){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,yd(s),s=s.next;while(s!==c)}r.action=null}function yd(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function vd(r,s){return s}function Gm(r,s){if(it){var o=Lt.formState;if(o!==null){e:{var c=ce;if(it){if(Mn){t:{for(var f=Mn,_=Fr;f.nodeType!==8;){if(!_){f=null;break t}if(f=As(f.nextSibling),f===null){f=null;break t}}_=f.data,f=_==="F!"||_==="F"?f:null}if(f){Mn=As(f.nextSibling),c=f.data==="F!";break e}}xa(c)}c=!1}c&&(s=o[0])}}return o=Mt(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vd,lastRenderedState:s},o.queue=c,o=uT.bind(null,ce,c),c.dispatch=o,c=jo(!1),_=x_.bind(null,ce,!1,c.queue),c=Mt(),f={state:s,dispatch:null,action:r,pending:null},c.queue=f,o=I_.bind(null,ce,f,_,o),f.dispatch=o,c.memoizedState=r,[s,o,!1]}function Km(r){var s=lt();return $s(s,ye,r)}function $s(r,s,o){s=cn(r,s,vd)[0],r=bs(Sn)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?Qn(s):s;var c=lt(),f=c.queue,_=f.dispatch;return o!==c.memoizedState&&(ce.flags|=2048,Oa(9,Dc.bind(null,f,o),{destroy:void 0},null)),[s,_,r]}function Dc(r,s){r.action=s}function Ed(r){var s=lt(),o=ye;if(o!==null)return $s(s,o,r);lt(),s=s.memoizedState,o=lt();var c=o.queue.dispatch;return o.memoizedState=r,[s,c,!1]}function Oa(r,s,o,c){return r={tag:r,create:s,inst:o,deps:c,next:null},s=ce.updateQueue,s===null&&(s=ci(),ce.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(c=o.next,o.next=r,r.next=c,s.lastEffect=r),r}function xc(){return lt().memoizedState}function ou(r,s,o,c){var f=Mt();ce.flags|=r,f.memoizedState=Oa(1|s,o,{destroy:void 0},c===void 0?null:c)}function lu(r,s,o,c){var f=lt();c=c===void 0?null:c;var _=f.memoizedState.inst;ye!==null&&c!==null&&dt(c,ye.memoizedState.deps)?f.memoizedState=Oa(s,o,_,c):(ce.flags|=r,f.memoizedState=Oa(1|s,o,_,c))}function bd(r,s){ou(8390656,8,r,s)}function Nc(r,s){lu(2048,8,r,s)}function Qm(r,s){return lu(4,2,r,s)}function Wm(r,s){return lu(4,4,r,s)}function Pc(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Td(r,s,o){o=o!=null?o.concat([r]):null,lu(4,4,Pc.bind(null,s,r),o)}function S_(){}function tT(r,s){var o=lt();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&dt(s,c[1])?c[0]:(o.memoizedState=[r,s],r)}function nT(r,s){var o=lt();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&dt(s,c[1]))return c[0];if(c=r(),ze){Sr(!0);try{r()}finally{Sr(!1)}}return o.memoizedState=[c,s],c}function R_(r,s,o){return o===void 0||(Ee&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=rw(),ce.lanes|=r,Wo|=r,o)}function iT(r,s,o,c){return Vt(o,s)?o:Pa.current!==null?(r=R_(r,o,c),Vt(r,s)||(Yn=!0),r):(Ee&42)===0?(Yn=!0,r.memoizedState=o):(r=rw(),ce.lanes|=r,Wo|=r,s)}function rT(r,s,o,c,f){var _=Ie.p;Ie.p=_!==0&&8>_?_:8;var w=x.T,S={};x.T=S,x_(r,!1,s,o);try{var V=f(),H=x.S;if(H!==null&&H(S,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var oe=E(V,c);wd(r,s,oe,Er(r))}else wd(r,s,c,Er(r))}catch(fe){wd(r,s,{then:function(){},status:"rejected",reason:fe},Er())}finally{Ie.p=_,x.T=w}}function px(){}function C_(r,s,o,c){if(r.tag!==5)throw Error(i(476));var f=sT(r).queue;rT(r,f,s,Be,o===null?px:function(){return aT(r),o(c)})}function sT(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Be,baseState:Be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:Be},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function aT(r){var s=sT(r).next.queue;wd(r,s,{},Er())}function D_(){return Ti(qd)}function oT(){return lt().memoizedState}function lT(){return lt().memoizedState}function gx(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Er();r=qo(o);var c=Ho(s,r,o);c!==null&&(ji(c,s,o),Sd(c,s,o)),s={cache:Rc()},r.payload=s;return}s=s.return}}function _x(r,s,o){var c=Er();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Ym(r)?cT(s,o):(o=pr(r,s,o,c),o!==null&&(ji(o,r,c),hT(o,s,c)))}function uT(r,s,o){var c=Er();wd(r,s,o,c)}function wd(r,s,o,c){var f={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ym(r))cT(s,f);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var w=s.lastRenderedState,S=_(w,o);if(f.hasEagerState=!0,f.eagerState=S,Vt(S,w))return gc(r,s,f,0),Lt===null&&pc(),!1}catch{}finally{}if(o=pr(r,s,f,c),o!==null)return ji(o,r,c),hT(o,s,c),!0}return!1}function x_(r,s,o,c){if(c={lane:2,revertLane:vy(),action:c,hasEagerState:!1,eagerState:null,next:null},Ym(r)){if(s)throw Error(i(479))}else s=pr(r,o,c,2),s!==null&&ji(s,r,2)}function Ym(r){var s=r.alternate;return r===ce||s!==null&&s===ce}function cT(r,s){Ue=Qe=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function hT(r,s,o){if((o&4194176)!==0){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,Os(r,o)}}var Gs={readContext:Ti,use:Pt,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useLayoutEffect:Ve,useInsertionEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useSyncExternalStore:Ve,useId:Ve};Gs.useCacheRefresh=Ve,Gs.useMemoCache=Ve,Gs.useHostTransitionStatus=Ve,Gs.useFormState=Ve,Gs.useActionState=Ve,Gs.useOptimistic=Ve;var uu={readContext:Ti,use:Pt,useCallback:function(r,s){return Mt().memoizedState=[r,s===void 0?null:s],r},useContext:Ti,useEffect:bd,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,ou(4194308,4,Pc.bind(null,s,r),o)},useLayoutEffect:function(r,s){return ou(4194308,4,r,s)},useInsertionEffect:function(r,s){ou(4,2,r,s)},useMemo:function(r,s){var o=Mt();s=s===void 0?null:s;var c=r();if(ze){Sr(!0);try{r()}finally{Sr(!1)}}return o.memoizedState=[c,s],c},useReducer:function(r,s,o){var c=Mt();if(o!==void 0){var f=o(s);if(ze){Sr(!0);try{o(s)}finally{Sr(!1)}}}else f=s;return c.memoizedState=c.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},c.queue=r,r=r.dispatch=_x.bind(null,ce,r),[c.memoizedState,r]},useRef:function(r){var s=Mt();return r={current:r},s.memoizedState=r},useState:function(r){r=jo(r);var s=r.queue,o=uT.bind(null,ce,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:S_,useDeferredValue:function(r,s){var o=Mt();return R_(o,r,s)},useTransition:function(){var r=jo(!1);return r=rT.bind(null,ce,r.queue,!0,!1),Mt().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var c=ce,f=Mt();if(it){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),Lt===null)throw Error(i(349));(pt&60)!==0||Ui(c,s,o)}f.memoizedState=o;var _={value:o,getSnapshot:s};return f.queue=_,bd(au.bind(null,c,_,r),[r]),c.flags|=2048,Oa(9,Ts.bind(null,c,_,o,s),{destroy:void 0},null),o},useId:function(){var r=Mt(),s=Lt.identifierPrefix;if(it){var o=gr,c=Mi;o=(c&~(1<<32-ii(c)-1)).toString(32)+o,s=":"+s+"R"+o,o=He++,0<o&&(s+="H"+o.toString(32)),s+=":"}else o=Ct++,s=":"+s+"r"+o.toString(32)+":";return r.memoizedState=s},useCacheRefresh:function(){return Mt().memoizedState=gx.bind(null,ce)}};uu.useMemoCache=tr,uu.useHostTransitionStatus=D_,uu.useFormState=Gm,uu.useActionState=Gm,uu.useOptimistic=function(r){var s=Mt();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=x_.bind(null,ce,!0,o),o.dispatch=s,[r,s]};var Bo={readContext:Ti,use:Pt,useCallback:tT,useContext:Ti,useEffect:Nc,useImperativeHandle:Td,useInsertionEffect:Qm,useLayoutEffect:Wm,useMemo:nT,useReducer:bs,useRef:xc,useState:function(){return bs(Sn)},useDebugValue:S_,useDeferredValue:function(r,s){var o=lt();return iT(o,ye.memoizedState,r,s)},useTransition:function(){var r=bs(Sn)[0],s=lt().memoizedState;return[typeof r=="boolean"?r:Qn(r),s]},useSyncExternalStore:Wn,useId:oT};Bo.useCacheRefresh=lT,Bo.useMemoCache=tr,Bo.useHostTransitionStatus=D_,Bo.useFormState=Km,Bo.useActionState=Km,Bo.useOptimistic=function(r,s){var o=lt();return Hm(o,ye,r,s)};var cu={readContext:Ti,use:Pt,useCallback:tT,useContext:Ti,useEffect:Nc,useImperativeHandle:Td,useInsertionEffect:Qm,useLayoutEffect:Wm,useMemo:nT,useReducer:Tt,useRef:xc,useState:function(){return Tt(Sn)},useDebugValue:S_,useDeferredValue:function(r,s){var o=lt();return ye===null?R_(o,r,s):iT(o,ye.memoizedState,r,s)},useTransition:function(){var r=Tt(Sn)[0],s=lt().memoizedState;return[typeof r=="boolean"?r:Qn(r),s]},useSyncExternalStore:Wn,useId:oT};cu.useCacheRefresh=lT,cu.useMemoCache=tr,cu.useHostTransitionStatus=D_,cu.useFormState=Ed,cu.useActionState=Ed,cu.useOptimistic=function(r,s){var o=lt();return ye!==null?Hm(o,ye,r,s):(o.baseState=r,[r,o.queue.dispatch])};function N_(r,s,o,c){s=r.memoizedState,o=o(c,s),o=o==null?s:k({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var P_={isMounted:function(r){return(r=r._reactInternals)?Pe(r)===r:!1},enqueueSetState:function(r,s,o){r=r._reactInternals;var c=Er(),f=qo(c);f.payload=s,o!=null&&(f.callback=o),s=Ho(r,f,c),s!==null&&(ji(s,r,c),Sd(s,r,c))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var c=Er(),f=qo(c);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Ho(r,f,c),s!==null&&(ji(s,r,c),Sd(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Er(),c=qo(o);c.tag=2,s!=null&&(c.callback=s),s=Ho(r,c,o),s!==null&&(ji(s,r,o),Sd(s,r,o))}};function dT(r,s,o,c,f,_,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,_,w):s.prototype&&s.prototype.isPureReactComponent?!Jl(o,c)||!Jl(f,_):!0}function fT(r,s,o,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==r&&P_.enqueueReplaceState(s,s.state,null)}function hu(r,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(r=r.defaultProps){o===s&&(o=k({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}var Xm=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function mT(r){Xm(r)}function pT(r){console.error(r)}function gT(r){Xm(r)}function Zm(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function _T(r,s,o){try{var c=r.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function O_(r,s,o){return o=qo(o),o.tag=3,o.payload={element:null},o.callback=function(){Zm(r,s)},o}function yT(r){return r=qo(r),r.tag=3,r}function vT(r,s,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var _=c.value;r.payload=function(){return f(_)},r.callback=function(){_T(s,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){_T(s,o,c),typeof f!="function"&&(Yo===null?Yo=new Set([this]):Yo.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function yx(r,s,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&Id(s,o,f,!0),o=Ei.current,o!==null){switch(o.tag){case 13:return zr===null?my():o.alternate===null&&dn===0&&(dn=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===ys?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),gy(r,c,f)),!1;case 22:return o.flags|=65536,c===ys?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),gy(r,c,f)),!1}throw Error(i(435,o.tag))}return gy(r,c,f),my(),!1}if(it)return s=Ei.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,c!==vc&&(r=Error(i(422),{cause:c}),tu(er(r,o)))):(c!==vc&&(s=Error(i(423),{cause:c}),tu(er(s,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,c=er(c,o),f=O_(r.stateNode,c,f),Q_(r,f),dn!==4&&(dn=2)),!1;var _=Error(i(520),{cause:c});if(_=er(_,o),kd===null?kd=[_]:kd.push(_),dn!==4&&(dn=2),s===null)return!0;c=er(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=O_(o.stateNode,c,r),Q_(o,r),!1;case 1:if(s=o.type,_=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Yo===null||!Yo.has(_))))return o.flags|=65536,f&=-f,o.lanes|=f,f=yT(f),vT(f,r,o,c),Q_(o,f),!1}o=o.return}while(o!==null);return!1}var ET=Error(i(461)),Yn=!1;function hi(r,s,o,c){s.child=r===null?Fs(s,null,o,c):Bs(s,r.child,o,c)}function bT(r,s,o,c,f){o=o.render;var _=s.ref;if("ref"in c){var w={};for(var S in c)S!=="ref"&&(w[S]=c[S])}else w=c;return fu(s),c=We(r,s,o,w,_,f),S=_t(),r!==null&&!Yn?(Bt(r,s,f),ka(r,s,f)):(it&&S&&cd(s),s.flags|=1,hi(r,s,c,f),s.child)}function TT(r,s,o,c,f){if(r===null){var _=o.type;return typeof _=="function"&&!ny(_)&&_.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=_,wT(r,s,_,c,f)):(r=ip(o.type,null,c,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(_=r.child,!z_(r,f)){var w=_.memoizedProps;if(o=o.compare,o=o!==null?o:Jl,o(w,c)&&r.ref===s.ref)return ka(r,s,f)}return s.flags|=1,r=Qo(_,c),r.ref=s.ref,r.return=s,s.child=r}function wT(r,s,o,c,f){if(r!==null){var _=r.memoizedProps;if(Jl(_,c)&&r.ref===s.ref)if(Yn=!1,s.pendingProps=c=_,z_(r,f))(r.flags&131072)!==0&&(Yn=!0);else return s.lanes=r.lanes,ka(r,s,f)}return k_(r,s,o,c,f)}function AT(r,s,o){var c=s.pendingProps,f=c.children,_=(s.stateNode._pendingVisibility&2)!==0,w=r!==null?r.memoizedState:null;if(Ad(r,s),c.mode==="hidden"||_){if((s.flags&128)!==0){if(c=w!==null?w.baseLanes|o:o,r!==null){for(f=s.child=r.child,_=0;f!==null;)_=_|f.lanes|f.childLanes,f=f.sibling;s.childLanes=_&~c}else s.childLanes=0,s.child=null;return IT(r,s,c,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&ne(s,w!==null?w.cachePool:null),w!==null?dd(s,w):su(),vs(s);else return s.lanes=s.childLanes=536870912,IT(r,s,w!==null?w.baseLanes|o:o,o)}else w!==null?(ne(s,w.cachePool),dd(s,w),zs(),s.memoizedState=null):(r!==null&&ne(s,null),su(),zs());return hi(r,s,f,o),s.child}function IT(r,s,o,c){var f=$();return f=f===null?null:{parent:bn._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},r!==null&&ne(s,null),su(),vs(s),r!==null&&Id(r,s,c,!0),null}function Ad(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=2097664)}}function k_(r,s,o,c,f){return fu(s),o=We(r,s,o,c,void 0,f),c=_t(),r!==null&&!Yn?(Bt(r,s,f),ka(r,s,f)):(it&&c&&cd(s),s.flags|=1,hi(r,s,o,f),s.child)}function ST(r,s,o,c,f,_){return fu(s),s.updateQueue=null,o=vt(s,c,o,f),tt(r),c=_t(),r!==null&&!Yn?(Bt(r,s,_),ka(r,s,_)):(it&&c&&cd(s),s.flags|=1,hi(r,s,o,_),s.child)}function RT(r,s,o,c,f){if(fu(s),s.stateNode===null){var _=Do,w=o.contextType;typeof w=="object"&&w!==null&&(_=Ti(w)),_=new o(c,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=P_,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=c,_.state=s.memoizedState,_.refs={},G_(s),w=o.contextType,_.context=typeof w=="object"&&w!==null?Ti(w):Do,_.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(N_(s,o,w,c),_.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(w=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),w!==_.state&&P_.enqueueReplaceState(_,_.state,null),Cd(s,c,_,f),Rd(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){_=s.stateNode;var S=s.memoizedProps,V=hu(o,S);_.props=V;var H=_.context,oe=o.contextType;w=Do,typeof oe=="object"&&oe!==null&&(w=Ti(oe));var fe=o.getDerivedStateFromProps;oe=typeof fe=="function"||typeof _.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,oe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S||H!==w)&&fT(s,_,c,w),zo=!1;var J=s.memoizedState;_.state=J,Cd(s,c,_,f),Rd(),H=s.memoizedState,S||J!==H||zo?(typeof fe=="function"&&(N_(s,o,fe,c),H=s.memoizedState),(V=zo||dT(s,o,V,c,J,H,w))?(oe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=H),_.props=c,_.state=H,_.context=w,c=V):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{_=s.stateNode,K_(r,s),w=s.memoizedProps,oe=hu(o,w),_.props=oe,fe=s.pendingProps,J=_.context,H=o.contextType,V=Do,typeof H=="object"&&H!==null&&(V=Ti(H)),S=o.getDerivedStateFromProps,(H=typeof S=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w!==fe||J!==V)&&fT(s,_,c,V),zo=!1,J=s.memoizedState,_.state=J,Cd(s,c,_,f),Rd();var ae=s.memoizedState;w!==fe||J!==ae||zo||r!==null&&r.dependencies!==null&&Jm(r.dependencies)?(typeof S=="function"&&(N_(s,o,S,c),ae=s.memoizedState),(oe=zo||dT(s,o,oe,c,J,ae,V)||r!==null&&r.dependencies!==null&&Jm(r.dependencies))?(H||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,ae,V),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,ae,V)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||w===r.memoizedProps&&J===r.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&J===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ae),_.props=c,_.state=ae,_.context=V,c=oe):(typeof _.componentDidUpdate!="function"||w===r.memoizedProps&&J===r.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&J===r.memoizedState||(s.flags|=1024),c=!1)}return _=c,Ad(r,s),c=(s.flags&128)!==0,_||c?(_=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,r!==null&&c?(s.child=Bs(s,r.child,null,f),s.child=Bs(s,null,o,f)):hi(r,s,o,f),s.memoizedState=_.state,r=s.child):r=ka(r,s,f),r}function CT(r,s,o,c){return eu(),s.flags|=256,hi(r,s,o,c),s.child}var V_={dehydrated:null,treeContext:null,retryLane:0};function M_(r){return{baseLanes:r,cachePool:ue()}}function L_(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Kr),r}function DT(r,s,o){var c=s.pendingProps,f=!1,_=(s.flags&128)!==0,w;if((w=_)||(w=r!==null&&r.memoizedState===null?!1:(En.current&2)!==0),w&&(f=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,r===null){if(it){if(f?bi(s):zs(),it){var S=Mn,V;if(V=S){e:{for(V=S,S=Fr;V.nodeType!==8;){if(!S){S=null;break e}if(V=As(V.nextSibling),V===null){S=null;break e}}S=V}S!==null?(s.memoizedState={dehydrated:S,treeContext:js!==null?{id:Mi,overflow:gr}:null,retryLane:536870912},V=Gr(18,null,null,0),V.stateNode=S,V.return=s,s.child=V,li=s,Mn=null,V=!0):V=!1}V||xa(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return S.data==="$!"?s.lanes=16:s.lanes=536870912,null;Es(s)}return S=c.children,c=c.fallback,f?(zs(),f=s.mode,S=j_({mode:"hidden",children:S},f),c=pu(c,f,o,null),S.return=s,c.return=s,S.sibling=c,s.child=S,f=s.child,f.memoizedState=M_(o),f.childLanes=L_(r,w,o),s.memoizedState=V_,c):(bi(s),U_(s,S))}if(V=r.memoizedState,V!==null&&(S=V.dehydrated,S!==null)){if(_)s.flags&256?(bi(s),s.flags&=-257,s=B_(r,s,o)):s.memoizedState!==null?(zs(),s.child=r.child,s.flags|=128,s=null):(zs(),f=c.fallback,S=s.mode,c=j_({mode:"visible",children:c.children},S),f=pu(f,S,o,null),f.flags|=2,c.return=s,f.return=s,c.sibling=f,s.child=c,Bs(s,r.child,null,o),c=s.child,c.memoizedState=M_(o),c.childLanes=L_(r,w,o),s.memoizedState=V_,s=f);else if(bi(s),S.data==="$!"){if(w=S.nextSibling&&S.nextSibling.dataset,w)var H=w.dgst;w=H,c=Error(i(419)),c.stack="",c.digest=w,tu({value:c,source:null,stack:null}),s=B_(r,s,o)}else if(Yn||Id(r,s,o,!1),w=(o&r.childLanes)!==0,Yn||w){if(w=Lt,w!==null){if(c=o&-o,(c&42)!==0)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=(c&(w.suspendedLanes|o))!==0?0:c,c!==0&&c!==V.retryLane)throw V.retryLane=c,gs(r,c),ji(w,r,c),ET}S.data==="$?"||my(),s=B_(r,s,o)}else S.data==="$?"?(s.flags|=128,s.child=r.child,s=Ox.bind(null,r),S._reactRetry=s,s=null):(r=V.treeContext,Mn=As(S.nextSibling),li=s,it=!0,Li=null,Fr=!1,r!==null&&(oi[Vi++]=Mi,oi[Vi++]=gr,oi[Vi++]=js,Mi=r.id,gr=r.overflow,js=s),s=U_(s,c.children),s.flags|=4096);return s}return f?(zs(),f=c.fallback,S=s.mode,V=r.child,H=V.sibling,c=Qo(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&31457280,H!==null?f=Qo(H,f):(f=pu(f,S,o,null),f.flags|=2),f.return=s,c.return=s,c.sibling=f,s.child=c,c=f,f=s.child,S=r.child.memoizedState,S===null?S=M_(o):(V=S.cachePool,V!==null?(H=bn._currentValue,V=V.parent!==H?{parent:H,pool:H}:V):V=ue(),S={baseLanes:S.baseLanes|o,cachePool:V}),f.memoizedState=S,f.childLanes=L_(r,w,o),s.memoizedState=V_,c):(bi(s),o=r.child,r=o.sibling,o=Qo(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,r!==null&&(w=s.deletions,w===null?(s.deletions=[r],s.flags|=16):w.push(r)),s.child=o,s.memoizedState=null,o)}function U_(r,s){return s=j_({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function j_(r,s){return tw(r,s,0,null)}function B_(r,s,o){return Bs(s,r.child,null,o),r=U_(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function xT(r,s,o){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),H_(r.return,s,o)}function F_(r,s,o,c,f){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=o,_.tailMode=f)}function NT(r,s,o){var c=s.pendingProps,f=c.revealOrder,_=c.tail;if(hi(r,s,c.children,o),c=En.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&xT(r,o,s);else if(r.tag===19)xT(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(yt(En,c),f){case"forwards":for(o=s.child,f=null;o!==null;)r=o.alternate,r!==null&&Sc(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),F_(s,!1,f,o,_);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Sc(r)===null){s.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}F_(s,!0,o,null,_);break;case"together":F_(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ka(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Wo|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(Id(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Qo(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Qo(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function z_(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Jm(r)))}function vx(r,s,o){switch(s.tag){case 3:$i(s,s.stateNode.containerInfo),Fo(s,bn,r.memoizedState.cache),eu();break;case 27:case 5:Ul(s);break;case 4:$i(s,s.stateNode.containerInfo);break;case 10:Fo(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(bi(s),s.flags|=128,null):(o&s.child.childLanes)!==0?DT(r,s,o):(bi(s),r=ka(r,s,o),r!==null?r.sibling:null);bi(s);break;case 19:var f=(r.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(Id(r,s,o,!1),c=(o&s.childLanes)!==0),f){if(c)return NT(r,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),yt(En,En.current),c)break;return null;case 22:case 23:return s.lanes=0,AT(r,s,o);case 24:Fo(s,bn,r.memoizedState.cache)}return ka(r,s,o)}function PT(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)Yn=!0;else{if(!z_(r,o)&&(s.flags&128)===0)return Yn=!1,vx(r,s,o);Yn=(r.flags&131072)!==0}else Yn=!1,it&&(s.flags&1048576)!==0&&Bm(s,Po,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var c=s.elementType,f=c._init;if(c=f(c._payload),s.type=c,typeof c=="function")ny(c)?(r=hu(c,r),s.tag=1,s=RT(null,s,c,r,o)):(s.tag=0,s=k_(null,s,c,r,o));else{if(c!=null){if(f=c.$$typeof,f===U){s.tag=11,s=bT(null,s,c,r,o);break e}else if(f===Z){s.tag=14,s=TT(null,s,c,r,o);break e}}throw s=O(c)||c,Error(i(306,s,""))}}return s;case 0:return k_(r,s,s.type,s.pendingProps,o);case 1:return c=s.type,f=hu(c,s.pendingProps),RT(r,s,c,f,o);case 3:e:{if($i(s,s.stateNode.containerInfo),r===null)throw Error(i(387));var _=s.pendingProps;f=s.memoizedState,c=f.element,K_(r,s),Cd(s,_,null,o);var w=s.memoizedState;if(_=w.cache,Fo(s,bn,_),_!==f.cache&&$_(s,[bn],o,!0),Rd(),_=w.element,f.isDehydrated)if(f={element:_,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=CT(r,s,_,o);break e}else if(_!==c){c=er(Error(i(424)),s),tu(c),s=CT(r,s,_,o);break e}else for(Mn=As(s.stateNode.containerInfo.firstChild),li=s,it=!0,Li=null,Fr=!0,o=Fs(s,null,_,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(eu(),_===c){s=ka(r,s,o);break e}hi(r,s,_,o)}s=s.child}return s;case 26:return Ad(r,s),r===null?(o=Vw(s.type,null,s.pendingProps,null))?s.memoizedState=o:it||(o=s.type,r=s.pendingProps,c=pp(Bn.current).createElement(o),c[an]=s,c[_n]=r,di(c,o,r),Nt(c),s.stateNode=c):s.memoizedState=Vw(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ul(s),r===null&&it&&(c=s.stateNode=Pw(s.type,s.pendingProps,Bn.current),li=s,Fr=!0,Mn=As(c.firstChild)),c=s.pendingProps.children,r!==null||it?hi(r,s,c,o):s.child=Bs(s,null,c,o),Ad(r,s),s.child;case 5:return r===null&&it&&((f=c=Mn)&&(c=Wx(c,s.type,s.pendingProps,Fr),c!==null?(s.stateNode=c,li=s,Mn=As(c.firstChild),Fr=!1,f=!0):f=!1),f||xa(s)),Ul(s),f=s.type,_=s.pendingProps,w=r!==null?r.memoizedProps:null,c=_.children,Cy(f,_)?c=null:w!==null&&Cy(f,w)&&(s.flags|=32),s.memoizedState!==null&&(f=We(r,s,At,null,null,o),qd._currentValue=f),Ad(r,s),hi(r,s,c,o),s.child;case 6:return r===null&&it&&((r=o=Mn)&&(o=Yx(o,s.pendingProps,Fr),o!==null?(s.stateNode=o,li=s,Mn=null,r=!0):r=!1),r||xa(s)),null;case 13:return DT(r,s,o);case 4:return $i(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=Bs(s,null,c,o):hi(r,s,c,o),s.child;case 11:return bT(r,s,s.type,s.pendingProps,o);case 7:return hi(r,s,s.pendingProps,o),s.child;case 8:return hi(r,s,s.pendingProps.children,o),s.child;case 12:return hi(r,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,Fo(s,s.type,c.value),hi(r,s,c.children,o),s.child;case 9:return f=s.type._context,c=s.pendingProps.children,fu(s),f=Ti(f),c=c(f),s.flags|=1,hi(r,s,c,o),s.child;case 14:return TT(r,s,s.type,s.pendingProps,o);case 15:return wT(r,s,s.type,s.pendingProps,o);case 19:return NT(r,s,o);case 22:return AT(r,s,o);case 24:return fu(s),c=Ti(bn),r===null?(f=$(),f===null&&(f=Lt,_=Rc(),f.pooledCache=_,_.refCount++,_!==null&&(f.pooledCacheLanes|=o),f=_),s.memoizedState={parent:c,cache:f},G_(s),Fo(s,bn,f)):((r.lanes&o)!==0&&(K_(r,s),Cd(s,null,null,o),Rd()),f=r.memoizedState,_=s.memoizedState,f.parent!==c?(f={parent:c,cache:c},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Fo(s,bn,c)):(c=_.cache,Fo(s,bn,c),c!==f.cache&&$_(s,[bn],o,!0))),hi(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}var q_=Te(null),du=null,Va=null;function Fo(r,s,o){yt(q_,s._currentValue),s._currentValue=o}function Ma(r){r._currentValue=q_.current,xt(q_)}function H_(r,s,o){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===o)break;r=r.return}}function $_(r,s,o,c){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var _=f.dependencies;if(_!==null){var w=f.child;_=_.firstContext;e:for(;_!==null;){var S=_;_=f;for(var V=0;V<s.length;V++)if(S.context===s[V]){_.lanes|=o,S=_.alternate,S!==null&&(S.lanes|=o),H_(_.return,o,r),c||(w=null);break e}_=S.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(i(341));w.lanes|=o,_=w.alternate,_!==null&&(_.lanes|=o),H_(w,o,r),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===r){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function Id(r,s,o,c){r=null;for(var f=s,_=!1;f!==null;){if(!_){if((f.flags&524288)!==0)_=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var S=f.type;Vt(f.pendingProps.value,w.value)||(r!==null?r.push(S):r=[S])}}else if(f===Jr.current){if(w=f.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(qd):r=[qd])}f=f.return}r!==null&&$_(s,r,o,c),s.flags|=262144}function Jm(r){for(r=r.firstContext;r!==null;){if(!Vt(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function fu(r){du=r,Va=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Ti(r){return OT(du,r)}function ep(r,s){return du===null&&fu(r),OT(r,s)}function OT(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Va===null){if(r===null)throw Error(i(308));Va=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Va=Va.next=s;return o}var zo=!1;function G_(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function K_(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function qo(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ho(r,s,o){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Jt&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,s=_c(r),Um(r,null,o),s}return gc(r,c,s,o),_c(r)}function Sd(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194176)!==0)){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,Os(r,o)}}function Q_(r,s){var o=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,_=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};_===null?f=_=w:_=_.next=w,o=o.next}while(o!==null);_===null?f=_=s:_=_.next=s}else f=_=s;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var W_=!1;function Rd(){if(W_){var r=qr;if(r!==null)throw r}}function Cd(r,s,o,c){W_=!1;var f=r.updateQueue;zo=!1;var _=f.firstBaseUpdate,w=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var V=S,H=V.next;V.next=null,w===null?_=H:w.next=H,w=V;var oe=r.alternate;oe!==null&&(oe=oe.updateQueue,S=oe.lastBaseUpdate,S!==w&&(S===null?oe.firstBaseUpdate=H:S.next=H,oe.lastBaseUpdate=V))}if(_!==null){var fe=f.baseState;w=0,oe=H=V=null,S=_;do{var J=S.lane&-536870913,ae=J!==S.lane;if(ae?(pt&J)===J:(c&J)===J){J!==0&&J===Uo&&(W_=!0),oe!==null&&(oe=oe.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Me=r,Ye=S;J=s;var fn=o;switch(Ye.tag){case 1:if(Me=Ye.payload,typeof Me=="function"){fe=Me.call(fn,fe,J);break e}fe=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Ye.payload,J=typeof Me=="function"?Me.call(fn,fe,J):Me,J==null)break e;fe=k({},fe,J);break e;case 2:zo=!0}}J=S.callback,J!==null&&(r.flags|=64,ae&&(r.flags|=8192),ae=f.callbacks,ae===null?f.callbacks=[J]:ae.push(J))}else ae={lane:J,tag:S.tag,payload:S.payload,callback:S.callback,next:null},oe===null?(H=oe=ae,V=fe):oe=oe.next=ae,w|=J;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;ae=S,S=ae.next,ae.next=null,f.lastBaseUpdate=ae,f.shared.pending=null}}while(!0);oe===null&&(V=fe),f.baseState=V,f.firstBaseUpdate=H,f.lastBaseUpdate=oe,_===null&&(f.shared.lanes=0),Wo|=w,r.lanes=w,r.memoizedState=fe}}function kT(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function VT(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)kT(o[r],s)}function Dd(r,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&r)===r){c=void 0;var _=o.create,w=o.inst;c=_(),w.destroy=c}o=o.next}while(o!==f)}}catch(S){Ot(s,s.return,S)}}function $o(r,s,o){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var _=f.next;c=_;do{if((c.tag&r)===r){var w=c.inst,S=w.destroy;if(S!==void 0){w.destroy=void 0,f=s;var V=o;try{S()}catch(H){Ot(f,V,H)}}}c=c.next}while(c!==_)}}catch(H){Ot(s,s.return,H)}}function MT(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{VT(s,o)}catch(c){Ot(r,r.return,c)}}}function LT(r,s,o){o.props=hu(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(c){Ot(r,s,c)}}function mu(r,s){try{var o=r.ref;if(o!==null){var c=r.stateNode;switch(r.tag){case 26:case 27:case 5:var f=c;break;default:f=c}typeof o=="function"?r.refCleanup=o(f):o.current=f}}catch(_){Ot(r,s,_)}}function _r(r,s){var o=r.ref,c=r.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){Ot(r,s,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Ot(r,s,f)}else o.current=null}function UT(r){var s=r.type,o=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){Ot(r,r.return,f)}}function jT(r,s,o){try{var c=r.stateNode;Hx(c,r.type,o,s),c[_n]=s}catch(f){Ot(r,r.return,f)}}function BT(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function Y_(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||BT(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function X_(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?o.nodeType===8?o.parentNode.insertBefore(r,s):o.insertBefore(r,s):(o.nodeType===8?(s=o.parentNode,s.insertBefore(r,o)):(s=o,s.appendChild(r)),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=mp));else if(c!==4&&c!==27&&(r=r.child,r!==null))for(X_(r,s,o),r=r.sibling;r!==null;)X_(r,s,o),r=r.sibling}function tp(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(c!==4&&c!==27&&(r=r.child,r!==null))for(tp(r,s,o),r=r.sibling;r!==null;)tp(r,s,o),r=r.sibling}var La=!1,hn=!1,Z_=!1,FT=typeof WeakSet=="function"?WeakSet:Set,Xn=null,zT=!1;function Ex(r,s){if(r=r.containerInfo,Sy=bp,r=Pm(r),rd(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{o.nodeType,_.nodeType}catch{o=null;break e}var w=0,S=-1,V=-1,H=0,oe=0,fe=r,J=null;t:for(;;){for(var ae;fe!==o||f!==0&&fe.nodeType!==3||(S=w+f),fe!==_||c!==0&&fe.nodeType!==3||(V=w+c),fe.nodeType===3&&(w+=fe.nodeValue.length),(ae=fe.firstChild)!==null;)J=fe,fe=ae;for(;;){if(fe===r)break t;if(J===o&&++H===f&&(S=w),J===_&&++oe===c&&(V=w),(ae=fe.nextSibling)!==null)break;fe=J,J=fe.parentNode}fe=ae}o=S===-1||V===-1?null:{start:S,end:V}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ry={focusedElem:r,selectionRange:o},bp=!1,Xn=s;Xn!==null;)if(s=Xn,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Xn=r;else for(;Xn!==null;){switch(s=Xn,_=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,o=s,f=_.memoizedProps,_=_.memoizedState,c=o.stateNode;try{var Me=hu(o.type,f,o.elementType===o.type);r=c.getSnapshotBeforeUpdate(Me,_),c.__reactInternalSnapshotBeforeUpdate=r}catch(Ye){Ot(o,o.return,Ye)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)Ny(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Ny(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Xn=r;break}Xn=s.return}return Me=zT,zT=!1,Me}function qT(r,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:ja(r,o),c&4&&Dd(5,o);break;case 1:if(ja(r,o),c&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(S){Ot(o,o.return,S)}else{var f=hu(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(f,s,r.__reactInternalSnapshotBeforeUpdate)}catch(S){Ot(o,o.return,S)}}c&64&&MT(o),c&512&&mu(o,o.return);break;case 3:if(ja(r,o),c&64&&(c=o.updateQueue,c!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{VT(c,r)}catch(S){Ot(o,o.return,S)}}break;case 26:ja(r,o),c&512&&mu(o,o.return);break;case 27:case 5:ja(r,o),s===null&&c&4&&UT(o),c&512&&mu(o,o.return);break;case 12:ja(r,o);break;case 13:ja(r,o),c&4&&GT(r,o);break;case 22:if(f=o.memoizedState!==null||La,!f){s=s!==null&&s.memoizedState!==null||hn;var _=La,w=hn;La=f,(hn=s)&&!w?Go(r,o,(o.subtreeFlags&8772)!==0):ja(r,o),La=_,hn=w}c&512&&(o.memoizedProps.mode==="manual"?mu(o,o.return):_r(o,o.return));break;default:ja(r,o)}}function HT(r){var s=r.alternate;s!==null&&(r.alternate=null,HT(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Dr(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Rn=null,yr=!1;function Ua(r,s,o){for(o=o.child;o!==null;)$T(r,s,o),o=o.sibling}function $T(r,s,o){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(xs,o)}catch{}switch(o.tag){case 26:hn||_r(o,s),Ua(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:hn||_r(o,s);var c=Rn,f=yr;for(Rn=o.stateNode,Ua(r,s,o),o=o.stateNode,s=o.attributes;s.length;)o.removeAttributeNode(s[0]);Dr(o),Rn=c,yr=f;break;case 5:hn||_r(o,s);case 6:f=Rn;var _=yr;if(Rn=null,Ua(r,s,o),Rn=f,yr=_,Rn!==null)if(yr)try{r=Rn,c=o.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)}catch(w){Ot(o,s,w)}else try{Rn.removeChild(o.stateNode)}catch(w){Ot(o,s,w)}break;case 18:Rn!==null&&(yr?(s=Rn,o=o.stateNode,s.nodeType===8?xy(s.parentNode,o):s.nodeType===1&&xy(s,o),Kd(s)):xy(Rn,o.stateNode));break;case 4:c=Rn,f=yr,Rn=o.stateNode.containerInfo,yr=!0,Ua(r,s,o),Rn=c,yr=f;break;case 0:case 11:case 14:case 15:hn||$o(2,o,s),hn||$o(4,o,s),Ua(r,s,o);break;case 1:hn||(_r(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&LT(o,s,c)),Ua(r,s,o);break;case 21:Ua(r,s,o);break;case 22:hn||_r(o,s),hn=(c=hn)||o.memoizedState!==null,Ua(r,s,o),hn=c;break;default:Ua(r,s,o)}}function GT(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Kd(r)}catch(o){Ot(s,s.return,o)}}function bx(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new FT),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new FT),s;default:throw Error(i(435,r.tag))}}function J_(r,s){var o=bx(r);s.forEach(function(c){var f=kx.bind(null,r,c);o.has(c)||(o.add(c),c.then(f,f))})}function Hr(r,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],_=r,w=s,S=w;e:for(;S!==null;){switch(S.tag){case 27:case 5:Rn=S.stateNode,yr=!1;break e;case 3:Rn=S.stateNode.containerInfo,yr=!0;break e;case 4:Rn=S.stateNode.containerInfo,yr=!0;break e}S=S.return}if(Rn===null)throw Error(i(160));$T(_,w,f),Rn=null,yr=!1,_=f.alternate,_!==null&&(_.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)KT(s,r),s=s.sibling}var ws=null;function KT(r,s){var o=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Hr(s,r),$r(r),c&4&&($o(3,r,r.return),Dd(3,r),$o(5,r,r.return));break;case 1:Hr(s,r),$r(r),c&512&&(hn||o===null||_r(o,o.return)),c&64&&La&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=ws;if(Hr(s,r),$r(r),c&512&&(hn||o===null||_r(o,o.return)),c&4){var _=o!==null?o.memoizedState:null;if(c=r.memoizedState,o===null)if(c===null)if(r.stateNode===null){e:{c=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":_=f.getElementsByTagName("title")[0],(!_||_[$t]||_[an]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=f.createElement(c),f.head.insertBefore(_,f.querySelector("head > title"))),di(_,c,o),_[an]=r,Nt(_),c=_;break e;case"link":var w=Uw("link","href",f).get(c+(o.href||""));if(w){for(var S=0;S<w.length;S++)if(_=w[S],_.getAttribute("href")===(o.href==null?null:o.href)&&_.getAttribute("rel")===(o.rel==null?null:o.rel)&&_.getAttribute("title")===(o.title==null?null:o.title)&&_.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(S,1);break t}}_=f.createElement(c),di(_,c,o),f.head.appendChild(_);break;case"meta":if(w=Uw("meta","content",f).get(c+(o.content||""))){for(S=0;S<w.length;S++)if(_=w[S],_.getAttribute("content")===(o.content==null?null:""+o.content)&&_.getAttribute("name")===(o.name==null?null:o.name)&&_.getAttribute("property")===(o.property==null?null:o.property)&&_.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&_.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(S,1);break t}}_=f.createElement(c),di(_,c,o),f.head.appendChild(_);break;default:throw Error(i(468,c))}_[an]=r,Nt(_),c=_}r.stateNode=c}else jw(f,r.type,r.stateNode);else r.stateNode=Lw(f,c,r.memoizedProps);else _!==c?(_===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):_.count--,c===null?jw(f,r.type,r.stateNode):Lw(f,c,r.memoizedProps)):c===null&&r.stateNode!==null&&jT(r,r.memoizedProps,o.memoizedProps)}break;case 27:if(c&4&&r.alternate===null){f=r.stateNode,_=r.memoizedProps;try{for(var V=f.firstChild;V;){var H=V.nextSibling,oe=V.nodeName;V[$t]||oe==="HEAD"||oe==="BODY"||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&V.rel.toLowerCase()==="stylesheet"||f.removeChild(V),V=H}for(var fe=r.type,J=f.attributes;J.length;)f.removeAttributeNode(J[0]);di(f,fe,_),f[an]=r,f[_n]=_}catch(Me){Ot(r,r.return,Me)}}case 5:if(Hr(s,r),$r(r),c&512&&(hn||o===null||_r(o,o.return)),r.flags&32){f=r.stateNode;try{Vn(f,"")}catch(Me){Ot(r,r.return,Me)}}c&4&&r.stateNode!=null&&(f=r.memoizedProps,jT(r,f,o!==null?o.memoizedProps:f)),c&1024&&(Z_=!0);break;case 6:if(Hr(s,r),$r(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,o=r.stateNode;try{o.nodeValue=c}catch(Me){Ot(r,r.return,Me)}}break;case 3:if(yp=null,f=ws,ws=gp(s.containerInfo),Hr(s,r),ws=f,$r(r),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Kd(s.containerInfo)}catch(Me){Ot(r,r.return,Me)}Z_&&(Z_=!1,QT(r));break;case 4:c=ws,ws=gp(r.stateNode.containerInfo),Hr(s,r),$r(r),ws=c;break;case 12:Hr(s,r),$r(r);break;case 13:Hr(s,r),$r(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(ly=Nn()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,J_(r,c)));break;case 22:if(c&512&&(hn||o===null||_r(o,o.return)),V=r.memoizedState!==null,H=o!==null&&o.memoizedState!==null,oe=La,fe=hn,La=oe||V,hn=fe||H,Hr(s,r),hn=fe,La=oe,$r(r),s=r.stateNode,s._current=r,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,c&8192&&(s._visibility=V?s._visibility&-2:s._visibility|1,V&&(s=La||hn,o===null||H||s||Oc(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))e:for(o=null,s=r;;){if(s.tag===5||s.tag===26||s.tag===27){if(o===null){H=o=s;try{if(f=H.stateNode,V)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=H.stateNode,S=H.memoizedProps.style;var ae=S!=null&&S.hasOwnProperty("display")?S.display:null;w.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Me){Ot(H,H.return,Me)}}}else if(s.tag===6){if(o===null){H=s;try{H.stateNode.nodeValue=V?"":H.memoizedProps}catch(Me){Ot(H,H.return,Me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,J_(r,o))));break;case 19:Hr(s,r),$r(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,J_(r,c)));break;case 21:break;default:Hr(s,r),$r(r)}}function $r(r){var s=r.flags;if(s&2){try{if(r.tag!==27){e:{for(var o=r.return;o!==null;){if(BT(o)){var c=o;break e}o=o.return}throw Error(i(160))}switch(c.tag){case 27:var f=c.stateNode,_=Y_(r);tp(r,_,f);break;case 5:var w=c.stateNode;c.flags&32&&(Vn(w,""),c.flags&=-33);var S=Y_(r);tp(r,S,w);break;case 3:case 4:var V=c.stateNode.containerInfo,H=Y_(r);X_(r,H,V);break;default:throw Error(i(161))}}}catch(oe){Ot(r,r.return,oe)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function QT(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;QT(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function ja(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)qT(r,s.alternate,s),s=s.sibling}function Oc(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:$o(4,s,s.return),Oc(s);break;case 1:_r(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&LT(s,s.return,o),Oc(s);break;case 26:case 27:case 5:_r(s,s.return),Oc(s);break;case 22:_r(s,s.return),s.memoizedState===null&&Oc(s);break;default:Oc(s)}r=r.sibling}}function Go(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,f=r,_=s,w=_.flags;switch(_.tag){case 0:case 11:case 15:Go(f,_,o),Dd(4,_);break;case 1:if(Go(f,_,o),c=_,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){Ot(c,c.return,H)}if(c=_,f=c.updateQueue,f!==null){var S=c.stateNode;try{var V=f.shared.hiddenCallbacks;if(V!==null)for(f.shared.hiddenCallbacks=null,f=0;f<V.length;f++)kT(V[f],S)}catch(H){Ot(c,c.return,H)}}o&&w&64&&MT(_),mu(_,_.return);break;case 26:case 27:case 5:Go(f,_,o),o&&c===null&&w&4&&UT(_),mu(_,_.return);break;case 12:Go(f,_,o);break;case 13:Go(f,_,o),o&&w&4&&GT(f,_);break;case 22:_.memoizedState===null&&Go(f,_,o),mu(_,_.return);break;default:Go(f,_,o)}s=s.sibling}}function ey(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&qs(o))}function ty(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&qs(r))}function Ko(r,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)WT(r,s,o,c),s=s.sibling}function WT(r,s,o,c){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Ko(r,s,o,c),f&2048&&Dd(9,s);break;case 3:Ko(r,s,o,c),f&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&qs(r)));break;case 12:if(f&2048){Ko(r,s,o,c),r=s.stateNode;try{var _=s.memoizedProps,w=_.id,S=_.onPostCommit;typeof S=="function"&&S(w,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(V){Ot(s,s.return,V)}}else Ko(r,s,o,c);break;case 23:break;case 22:_=s.stateNode,s.memoizedState!==null?_._visibility&4?Ko(r,s,o,c):xd(r,s):_._visibility&4?Ko(r,s,o,c):(_._visibility|=4,kc(r,s,o,c,(s.subtreeFlags&10256)!==0)),f&2048&&ey(s.alternate,s);break;case 24:Ko(r,s,o,c),f&2048&&ty(s.alternate,s);break;default:Ko(r,s,o,c)}}function kc(r,s,o,c,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var _=r,w=s,S=o,V=c,H=w.flags;switch(w.tag){case 0:case 11:case 15:kc(_,w,S,V,f),Dd(8,w);break;case 23:break;case 22:var oe=w.stateNode;w.memoizedState!==null?oe._visibility&4?kc(_,w,S,V,f):xd(_,w):(oe._visibility|=4,kc(_,w,S,V,f)),f&&H&2048&&ey(w.alternate,w);break;case 24:kc(_,w,S,V,f),f&&H&2048&&ty(w.alternate,w);break;default:kc(_,w,S,V,f)}s=s.sibling}}function xd(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,c=s,f=c.flags;switch(c.tag){case 22:xd(o,c),f&2048&&ey(c.alternate,c);break;case 24:xd(o,c),f&2048&&ty(c.alternate,c);break;default:xd(o,c)}s=s.sibling}}var Nd=8192;function Vc(r){if(r.subtreeFlags&Nd)for(r=r.child;r!==null;)YT(r),r=r.sibling}function YT(r){switch(r.tag){case 26:Vc(r),r.flags&Nd&&r.memoizedState!==null&&uN(ws,r.memoizedState,r.memoizedProps);break;case 5:Vc(r);break;case 3:case 4:var s=ws;ws=gp(r.stateNode.containerInfo),Vc(r),ws=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Nd,Nd=16777216,Vc(r),Nd=s):Vc(r));break;default:Vc(r)}}function XT(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Pd(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Xn=c,JT(c,r)}XT(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ZT(r),r=r.sibling}function ZT(r){switch(r.tag){case 0:case 11:case 15:Pd(r),r.flags&2048&&$o(9,r,r.return);break;case 3:Pd(r);break;case 12:Pd(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&4&&(r.return===null||r.return.tag!==13)?(s._visibility&=-5,np(r)):Pd(r);break;default:Pd(r)}}function np(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Xn=c,JT(c,r)}XT(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:$o(8,s,s.return),np(s);break;case 22:o=s.stateNode,o._visibility&4&&(o._visibility&=-5,np(s));break;default:np(s)}r=r.sibling}}function JT(r,s){for(;Xn!==null;){var o=Xn;switch(o.tag){case 0:case 11:case 15:$o(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:qs(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Xn=c;else e:for(o=r;Xn!==null;){c=Xn;var f=c.sibling,_=c.return;if(HT(c),c===o){Xn=null;break e}if(f!==null){f.return=_,Xn=f;break e}Xn=_}}}function Tx(r,s,o,c){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(r,s,o,c){return new Tx(r,s,o,c)}function ny(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Qo(r,s){var o=r.alternate;return o===null?(o=Gr(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&31457280,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function ew(r,s){r.flags&=31457282;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function ip(r,s,o,c,f,_){var w=0;if(c=r,typeof r=="function")ny(r)&&(w=1);else if(typeof r=="string")w=oN(r,o,ni.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case m:return pu(o.children,f,_,s);case g:w=8,f|=24;break;case v:return r=Gr(12,o,s,f|2),r.elementType=v,r.lanes=_,r;case G:return r=Gr(13,o,s,f),r.elementType=G,r.lanes=_,r;case j:return r=Gr(19,o,s,f),r.elementType=j,r.lanes=_,r;case se:return tw(o,f,_,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case b:case P:w=10;break e;case I:w=9;break e;case U:w=11;break e;case Z:w=14;break e;case ie:w=16,c=null;break e}w=29,o=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=Gr(w,o,s,f),s.elementType=r,s.type=c,s.lanes=_,s}function pu(r,s,o,c){return r=Gr(7,r,c,s),r.lanes=o,r}function tw(r,s,o,c){r=Gr(22,r,c,s),r.elementType=se,r.lanes=o;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var _=f._current;if(_===null)throw Error(i(456));if((f._pendingVisibility&2)===0){var w=gs(_,2);w!==null&&(f._pendingVisibility|=2,ji(w,_,2))}},attach:function(){var _=f._current;if(_===null)throw Error(i(456));if((f._pendingVisibility&2)!==0){var w=gs(_,2);w!==null&&(f._pendingVisibility&=-3,ji(w,_,2))}}};return r.stateNode=f,r}function iy(r,s,o){return r=Gr(6,r,null,s),r.lanes=o,r}function ry(r,s,o){return s=Gr(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function Ba(r){r.flags|=4}function nw(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Bw(s)){if(s=Ei.current,s!==null&&((pt&4194176)===pt?zr!==null:(pt&62914560)!==pt&&(pt&536870912)===0||s!==zr))throw iu=ys,ko;r.flags|=8192}}function rp(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Ki():536870912,r.lanes|=s,Lc|=s)}function Od(r,s){if(!it)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Zt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,c=0;if(s)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&31457280,c|=f.flags&31457280,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=c,r.childLanes=o,s}function wx(r,s,o){var c=s.pendingProps;switch(_s(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(s),null;case 1:return Zt(s),null;case 3:return o=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Ma(bn),_i(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Oo(s)?Ba(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Li!==null&&(dy(Li),Li=null))),Zt(s),null;case 26:return o=s.memoizedState,r===null?(Ba(s),o!==null?(Zt(s),nw(s,o)):(Zt(s),s.flags&=-16777217)):o?o!==r.memoizedState?(Ba(s),Zt(s),nw(s,o)):(Zt(s),s.flags&=-16777217):(r.memoizedProps!==c&&Ba(s),Zt(s),s.flags&=-16777217),null;case 27:uo(s),o=Bn.current;var f=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==c&&Ba(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Zt(s),null}r=ni.current,Oo(s)?Na(s):(r=Pw(f,c,o),s.stateNode=r,Ba(s))}return Zt(s),null;case 5:if(uo(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&Ba(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Zt(s),null}if(r=ni.current,Oo(s))Na(s);else{switch(f=pp(Bn.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?f.createElement(o,{is:c.is}):f.createElement(o)}}r[an]=s,r[_n]=c;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=r;e:switch(di(r,o,c),o){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Ba(s)}}return Zt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&Ba(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=Bn.current,Oo(s)){if(r=s.stateNode,o=s.memoizedProps,c=null,f=li,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}r[an]=s,r=!!(r.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Sw(r.nodeValue,o)),r||xa(s)}else r=pp(r).createTextNode(c),r[an]=s,s.stateNode=r}return Zt(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Oo(s),c!==null&&c.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[an]=s}else eu(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Zt(s),f=!1}else Li!==null&&(dy(Li),Li=null),f=!0;if(!f)return s.flags&256?(Es(s),s):(Es(s),null)}if(Es(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=c!==null,r=r!==null&&r.memoizedState!==null,o){c=s.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var _=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==f&&(c.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),rp(s,s.updateQueue),Zt(s),null;case 4:return _i(),r===null&&wy(s.stateNode.containerInfo),Zt(s),null;case 10:return Ma(s.type),Zt(s),null;case 19:if(xt(En),f=s.memoizedState,f===null)return Zt(s),null;if(c=(s.flags&128)!==0,_=f.rendering,_===null)if(c)Od(f,!1);else{if(dn!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(_=Sc(r),_!==null){for(s.flags|=128,Od(f,!1),r=_.updateQueue,s.updateQueue=r,rp(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)ew(o,r),o=o.sibling;return yt(En,En.current&1|2),s.child}r=r.sibling}f.tail!==null&&Nn()>sp&&(s.flags|=128,c=!0,Od(f,!1),s.lanes=4194304)}else{if(!c)if(r=Sc(_),r!==null){if(s.flags|=128,c=!0,r=r.updateQueue,s.updateQueue=r,rp(s,r),Od(f,!0),f.tail===null&&f.tailMode==="hidden"&&!_.alternate&&!it)return Zt(s),null}else 2*Nn()-f.renderingStartTime>sp&&o!==536870912&&(s.flags|=128,c=!0,Od(f,!1),s.lanes=4194304);f.isBackwards?(_.sibling=s.child,s.child=_):(r=f.last,r!==null?r.sibling=_:s.child=_,f.last=_)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Nn(),s.sibling=null,r=En.current,yt(En,c?r&1|2:r&1),s):(Zt(s),null);case 22:case 23:return Es(s),Ic(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(Zt(s),s.subtreeFlags&6&&(s.flags|=8192)):Zt(s),o=s.updateQueue,o!==null&&rp(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),r!==null&&xt(F),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Ma(bn),Zt(s),null;case 25:return null}throw Error(i(156,s.tag))}function Ax(r,s){switch(_s(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ma(bn),_i(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return uo(s),null;case 13:if(Es(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));eu()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return xt(En),null;case 4:return _i(),null;case 10:return Ma(s.type),null;case 22:case 23:return Es(s),Ic(),r!==null&&xt(F),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Ma(bn),null;case 25:return null;default:return null}}function iw(r,s){switch(_s(s),s.tag){case 3:Ma(bn),_i();break;case 26:case 27:case 5:uo(s);break;case 4:_i();break;case 13:Es(s);break;case 19:xt(En);break;case 10:Ma(s.type);break;case 22:case 23:Es(s),Ic(),r!==null&&xt(F);break;case 24:Ma(bn)}}var Ix={getCacheForType:function(r){var s=Ti(bn),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},Sx=typeof WeakMap=="function"?WeakMap:Map,Jt=0,Lt=null,rt=null,pt=0,Ut=0,vr=null,Fa=!1,Mc=!1,sy=!1,za=0,dn=0,Wo=0,gu=0,ay=0,Kr=0,Lc=0,kd=null,Ks=null,oy=!1,ly=0,sp=1/0,ap=null,Yo=null,op=!1,_u=null,Vd=0,uy=0,cy=null,Md=0,hy=null;function Er(){if((Jt&2)!==0&&pt!==0)return pt&-pt;if(x.T!==null){var r=Uo;return r!==0?r:vy()}return is()}function rw(){Kr===0&&(Kr=(pt&536870912)===0||it?Rr():536870912);var r=Ei.current;return r!==null&&(r.flags|=32),Kr}function ji(r,s,o){(r===Lt&&Ut===2||r.cancelPendingCommit!==null)&&(Uc(r,0),qa(r,pt,Kr,!1)),Xt(r,o),((Jt&2)===0||r!==Lt)&&(r===Lt&&((Jt&2)===0&&(gu|=o),dn===4&&qa(r,pt,Kr,!1)),Qs(r))}function sw(r,s,o){if((Jt&6)!==0)throw Error(i(327));var c=!o&&(s&60)===0&&(s&r.expiredLanes)===0||Ns(r,s),f=c?Dx(r,s):py(r,s,!0),_=c;do{if(f===0){Mc&&!c&&qa(r,s,0,!1);break}else if(f===6)qa(r,s,0,!Fa);else{if(o=r.current.alternate,_&&!Rx(o)){f=py(r,s,!1),_=!1;continue}if(f===2){if(_=s,r.errorRecoveryDisabledLanes&_)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var S=r;f=kd;var V=S.current.memoizedState.isDehydrated;if(V&&(Uc(S,w).flags|=256),w=py(S,w,!1),w!==2){if(sy&&!V){S.errorRecoveryDisabledLanes|=_,gu|=_,f=4;break e}_=Ks,Ks=f,_!==null&&dy(_)}f=w}if(_=!1,f!==2)continue}}if(f===1){Uc(r,0),qa(r,s,0,!0);break}e:{switch(c=r,f){case 0:case 1:throw Error(i(345));case 4:if((s&4194176)===s){qa(c,s,Kr,!Fa);break e}break;case 2:Ks=null;break;case 3:case 5:break;default:throw Error(i(329))}if(c.finishedWork=o,c.finishedLanes=s,(s&62914560)===s&&(_=ly+300-Nn(),10<_)){if(qa(c,s,Kr,!Fa),Gi(c,0)!==0)break e;c.timeoutHandle=Dw(aw.bind(null,c,o,Ks,ap,oy,s,Kr,gu,Lc,Fa,2,-0,0),_);break e}aw(c,o,Ks,ap,oy,s,Kr,gu,Lc,Fa,0,-0,0)}}break}while(!0);Qs(r)}function dy(r){Ks===null?Ks=r:Ks.push.apply(Ks,r)}function aw(r,s,o,c,f,_,w,S,V,H,oe,fe,J){var ae=s.subtreeFlags;if((ae&8192||(ae&16785408)===16785408)&&(zd={stylesheets:null,count:0,unsuspend:lN},YT(s),s=cN(),s!==null)){r.cancelPendingCommit=s(fw.bind(null,r,o,c,f,w,S,V,1,fe,J)),qa(r,_,w,!H);return}fw(r,o,c,f,w,S,V,oe,fe,J)}function Rx(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],_=f.getSnapshot;f=f.value;try{if(!Vt(_(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function qa(r,s,o,c){s&=~ay,s&=~gu,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var f=s;0<f;){var _=31-ii(f),w=1<<_;c[_]=-1,f&=~w}o!==0&&Ps(r,o,s)}function lp(){return(Jt&6)===0?(Ld(0),!1):!0}function fy(){if(rt!==null){if(Ut===0)var r=rt.return;else r=rt,Va=du=null,ui(r),Vo=null,ru=0,r=rt;for(;r!==null;)iw(r.alternate,r),r=r.return;rt=null}}function Uc(r,s){r.finishedWork=null,r.finishedLanes=0;var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,Gx(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),fy(),Lt=r,rt=o=Qo(r.current,null),pt=s,Ut=0,vr=null,Fa=!1,Mc=Ns(r,s),sy=!1,Lc=Kr=ay=gu=Wo=dn=0,Ks=kd=null,oy=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var f=31-ii(c),_=1<<f;s|=r[f],c&=~_}return za=s,pc(),o}function ow(r,s){ce=null,x.H=Gs,s===nu?(s=qm(),Ut=3):s===ko?(s=qm(),Ut=4):Ut=s===ET?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,vr=s,rt===null&&(dn=1,Zm(r,er(s,r.current)))}function lw(){var r=x.H;return x.H=Gs,r===null?Gs:r}function uw(){var r=x.A;return x.A=Ix,r}function my(){dn=4,Fa||(pt&4194176)!==pt&&Ei.current!==null||(Mc=!0),(Wo&134217727)===0&&(gu&134217727)===0||Lt===null||qa(Lt,pt,Kr,!1)}function py(r,s,o){var c=Jt;Jt|=2;var f=lw(),_=uw();(Lt!==r||pt!==s)&&(ap=null,Uc(r,s)),s=!1;var w=dn;e:do try{if(Ut!==0&&rt!==null){var S=rt,V=vr;switch(Ut){case 8:fy(),w=6;break e;case 3:case 2:case 6:Ei.current===null&&(s=!0);var H=Ut;if(Ut=0,vr=null,jc(r,S,V,H),o&&Mc){w=0;break e}break;default:H=Ut,Ut=0,vr=null,jc(r,S,V,H)}}Cx(),w=dn;break}catch(oe){ow(r,oe)}while(!0);return s&&r.shellSuspendCounter++,Va=du=null,Jt=c,x.H=f,x.A=_,rt===null&&(Lt=null,pt=0,pc()),w}function Cx(){for(;rt!==null;)cw(rt)}function Dx(r,s){var o=Jt;Jt|=2;var c=lw(),f=uw();Lt!==r||pt!==s?(ap=null,sp=Nn()+500,Uc(r,s)):Mc=Ns(r,s);e:do try{if(Ut!==0&&rt!==null){s=rt;var _=vr;t:switch(Ut){case 1:Ut=0,vr=null,jc(r,s,_,1);break;case 2:if(Fm(_)){Ut=0,vr=null,hw(s);break}s=function(){Ut===2&&Lt===r&&(Ut=7),Qs(r)},_.then(s,s);break e;case 3:Ut=7;break e;case 4:Ut=5;break e;case 7:Fm(_)?(Ut=0,vr=null,hw(s)):(Ut=0,vr=null,jc(r,s,_,7));break;case 5:var w=null;switch(rt.tag){case 26:w=rt.memoizedState;case 5:case 27:var S=rt;if(!w||Bw(w)){Ut=0,vr=null;var V=S.sibling;if(V!==null)rt=V;else{var H=S.return;H!==null?(rt=H,up(H)):rt=null}break t}}Ut=0,vr=null,jc(r,s,_,5);break;case 6:Ut=0,vr=null,jc(r,s,_,6);break;case 8:fy(),dn=6;break e;default:throw Error(i(462))}}xx();break}catch(oe){ow(r,oe)}while(!0);return Va=du=null,x.H=c,x.A=f,Jt=o,rt!==null?0:(Lt=null,pt=0,pc(),dn)}function xx(){for(;rt!==null&&!Xh();)cw(rt)}function cw(r){var s=PT(r.alternate,r,za);r.memoizedProps=r.pendingProps,s===null?up(r):rt=s}function hw(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=ST(o,s,s.pendingProps,s.type,void 0,pt);break;case 11:s=ST(o,s,s.pendingProps,s.type.render,s.ref,pt);break;case 5:ui(s);default:iw(o,s),s=rt=ew(s,za),s=PT(o,s,za)}r.memoizedProps=r.pendingProps,s===null?up(r):rt=s}function jc(r,s,o,c){Va=du=null,ui(s),Vo=null,ru=0;var f=s.return;try{if(yx(r,f,s,o,pt)){dn=1,Zm(r,er(o,r.current)),rt=null;return}}catch(_){if(f!==null)throw rt=f,_;dn=1,Zm(r,er(o,r.current)),rt=null;return}s.flags&32768?(it||c===1?r=!0:Mc||(pt&536870912)!==0?r=!1:(Fa=r=!0,(c===2||c===3||c===6)&&(c=Ei.current,c!==null&&c.tag===13&&(c.flags|=16384))),dw(s,r)):up(s)}function up(r){var s=r;do{if((s.flags&32768)!==0){dw(s,Fa);return}r=s.return;var o=wx(s.alternate,s,za);if(o!==null){rt=o;return}if(s=s.sibling,s!==null){rt=s;return}rt=s=r}while(s!==null);dn===0&&(dn=5)}function dw(r,s){do{var o=Ax(r.alternate,r);if(o!==null){o.flags&=32767,rt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){rt=r;return}rt=r=o}while(r!==null);dn=6,rt=null}function fw(r,s,o,c,f,_,w,S,V,H){var oe=x.T,fe=Ie.p;try{Ie.p=2,x.T=null,Nx(r,s,o,c,fe,f,_,w,S,V,H)}finally{x.T=oe,Ie.p=fe}}function Nx(r,s,o,c,f,_,w,S){do Bc();while(_u!==null);if((Jt&6)!==0)throw Error(i(327));var V=r.finishedWork;if(c=r.finishedLanes,V===null)return null;if(r.finishedWork=null,r.finishedLanes=0,V===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var H=V.lanes|V.childLanes;if(H|=ud,Ju(r,c,H,_,w,S),r===Lt&&(rt=Lt=null,pt=0),(V.subtreeFlags&10256)===0&&(V.flags&10256)===0||op||(op=!0,uy=H,cy=o,Vx(yi,function(){return Bc(),null})),o=(V.flags&15990)!==0,(V.subtreeFlags&15990)!==0||o?(o=x.T,x.T=null,_=Ie.p,Ie.p=2,w=Jt,Jt|=4,Ex(r,V),KT(V,r),v_(Ry,r.containerInfo),bp=!!Sy,Ry=Sy=null,r.current=V,qT(r,V.alternate,V),jl(),Jt=w,Ie.p=_,x.T=o):r.current=V,op?(op=!1,_u=r,Vd=c):mw(r,H),H=r.pendingLanes,H===0&&(Yo=null),Bl(V.stateNode),Qs(r),s!==null)for(f=r.onRecoverableError,V=0;V<s.length;V++)H=s[V],f(H.value,{componentStack:H.stack});return(Vd&3)!==0&&Bc(),H=r.pendingLanes,(c&4194218)!==0&&(H&42)!==0?r===hy?Md++:(Md=0,hy=r):Md=0,Ld(0),null}function mw(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,qs(s)))}function Bc(){if(_u!==null){var r=_u,s=uy;uy=0;var o=po(Vd),c=x.T,f=Ie.p;try{if(Ie.p=32>o?32:o,x.T=null,_u===null)var _=!1;else{o=cy,cy=null;var w=_u,S=Vd;if(_u=null,Vd=0,(Jt&6)!==0)throw Error(i(331));var V=Jt;if(Jt|=4,ZT(w.current),WT(w,w.current,S,o),Jt=V,Ld(0,!1),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(xs,w)}catch{}_=!0}return _}finally{Ie.p=f,x.T=c,mw(r,s)}}return!1}function pw(r,s,o){s=er(o,s),s=O_(r.stateNode,s,2),r=Ho(r,s,2),r!==null&&(Xt(r,2),Qs(r))}function Ot(r,s,o){if(r.tag===3)pw(r,r,o);else for(;s!==null;){if(s.tag===3){pw(s,r,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Yo===null||!Yo.has(c))){r=er(o,r),o=yT(2),c=Ho(s,o,2),c!==null&&(vT(o,c,s,r),Xt(c,2),Qs(c));break}}s=s.return}}function gy(r,s,o){var c=r.pingCache;if(c===null){c=r.pingCache=new Sx;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(o)||(sy=!0,f.add(o),r=Px.bind(null,r,s,o),s.then(r,r))}function Px(r,s,o){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,Lt===r&&(pt&o)===o&&(dn===4||dn===3&&(pt&62914560)===pt&&300>Nn()-ly?(Jt&2)===0&&Uc(r,0):ay|=o,Lc===pt&&(Lc=0)),Qs(r)}function gw(r,s){s===0&&(s=Ki()),r=gs(r,s),r!==null&&(Xt(r,s),Qs(r))}function Ox(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),gw(r,o)}function kx(r,s){var o=0;switch(r.tag){case 13:var c=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),gw(r,o)}function Vx(r,s){return ma(r,s)}var cp=null,Fc=null,_y=!1,hp=!1,yy=!1,yu=0;function Qs(r){r!==Fc&&r.next===null&&(Fc===null?cp=Fc=r:Fc=Fc.next=r),hp=!0,_y||(_y=!0,Lx(Mx))}function Ld(r,s){if(!yy&&hp){yy=!0;do for(var o=!1,c=cp;c!==null;){if(r!==0){var f=c.pendingLanes;if(f===0)var _=0;else{var w=c.suspendedLanes,S=c.pingedLanes;_=(1<<31-ii(42|r)+1)-1,_&=f&~(w&~S),_=_&201326677?_&201326677|1:_?_|2:0}_!==0&&(o=!0,vw(c,_))}else _=pt,_=Gi(c,c===Lt?_:0),(_&3)===0||Ns(c,_)||(o=!0,vw(c,_));c=c.next}while(o);yy=!1}}function Mx(){hp=_y=!1;var r=0;yu!==0&&($x()&&(r=yu),yu=0);for(var s=Nn(),o=null,c=cp;c!==null;){var f=c.next,_=_w(c,s);_===0?(c.next=null,o===null?cp=f:o.next=f,f===null&&(Fc=o)):(o=c,(r!==0||(_&3)!==0)&&(hp=!0)),c=f}Ld(r)}function _w(r,s){for(var o=r.suspendedLanes,c=r.pingedLanes,f=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var w=31-ii(_),S=1<<w,V=f[w];V===-1?((S&o)===0||(S&c)!==0)&&(f[w]=fo(S,s)):V<=s&&(r.expiredLanes|=S),_&=~S}if(s=Lt,o=pt,o=Gi(r,r===s?o:0),c=r.callbackNode,o===0||r===s&&Ut===2||r.cancelPendingCommit!==null)return c!==null&&c!==null&&ho(c),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Ns(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(c!==null&&ho(c),po(o)){case 2:case 8:o=qt;break;case 32:o=yi;break;case 268435456:o=Ds;break;default:o=yi}return c=yw.bind(null,r),o=ma(o,c),r.callbackPriority=s,r.callbackNode=o,s}return c!==null&&c!==null&&ho(c),r.callbackPriority=2,r.callbackNode=null,2}function yw(r,s){var o=r.callbackNode;if(Bc()&&r.callbackNode!==o)return null;var c=pt;return c=Gi(r,r===Lt?c:0),c===0?null:(sw(r,c,s),_w(r,Nn()),r.callbackNode!=null&&r.callbackNode===o?yw.bind(null,r):null)}function vw(r,s){if(Bc())return null;sw(r,s,!0)}function Lx(r){Kx(function(){(Jt&6)!==0?ma(sn,r):r()})}function vy(){return yu===0&&(yu=Rr()),yu}function Ew(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:dr(""+r)}function bw(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function Ux(r,s,o,c,f){if(s==="submit"&&o&&o.stateNode===f){var _=Ew((f[_n]||null).action),w=c.submitter;w&&(s=(s=w[_n]||null)?Ew(s.formAction):w.getAttribute("formAction"),s!==null&&(_=s,w=null));var S=new va("action","action",null,c,f);r.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(yu!==0){var V=w?bw(f,w):new FormData(f);C_(o,{pending:!0,data:V,method:f.method,action:_},null,V)}}else typeof _=="function"&&(S.preventDefault(),V=w?bw(f,w):new FormData(f),C_(o,{pending:!0,data:V,method:f.method,action:_},_,V))},currentTarget:f}]})}}for(var Ey=0;Ey<ld.length;Ey++){var by=ld[Ey],jx=by.toLowerCase(),Bx=by[0].toUpperCase()+by.slice(1);Zi(jx,"on"+Bx)}Zi(Om,"onAnimationEnd"),Zi(ad,"onAnimationIteration"),Zi(od,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(km,"onTransitionRun"),Zi(Vm,"onTransitionStart"),Zi(b_,"onTransitionCancel"),Zi(Mm,"onTransitionEnd"),qn("onMouseEnter",["mouseout","mouseover"]),qn("onMouseLeave",["mouseout","mouseover"]),qn("onPointerEnter",["pointerout","pointerover"]),qn("onPointerLeave",["pointerout","pointerover"]),si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),si("onBeforeInput",["compositionend","keypress","textInput","paste"]),si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ud="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ud));function Tw(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var c=r[o],f=c.event;c=c.listeners;e:{var _=void 0;if(s)for(var w=c.length-1;0<=w;w--){var S=c[w],V=S.instance,H=S.currentTarget;if(S=S.listener,V!==_&&f.isPropagationStopped())break e;_=S,f.currentTarget=H;try{_(f)}catch(oe){Xm(oe)}f.currentTarget=null,_=V}else for(w=0;w<c.length;w++){if(S=c[w],V=S.instance,H=S.currentTarget,S=S.listener,V!==_&&f.isPropagationStopped())break e;_=S,f.currentTarget=H;try{_(f)}catch(oe){Xm(oe)}f.currentTarget=null,_=V}}}}function ft(r,s){var o=s[Qi];o===void 0&&(o=s[Qi]=new Set);var c=r+"__bubble";o.has(c)||(ww(s,r,2,!1),o.add(c))}function Ty(r,s,o){var c=0;s&&(c|=4),ww(o,r,c,s)}var dp="_reactListening"+Math.random().toString(36).slice(2);function wy(r){if(!r[dp]){r[dp]=!0,xr.forEach(function(o){o!=="selectionchange"&&(Fx.has(o)||Ty(o,!1,r),Ty(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[dp]||(s[dp]=!0,Ty("selectionchange",!1,s))}}function ww(r,s,o,c){switch(Gw(s)){case 2:var f=fN;break;case 8:f=mN;break;default:f=My}o=f.bind(null,s,o,r),f=void 0,!Pi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?r.addEventListener(s,o,{capture:!0,passive:f}):r.addEventListener(s,o,!0):f!==void 0?r.addEventListener(s,o,{passive:f}):r.addEventListener(s,o,!1)}function Ay(r,s,o,c,f){var _=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var S=c.stateNode.containerInfo;if(S===f||S.nodeType===8&&S.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var V=w.tag;if((V===3||V===4)&&(V=w.stateNode.containerInfo,V===f||V.nodeType===8&&V.parentNode===f))return;w=w.return}for(;S!==null;){if(w=zn(S),w===null)return;if(V=w.tag,V===5||V===6||V===26||V===27){c=_=w;continue e}S=S.parentNode}}c=c.return}hs(function(){var H=_,oe=ks(o),fe=[];e:{var J=Lm.get(r);if(J!==void 0){var ae=va,Me=r;switch(r){case"keypress":if(Vr(o)===0)break e;case"keydown":case"keyup":ae=Xi;break;case"focusin":Me="focus",ae=wa;break;case"focusout":Me="blur",ae=wa;break;case"beforeblur":case"afterblur":ae=wa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=ki;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=tc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=ac;break;case Om:case ad:case od:ae=Ia;break;case Mm:ae=lc;break;case"scroll":case"scrollend":ae=bo;break;case"wheel":ae=Ra;break;case"copy":case"cut":case"paste":ae=To;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Wl;break;case"toggle":case"beforetoggle":ae=cc}var Ye=(s&4)!==0,fn=!Ye&&(r==="scroll"||r==="scrollend"),Q=Ye?J!==null?J+"Capture":null:J;Ye=[];for(var q=H,X;q!==null;){var le=q;if(X=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||X===null||Q===null||(le=_a(q,Q),le!=null&&Ye.push(jd(q,le,X))),fn)break;q=q.return}0<Ye.length&&(J=new ae(J,Me,null,o,oe),fe.push({event:J,listeners:Ye}))}}if((s&7)===0){e:{if(J=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",J&&o!==$n&&(Me=o.relatedTarget||o.fromElement)&&(zn(Me)||Me[rs]))break e;if((ae||J)&&(J=oe.window===oe?oe:(J=oe.ownerDocument)?J.defaultView||J.parentWindow:window,ae?(Me=o.relatedTarget||o.toElement,ae=H,Me=Me?zn(Me):null,Me!==null&&(fn=Pe(Me),Ye=Me.tag,Me!==fn||Ye!==5&&Ye!==27&&Ye!==6)&&(Me=null)):(ae=null,Me=H),ae!==Me)){if(Ye=ki,le="onMouseLeave",Q="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(Ye=Wl,le="onPointerLeave",Q="onPointerEnter",q="pointer"),fn=ae==null?J:Ci(ae),X=Me==null?J:Ci(Me),J=new Ye(le,q+"leave",ae,o,oe),J.target=fn,J.relatedTarget=X,le=null,zn(oe)===H&&(Ye=new Ye(Q,q+"enter",Me,o,oe),Ye.target=X,Ye.relatedTarget=fn,le=Ye),fn=le,ae&&Me)t:{for(Ye=ae,Q=Me,q=0,X=Ye;X;X=zc(X))q++;for(X=0,le=Q;le;le=zc(le))X++;for(;0<q-X;)Ye=zc(Ye),q--;for(;0<X-q;)Q=zc(Q),X--;for(;q--;){if(Ye===Q||Q!==null&&Ye===Q.alternate)break t;Ye=zc(Ye),Q=zc(Q)}Ye=null}else Ye=null;ae!==null&&Aw(fe,J,ae,Ye,!1),Me!==null&&fn!==null&&Aw(fe,fn,Me,Ye,!0)}}e:{if(J=H?Ci(H):window,ae=J.nodeName&&J.nodeName.toLowerCase(),ae==="select"||ae==="input"&&J.type==="file")var Ne=Zl;else if(un(J))if(Im)Ne=xm;else{Ne=Dm;var nt=Cm}else ae=J.nodeName,!ae||ae.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?H&&Gl(H.elementType)&&(Ne=Zl):Ne=dc;if(Ne&&(Ne=Ne(r,H))){Ur(fe,Ne,o,oe);break e}nt&&nt(r,J,H),r==="focusout"&&H&&J.type==="number"&&H.memoizedProps.value!=null&&ls(J,"number",J.value)}switch(nt=H?Ci(H):window,r){case"focusin":(un(nt)||nt.contentEditable==="true")&&(Io=nt,sd=H,So=null);break;case"focusout":So=sd=Io=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,mc(fe,o,oe);break;case"selectionchange":if(E_)break;case"keydown":case"keyup":mc(fe,o,oe)}var je;if(Kn)e:{switch(r){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else at?ee(r,o)&&(Ge="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Ge="onCompositionStart");Ge&&(T&&o.locale!=="ko"&&(at||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&at&&(je=Vs()):(Oi=oe,kr="value"in Oi?Oi.value:Oi.textContent,at=!0)),nt=fp(H,Ge),0<nt.length&&(Ge=new wo(Ge,r,null,o,oe),fe.push({event:Ge,listeners:nt}),je?Ge.data=je:(je=we(o),je!==null&&(Ge.data=je)))),(je=y?vn(r,o):ot(r,o))&&(Ge=fp(H,"onBeforeInput"),0<Ge.length&&(nt=new wo("onBeforeInput","beforeinput",null,o,oe),fe.push({event:nt,listeners:Ge}),nt.data=je)),Ux(fe,r,H,o,oe)}Tw(fe,s)})}function jd(r,s,o){return{instance:r,listener:s,currentTarget:o}}function fp(r,s){for(var o=s+"Capture",c=[];r!==null;){var f=r,_=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||_===null||(f=_a(r,o),f!=null&&c.unshift(jd(r,f,_)),f=_a(r,s),f!=null&&c.push(jd(r,f,_))),r=r.return}return c}function zc(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Aw(r,s,o,c,f){for(var _=s._reactName,w=[];o!==null&&o!==c;){var S=o,V=S.alternate,H=S.stateNode;if(S=S.tag,V!==null&&V===c)break;S!==5&&S!==26&&S!==27||H===null||(V=H,f?(H=_a(o,_),H!=null&&w.unshift(jd(o,H,V))):f||(H=_a(o,_),H!=null&&w.push(jd(o,H,V)))),o=o.return}w.length!==0&&r.push({event:s,listeners:w})}var zx=/\r\n?/g,qx=/\u0000|\uFFFD/g;function Iw(r){return(typeof r=="string"?r:""+r).replace(zx,`
`).replace(qx,"")}function Sw(r,s){return s=Iw(s),Iw(r)===s}function mp(){}function Dt(r,s,o,c,f,_){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Vn(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Vn(r,""+c);break;case"className":os(r,"class",c);break;case"tabIndex":os(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":os(r,o,c);break;case"style":Yi(r,c,_);break;case"data":if(s!=="object"){os(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=dr(""+c),r.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(o==="formAction"?(s!=="input"&&Dt(r,s,"name",f.name,f,null),Dt(r,s,"formEncType",f.formEncType,f,null),Dt(r,s,"formMethod",f.formMethod,f,null),Dt(r,s,"formTarget",f.formTarget,f,null)):(Dt(r,s,"encType",f.encType,f,null),Dt(r,s,"method",f.method,f,null),Dt(r,s,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=dr(""+c),r.setAttribute(o,c);break;case"onClick":c!=null&&(r.onclick=mp);break;case"onScroll":c!=null&&ft("scroll",r);break;case"onScrollEnd":c!=null&&ft("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}o=dr(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""+c):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":c===!0?r.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,c):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(o,c):r.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(o):r.setAttribute(o,c);break;case"popover":ft("beforetoggle",r),ft("toggle",r),as(r,"popover",c);break;case"xlinkActuate":Di(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Di(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Di(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Di(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Di(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Di(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Di(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Di(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Di(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":as(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Nr.get(o)||o,as(r,o,c))}}function Iy(r,s,o,c,f,_){switch(o){case"style":Yi(r,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof c=="string"?Vn(r,c):(typeof c=="number"||typeof c=="bigint")&&Vn(r,""+c);break;case"onScroll":c!=null&&ft("scroll",r);break;case"onScrollEnd":c!=null&&ft("scrollend",r);break;case"onClick":c!=null&&(r.onclick=mp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ga.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),_=r[_n]||null,_=_!=null?_[o]:null,typeof _=="function"&&r.removeEventListener(s,_,f),typeof c=="function")){typeof _!="function"&&_!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,c,f);break e}o in r?r[o]=c:c===!0?r.setAttribute(o,""):as(r,o,c)}}}function di(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ft("error",r),ft("load",r);var c=!1,f=!1,_;for(_ in o)if(o.hasOwnProperty(_)){var w=o[_];if(w!=null)switch(_){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Dt(r,s,_,w,o,null)}}f&&Dt(r,s,"srcSet",o.srcSet,o,null),c&&Dt(r,s,"src",o.src,o,null);return;case"input":ft("invalid",r);var S=_=w=f=null,V=null,H=null;for(c in o)if(o.hasOwnProperty(c)){var oe=o[c];if(oe!=null)switch(c){case"name":f=oe;break;case"type":w=oe;break;case"checked":V=oe;break;case"defaultChecked":H=oe;break;case"value":_=oe;break;case"defaultValue":S=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,s));break;default:Dt(r,s,c,oe,o,null)}}xi(r,_,S,V,H,w,f,!1),yn(r);return;case"select":ft("invalid",r),c=w=_=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":_=S;break;case"defaultValue":w=S;break;case"multiple":c=S;default:Dt(r,s,f,S,o,null)}s=_,o=w,r.multiple=!!c,s!=null?et(r,!!c,s,!1):o!=null&&et(r,!!c,o,!0);return;case"textarea":ft("invalid",r),_=f=c=null;for(w in o)if(o.hasOwnProperty(w)&&(S=o[w],S!=null))switch(w){case"value":c=S;break;case"defaultValue":f=S;break;case"children":_=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:Dt(r,s,w,S,o,null)}cs(r,c,f,_),yn(r);return;case"option":for(V in o)if(o.hasOwnProperty(V)&&(c=o[V],c!=null))switch(V){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Dt(r,s,V,c,o,null)}return;case"dialog":ft("cancel",r),ft("close",r);break;case"iframe":case"object":ft("load",r);break;case"video":case"audio":for(c=0;c<Ud.length;c++)ft(Ud[c],r);break;case"image":ft("error",r),ft("load",r);break;case"details":ft("toggle",r);break;case"embed":case"source":case"link":ft("error",r),ft("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(c=o[H],c!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Dt(r,s,H,c,o,null)}return;default:if(Gl(s)){for(oe in o)o.hasOwnProperty(oe)&&(c=o[oe],c!==void 0&&Iy(r,s,oe,c,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(c=o[S],c!=null&&Dt(r,s,S,c,o,null))}function Hx(r,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,_=null,w=null,S=null,V=null,H=null,oe=null;for(ae in o){var fe=o[ae];if(o.hasOwnProperty(ae)&&fe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":V=fe;default:c.hasOwnProperty(ae)||Dt(r,s,ae,null,c,fe)}}for(var J in c){var ae=c[J];if(fe=o[J],c.hasOwnProperty(J)&&(ae!=null||fe!=null))switch(J){case"type":_=ae;break;case"name":f=ae;break;case"checked":H=ae;break;case"defaultChecked":oe=ae;break;case"value":w=ae;break;case"defaultValue":S=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,s));break;default:ae!==fe&&Dt(r,s,J,ae,c,fe)}}kn(r,w,S,V,H,oe,_,f);return;case"select":ae=w=S=J=null;for(_ in o)if(V=o[_],o.hasOwnProperty(_)&&V!=null)switch(_){case"value":break;case"multiple":ae=V;default:c.hasOwnProperty(_)||Dt(r,s,_,null,c,V)}for(f in c)if(_=c[f],V=o[f],c.hasOwnProperty(f)&&(_!=null||V!=null))switch(f){case"value":J=_;break;case"defaultValue":S=_;break;case"multiple":w=_;default:_!==V&&Dt(r,s,f,_,c,V)}s=S,o=w,c=ae,J!=null?et(r,!!o,J,!1):!!c!=!!o&&(s!=null?et(r,!!o,s,!0):et(r,!!o,o?[]:"",!1));return;case"textarea":ae=J=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Dt(r,s,S,null,c,f)}for(w in c)if(f=c[w],_=o[w],c.hasOwnProperty(w)&&(f!=null||_!=null))switch(w){case"value":J=f;break;case"defaultValue":ae=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==_&&Dt(r,s,w,f,c,_)}us(r,J,ae);return;case"option":for(var Me in o)if(J=o[Me],o.hasOwnProperty(Me)&&J!=null&&!c.hasOwnProperty(Me))switch(Me){case"selected":r.selected=!1;break;default:Dt(r,s,Me,null,c,J)}for(V in c)if(J=c[V],ae=o[V],c.hasOwnProperty(V)&&J!==ae&&(J!=null||ae!=null))switch(V){case"selected":r.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:Dt(r,s,V,J,c,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ye in o)J=o[Ye],o.hasOwnProperty(Ye)&&J!=null&&!c.hasOwnProperty(Ye)&&Dt(r,s,Ye,null,c,J);for(H in c)if(J=c[H],ae=o[H],c.hasOwnProperty(H)&&J!==ae&&(J!=null||ae!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:Dt(r,s,H,J,c,ae)}return;default:if(Gl(s)){for(var fn in o)J=o[fn],o.hasOwnProperty(fn)&&J!==void 0&&!c.hasOwnProperty(fn)&&Iy(r,s,fn,void 0,c,J);for(oe in c)J=c[oe],ae=o[oe],!c.hasOwnProperty(oe)||J===ae||J===void 0&&ae===void 0||Iy(r,s,oe,J,c,ae);return}}for(var Q in o)J=o[Q],o.hasOwnProperty(Q)&&J!=null&&!c.hasOwnProperty(Q)&&Dt(r,s,Q,null,c,J);for(fe in c)J=c[fe],ae=o[fe],!c.hasOwnProperty(fe)||J===ae||J==null&&ae==null||Dt(r,s,fe,J,c,ae)}var Sy=null,Ry=null;function pp(r){return r.nodeType===9?r:r.ownerDocument}function Rw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cw(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Cy(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Dy=null;function $x(){var r=window.event;return r&&r.type==="popstate"?r===Dy?!1:(Dy=r,!0):(Dy=null,!1)}var Dw=typeof setTimeout=="function"?setTimeout:void 0,Gx=typeof clearTimeout=="function"?clearTimeout:void 0,xw=typeof Promise=="function"?Promise:void 0,Kx=typeof queueMicrotask=="function"?queueMicrotask:typeof xw<"u"?function(r){return xw.resolve(null).then(r).catch(Qx)}:Dw;function Qx(r){setTimeout(function(){throw r})}function xy(r,s){var o=s,c=0;do{var f=o.nextSibling;if(r.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"){if(c===0){r.removeChild(f),Kd(s);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=f}while(o);Kd(s)}function Ny(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ny(o),Dr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function Wx(r,s,o,c){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[$t])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==f.rel||r.getAttribute("href")!==(f.href==null?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var _=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=As(r.nextSibling),r===null)break}return null}function Yx(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=As(r.nextSibling),r===null))return null;return r}function As(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}function Nw(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function Pw(r,s,o){switch(s=pp(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}var Qr=new Map,Ow=new Set;function gp(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var Ha=Ie.d;Ie.d={f:Xx,r:Zx,D:Jx,C:eN,L:tN,m:nN,X:rN,S:iN,M:sN};function Xx(){var r=Ha.f(),s=lp();return r||s}function Zx(r){var s=ri(r);s!==null&&s.tag===5&&s.type==="form"?aT(s):Ha.r(r)}var qc=typeof document>"u"?null:document;function kw(r,s,o){var c=qc;if(c&&typeof s=="string"&&s){var f=kt(s);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Ow.has(f)||(Ow.add(f),r={rel:r,crossOrigin:o,href:s},c.querySelector(f)===null&&(s=c.createElement("link"),di(s,"link",r),Nt(s),c.head.appendChild(s)))}}function Jx(r){Ha.D(r),kw("dns-prefetch",r,null)}function eN(r,s){Ha.C(r,s),kw("preconnect",r,s)}function tN(r,s,o){Ha.L(r,s,o);var c=qc;if(c&&r&&s){var f='link[rel="preload"][as="'+kt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+kt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+kt(o.imageSizes)+'"]')):f+='[href="'+kt(r)+'"]';var _=f;switch(s){case"style":_=Hc(r);break;case"script":_=$c(r)}Qr.has(_)||(r=k({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Qr.set(_,r),c.querySelector(f)!==null||s==="style"&&c.querySelector(Bd(_))||s==="script"&&c.querySelector(Fd(_))||(s=c.createElement("link"),di(s,"link",r),Nt(s),c.head.appendChild(s)))}}function nN(r,s){Ha.m(r,s);var o=qc;if(o&&r){var c=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+kt(c)+'"][href="'+kt(r)+'"]',_=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=$c(r)}if(!Qr.has(_)&&(r=k({rel:"modulepreload",href:r},s),Qr.set(_,r),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Fd(_)))return}c=o.createElement("link"),di(c,"link",r),Nt(c),o.head.appendChild(c)}}}function iN(r,s,o){Ha.S(r,s,o);var c=qc;if(c&&r){var f=ss(c).hoistableStyles,_=Hc(r);s=s||"default";var w=f.get(_);if(!w){var S={loading:0,preload:null};if(w=c.querySelector(Bd(_)))S.loading=5;else{r=k({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Qr.get(_))&&Py(r,o);var V=w=c.createElement("link");Nt(V),di(V,"link",r),V._p=new Promise(function(H,oe){V.onload=H,V.onerror=oe}),V.addEventListener("load",function(){S.loading|=1}),V.addEventListener("error",function(){S.loading|=2}),S.loading|=4,_p(w,s,c)}w={type:"stylesheet",instance:w,count:1,state:S},f.set(_,w)}}}function rN(r,s){Ha.X(r,s);var o=qc;if(o&&r){var c=ss(o).hoistableScripts,f=$c(r),_=c.get(f);_||(_=o.querySelector(Fd(f)),_||(r=k({src:r,async:!0},s),(s=Qr.get(f))&&Oy(r,s),_=o.createElement("script"),Nt(_),di(_,"link",r),o.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(f,_))}}function sN(r,s){Ha.M(r,s);var o=qc;if(o&&r){var c=ss(o).hoistableScripts,f=$c(r),_=c.get(f);_||(_=o.querySelector(Fd(f)),_||(r=k({src:r,async:!0,type:"module"},s),(s=Qr.get(f))&&Oy(r,s),_=o.createElement("script"),Nt(_),di(_,"link",r),o.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(f,_))}}function Vw(r,s,o,c){var f=(f=Bn.current)?gp(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Hc(o.href),o=ss(f).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Hc(o.href);var _=ss(f).hoistableStyles,w=_.get(r);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,w),(_=f.querySelector(Bd(r)))&&!_._p&&(w.instance=_,w.state.loading=5),Qr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Qr.set(r,o),_||aN(f,r,o,w.state))),s&&c===null)throw Error(i(528,""));return w}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=$c(o),o=ss(f).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Hc(r){return'href="'+kt(r)+'"'}function Bd(r){return'link[rel="stylesheet"]['+r+"]"}function Mw(r){return k({},r,{"data-precedence":r.precedence,precedence:null})}function aN(r,s,o,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),di(s,"link",o),Nt(s),r.head.appendChild(s))}function $c(r){return'[src="'+kt(r)+'"]'}function Fd(r){return"script[async]"+r}function Lw(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+kt(o.href)+'"]');if(c)return s.instance=c,Nt(c),c;var f=k({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),Nt(c),di(c,"style",f),_p(c,o.precedence,r),s.instance=c;case"stylesheet":f=Hc(o.href);var _=r.querySelector(Bd(f));if(_)return s.state.loading|=4,s.instance=_,Nt(_),_;c=Mw(o),(f=Qr.get(f))&&Py(c,f),_=(r.ownerDocument||r).createElement("link"),Nt(_);var w=_;return w._p=new Promise(function(S,V){w.onload=S,w.onerror=V}),di(_,"link",c),s.state.loading|=4,_p(_,o.precedence,r),s.instance=_;case"script":return _=$c(o.src),(f=r.querySelector(Fd(_)))?(s.instance=f,Nt(f),f):(c=o,(f=Qr.get(_))&&(c=k({},o),Oy(c,f)),r=r.ownerDocument||r,f=r.createElement("script"),Nt(f),di(f,"link",c),r.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,_p(c,o.precedence,r));return s.instance}function _p(r,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,_=f,w=0;w<c.length;w++){var S=c[w];if(S.dataset.precedence===s)_=S;else if(_!==f)break}_?_.parentNode.insertBefore(r,_.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Py(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Oy(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var yp=null;function Uw(r,s,o){if(yp===null){var c=new Map,f=yp=new Map;f.set(o,c)}else f=yp,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(r))return c;for(c.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var _=o[f];if(!(_[$t]||_[an]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var w=_.getAttribute(s)||"";w=r+w;var S=c.get(w);S?S.push(_):c.set(w,[_])}}return c}function jw(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function oN(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Bw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var zd=null;function lN(){}function uN(r,s,o){if(zd===null)throw Error(i(475));var c=zd;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Hc(o.href),_=r.querySelector(Bd(f));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=vp.bind(c),r.then(c,c)),s.state.loading|=4,s.instance=_,Nt(_);return}_=r.ownerDocument||r,o=Mw(o),(f=Qr.get(f))&&Py(o,f),_=_.createElement("link"),Nt(_);var w=_;w._p=new Promise(function(S,V){w.onload=S,w.onerror=V}),di(_,"link",o),s.instance=_}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=vp.bind(c),r.addEventListener("load",s),r.addEventListener("error",s))}}function cN(){if(zd===null)throw Error(i(475));var r=zd;return r.stylesheets&&r.count===0&&ky(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&ky(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function vp(){if(this.count--,this.count===0){if(this.stylesheets)ky(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ep=null;function ky(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ep=new Map,s.forEach(hN,r),Ep=null,vp.call(r))}function hN(r,s){if(!(s.state.loading&4)){var o=Ep.get(r);if(o)var c=o.get(null);else{o=new Map,Ep.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<f.length;_++){var w=f[_];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}f=s.instance,w=f.getAttribute("data-precedence"),_=o.get(w)||c,_===c&&o.set(null,f),o.set(w,f),this.count++,c=vp.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),_?_.parentNode.insertBefore(f,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),s.state.loading|=4}}var qd={$$typeof:P,Provider:null,Consumer:null,_currentValue:Be,_currentValue2:Be,_threadCount:0};function dN(r,s,o,c,f,_,w,S){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mo(0),this.hiddenUpdates=mo(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=_,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Fw(r,s,o,c,f,_,w,S,V,H,oe,fe){return r=new dN(r,s,o,w,S,V,H,fe),s=1,_===!0&&(s|=24),_=Gr(3,null,null,s),r.current=_,_.stateNode=r,s=Rc(),s.refCount++,r.pooledCache=s,s.refCount++,_.memoizedState={element:c,isDehydrated:o,cache:s},G_(_),r}function zw(r){return r?(r=Do,r):Do}function qw(r,s,o,c,f,_){f=zw(f),c.context===null?c.context=f:c.pendingContext=f,c=qo(s),c.payload={element:o},_=_===void 0?null:_,_!==null&&(c.callback=_),o=Ho(r,c,s),o!==null&&(ji(o,r,s),Sd(o,r,s))}function Hw(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Vy(r,s){Hw(r,s),(r=r.alternate)&&Hw(r,s)}function $w(r){if(r.tag===13){var s=gs(r,67108864);s!==null&&ji(s,r,67108864),Vy(r,67108864)}}var bp=!0;function fN(r,s,o,c){var f=x.T;x.T=null;var _=Ie.p;try{Ie.p=2,My(r,s,o,c)}finally{Ie.p=_,x.T=f}}function mN(r,s,o,c){var f=x.T;x.T=null;var _=Ie.p;try{Ie.p=8,My(r,s,o,c)}finally{Ie.p=_,x.T=f}}function My(r,s,o,c){if(bp){var f=Ly(c);if(f===null)Ay(r,s,c,Tp,o),Kw(r,c);else if(gN(f,r,s,o,c))c.stopPropagation();else if(Kw(r,c),s&4&&-1<pN.indexOf(r)){for(;f!==null;){var _=ri(f);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var w=lr(_.pendingLanes);if(w!==0){var S=_;for(S.pendingLanes|=2,S.entangledLanes|=2;w;){var V=1<<31-ii(w);S.entanglements[1]|=V,w&=~V}Qs(_),(Jt&6)===0&&(sp=Nn()+500,Ld(0))}}break;case 13:S=gs(_,2),S!==null&&ji(S,_,2),lp(),Vy(_,2)}if(_=Ly(c),_===null&&Ay(r,s,c,Tp,o),_===f)break;f=_}f!==null&&c.stopPropagation()}else Ay(r,s,c,null,o)}}function Ly(r){return r=ks(r),Uy(r)}var Tp=null;function Uy(r){if(Tp=null,r=zn(r),r!==null){var s=Pe(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=Je(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Tp=r,null}function Gw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ar()){case sn:return 2;case qt:return 8;case yi:case es:return 32;case Ds:return 268435456;default:return 32}default:return 32}}var jy=!1,Xo=null,Zo=null,Jo=null,Hd=new Map,$d=new Map,el=[],pN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kw(r,s){switch(r){case"focusin":case"focusout":Xo=null;break;case"dragenter":case"dragleave":Zo=null;break;case"mouseover":case"mouseout":Jo=null;break;case"pointerover":case"pointerout":Hd.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$d.delete(s.pointerId)}}function Gd(r,s,o,c,f,_){return r===null||r.nativeEvent!==_?(r={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:_,targetContainers:[f]},s!==null&&(s=ri(s),s!==null&&$w(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function gN(r,s,o,c,f){switch(s){case"focusin":return Xo=Gd(Xo,r,s,o,c,f),!0;case"dragenter":return Zo=Gd(Zo,r,s,o,c,f),!0;case"mouseover":return Jo=Gd(Jo,r,s,o,c,f),!0;case"pointerover":var _=f.pointerId;return Hd.set(_,Gd(Hd.get(_)||null,r,s,o,c,f)),!0;case"gotpointercapture":return _=f.pointerId,$d.set(_,Gd($d.get(_)||null,r,s,o,c,f)),!0}return!1}function Qw(r){var s=zn(r.target);if(s!==null){var o=Pe(s);if(o!==null){if(s=o.tag,s===13){if(s=Je(o),s!==null){r.blockedOn=s,ur(r.priority,function(){if(o.tag===13){var c=Er(),f=gs(o,c);f!==null&&ji(f,o,c),Vy(o,c)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function wp(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=Ly(r.nativeEvent);if(o===null){o=r.nativeEvent;var c=new o.constructor(o.type,o);$n=c,o.target.dispatchEvent(c),$n=null}else return s=ri(o),s!==null&&$w(s),r.blockedOn=o,!1;s.shift()}return!0}function Ww(r,s,o){wp(r)&&o.delete(s)}function _N(){jy=!1,Xo!==null&&wp(Xo)&&(Xo=null),Zo!==null&&wp(Zo)&&(Zo=null),Jo!==null&&wp(Jo)&&(Jo=null),Hd.forEach(Ww),$d.forEach(Ww)}function Ap(r,s){r.blockedOn===s&&(r.blockedOn=null,jy||(jy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,_N)))}var Ip=null;function Yw(r){Ip!==r&&(Ip=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ip===r&&(Ip=null);for(var s=0;s<r.length;s+=3){var o=r[s],c=r[s+1],f=r[s+2];if(typeof c!="function"){if(Uy(c||o)===null)continue;break}var _=ri(o);_!==null&&(r.splice(s,3),s-=3,C_(_,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function Kd(r){function s(V){return Ap(V,r)}Xo!==null&&Ap(Xo,r),Zo!==null&&Ap(Zo,r),Jo!==null&&Ap(Jo,r),Hd.forEach(s),$d.forEach(s);for(var o=0;o<el.length;o++){var c=el[o];c.blockedOn===r&&(c.blockedOn=null)}for(;0<el.length&&(o=el[0],o.blockedOn===null);)Qw(o),o.blockedOn===null&&el.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],_=o[c+1],w=f[_n]||null;if(typeof _=="function")w||Yw(o);else if(w){var S=null;if(_&&_.hasAttribute("formAction")){if(f=_,w=_[_n]||null)S=w.formAction;else if(Uy(f)!==null)continue}else S=w.action;typeof S=="function"?o[c+1]=S:(o.splice(c,3),c-=3),Yw(o)}}}function By(r){this._internalRoot=r}Sp.prototype.render=By.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,c=Er();qw(o,c,r,s,null,null)},Sp.prototype.unmount=By.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;r.tag===0&&Bc(),qw(r.current,2,null,r,null,null),lp(),s[rs]=null}};function Sp(r){this._internalRoot=r}Sp.prototype.unstable_scheduleHydration=function(r){if(r){var s=is();r={blockedOn:null,target:r,priority:s};for(var o=0;o<el.length&&s!==0&&s<el[o].priority;o++);el.splice(o,0,r),o===0&&Qw(r)}};var Xw=e.version;if(Xw!=="19.0.0")throw Error(i(527,Xw,"19.0.0"));Ie.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=re(s),r=r!==null?Ae(r):null,r=r===null?null:r.stateNode,r};var yN={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:x,findFiberByHostInstance:zn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rp.isDisabled&&Rp.supportsFiber)try{xs=Rp.inject(yN),Fn=Rp}catch{}}return Wd.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,c="",f=mT,_=pT,w=gT,S=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=Fw(r,1,!1,null,null,o,c,f,_,w,S,null),r[rs]=s.current,wy(r.nodeType===8?r.parentNode:r),new By(s)},Wd.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var c=!1,f="",_=mT,w=pT,S=gT,V=null,H=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(_=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(V=o.unstable_transitionCallbacks),o.formState!==void 0&&(H=o.formState)),s=Fw(r,1,!0,s,o??null,c,f,_,w,S,V,H),s.context=zw(null),o=s.current,c=Er(),f=qo(c),f.callback=null,Ho(o,f,c),s.current.lanes=c,Xt(s,c),Qs(s),r[rs]=s.current,wy(r),new Sp(s)},Wd.version="19.0.0",Wd}var oA;function DN(){if(oA)return qy.exports;oA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qy.exports=CN(),qy.exports}var xN=DN(),Yd={},lA;function NN(){if(lA)return Yd;lA=1,Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.parse=u,Yd.serialize=g;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const I=function(){};return I.prototype=Object.create(null),I})();function u(I,P){const U=new l,G=I.length;if(G<2)return U;const j=(P==null?void 0:P.decode)||v;let Z=0;do{const ie=I.indexOf("=",Z);if(ie===-1)break;const se=I.indexOf(";",Z),_e=se===-1?G:se;if(ie>_e){Z=I.lastIndexOf(";",ie-1)+1;continue}const pe=d(I,Z,ie),Re=m(I,ie,pe),L=I.slice(pe,Re);if(U[L]===void 0){let O=d(I,ie+1,_e),x=m(I,_e,O);const k=j(I.slice(O,x));U[L]=k}Z=_e+1}while(Z<G);return U}function d(I,P,U){do{const G=I.charCodeAt(P);if(G!==32&&G!==9)return P}while(++P<U);return U}function m(I,P,U){for(;P>U;){const G=I.charCodeAt(--P);if(G!==32&&G!==9)return P+1}return U}function g(I,P,U){const G=(U==null?void 0:U.encode)||encodeURIComponent;if(!n.test(I))throw new TypeError(`argument name is invalid: ${I}`);const j=G(P);if(!e.test(j))throw new TypeError(`argument val is invalid: ${P}`);let Z=I+"="+j;if(!U)return Z;if(U.maxAge!==void 0){if(!Number.isInteger(U.maxAge))throw new TypeError(`option maxAge is invalid: ${U.maxAge}`);Z+="; Max-Age="+U.maxAge}if(U.domain){if(!t.test(U.domain))throw new TypeError(`option domain is invalid: ${U.domain}`);Z+="; Domain="+U.domain}if(U.path){if(!i.test(U.path))throw new TypeError(`option path is invalid: ${U.path}`);Z+="; Path="+U.path}if(U.expires){if(!b(U.expires)||!Number.isFinite(U.expires.valueOf()))throw new TypeError(`option expires is invalid: ${U.expires}`);Z+="; Expires="+U.expires.toUTCString()}if(U.httpOnly&&(Z+="; HttpOnly"),U.secure&&(Z+="; Secure"),U.partitioned&&(Z+="; Partitioned"),U.priority)switch(typeof U.priority=="string"?U.priority.toLowerCase():void 0){case"low":Z+="; Priority=Low";break;case"medium":Z+="; Priority=Medium";break;case"high":Z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${U.priority}`)}if(U.sameSite)switch(typeof U.sameSite=="string"?U.sameSite.toLowerCase():U.sameSite){case!0:case"strict":Z+="; SameSite=Strict";break;case"lax":Z+="; SameSite=Lax";break;case"none":Z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${U.sameSite}`)}return Z}function v(I){if(I.indexOf("%")===-1)return I;try{return decodeURIComponent(I)}catch{return I}}function b(I){return a.call(I)==="[object Date]"}return Yd}NN();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var uA="popstate";function PN(n={}){function e(i,a){let{pathname:l,search:u,hash:d}=i.location;return _v("",{pathname:l,search:u,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:Cf(a)}return kN(e,t,null,n)}function en(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function aa(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ON(){return Math.random().toString(36).substring(2,10)}function cA(n,e){return{usr:n.state,key:n.key,idx:e}}function _v(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Mh(e):e,state:t,key:e&&e.key||i||ON()}}function Cf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Mh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function kN(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,u=a.history,d="POP",m=null,g=v();g==null&&(g=0,u.replaceState({...u.state,idx:g},""));function v(){return(u.state||{idx:null}).idx}function b(){d="POP";let j=v(),Z=j==null?null:j-g;g=j,m&&m({action:d,location:G.location,delta:Z})}function I(j,Z){d="PUSH";let ie=_v(G.location,j,Z);g=v()+1;let se=cA(ie,g),_e=G.createHref(ie);try{u.pushState(se,"",_e)}catch(pe){if(pe instanceof DOMException&&pe.name==="DataCloneError")throw pe;a.location.assign(_e)}l&&m&&m({action:d,location:G.location,delta:1})}function P(j,Z){d="REPLACE";let ie=_v(G.location,j,Z);g=v();let se=cA(ie,g),_e=G.createHref(ie);u.replaceState(se,"",_e),l&&m&&m({action:d,location:G.location,delta:0})}function U(j){let Z=a.location.origin!=="null"?a.location.origin:a.location.href,ie=typeof j=="string"?j:Cf(j);return ie=ie.replace(/ $/,"%20"),en(Z,`No window.location.(origin|href) available to create URL for href: ${ie}`),new URL(ie,Z)}let G={get action(){return d},get location(){return n(a,u)},listen(j){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(uA,b),m=j,()=>{a.removeEventListener(uA,b),m=null}},createHref(j){return e(a,j)},createURL:U,encodeLocation(j){let Z=U(j);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:I,replace:P,go(j){return u.go(j)}};return G}function xI(n,e,t="/"){return VN(n,e,t,!1)}function VN(n,e,t,i){let a=typeof e=="string"?Mh(e):e,l=gl(a.pathname||"/",t);if(l==null)return null;let u=NI(n);MN(u);let d=null;for(let m=0;d==null&&m<u.length;++m){let g=KN(l);d=$N(u[m],g,i)}return d}function NI(n,e=[],t=[],i=""){let a=(l,u,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};m.relativePath.startsWith("/")&&(en(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let g=Ya([i,m.relativePath]),v=t.concat(m);l.children&&l.children.length>0&&(en(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),NI(l.children,e,v,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:qN(g,l.index),routesMeta:v})};return n.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,u);else for(let m of PI(l.path))a(l,u,m)}),e}function PI(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let u=PI(i.join("/")),d=[];return d.push(...u.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...u),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function MN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:HN(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var LN=/^:[\w-]+$/,UN=3,jN=2,BN=1,FN=10,zN=-2,hA=n=>n==="*";function qN(n,e){let t=n.split("/"),i=t.length;return t.some(hA)&&(i+=zN),e&&(i+=jN),t.filter(a=>!hA(a)).reduce((a,l)=>a+(LN.test(l)?UN:l===""?BN:FN),i)}function HN(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function $N(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",u=[];for(let d=0;d<i.length;++d){let m=i[d],g=d===i.length-1,v=l==="/"?e:e.slice(l.length)||"/",b=ng({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},v),I=m.route;if(!b&&g&&t&&!i[i.length-1].route.index&&(b=ng({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!b)return null;Object.assign(a,b.params),u.push({params:a,pathname:Ya([l,b.pathname]),pathnameBase:XN(Ya([l,b.pathnameBase])),route:I}),b.pathnameBase!=="/"&&(l=Ya([l,b.pathnameBase]))}return u}function ng(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=GN(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((g,{paramName:v,isOptional:b},I)=>{if(v==="*"){let U=d[I]||"";u=l.slice(0,l.length-U.length).replace(/(.)\/+$/,"$1")}const P=d[I];return b&&!P?g[v]=void 0:g[v]=(P||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:u,pattern:n}}function GN(n,e=!1,t=!0){aa(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,m)=>(i.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function KN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return aa(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function gl(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function QN(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Mh(n):n;return{pathname:t?t.startsWith("/")?t:WN(t,e):e,search:ZN(i),hash:JN(a)}}function WN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Ky(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function OI(n){let e=YN(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function kI(n,e,t,i=!1){let a;typeof n=="string"?a=Mh(n):(a={...n},en(!a.pathname||!a.pathname.includes("?"),Ky("?","pathname","search",a)),en(!a.pathname||!a.pathname.includes("#"),Ky("#","pathname","hash",a)),en(!a.search||!a.search.includes("#"),Ky("#","search","hash",a)));let l=n===""||a.pathname==="",u=l?"/":a.pathname,d;if(u==null)d=t;else{let b=e.length-1;if(!i&&u.startsWith("..")){let I=u.split("/");for(;I[0]==="..";)I.shift(),b-=1;a.pathname=I.join("/")}d=b>=0?e[b]:"/"}let m=QN(a,d),g=u&&u!=="/"&&u.endsWith("/"),v=(l||u===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||v)&&(m.pathname+="/"),m}var Ya=n=>n.join("/").replace(/\/\/+/g,"/"),XN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ZN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,JN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function eP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var VI=["POST","PUT","PATCH","DELETE"];new Set(VI);var tP=["GET",...VI];new Set(tP);var Lh=z.createContext(null);Lh.displayName="DataRouter";var Ng=z.createContext(null);Ng.displayName="DataRouterState";var MI=z.createContext({isTransitioning:!1});MI.displayName="ViewTransition";var nP=z.createContext(new Map);nP.displayName="Fetchers";var iP=z.createContext(null);iP.displayName="Await";var da=z.createContext(null);da.displayName="Navigation";var em=z.createContext(null);em.displayName="Location";var Cs=z.createContext({outlet:null,matches:[],isDataRoute:!1});Cs.displayName="Route";var lE=z.createContext(null);lE.displayName="RouteError";function rP(n,{relative:e}={}){en(tm(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=z.useContext(da),{hash:a,pathname:l,search:u}=nm(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Ya([t,l])),i.createHref({pathname:d,search:u,hash:a})}function tm(){return z.useContext(em)!=null}function xl(){return en(tm(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(em).location}var LI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function UI(n){z.useContext(da).static||z.useLayoutEffect(n)}function Pg(){let{isDataRoute:n}=z.useContext(Cs);return n?vP():sP()}function sP(){en(tm(),"useNavigate() may be used only in the context of a <Router> component.");let n=z.useContext(Lh),{basename:e,navigator:t}=z.useContext(da),{matches:i}=z.useContext(Cs),{pathname:a}=xl(),l=JSON.stringify(OI(i)),u=z.useRef(!1);return UI(()=>{u.current=!0}),z.useCallback((m,g={})=>{if(aa(u.current,LI),!u.current)return;if(typeof m=="number"){t.go(m);return}let v=kI(m,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ya([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,l,a,n])}var aP=z.createContext(null);function oP(n){let e=z.useContext(Cs).outlet;return e&&z.createElement(aP.Provider,{value:n},e)}function uE(){let{matches:n}=z.useContext(Cs),e=n[n.length-1];return e?e.params:{}}function nm(n,{relative:e}={}){let{matches:t}=z.useContext(Cs),{pathname:i}=xl(),a=JSON.stringify(OI(t));return z.useMemo(()=>kI(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function lP(n,e){return jI(n,e)}function jI(n,e,t,i){var ie;en(tm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=z.useContext(da),{matches:u}=z.useContext(Cs),d=u[u.length-1],m=d?d.params:{},g=d?d.pathname:"/",v=d?d.pathnameBase:"/",b=d&&d.route;{let se=b&&b.path||"";BI(g,!b||se.endsWith("*")||se.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${se}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${se}"> to <Route path="${se==="/"?"*":`${se}/*`}">.`)}let I=xl(),P;if(e){let se=typeof e=="string"?Mh(e):e;en(v==="/"||((ie=se.pathname)==null?void 0:ie.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${se.pathname}" was given in the \`location\` prop.`),P=se}else P=I;let U=P.pathname||"/",G=U;if(v!=="/"){let se=v.replace(/^\//,"").split("/");G="/"+U.replace(/^\//,"").split("/").slice(se.length).join("/")}let j=!l&&t&&t.matches&&t.matches.length>0?t.matches:xI(n,{pathname:G});aa(b||j!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),aa(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Z=fP(j&&j.map(se=>Object.assign({},se,{params:Object.assign({},m,se.params),pathname:Ya([v,a.encodeLocation?a.encodeLocation(se.pathname).pathname:se.pathname]),pathnameBase:se.pathnameBase==="/"?v:Ya([v,a.encodeLocation?a.encodeLocation(se.pathnameBase).pathname:se.pathnameBase])})),u,t,i);return e&&Z?z.createElement(em.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},Z):Z}function uP(){let n=yP(),e=eP(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:l},"ErrorBoundary")," or"," ",z.createElement("code",{style:l},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:a},t):null,u)}var cP=z.createElement(uP,null),hP=class extends z.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?z.createElement(Cs.Provider,{value:this.props.routeContext},z.createElement(lE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function dP({routeContext:n,match:e,children:t}){let i=z.useContext(Lh);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(Cs.Provider,{value:n},t)}function fP(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let m=a.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);en(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,d=-1;if(t)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=m),g.route.id){let{loaderData:v,errors:b}=t,I=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||I){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,g,v)=>{let b,I=!1,P=null,U=null;t&&(b=l&&g.route.id?l[g.route.id]:void 0,P=g.route.errorElement||cP,u&&(d<0&&v===0?(BI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,U=null):d===v&&(I=!0,U=g.route.hydrateFallbackElement||null)));let G=e.concat(a.slice(0,v+1)),j=()=>{let Z;return b?Z=P:I?Z=U:g.route.Component?Z=z.createElement(g.route.Component,null):g.route.element?Z=g.route.element:Z=m,z.createElement(dP,{match:g,routeContext:{outlet:m,matches:G,isDataRoute:t!=null},children:Z})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?z.createElement(hP,{location:t.location,revalidation:t.revalidation,component:P,error:b,children:j(),routeContext:{outlet:null,matches:G,isDataRoute:!0}}):j()},null)}function cE(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mP(n){let e=z.useContext(Lh);return en(e,cE(n)),e}function pP(n){let e=z.useContext(Ng);return en(e,cE(n)),e}function gP(n){let e=z.useContext(Cs);return en(e,cE(n)),e}function hE(n){let e=gP(n),t=e.matches[e.matches.length-1];return en(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function _P(){return hE("useRouteId")}function yP(){var i;let n=z.useContext(lE),e=pP("useRouteError"),t=hE("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function vP(){let{router:n}=mP("useNavigate"),e=hE("useNavigate"),t=z.useRef(!1);return UI(()=>{t.current=!0}),z.useCallback(async(a,l={})=>{aa(t.current,LI),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var dA={};function BI(n,e,t){!e&&!dA[n]&&(dA[n]=!0,aa(!1,t))}z.memo(EP);function EP({routes:n,future:e,state:t}){return jI(n,void 0,t,e)}function FI(n){return oP(n.context)}function Ln(n){en(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bP({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){en(!tm(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),d=z.useMemo(()=>({basename:u,navigator:a,static:l,future:{}}),[u,a,l]);typeof t=="string"&&(t=Mh(t));let{pathname:m="/",search:g="",hash:v="",state:b=null,key:I="default"}=t,P=z.useMemo(()=>{let U=gl(m,u);return U==null?null:{location:{pathname:U,search:g,hash:v,state:b,key:I},navigationType:i}},[u,m,g,v,b,I,i]);return aa(P!=null,`<Router basename="${u}"> is not able to match the URL "${m}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:z.createElement(da.Provider,{value:d},z.createElement(em.Provider,{children:e,value:P}))}function TP({children:n,location:e}){return lP(yv(n),e)}function yv(n,e=[]){let t=[];return z.Children.forEach(n,(i,a)=>{if(!z.isValidElement(i))return;let l=[...e,a];if(i.type===z.Fragment){t.push.apply(t,yv(i.props.children,l));return}en(i.type===Ln,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),en(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=yv(i.props.children,l)),t.push(u)}),t}var jp="get",Bp="application/x-www-form-urlencoded";function Og(n){return n!=null&&typeof n.tagName=="string"}function wP(n){return Og(n)&&n.tagName.toLowerCase()==="button"}function AP(n){return Og(n)&&n.tagName.toLowerCase()==="form"}function IP(n){return Og(n)&&n.tagName.toLowerCase()==="input"}function SP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function RP(n,e){return n.button===0&&(!e||e==="_self")&&!SP(n)}var Cp=null;function CP(){if(Cp===null)try{new FormData(document.createElement("form"),0),Cp=!1}catch{Cp=!0}return Cp}var DP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qy(n){return n!=null&&!DP.has(n)?(aa(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bp}"`),null):n}function xP(n,e){let t,i,a,l,u;if(AP(n)){let d=n.getAttribute("action");i=d?gl(d,e):null,t=n.getAttribute("method")||jp,a=Qy(n.getAttribute("enctype"))||Bp,l=new FormData(n)}else if(wP(n)||IP(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(i=m?gl(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||jp,a=Qy(n.getAttribute("formenctype"))||Qy(d.getAttribute("enctype"))||Bp,l=new FormData(d,n),!CP()){let{name:g,type:v,value:b}=n;if(v==="image"){let I=g?`${g}.`:"";l.append(`${I}x`,"0"),l.append(`${I}y`,"0")}else g&&l.append(g,b)}}else{if(Og(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=jp,i=null,a=Bp,u=n}return l&&a==="text/plain"&&(u=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:u}}function dE(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function NP(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function PP(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function OP(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await NP(l,t);return u.links?u.links():[]}return[]}));return LP(i.flat(1).filter(PP).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function fA(n,e,t,i,a,l){let u=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,d=(m,g)=>{var v;return t[g].pathname!==m.pathname||((v=t[g].route.path)==null?void 0:v.endsWith("*"))&&t[g].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,g)=>u(m,g)||d(m,g)):l==="data"?e.filter((m,g)=>{var b;let v=i.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(u(m,g)||d(m,g))return!0;if(m.route.shouldRevalidate){let I=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((b=t[0])==null?void 0:b.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function kP(n,e,{includeHydrateFallback:t}={}){return VP(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function VP(n){return[...new Set(n)]}function MP(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function LP(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(MP(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function UP(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function jP(){let n=z.useContext(Lh);return dE(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function BP(){let n=z.useContext(Ng);return dE(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var fE=z.createContext(void 0);fE.displayName="FrameworkContext";function zI(){let n=z.useContext(fE);return dE(n,"You must render this element inside a <HydratedRouter> element"),n}function FP(n,e){let t=z.useContext(fE),[i,a]=z.useState(!1),[l,u]=z.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:g,onMouseLeave:v,onTouchStart:b}=e,I=z.useRef(null);z.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let G=Z=>{Z.forEach(ie=>{u(ie.isIntersecting)})},j=new IntersectionObserver(G,{threshold:.5});return I.current&&j.observe(I.current),()=>{j.disconnect()}}},[n]),z.useEffect(()=>{if(i){let G=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(G)}}},[i]);let P=()=>{a(!0)},U=()=>{a(!1),u(!1)};return t?n!=="intent"?[l,I,{}]:[l,I,{onFocus:Xd(d,P),onBlur:Xd(m,U),onMouseEnter:Xd(g,P),onMouseLeave:Xd(v,U),onTouchStart:Xd(b,P)}]:[!1,I,{}]}function Xd(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function zP({page:n,...e}){let{router:t}=jP(),i=z.useMemo(()=>xI(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?z.createElement(HP,{page:n,matches:i,...e}):null}function qP(n){let{manifest:e,routeModules:t}=zI(),[i,a]=z.useState([]);return z.useEffect(()=>{let l=!1;return OP(n,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[n,e,t]),i}function HP({page:n,matches:e,...t}){let i=xl(),{manifest:a,routeModules:l}=zI(),{loaderData:u,matches:d}=BP(),m=z.useMemo(()=>fA(n,e,d,a,i,"data"),[n,e,d,a,i]),g=z.useMemo(()=>fA(n,e,d,a,i,"assets"),[n,e,d,a,i]),v=z.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let P=new Set,U=!1;if(e.forEach(j=>{var ie;let Z=a.routes[j.route.id];!Z||!Z.hasLoader||(!m.some(se=>se.route.id===j.route.id)&&j.route.id in u&&((ie=l[j.route.id])!=null&&ie.shouldRevalidate)||Z.hasClientLoader?U=!0:P.add(j.route.id))}),P.size===0)return[];let G=UP(n);return U&&P.size>0&&G.searchParams.set("_routes",e.filter(j=>P.has(j.route.id)).map(j=>j.route.id).join(",")),[G.pathname+G.search]},[u,i,a,m,e,n,l]),b=z.useMemo(()=>kP(g,a),[g,a]),I=qP(g);return z.createElement(z.Fragment,null,v.map(P=>z.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...t})),b.map(P=>z.createElement("link",{key:P,rel:"modulepreload",href:P,...t})),I.map(({key:P,link:U})=>z.createElement("link",{key:P,...U})))}function $P(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var qI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qI&&(window.__reactRouterVersion="7.2.0")}catch{}function GP({basename:n,children:e,window:t}){let i=z.useRef();i.current==null&&(i.current=PN({window:t,v5Compat:!0}));let a=i.current,[l,u]=z.useState({action:a.action,location:a.location}),d=z.useCallback(m=>{z.startTransition(()=>u(m))},[u]);return z.useLayoutEffect(()=>a.listen(d),[a,d]),z.createElement(bP,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var HI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xn=z.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:u,state:d,target:m,to:g,preventScrollReset:v,viewTransition:b,...I},P){let{basename:U}=z.useContext(da),G=typeof g=="string"&&HI.test(g),j,Z=!1;if(typeof g=="string"&&G&&(j=g,qI))try{let x=new URL(window.location.href),k=g.startsWith("//")?new URL(x.protocol+g):new URL(g),B=gl(k.pathname,U);k.origin===x.origin&&B!=null?g=B+k.search+k.hash:Z=!0}catch{aa(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ie=rP(g,{relative:a}),[se,_e,pe]=FP(i,I),Re=YP(g,{replace:u,state:d,target:m,preventScrollReset:v,relative:a,viewTransition:b});function L(x){e&&e(x),x.defaultPrevented||Re(x)}let O=z.createElement("a",{...I,...pe,href:j||ie,onClick:Z||l?e:L,ref:$P(P,_e),target:m,"data-discover":!G&&t==="render"?"true":void 0});return se&&!G?z.createElement(z.Fragment,null,O,z.createElement(zP,{page:ie})):O});xn.displayName="Link";var KP=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:u,viewTransition:d,children:m,...g},v){let b=nm(u,{relative:g.relative}),I=xl(),P=z.useContext(Ng),{navigator:U,basename:G}=z.useContext(da),j=P!=null&&tO(b)&&d===!0,Z=U.encodeLocation?U.encodeLocation(b).pathname:b.pathname,ie=I.pathname,se=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;t||(ie=ie.toLowerCase(),se=se?se.toLowerCase():null,Z=Z.toLowerCase()),se&&G&&(se=gl(se,G)||se);const _e=Z!=="/"&&Z.endsWith("/")?Z.length-1:Z.length;let pe=ie===Z||!a&&ie.startsWith(Z)&&ie.charAt(_e)==="/",Re=se!=null&&(se===Z||!a&&se.startsWith(Z)&&se.charAt(Z.length)==="/"),L={isActive:pe,isPending:Re,isTransitioning:j},O=pe?e:void 0,x;typeof i=="function"?x=i(L):x=[i,pe?"active":null,Re?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let k=typeof l=="function"?l(L):l;return z.createElement(xn,{...g,"aria-current":O,className:x,ref:v,style:k,to:u,viewTransition:d},typeof m=="function"?m(L):m)});KP.displayName="NavLink";var QP=z.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:u=jp,action:d,onSubmit:m,relative:g,preventScrollReset:v,viewTransition:b,...I},P)=>{let U=JP(),G=eO(d,{relative:g}),j=u.toLowerCase()==="get"?"get":"post",Z=typeof d=="string"&&HI.test(d),ie=se=>{if(m&&m(se),se.defaultPrevented)return;se.preventDefault();let _e=se.nativeEvent.submitter,pe=(_e==null?void 0:_e.getAttribute("formmethod"))||u;U(_e||se.currentTarget,{fetcherKey:e,method:pe,navigate:t,replace:a,state:l,relative:g,preventScrollReset:v,viewTransition:b})};return z.createElement("form",{ref:P,method:j,action:G,onSubmit:i?m:ie,...I,"data-discover":!Z&&n==="render"?"true":void 0})});QP.displayName="Form";function WP(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $I(n){let e=z.useContext(Lh);return en(e,WP(n)),e}function YP(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:u}={}){let d=Pg(),m=xl(),g=nm(n,{relative:l});return z.useCallback(v=>{if(RP(v,e)){v.preventDefault();let b=t!==void 0?t:Cf(m)===Cf(g);d(n,{replace:b,state:i,preventScrollReset:a,relative:l,viewTransition:u})}},[m,d,g,t,i,e,n,a,l,u])}var XP=0,ZP=()=>`__${String(++XP)}__`;function JP(){let{router:n}=$I("useSubmit"),{basename:e}=z.useContext(da),t=_P();return z.useCallback(async(i,a={})=>{let{action:l,method:u,encType:d,formData:m,body:g}=xP(i,e);if(a.navigate===!1){let v=a.fetcherKey||ZP();await n.fetch(v,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||u,formEncType:a.encType||d,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||u,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function eO(n,{relative:e}={}){let{basename:t}=z.useContext(da),i=z.useContext(Cs);en(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...nm(n||".",{relative:e})},u=xl();if(n==null){l.search=u.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(v=>v==="")){d.delete("index"),m.filter(b=>b).forEach(b=>d.append("index",b));let v=d.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ya([t,l.pathname])),Cf(l)}function tO(n,e={}){let t=z.useContext(MI);en(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=$I("useViewTransitionState"),a=nm(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=gl(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=gl(t.nextLocation.pathname,i)||t.nextLocation.pathname;return ng(a.pathname,u)!=null||ng(a.pathname,l)!=null}new TextEncoder;function nO({children:n}){return N.jsxs("nav",{className:"navbar",children:[N.jsx("h2",{className:"navbar_head",children:"Vcode"}),N.jsxs("div",{className:"nav-links",children:[N.jsx(xn,{to:"/",children:"Dashboard"}),N.jsx(xn,{to:"/manage-problem",children:"Problems"}),N.jsx(xn,{to:"/client-submissions",children:"Submissions"})]}),N.jsx("div",{children:n})]})}const iO=()=>N.jsx("aside",{className:"sidebar",children:N.jsxs("ul",{className:"listgroup",children:[N.jsx("li",{className:"listgroupitem",children:N.jsx(xn,{to:"/",children:"Dashboard"})}),N.jsx("li",{className:"listgroupitem",children:N.jsx(xn,{to:"/manage-problem",children:"Manage Problems"})}),N.jsx("li",{className:"listgroupitem",children:N.jsx(xn,{to:"/submissions",children:"Submissions"})}),N.jsx("li",{className:"listgroupitem",children:N.jsx(xn,{to:"/analytics",children:"User Analytics"})}),N.jsx("li",{className:"listgroupitem",children:N.jsx(xn,{to:"/settings",children:"Settings"})})]})}),GI=z.createContext({email:null,role:null,port:null,hostIP:"192.168.67.185"}),fa=()=>z.useContext(GI),rO=({children:n})=>{const[e,t]=z.useState(null),[i,a]=z.useState(null),[l,u]=z.useState(null),d="192.168.0.101";return z.useEffect(()=>{const m=localStorage.getItem("userEmail"),g=localStorage.getItem("userRole"),v=localStorage.getItem("userPort");t(m),a(g),u(v)},[]),N.jsx(GI.Provider,{value:{email:e,role:i,port:l,hostIP:d},children:n})};function sO(){const[n,e]=z.useState(localStorage.getItem("theme")||"dark"),{hostIP:t}=fa();z.useEffect(()=>{n==="light"?document.body.classList.add("light-theme"):document.body.classList.remove("light-theme")},[n]);const i=()=>{const l=n==="dark"?"light":"dark";e(l),localStorage.setItem("theme",l)},a=()=>{localStorage.removeItem("sessionId"),localStorage.removeItem("userEmail"),localStorage.removeItem("userRole"),localStorage.removeItem("userPort"),fetch(`http://${t}:9000/logout`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}).then(l=>{l.ok?(console.log("Logged out successfully"),window.location.href=`http://${t}:9000/`):(console.error("Logout failed:",l.statusText),alert("Logout failed. Please try again."))}).catch(l=>{console.error("Error during logout:",l),alert("Error during logout. Please try again."),window.location.href=`http://${t}:9000/`})};return N.jsxs("div",{className:"admin-layout",children:[N.jsx(nO,{children:N.jsxs(N.Fragment,{children:[N.jsxs("button",{className:"theme-toggle",onClick:i,children:["Switch to ",n==="dark"?"Light":"Dark"," Mode"]}),N.jsx("button",{className:"logout-button",onClick:a,children:"Logout"})]})}),N.jsxs("div",{className:"main-content",children:[N.jsx(iO,{}),N.jsx("div",{className:"content",children:N.jsx(FI,{})})]})]})}const mE=()=>{const{port:n,hostIP:e}=fa(),t=Pg(),[i,a]=z.useState([]),[l,u]=z.useState(!0),d=b=>{t(`/editProblem/${b}`)},m=()=>{t("/add-problem")},g=async()=>{try{const b=await fetch(`http://${e}:${n}/question`);if(b.ok){const I=await b.json();a(I)}}catch(b){console.error("Error fetching problems:",b)}},v=async b=>{if(window.confirm("Are you sure you want to delete this problem?"))try{const P=await fetch(`http://${e}:${n}/clearSingleSubmission/${b}`,{method:"DELETE"});if(P.ok)alert(" Problem deleted successfully!"),g();else{const U=await P.text();console.error("Server Error:",U),alert(" Failed to delete the problem.")}}catch(P){console.error(" Delete failed:",P),alert(" Could not connect to the server.")}};return z.useEffect(()=>{fetch(`http://${e}:${n}/question`).then(b=>{if(!b.ok)throw new Error("Failed to fetch problems");return b.json()}).then(b=>{a(b),u(!1)}).catch(b=>{console.error("Error fetching problems:",b),u(!1)})},[]),N.jsxs("div",{className:"overflow-auto",children:[N.jsx("h2",{className:"problemList-title",children:"Problem List"}),N.jsxs("div",{className:"input-group mb-3",children:[N.jsx("span",{className:"input-group-text bg-dark text-white",children:""}),N.jsx("input",{type:"text",className:"form-control bg-dark text-white",placeholder:"Search problem..."})]}),N.jsx("div",{className:"mb-4",children:N.jsx("button",{className:"btn btn-success",onClick:m,children:" Add New Problem"})}),l?N.jsx("p",{children:"Loading problems..."}):N.jsx("ul",{className:"list-group",children:i.map(b=>N.jsx("li",{children:N.jsxs(xn,{to:"/question/"+b.id,className:"pli",children:[N.jsxs("div",{className:"problem-content",children:[N.jsx("strong",{children:b.title}),N.jsxs("div",{className:"difficulty",children:["Difficulty: ",b.difficulty]}),N.jsx("div",{className:"tags",children:b.tags.map((I,P)=>N.jsx("span",{className:"tag",children:I},P))})]}),N.jsx("button",{className:"settings-btn",onClick:I=>{I.preventDefault(),d(b.id)},children:""}),N.jsx("button",{className:"delete-btn",onClick:I=>{I.preventDefault(),v(b.id)},children:""})]})},b.id))})]})};function aO(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function pA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mA(Object(t),!0).forEach(function(i){aO(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):mA(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function oO(n,e){if(n==null)return{};var t={},i=Object.keys(n),a,l;for(l=0;l<i.length;l++)a=i[l],!(e.indexOf(a)>=0)&&(t[a]=n[a]);return t}function lO(n,e){if(n==null)return{};var t=oO(n,e),i,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function uO(n,e){return cO(n)||hO(n,e)||dO(n,e)||fO()}function cO(n){if(Array.isArray(n))return n}function hO(n,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],i=!0,a=!1,l=void 0;try{for(var u=n[Symbol.iterator](),d;!(i=(d=u.next()).done)&&(t.push(d.value),!(e&&t.length===e));i=!0);}catch(m){a=!0,l=m}finally{try{!i&&u.return!=null&&u.return()}finally{if(a)throw l}}return t}}function dO(n,e){if(n){if(typeof n=="string")return gA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gA(n,e)}}function gA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function fO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mO(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _A(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function yA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_A(Object(t),!0).forEach(function(i){mO(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_A(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function pO(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){return e.reduceRight(function(a,l){return l(a)},i)}}function lf(n){return function e(){for(var t=this,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return a.length>=n.length?n.apply(this,a):function(){for(var u=arguments.length,d=new Array(u),m=0;m<u;m++)d[m]=arguments[m];return e.apply(t,[].concat(a,d))}}}function ig(n){return{}.toString.call(n).includes("Object")}function gO(n){return!Object.keys(n).length}function Df(n){return typeof n=="function"}function _O(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function yO(n,e){return ig(e)||cl("changeType"),Object.keys(e).some(function(t){return!_O(n,t)})&&cl("changeField"),e}function vO(n){Df(n)||cl("selectorType")}function EO(n){Df(n)||ig(n)||cl("handlerType"),ig(n)&&Object.values(n).some(function(e){return!Df(e)})&&cl("handlersType")}function bO(n){n||cl("initialIsRequired"),ig(n)||cl("initialType"),gO(n)&&cl("initialContent")}function TO(n,e){throw new Error(n[e]||n.default)}var wO={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},cl=lf(TO)(wO),Dp={changes:yO,selector:vO,handler:EO,initial:bO};function AO(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Dp.initial(n),Dp.handler(e);var t={current:n},i=lf(RO)(t,e),a=lf(SO)(t),l=lf(Dp.changes)(n),u=lf(IO)(t);function d(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(v){return v};return Dp.selector(g),g(t.current)}function m(g){pO(i,a,l,u)(g)}return[d,m]}function IO(n,e){return Df(e)?e(n.current):e}function SO(n,e){return n.current=yA(yA({},n.current),e),e}function RO(n,e,t){return Df(e)?e(n.current):Object.keys(t).forEach(function(i){var a;return(a=e[i])===null||a===void 0?void 0:a.call(e,n.current[i])}),t}var CO={create:AO},DO={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function xO(n){return function e(){for(var t=this,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return a.length>=n.length?n.apply(this,a):function(){for(var u=arguments.length,d=new Array(u),m=0;m<u;m++)d[m]=arguments[m];return e.apply(t,[].concat(a,d))}}}function NO(n){return{}.toString.call(n).includes("Object")}function PO(n){return n||vA("configIsRequired"),NO(n)||vA("configType"),n.urls?(OO(),{paths:{vs:n.urls.monacoBase}}):n}function OO(){console.warn(KI.deprecation)}function kO(n,e){throw new Error(n[e]||n.default)}var KI={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},vA=xO(kO)(KI),VO={config:PO},MO=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(a){return t.reduceRight(function(l,u){return u(l)},a)}};function QI(n,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&n[t]&&Object.assign(e[t],QI(n[t],e[t]))}),pA(pA({},n),e)}var LO={type:"cancelation",msg:"operation is manually canceled"};function Wy(n){var e=!1,t=new Promise(function(i,a){n.then(function(l){return e?a(LO):i(l)}),n.catch(a)});return t.cancel=function(){return e=!0},t}var UO=CO.create({config:DO,isInitialized:!1,resolve:null,reject:null,monaco:null}),WI=uO(UO,2),im=WI[0],kg=WI[1];function jO(n){var e=VO.config(n),t=e.monaco,i=lO(e,["monaco"]);kg(function(a){return{config:QI(a.config,i),monaco:t}})}function BO(){var n=im(function(e){var t=e.monaco,i=e.isInitialized,a=e.resolve;return{monaco:t,isInitialized:i,resolve:a}});if(!n.isInitialized){if(kg({isInitialized:!0}),n.monaco)return n.resolve(n.monaco),Wy(Yy);if(window.monaco&&window.monaco.editor)return YI(window.monaco),n.resolve(window.monaco),Wy(Yy);MO(FO,qO)(HO)}return Wy(Yy)}function FO(n){return document.body.appendChild(n)}function zO(n){var e=document.createElement("script");return n&&(e.src=n),e}function qO(n){var e=im(function(i){var a=i.config,l=i.reject;return{config:a,reject:l}}),t=zO("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return n()},t.onerror=e.reject,t}function HO(){var n=im(function(t){var i=t.config,a=t.resolve,l=t.reject;return{config:i,resolve:a,reject:l}}),e=window.require;e.config(n.config),e(["vs/editor/editor.main"],function(t){YI(t),n.resolve(t)},function(t){n.reject(t)})}function YI(n){im().monaco||kg({monaco:n})}function $O(){return im(function(n){var e=n.monaco;return e})}var Yy=new Promise(function(n,e){return kg({resolve:n,reject:e})}),XI={config:jO,init:BO,__getMonacoInstance:$O},GO={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Xy=GO,KO={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},QO=KO;function WO({children:n}){return ah.createElement("div",{style:QO.container},n)}var YO=WO,XO=YO;function ZO({width:n,height:e,isEditorReady:t,loading:i,_ref:a,className:l,wrapperProps:u}){return ah.createElement("section",{style:{...Xy.wrapper,width:n,height:e},...u},!t&&ah.createElement(XO,null,i),ah.createElement("div",{ref:a,style:{...Xy.fullWidth,...!t&&Xy.hide},className:l}))}var JO=ZO,ZI=z.memo(JO);function e1(n){z.useEffect(n,[])}var JI=e1;function t1(n,e,t=!0){let i=z.useRef(!0);z.useEffect(i.current||!t?()=>{i.current=!1}:n,e)}var br=t1;function pf(){}function rh(n,e,t,i){return n1(n,i)||i1(n,e,t,i)}function n1(n,e){return n.editor.getModel(eS(n,e))}function i1(n,e,t,i){return n.editor.createModel(e,t,i?eS(n,i):void 0)}function eS(n,e){return n.Uri.parse(e)}function r1({original:n,modified:e,language:t,originalLanguage:i,modifiedLanguage:a,originalModelPath:l,modifiedModelPath:u,keepCurrentOriginalModel:d=!1,keepCurrentModifiedModel:m=!1,theme:g="light",loading:v="Loading...",options:b={},height:I="100%",width:P="100%",className:U,wrapperProps:G={},beforeMount:j=pf,onMount:Z=pf}){let[ie,se]=z.useState(!1),[_e,pe]=z.useState(!0),Re=z.useRef(null),L=z.useRef(null),O=z.useRef(null),x=z.useRef(Z),k=z.useRef(j),B=z.useRef(!1);JI(()=>{let xe=XI.init();return xe.then(de=>(L.current=de)&&pe(!1)).catch(de=>(de==null?void 0:de.type)!=="cancelation"&&console.error("Monaco initialization: error:",de)),()=>Re.current?Rt():xe.cancel()}),br(()=>{if(Re.current&&L.current){let xe=Re.current.getOriginalEditor(),de=rh(L.current,n||"",i||t||"text",l||"");de!==xe.getModel()&&xe.setModel(de)}},[l],ie),br(()=>{if(Re.current&&L.current){let xe=Re.current.getModifiedEditor(),de=rh(L.current,e||"",a||t||"text",u||"");de!==xe.getModel()&&xe.setModel(de)}},[u],ie),br(()=>{let xe=Re.current.getModifiedEditor();xe.getOption(L.current.editor.EditorOption.readOnly)?xe.setValue(e||""):e!==xe.getValue()&&(xe.executeEdits("",[{range:xe.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),xe.pushUndoStop())},[e],ie),br(()=>{var xe,de;(de=(xe=Re.current)==null?void 0:xe.getModel())==null||de.original.setValue(n||"")},[n],ie),br(()=>{let{original:xe,modified:de}=Re.current.getModel();L.current.editor.setModelLanguage(xe,i||t||"text"),L.current.editor.setModelLanguage(de,a||t||"text")},[t,i,a],ie),br(()=>{var xe;(xe=L.current)==null||xe.editor.setTheme(g)},[g],ie),br(()=>{var xe;(xe=Re.current)==null||xe.updateOptions(b)},[b],ie);let K=z.useCallback(()=>{var ke;if(!L.current)return;k.current(L.current);let xe=rh(L.current,n||"",i||t||"text",l||""),de=rh(L.current,e||"",a||t||"text",u||"");(ke=Re.current)==null||ke.setModel({original:xe,modified:de})},[t,e,a,n,i,l,u]),M=z.useCallback(()=>{var xe;!B.current&&O.current&&(Re.current=L.current.editor.createDiffEditor(O.current,{automaticLayout:!0,...b}),K(),(xe=L.current)==null||xe.editor.setTheme(g),se(!0),B.current=!0)},[b,g,K]);z.useEffect(()=>{ie&&x.current(Re.current,L.current)},[ie]),z.useEffect(()=>{!_e&&!ie&&M()},[_e,ie,M]);function Rt(){var de,ke,Pe,Je;let xe=(de=Re.current)==null?void 0:de.getModel();d||((ke=xe==null?void 0:xe.original)==null||ke.dispose()),m||((Pe=xe==null?void 0:xe.modified)==null||Pe.dispose()),(Je=Re.current)==null||Je.dispose()}return ah.createElement(ZI,{width:P,height:I,isEditorReady:ie,loading:v,_ref:O,className:U,wrapperProps:G})}var s1=r1;z.memo(s1);function a1(n){let e=z.useRef();return z.useEffect(()=>{e.current=n},[n]),e.current}var o1=a1,xp=new Map;function l1({defaultValue:n,defaultLanguage:e,defaultPath:t,value:i,language:a,path:l,theme:u="light",line:d,loading:m="Loading...",options:g={},overrideServices:v={},saveViewState:b=!0,keepCurrentModel:I=!1,width:P="100%",height:U="100%",className:G,wrapperProps:j={},beforeMount:Z=pf,onMount:ie=pf,onChange:se,onValidate:_e=pf}){let[pe,Re]=z.useState(!1),[L,O]=z.useState(!0),x=z.useRef(null),k=z.useRef(null),B=z.useRef(null),K=z.useRef(ie),M=z.useRef(Z),Rt=z.useRef(),xe=z.useRef(i),de=o1(l),ke=z.useRef(!1),Pe=z.useRef(!1);JI(()=>{let re=XI.init();return re.then(Ae=>(x.current=Ae)&&O(!1)).catch(Ae=>(Ae==null?void 0:Ae.type)!=="cancelation"&&console.error("Monaco initialization: error:",Ae)),()=>k.current?D():re.cancel()}),br(()=>{var Ae,be,Ie,Be;let re=rh(x.current,n||i||"",e||a||"",l||t||"");re!==((Ae=k.current)==null?void 0:Ae.getModel())&&(b&&xp.set(de,(be=k.current)==null?void 0:be.saveViewState()),(Ie=k.current)==null||Ie.setModel(re),b&&((Be=k.current)==null||Be.restoreViewState(xp.get(l))))},[l],pe),br(()=>{var re;(re=k.current)==null||re.updateOptions(g)},[g],pe),br(()=>{!k.current||i===void 0||(k.current.getOption(x.current.editor.EditorOption.readOnly)?k.current.setValue(i):i!==k.current.getValue()&&(Pe.current=!0,k.current.executeEdits("",[{range:k.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),k.current.pushUndoStop(),Pe.current=!1))},[i],pe),br(()=>{var Ae,be;let re=(Ae=k.current)==null?void 0:Ae.getModel();re&&a&&((be=x.current)==null||be.editor.setModelLanguage(re,a))},[a],pe),br(()=>{var re;d!==void 0&&((re=k.current)==null||re.revealLine(d))},[d],pe),br(()=>{var re;(re=x.current)==null||re.editor.setTheme(u)},[u],pe);let Je=z.useCallback(()=>{var re;if(!(!B.current||!x.current)&&!ke.current){M.current(x.current);let Ae=l||t,be=rh(x.current,i||n||"",e||a||"",Ae||"");k.current=(re=x.current)==null?void 0:re.editor.create(B.current,{model:be,automaticLayout:!0,...g},v),b&&k.current.restoreViewState(xp.get(Ae)),x.current.editor.setTheme(u),d!==void 0&&k.current.revealLine(d),Re(!0),ke.current=!0}},[n,e,t,i,a,l,g,v,b,u,d]);z.useEffect(()=>{pe&&K.current(k.current,x.current)},[pe]),z.useEffect(()=>{!L&&!pe&&Je()},[L,pe,Je]),xe.current=i,z.useEffect(()=>{var re,Ae;pe&&se&&((re=Rt.current)==null||re.dispose(),Rt.current=(Ae=k.current)==null?void 0:Ae.onDidChangeModelContent(be=>{Pe.current||se(k.current.getValue(),be)}))},[pe,se]),z.useEffect(()=>{if(pe){let re=x.current.editor.onDidChangeMarkers(Ae=>{var Ie;let be=(Ie=k.current.getModel())==null?void 0:Ie.uri;if(be&&Ae.find(Be=>Be.path===be.path)){let Be=x.current.editor.getModelMarkers({resource:be});_e==null||_e(Be)}});return()=>{re==null||re.dispose()}}return()=>{}},[pe,_e]);function D(){var re,Ae;(re=Rt.current)==null||re.dispose(),I?b&&xp.set(l,k.current.saveViewState()):(Ae=k.current.getModel())==null||Ae.dispose(),k.current.dispose()}return ah.createElement(ZI,{width:P,height:U,isEditorReady:pe,loading:m,_ref:B,className:G,wrapperProps:j})}var u1=l1,c1=z.memo(u1),tS=c1,Fp={exports:{}};/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var h1=Fp.exports,EA;function d1(){return EA||(EA=1,function(n,e){(function(t,i){n.exports=i()})(h1,function(){const t=new Map,i={set(A,p,E){t.has(A)||t.set(A,new Map);const R=t.get(A);R.has(p)||R.size===0?R.set(p,E):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(R.keys())[0]}.`)},get:(A,p)=>t.has(A)&&t.get(A).get(p)||null,remove(A,p){if(!t.has(A))return;const E=t.get(A);E.delete(p),E.size===0&&t.delete(A)}},a="transitionend",l=A=>(A&&window.CSS&&window.CSS.escape&&(A=A.replace(/#([^\s"#']+)/g,(p,E)=>`#${CSS.escape(E)}`)),A),u=A=>{A.dispatchEvent(new Event(a))},d=A=>!(!A||typeof A!="object")&&(A.jquery!==void 0&&(A=A[0]),A.nodeType!==void 0),m=A=>d(A)?A.jquery?A[0]:A:typeof A=="string"&&A.length>0?document.querySelector(l(A)):null,g=A=>{if(!d(A)||A.getClientRects().length===0)return!1;const p=getComputedStyle(A).getPropertyValue("visibility")==="visible",E=A.closest("details:not([open])");if(!E)return p;if(E!==A){const R=A.closest("summary");if(R&&R.parentNode!==E||R===null)return!1}return p},v=A=>!A||A.nodeType!==Node.ELEMENT_NODE||!!A.classList.contains("disabled")||(A.disabled!==void 0?A.disabled:A.hasAttribute("disabled")&&A.getAttribute("disabled")!=="false"),b=A=>{if(!document.documentElement.attachShadow)return null;if(typeof A.getRootNode=="function"){const p=A.getRootNode();return p instanceof ShadowRoot?p:null}return A instanceof ShadowRoot?A:A.parentNode?b(A.parentNode):null},I=()=>{},P=A=>{A.offsetHeight},U=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,G=[],j=()=>document.documentElement.dir==="rtl",Z=A=>{var p;p=()=>{const E=U();if(E){const R=A.NAME,F=E.fn[R];E.fn[R]=A.jQueryInterface,E.fn[R].Constructor=A,E.fn[R].noConflict=()=>(E.fn[R]=F,A.jQueryInterface)}},document.readyState==="loading"?(G.length||document.addEventListener("DOMContentLoaded",()=>{for(const E of G)E()}),G.push(p)):p()},ie=(A,p=[],E=A)=>typeof A=="function"?A(...p):E,se=(A,p,E=!0)=>{if(!E)return void ie(A);const R=(ne=>{if(!ne)return 0;let{transitionDuration:ue,transitionDelay:Ee}=window.getComputedStyle(ne);const ce=Number.parseFloat(ue),ye=Number.parseFloat(Ee);return ce||ye?(ue=ue.split(",")[0],Ee=Ee.split(",")[0],1e3*(Number.parseFloat(ue)+Number.parseFloat(Ee))):0})(p)+5;let F=!1;const $=({target:ne})=>{ne===p&&(F=!0,p.removeEventListener(a,$),ie(A))};p.addEventListener(a,$),setTimeout(()=>{F||u(p)},R)},_e=(A,p,E,R)=>{const F=A.length;let $=A.indexOf(p);return $===-1?!E&&R?A[F-1]:A[0]:($+=E?1:-1,R&&($=($+F)%F),A[Math.max(0,Math.min($,F-1))])},pe=/[^.]*(?=\..*)\.|.*/,Re=/\..*/,L=/::\d+$/,O={};let x=1;const k={mouseenter:"mouseover",mouseleave:"mouseout"},B=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function K(A,p){return p&&`${p}::${x++}`||A.uidEvent||x++}function M(A){const p=K(A);return A.uidEvent=p,O[p]=O[p]||{},O[p]}function Rt(A,p,E=null){return Object.values(A).find(R=>R.callable===p&&R.delegationSelector===E)}function xe(A,p,E){const R=typeof p=="string",F=R?E:p||E;let $=Je(A);return B.has($)||($=A),[R,F,$]}function de(A,p,E,R,F){if(typeof p!="string"||!A)return;let[$,ne,ue]=xe(p,E,R);p in k&&(ne=(ze=>function(He){if(!He.relatedTarget||He.relatedTarget!==He.delegateTarget&&!He.delegateTarget.contains(He.relatedTarget))return ze.call(this,He)})(ne));const Ee=M(A),ce=Ee[ue]||(Ee[ue]={}),ye=Rt(ce,ne,$?E:null);if(ye)return void(ye.oneOff=ye.oneOff&&F);const ve=K(ne,p.replace(pe,"")),Qe=$?function(Ue,ze,He){return function $e(ht){const Ct=Ue.querySelectorAll(ze);for(let{target:Ve}=ht;Ve&&Ve!==this;Ve=Ve.parentNode)for(const dt of Ct)if(dt===Ve)return re(ht,{delegateTarget:Ve}),$e.oneOff&&D.off(Ue,ht.type,ze,He),He.apply(Ve,[ht])}}(A,E,ne):function(Ue,ze){return function He($e){return re($e,{delegateTarget:Ue}),He.oneOff&&D.off(Ue,$e.type,ze),ze.apply(Ue,[$e])}}(A,ne);Qe.delegationSelector=$?E:null,Qe.callable=ne,Qe.oneOff=F,Qe.uidEvent=ve,ce[ve]=Qe,A.addEventListener(ue,Qe,$)}function ke(A,p,E,R,F){const $=Rt(p[E],R,F);$&&(A.removeEventListener(E,$,!!F),delete p[E][$.uidEvent])}function Pe(A,p,E,R){const F=p[E]||{};for(const[$,ne]of Object.entries(F))$.includes(R)&&ke(A,p,E,ne.callable,ne.delegationSelector)}function Je(A){return A=A.replace(Re,""),k[A]||A}const D={on(A,p,E,R){de(A,p,E,R,!1)},one(A,p,E,R){de(A,p,E,R,!0)},off(A,p,E,R){if(typeof p!="string"||!A)return;const[F,$,ne]=xe(p,E,R),ue=ne!==p,Ee=M(A),ce=Ee[ne]||{},ye=p.startsWith(".");if($===void 0){if(ye)for(const ve of Object.keys(Ee))Pe(A,Ee,ve,p.slice(1));for(const[ve,Qe]of Object.entries(ce)){const Ue=ve.replace(L,"");ue&&!p.includes(Ue)||ke(A,Ee,ne,Qe.callable,Qe.delegationSelector)}}else{if(!Object.keys(ce).length)return;ke(A,Ee,ne,$,F?E:null)}},trigger(A,p,E){if(typeof p!="string"||!A)return null;const R=U();let F=null,$=!0,ne=!0,ue=!1;p!==Je(p)&&R&&(F=R.Event(p,E),R(A).trigger(F),$=!F.isPropagationStopped(),ne=!F.isImmediatePropagationStopped(),ue=F.isDefaultPrevented());const Ee=re(new Event(p,{bubbles:$,cancelable:!0}),E);return ue&&Ee.preventDefault(),ne&&A.dispatchEvent(Ee),Ee.defaultPrevented&&F&&F.preventDefault(),Ee}};function re(A,p={}){for(const[E,R]of Object.entries(p))try{A[E]=R}catch{Object.defineProperty(A,E,{configurable:!0,get:()=>R})}return A}function Ae(A){if(A==="true")return!0;if(A==="false")return!1;if(A===Number(A).toString())return Number(A);if(A===""||A==="null")return null;if(typeof A!="string")return A;try{return JSON.parse(decodeURIComponent(A))}catch{return A}}function be(A){return A.replace(/[A-Z]/g,p=>`-${p.toLowerCase()}`)}const Ie={setDataAttribute(A,p,E){A.setAttribute(`data-bs-${be(p)}`,E)},removeDataAttribute(A,p){A.removeAttribute(`data-bs-${be(p)}`)},getDataAttributes(A){if(!A)return{};const p={},E=Object.keys(A.dataset).filter(R=>R.startsWith("bs")&&!R.startsWith("bsConfig"));for(const R of E){let F=R.replace(/^bs/,"");F=F.charAt(0).toLowerCase()+F.slice(1,F.length),p[F]=Ae(A.dataset[R])}return p},getDataAttribute:(A,p)=>Ae(A.getAttribute(`data-bs-${be(p)}`))};class Be{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(p){return p=this._mergeConfigObj(p),p=this._configAfterMerge(p),this._typeCheckConfig(p),p}_configAfterMerge(p){return p}_mergeConfigObj(p,E){const R=d(E)?Ie.getDataAttribute(E,"config"):{};return{...this.constructor.Default,...typeof R=="object"?R:{},...d(E)?Ie.getDataAttributes(E):{},...typeof p=="object"?p:{}}}_typeCheckConfig(p,E=this.constructor.DefaultType){for(const[F,$]of Object.entries(E)){const ne=p[F],ue=d(ne)?"element":(R=ne)==null?`${R}`:Object.prototype.toString.call(R).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp($).test(ue))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${F}" provided type "${ue}" but expected type "${$}".`)}var R}}class Fe extends Be{constructor(p,E){super(),(p=m(p))&&(this._element=p,this._config=this._getConfig(E),i.set(this._element,this.constructor.DATA_KEY,this))}dispose(){i.remove(this._element,this.constructor.DATA_KEY),D.off(this._element,this.constructor.EVENT_KEY);for(const p of Object.getOwnPropertyNames(this))this[p]=null}_queueCallback(p,E,R=!0){se(p,E,R)}_getConfig(p){return p=this._mergeConfigObj(p,this._element),p=this._configAfterMerge(p),this._typeCheckConfig(p),p}static getInstance(p){return i.get(m(p),this.DATA_KEY)}static getOrCreateInstance(p,E={}){return this.getInstance(p)||new this(p,typeof E=="object"?E:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(p){return`${p}${this.EVENT_KEY}`}}const zt=A=>{let p=A.getAttribute("data-bs-target");if(!p||p==="#"){let E=A.getAttribute("href");if(!E||!E.includes("#")&&!E.startsWith("."))return null;E.includes("#")&&!E.startsWith("#")&&(E=`#${E.split("#")[1]}`),p=E&&E!=="#"?E.trim():null}return p?p.split(",").map(E=>l(E)).join(","):null},Te={find:(A,p=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(p,A)),findOne:(A,p=document.documentElement)=>Element.prototype.querySelector.call(p,A),children:(A,p)=>[].concat(...A.children).filter(E=>E.matches(p)),parents(A,p){const E=[];let R=A.parentNode.closest(p);for(;R;)E.push(R),R=R.parentNode.closest(p);return E},prev(A,p){let E=A.previousElementSibling;for(;E;){if(E.matches(p))return[E];E=E.previousElementSibling}return[]},next(A,p){let E=A.nextElementSibling;for(;E;){if(E.matches(p))return[E];E=E.nextElementSibling}return[]},focusableChildren(A){const p=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(E=>`${E}:not([tabindex^="-"])`).join(",");return this.find(p,A).filter(E=>!v(E)&&g(E))},getSelectorFromElement(A){const p=zt(A);return p&&Te.findOne(p)?p:null},getElementFromSelector(A){const p=zt(A);return p?Te.findOne(p):null},getMultipleElementsFromSelector(A){const p=zt(A);return p?Te.find(p):[]}},xt=(A,p="hide")=>{const E=`click.dismiss${A.EVENT_KEY}`,R=A.NAME;D.on(document,E,`[data-bs-dismiss="${R}"]`,function(F){if(["A","AREA"].includes(this.tagName)&&F.preventDefault(),v(this))return;const $=Te.getElementFromSelector(this)||this.closest(`.${R}`);A.getOrCreateInstance($)[p]()})},yt=".bs.alert",ni=`close${yt}`,Zr=`closed${yt}`;class Bn extends Fe{static get NAME(){return"alert"}close(){if(D.trigger(this._element,ni).defaultPrevented)return;this._element.classList.remove("show");const p=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,p)}_destroyElement(){this._element.remove(),D.trigger(this._element,Zr),this.dispose()}static jQueryInterface(p){return this.each(function(){const E=Bn.getOrCreateInstance(this);if(typeof p=="string"){if(E[p]===void 0||p.startsWith("_")||p==="constructor")throw new TypeError(`No method named "${p}"`);E[p](this)}})}}xt(Bn,"close"),Z(Bn);const Jr='[data-bs-toggle="button"]';class $i extends Fe{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(p){return this.each(function(){const E=$i.getOrCreateInstance(this);p==="toggle"&&E[p]()})}}D.on(document,"click.bs.button.data-api",Jr,A=>{A.preventDefault();const p=A.target.closest(Jr);$i.getOrCreateInstance(p).toggle()}),Z($i);const _i=".bs.swipe",Ul=`touchstart${_i}`,uo=`touchmove${_i}`,co=`touchend${_i}`,ma=`pointerdown${_i}`,ho=`pointerup${_i}`,Xh={endCallback:null,leftCallback:null,rightCallback:null},jl={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Nn extends Be{constructor(p,E){super(),this._element=p,p&&Nn.isSupported()&&(this._config=this._getConfig(E),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Xh}static get DefaultType(){return jl}static get NAME(){return"swipe"}dispose(){D.off(this._element,_i)}_start(p){this._supportPointerEvents?this._eventIsPointerPenTouch(p)&&(this._deltaX=p.clientX):this._deltaX=p.touches[0].clientX}_end(p){this._eventIsPointerPenTouch(p)&&(this._deltaX=p.clientX-this._deltaX),this._handleSwipe(),ie(this._config.endCallback)}_move(p){this._deltaX=p.touches&&p.touches.length>1?0:p.touches[0].clientX-this._deltaX}_handleSwipe(){const p=Math.abs(this._deltaX);if(p<=40)return;const E=p/this._deltaX;this._deltaX=0,E&&ie(E>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(D.on(this._element,ma,p=>this._start(p)),D.on(this._element,ho,p=>this._end(p)),this._element.classList.add("pointer-event")):(D.on(this._element,Ul,p=>this._start(p)),D.on(this._element,uo,p=>this._move(p)),D.on(this._element,co,p=>this._end(p)))}_eventIsPointerPenTouch(p){return this._supportPointerEvents&&(p.pointerType==="pen"||p.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ar=".bs.carousel",sn=".data-api",qt="next",yi="prev",es="left",Ds="right",Zh=`slide${ar}`,ts=`slid${ar}`,xs=`keydown${ar}`,Fn=`mouseenter${ar}`,Bl=`mouseleave${ar}`,Sr=`dragstart${ar}`,ii=`load${ar}${sn}`,Fl=`click${ar}${sn}`,zl="carousel",pa="active",or=".active",ns=".carousel-item",lr=or+ns,Gi={ArrowLeft:Ds,ArrowRight:es},Ns={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},fo={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Rr extends Fe{constructor(p,E){super(p,E),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Te.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===zl&&this.cycle()}static get Default(){return Ns}static get DefaultType(){return fo}static get NAME(){return"carousel"}next(){this._slide(qt)}nextWhenVisible(){!document.hidden&&g(this._element)&&this.next()}prev(){this._slide(yi)}pause(){this._isSliding&&u(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?D.one(this._element,ts,()=>this.cycle()):this.cycle())}to(p){const E=this._getItems();if(p>E.length-1||p<0)return;if(this._isSliding)return void D.one(this._element,ts,()=>this.to(p));const R=this._getItemIndex(this._getActive());if(R===p)return;const F=p>R?qt:yi;this._slide(F,E[p])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(p){return p.defaultInterval=p.interval,p}_addEventListeners(){this._config.keyboard&&D.on(this._element,xs,p=>this._keydown(p)),this._config.pause==="hover"&&(D.on(this._element,Fn,()=>this.pause()),D.on(this._element,Bl,()=>this._maybeEnableCycle())),this._config.touch&&Nn.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const E of Te.find(".carousel-item img",this._element))D.on(E,Sr,R=>R.preventDefault());const p={leftCallback:()=>this._slide(this._directionToOrder(es)),rightCallback:()=>this._slide(this._directionToOrder(Ds)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Nn(this._element,p)}_keydown(p){if(/input|textarea/i.test(p.target.tagName))return;const E=Gi[p.key];E&&(p.preventDefault(),this._slide(this._directionToOrder(E)))}_getItemIndex(p){return this._getItems().indexOf(p)}_setActiveIndicatorElement(p){if(!this._indicatorsElement)return;const E=Te.findOne(or,this._indicatorsElement);E.classList.remove(pa),E.removeAttribute("aria-current");const R=Te.findOne(`[data-bs-slide-to="${p}"]`,this._indicatorsElement);R&&(R.classList.add(pa),R.setAttribute("aria-current","true"))}_updateInterval(){const p=this._activeElement||this._getActive();if(!p)return;const E=Number.parseInt(p.getAttribute("data-bs-interval"),10);this._config.interval=E||this._config.defaultInterval}_slide(p,E=null){if(this._isSliding)return;const R=this._getActive(),F=p===qt,$=E||_e(this._getItems(),R,F,this._config.wrap);if($===R)return;const ne=this._getItemIndex($),ue=ve=>D.trigger(this._element,ve,{relatedTarget:$,direction:this._orderToDirection(p),from:this._getItemIndex(R),to:ne});if(ue(Zh).defaultPrevented||!R||!$)return;const Ee=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ne),this._activeElement=$;const ce=F?"carousel-item-start":"carousel-item-end",ye=F?"carousel-item-next":"carousel-item-prev";$.classList.add(ye),P($),R.classList.add(ce),$.classList.add(ce),this._queueCallback(()=>{$.classList.remove(ce,ye),$.classList.add(pa),R.classList.remove(pa,ye,ce),this._isSliding=!1,ue(ts)},R,this._isAnimated()),Ee&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Te.findOne(lr,this._element)}_getItems(){return Te.find(ns,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(p){return j()?p===es?yi:qt:p===es?qt:yi}_orderToDirection(p){return j()?p===yi?es:Ds:p===yi?Ds:es}static jQueryInterface(p){return this.each(function(){const E=Rr.getOrCreateInstance(this,p);if(typeof p!="number"){if(typeof p=="string"){if(E[p]===void 0||p.startsWith("_")||p==="constructor")throw new TypeError(`No method named "${p}"`);E[p]()}}else E.to(p)})}}D.on(document,Fl,"[data-bs-slide], [data-bs-slide-to]",function(A){const p=Te.getElementFromSelector(this);if(!p||!p.classList.contains(zl))return;A.preventDefault();const E=Rr.getOrCreateInstance(p),R=this.getAttribute("data-bs-slide-to");return R?(E.to(R),void E._maybeEnableCycle()):Ie.getDataAttribute(this,"slide")==="next"?(E.next(),void E._maybeEnableCycle()):(E.prev(),void E._maybeEnableCycle())}),D.on(window,ii,()=>{const A=Te.find('[data-bs-ride="carousel"]');for(const p of A)Rr.getOrCreateInstance(p)}),Z(Rr);const Ki=".bs.collapse",mo=`show${Ki}`,Xt=`shown${Ki}`,Ju=`hide${Ki}`,Ps=`hidden${Ki}`,Os=`click${Ki}.data-api`,po="show",is="collapse",ur="collapsing",Cr=`:scope .${is} .${is}`,an='[data-bs-toggle="collapse"]',_n={parent:null,toggle:!0},rs={parent:"(null|element)",toggle:"boolean"};class Qi extends Fe{constructor(p,E){super(p,E),this._isTransitioning=!1,this._triggerArray=[];const R=Te.find(an);for(const F of R){const $=Te.getSelectorFromElement(F),ne=Te.find($).filter(ue=>ue===this._element);$!==null&&ne.length&&this._triggerArray.push(F)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return _n}static get DefaultType(){return rs}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let p=[];if(this._config.parent&&(p=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(F=>F!==this._element).map(F=>Qi.getOrCreateInstance(F,{toggle:!1}))),p.length&&p[0]._isTransitioning||D.trigger(this._element,mo).defaultPrevented)return;for(const F of p)F.hide();const E=this._getDimension();this._element.classList.remove(is),this._element.classList.add(ur),this._element.style[E]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const R=`scroll${E[0].toUpperCase()+E.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ur),this._element.classList.add(is,po),this._element.style[E]="",D.trigger(this._element,Xt)},this._element,!0),this._element.style[E]=`${this._element[R]}px`}hide(){if(this._isTransitioning||!this._isShown()||D.trigger(this._element,Ju).defaultPrevented)return;const p=this._getDimension();this._element.style[p]=`${this._element.getBoundingClientRect()[p]}px`,P(this._element),this._element.classList.add(ur),this._element.classList.remove(is,po);for(const E of this._triggerArray){const R=Te.getElementFromSelector(E);R&&!this._isShown(R)&&this._addAriaAndCollapsedClass([E],!1)}this._isTransitioning=!0,this._element.style[p]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ur),this._element.classList.add(is),D.trigger(this._element,Ps)},this._element,!0)}_isShown(p=this._element){return p.classList.contains(po)}_configAfterMerge(p){return p.toggle=!!p.toggle,p.parent=m(p.parent),p}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const p=this._getFirstLevelChildren(an);for(const E of p){const R=Te.getElementFromSelector(E);R&&this._addAriaAndCollapsedClass([E],this._isShown(R))}}_getFirstLevelChildren(p){const E=Te.find(Cr,this._config.parent);return Te.find(p,this._config.parent).filter(R=>!E.includes(R))}_addAriaAndCollapsedClass(p,E){if(p.length)for(const R of p)R.classList.toggle("collapsed",!E),R.setAttribute("aria-expanded",E)}static jQueryInterface(p){const E={};return typeof p=="string"&&/show|hide/.test(p)&&(E.toggle=!1),this.each(function(){const R=Qi.getOrCreateInstance(this,E);if(typeof p=="string"){if(R[p]===void 0)throw new TypeError(`No method named "${p}"`);R[p]()}})}}D.on(document,Os,an,function(A){(A.target.tagName==="A"||A.delegateTarget&&A.delegateTarget.tagName==="A")&&A.preventDefault();for(const p of Te.getMultipleElementsFromSelector(this))Qi.getOrCreateInstance(p,{toggle:!1}).toggle()}),Z(Qi);var on="top",Ht="bottom",Pn="right",$t="left",Dr="auto",zn=[on,Ht,Pn,$t],ri="start",Ci="end",ss="clippingParents",Nt="viewport",xr="popper",ga="reference",si=zn.reduce(function(A,p){return A.concat([p+"-"+ri,p+"-"+Ci])},[]),qn=[].concat(zn,[Dr]).reduce(function(A,p){return A.concat([p,p+"-"+ri,p+"-"+Ci])},[]),vi="beforeRead",ec="read",go="afterRead",_o="beforeMain",ql="main",as="afterMain",os="beforeWrite",Di="write",Hn="afterWrite",Hl=[vi,ec,go,_o,ql,as,os,Di,Hn];function Wi(A){return A?(A.nodeName||"").toLowerCase():null}function yn(A){if(A==null)return window;if(A.toString()!=="[object Window]"){var p=A.ownerDocument;return p&&p.defaultView||window}return A}function cr(A){return A instanceof yn(A).Element||A instanceof Element}function On(A){return A instanceof yn(A).HTMLElement||A instanceof HTMLElement}function hr(A){return typeof ShadowRoot<"u"&&(A instanceof yn(A).ShadowRoot||A instanceof ShadowRoot)}const kt={name:"applyStyles",enabled:!0,phase:"write",fn:function(A){var p=A.state;Object.keys(p.elements).forEach(function(E){var R=p.styles[E]||{},F=p.attributes[E]||{},$=p.elements[E];On($)&&Wi($)&&(Object.assign($.style,R),Object.keys(F).forEach(function(ne){var ue=F[ne];ue===!1?$.removeAttribute(ne):$.setAttribute(ne,ue===!0?"":ue)}))})},effect:function(A){var p=A.state,E={popper:{position:p.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(p.elements.popper.style,E.popper),p.styles=E,p.elements.arrow&&Object.assign(p.elements.arrow.style,E.arrow),function(){Object.keys(p.elements).forEach(function(R){var F=p.elements[R],$=p.attributes[R]||{},ne=Object.keys(p.styles.hasOwnProperty(R)?p.styles[R]:E[R]).reduce(function(ue,Ee){return ue[Ee]="",ue},{});On(F)&&Wi(F)&&(Object.assign(F.style,ne),Object.keys($).forEach(function(ue){F.removeAttribute(ue)}))})}},requires:["computeStyles"]};function kn(A){return A.split("-")[0]}var xi=Math.max,ls=Math.min,et=Math.round;function us(){var A=navigator.userAgentData;return A!=null&&A.brands&&Array.isArray(A.brands)?A.brands.map(function(p){return p.brand+"/"+p.version}).join(" "):navigator.userAgent}function cs(){return!/^((?!chrome|android).)*safari/i.test(us())}function Vn(A,p,E){p===void 0&&(p=!1),E===void 0&&(E=!1);var R=A.getBoundingClientRect(),F=1,$=1;p&&On(A)&&(F=A.offsetWidth>0&&et(R.width)/A.offsetWidth||1,$=A.offsetHeight>0&&et(R.height)/A.offsetHeight||1);var ne=(cr(A)?yn(A):window).visualViewport,ue=!cs()&&E,Ee=(R.left+(ue&&ne?ne.offsetLeft:0))/F,ce=(R.top+(ue&&ne?ne.offsetTop:0))/$,ye=R.width/F,ve=R.height/$;return{width:ye,height:ve,top:ce,right:Ee+ye,bottom:ce+ve,left:Ee,x:Ee,y:ce}}function $l(A){var p=Vn(A),E=A.offsetWidth,R=A.offsetHeight;return Math.abs(p.width-E)<=1&&(E=p.width),Math.abs(p.height-R)<=1&&(R=p.height),{x:A.offsetLeft,y:A.offsetTop,width:E,height:R}}function yo(A,p){var E=p.getRootNode&&p.getRootNode();if(A.contains(p))return!0;if(E&&hr(E)){var R=p;do{if(R&&A.isSameNode(R))return!0;R=R.parentNode||R.host}while(R)}return!1}function Yi(A){return yn(A).getComputedStyle(A)}function Gl(A){return["table","td","th"].indexOf(Wi(A))>=0}function Nr(A){return((cr(A)?A.ownerDocument:A.document)||window.document).documentElement}function vo(A){return Wi(A)==="html"?A:A.assignedSlot||A.parentNode||(hr(A)?A.host:null)||Nr(A)}function dr(A){return On(A)&&Yi(A).position!=="fixed"?A.offsetParent:null}function $n(A){for(var p=yn(A),E=dr(A);E&&Gl(E)&&Yi(E).position==="static";)E=dr(E);return E&&(Wi(E)==="html"||Wi(E)==="body"&&Yi(E).position==="static")?p:E||function(R){var F=/firefox/i.test(us());if(/Trident/i.test(us())&&On(R)&&Yi(R).position==="fixed")return null;var $=vo(R);for(hr($)&&($=$.host);On($)&&["html","body"].indexOf(Wi($))<0;){var ne=Yi($);if(ne.transform!=="none"||ne.perspective!=="none"||ne.contain==="paint"||["transform","perspective"].indexOf(ne.willChange)!==-1||F&&ne.willChange==="filter"||F&&ne.filter&&ne.filter!=="none")return $;$=$.parentNode}return null}(A)||p}function ks(A){return["top","bottom"].indexOf(A)>=0?"x":"y"}function Ni(A,p,E){return xi(A,ls(p,E))}function Pr(A){return Object.assign({},{top:0,right:0,bottom:0,left:0},A)}function Or(A,p){return p.reduce(function(E,R){return E[R]=A,E},{})}const Eo={name:"arrow",enabled:!0,phase:"main",fn:function(A){var p,E=A.state,R=A.name,F=A.options,$=E.elements.arrow,ne=E.modifiersData.popperOffsets,ue=kn(E.placement),Ee=ks(ue),ce=[$t,Pn].indexOf(ue)>=0?"height":"width";if($&&ne){var ye=function(At,_t){return Pr(typeof(At=typeof At=="function"?At(Object.assign({},_t.rects,{placement:_t.placement})):At)!="number"?At:Or(At,zn))}(F.padding,E),ve=$l($),Qe=Ee==="y"?on:$t,Ue=Ee==="y"?Ht:Pn,ze=E.rects.reference[ce]+E.rects.reference[Ee]-ne[Ee]-E.rects.popper[ce],He=ne[Ee]-E.rects.reference[Ee],$e=$n($),ht=$e?Ee==="y"?$e.clientHeight||0:$e.clientWidth||0:0,Ct=ze/2-He/2,Ve=ye[Qe],dt=ht-ve[ce]-ye[Ue],We=ht/2-ve[ce]/2+Ct,tt=Ni(Ve,We,dt),vt=Ee;E.modifiersData[R]=((p={})[vt]=tt,p.centerOffset=tt-We,p)}},effect:function(A){var p=A.state,E=A.options.element,R=E===void 0?"[data-popper-arrow]":E;R!=null&&(typeof R!="string"||(R=p.elements.popper.querySelector(R)))&&yo(p.elements.popper,R)&&(p.elements.arrow=R)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function hs(A){return A.split("-")[1]}var _a={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Pi(A){var p,E=A.popper,R=A.popperRect,F=A.placement,$=A.variation,ne=A.offsets,ue=A.position,Ee=A.gpuAcceleration,ce=A.adaptive,ye=A.roundOffsets,ve=A.isFixed,Qe=ne.x,Ue=Qe===void 0?0:Qe,ze=ne.y,He=ze===void 0?0:ze,$e=typeof ye=="function"?ye({x:Ue,y:He}):{x:Ue,y:He};Ue=$e.x,He=$e.y;var ht=ne.hasOwnProperty("x"),Ct=ne.hasOwnProperty("y"),Ve=$t,dt=on,We=window;if(ce){var tt=$n(E),vt="clientHeight",At="clientWidth";tt===yn(E)&&Yi(tt=Nr(E)).position!=="static"&&ue==="absolute"&&(vt="scrollHeight",At="scrollWidth"),(F===on||(F===$t||F===Pn)&&$===Ci)&&(dt=Ht,He-=(ve&&tt===We&&We.visualViewport?We.visualViewport.height:tt[vt])-R.height,He*=Ee?1:-1),F!==$t&&(F!==on&&F!==Ht||$!==Ci)||(Ve=Pn,Ue-=(ve&&tt===We&&We.visualViewport?We.visualViewport.width:tt[At])-R.width,Ue*=Ee?1:-1)}var _t,Bt=Object.assign({position:ue},ce&&_a),ui=ye===!0?function(Mt,lt){var ci=Mt.x,Qn=Mt.y,Pt=lt.devicePixelRatio||1;return{x:et(ci*Pt)/Pt||0,y:et(Qn*Pt)/Pt||0}}({x:Ue,y:He},yn(E)):{x:Ue,y:He};return Ue=ui.x,He=ui.y,Ee?Object.assign({},Bt,((_t={})[dt]=Ct?"0":"",_t[Ve]=ht?"0":"",_t.transform=(We.devicePixelRatio||1)<=1?"translate("+Ue+"px, "+He+"px)":"translate3d("+Ue+"px, "+He+"px, 0)",_t)):Object.assign({},Bt,((p={})[dt]=Ct?He+"px":"",p[Ve]=ht?Ue+"px":"",p.transform="",p))}const ds={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(A){var p=A.state,E=A.options,R=E.gpuAcceleration,F=R===void 0||R,$=E.adaptive,ne=$===void 0||$,ue=E.roundOffsets,Ee=ue===void 0||ue,ce={placement:kn(p.placement),variation:hs(p.placement),popper:p.elements.popper,popperRect:p.rects.popper,gpuAcceleration:F,isFixed:p.options.strategy==="fixed"};p.modifiersData.popperOffsets!=null&&(p.styles.popper=Object.assign({},p.styles.popper,Pi(Object.assign({},ce,{offsets:p.modifiersData.popperOffsets,position:p.options.strategy,adaptive:ne,roundOffsets:Ee})))),p.modifiersData.arrow!=null&&(p.styles.arrow=Object.assign({},p.styles.arrow,Pi(Object.assign({},ce,{offsets:p.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Ee})))),p.attributes.popper=Object.assign({},p.attributes.popper,{"data-popper-placement":p.placement})},data:{}};var Oi={passive:!0};const kr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(A){var p=A.state,E=A.instance,R=A.options,F=R.scroll,$=F===void 0||F,ne=R.resize,ue=ne===void 0||ne,Ee=yn(p.elements.popper),ce=[].concat(p.scrollParents.reference,p.scrollParents.popper);return $&&ce.forEach(function(ye){ye.addEventListener("scroll",E.update,Oi)}),ue&&Ee.addEventListener("resize",E.update,Oi),function(){$&&ce.forEach(function(ye){ye.removeEventListener("scroll",E.update,Oi)}),ue&&Ee.removeEventListener("resize",E.update,Oi)}},data:{}};var fs={left:"right",right:"left",bottom:"top",top:"bottom"};function Vs(A){return A.replace(/left|right|bottom|top/g,function(p){return fs[p]})}var Vr={start:"end",end:"start"};function fr(A){return A.replace(/start|end/g,function(p){return Vr[p]})}function ya(A){var p=yn(A);return{scrollLeft:p.pageXOffset,scrollTop:p.pageYOffset}}function ln(A){return Vn(Nr(A)).left+ya(A).scrollLeft}function mt(A){var p=Yi(A),E=p.overflow,R=p.overflowX,F=p.overflowY;return/auto|scroll|overlay|hidden/.test(E+F+R)}function va(A){return["html","body","#document"].indexOf(Wi(A))>=0?A.ownerDocument.body:On(A)&&mt(A)?A:va(vo(A))}function mr(A,p){var E;p===void 0&&(p=[]);var R=va(A),F=R===((E=A.ownerDocument)==null?void 0:E.body),$=yn(R),ne=F?[$].concat($.visualViewport||[],mt(R)?R:[]):R,ue=p.concat(ne);return F?ue:ue.concat(mr(vo(ne)))}function bo(A){return Object.assign({},A,{left:A.x,top:A.y,right:A.x+A.width,bottom:A.y+A.height})}function Ea(A,p,E){return p===Nt?bo(function(R,F){var $=yn(R),ne=Nr(R),ue=$.visualViewport,Ee=ne.clientWidth,ce=ne.clientHeight,ye=0,ve=0;if(ue){Ee=ue.width,ce=ue.height;var Qe=cs();(Qe||!Qe&&F==="fixed")&&(ye=ue.offsetLeft,ve=ue.offsetTop)}return{width:Ee,height:ce,x:ye+ln(R),y:ve}}(A,E)):cr(p)?function(R,F){var $=Vn(R,!1,F==="fixed");return $.top=$.top+R.clientTop,$.left=$.left+R.clientLeft,$.bottom=$.top+R.clientHeight,$.right=$.left+R.clientWidth,$.width=R.clientWidth,$.height=R.clientHeight,$.x=$.left,$.y=$.top,$}(p,E):bo(function(R){var F,$=Nr(R),ne=ya(R),ue=(F=R.ownerDocument)==null?void 0:F.body,Ee=xi($.scrollWidth,$.clientWidth,ue?ue.scrollWidth:0,ue?ue.clientWidth:0),ce=xi($.scrollHeight,$.clientHeight,ue?ue.scrollHeight:0,ue?ue.clientHeight:0),ye=-ne.scrollLeft+ln(R),ve=-ne.scrollTop;return Yi(ue||$).direction==="rtl"&&(ye+=xi($.clientWidth,ue?ue.clientWidth:0)-Ee),{width:Ee,height:ce,x:ye,y:ve}}(Nr(A)))}function ba(A){var p,E=A.reference,R=A.element,F=A.placement,$=F?kn(F):null,ne=F?hs(F):null,ue=E.x+E.width/2-R.width/2,Ee=E.y+E.height/2-R.height/2;switch($){case on:p={x:ue,y:E.y-R.height};break;case Ht:p={x:ue,y:E.y+E.height};break;case Pn:p={x:E.x+E.width,y:Ee};break;case $t:p={x:E.x-R.width,y:Ee};break;default:p={x:E.x,y:E.y}}var ce=$?ks($):null;if(ce!=null){var ye=ce==="y"?"height":"width";switch(ne){case ri:p[ce]=p[ce]-(E[ye]/2-R[ye]/2);break;case Ci:p[ce]=p[ce]+(E[ye]/2-R[ye]/2)}}return p}function ai(A,p){p===void 0&&(p={});var E=p,R=E.placement,F=R===void 0?A.placement:R,$=E.strategy,ne=$===void 0?A.strategy:$,ue=E.boundary,Ee=ue===void 0?ss:ue,ce=E.rootBoundary,ye=ce===void 0?Nt:ce,ve=E.elementContext,Qe=ve===void 0?xr:ve,Ue=E.altBoundary,ze=Ue!==void 0&&Ue,He=E.padding,$e=He===void 0?0:He,ht=Pr(typeof $e!="number"?$e:Or($e,zn)),Ct=Qe===xr?ga:xr,Ve=A.rects.popper,dt=A.elements[ze?Ct:Qe],We=function(lt,ci,Qn,Pt){var tr=ci==="clippingParents"?function(Tt){var Wn=mr(vo(Tt)),Ui=["absolute","fixed"].indexOf(Yi(Tt).position)>=0&&On(Tt)?$n(Tt):Tt;return cr(Ui)?Wn.filter(function(Ts){return cr(Ts)&&yo(Ts,Ui)&&Wi(Ts)!=="body"}):[]}(lt):[].concat(ci),Sn=[].concat(tr,[Qn]),bs=Sn[0],cn=Sn.reduce(function(Tt,Wn){var Ui=Ea(lt,Wn,Pt);return Tt.top=xi(Ui.top,Tt.top),Tt.right=ls(Ui.right,Tt.right),Tt.bottom=ls(Ui.bottom,Tt.bottom),Tt.left=xi(Ui.left,Tt.left),Tt},Ea(lt,bs,Pt));return cn.width=cn.right-cn.left,cn.height=cn.bottom-cn.top,cn.x=cn.left,cn.y=cn.top,cn}(cr(dt)?dt:dt.contextElement||Nr(A.elements.popper),Ee,ye,ne),tt=Vn(A.elements.reference),vt=ba({reference:tt,element:Ve,placement:F}),At=bo(Object.assign({},Ve,vt)),_t=Qe===xr?At:tt,Bt={top:We.top-_t.top+ht.top,bottom:_t.bottom-We.bottom+ht.bottom,left:We.left-_t.left+ht.left,right:_t.right-We.right+ht.right},ui=A.modifiersData.offset;if(Qe===xr&&ui){var Mt=ui[F];Object.keys(Bt).forEach(function(lt){var ci=[Pn,Ht].indexOf(lt)>=0?1:-1,Qn=[on,Ht].indexOf(lt)>=0?"y":"x";Bt[lt]+=Mt[Qn]*ci})}return Bt}function Ta(A,p){p===void 0&&(p={});var E=p,R=E.placement,F=E.boundary,$=E.rootBoundary,ne=E.padding,ue=E.flipVariations,Ee=E.allowedAutoPlacements,ce=Ee===void 0?qn:Ee,ye=hs(R),ve=ye?ue?si:si.filter(function(ze){return hs(ze)===ye}):zn,Qe=ve.filter(function(ze){return ce.indexOf(ze)>=0});Qe.length===0&&(Qe=ve);var Ue=Qe.reduce(function(ze,He){return ze[He]=ai(A,{placement:He,boundary:F,rootBoundary:$,padding:ne})[kn(He)],ze},{});return Object.keys(Ue).sort(function(ze,He){return Ue[ze]-Ue[He]})}const ki={name:"flip",enabled:!0,phase:"main",fn:function(A){var p=A.state,E=A.options,R=A.name;if(!p.modifiersData[R]._skip){for(var F=E.mainAxis,$=F===void 0||F,ne=E.altAxis,ue=ne===void 0||ne,Ee=E.fallbackPlacements,ce=E.padding,ye=E.boundary,ve=E.rootBoundary,Qe=E.altBoundary,Ue=E.flipVariations,ze=Ue===void 0||Ue,He=E.allowedAutoPlacements,$e=p.options.placement,ht=kn($e),Ct=Ee||(ht!==$e&&ze?function(Tt){if(kn(Tt)===Dr)return[];var Wn=Vs(Tt);return[fr(Tt),Wn,fr(Wn)]}($e):[Vs($e)]),Ve=[$e].concat(Ct).reduce(function(Tt,Wn){return Tt.concat(kn(Wn)===Dr?Ta(p,{placement:Wn,boundary:ye,rootBoundary:ve,padding:ce,flipVariations:ze,allowedAutoPlacements:He}):Wn)},[]),dt=p.rects.reference,We=p.rects.popper,tt=new Map,vt=!0,At=Ve[0],_t=0;_t<Ve.length;_t++){var Bt=Ve[_t],ui=kn(Bt),Mt=hs(Bt)===ri,lt=[on,Ht].indexOf(ui)>=0,ci=lt?"width":"height",Qn=ai(p,{placement:Bt,boundary:ye,rootBoundary:ve,altBoundary:Qe,padding:ce}),Pt=lt?Mt?Pn:$t:Mt?Ht:on;dt[ci]>We[ci]&&(Pt=Vs(Pt));var tr=Vs(Pt),Sn=[];if($&&Sn.push(Qn[ui]<=0),ue&&Sn.push(Qn[Pt]<=0,Qn[tr]<=0),Sn.every(function(Tt){return Tt})){At=Bt,vt=!1;break}tt.set(Bt,Sn)}if(vt)for(var bs=function(Tt){var Wn=Ve.find(function(Ui){var Ts=tt.get(Ui);if(Ts)return Ts.slice(0,Tt).every(function(au){return au})});if(Wn)return At=Wn,"break"},cn=ze?3:1;cn>0&&bs(cn)!=="break";cn--);p.placement!==At&&(p.modifiersData[R]._skip=!0,p.placement=At,p.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Kl(A,p,E){return E===void 0&&(E={x:0,y:0}),{top:A.top-p.height-E.y,right:A.right-p.width+E.x,bottom:A.bottom-p.height+E.y,left:A.left-p.width-E.x}}function tc(A){return[on,Pn,Ht,$t].some(function(p){return A[p]>=0})}const Ms={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(A){var p=A.state,E=A.name,R=p.rects.reference,F=p.rects.popper,$=p.modifiersData.preventOverflow,ne=ai(p,{elementContext:"reference"}),ue=ai(p,{altBoundary:!0}),Ee=Kl(ne,R),ce=Kl(ue,F,$),ye=tc(Ee),ve=tc(ce);p.modifiersData[E]={referenceClippingOffsets:Ee,popperEscapeOffsets:ce,isReferenceHidden:ye,hasPopperEscaped:ve},p.attributes.popper=Object.assign({},p.attributes.popper,{"data-popper-reference-hidden":ye,"data-popper-escaped":ve})}},wa={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(A){var p=A.state,E=A.options,R=A.name,F=E.offset,$=F===void 0?[0,0]:F,ne=qn.reduce(function(ye,ve){return ye[ve]=function(Qe,Ue,ze){var He=kn(Qe),$e=[$t,on].indexOf(He)>=0?-1:1,ht=typeof ze=="function"?ze(Object.assign({},Ue,{placement:Qe})):ze,Ct=ht[0],Ve=ht[1];return Ct=Ct||0,Ve=(Ve||0)*$e,[$t,Pn].indexOf(He)>=0?{x:Ve,y:Ct}:{x:Ct,y:Ve}}(ve,p.rects,$),ye},{}),ue=ne[p.placement],Ee=ue.x,ce=ue.y;p.modifiersData.popperOffsets!=null&&(p.modifiersData.popperOffsets.x+=Ee,p.modifiersData.popperOffsets.y+=ce),p.modifiersData[R]=ne}},Aa={name:"popperOffsets",enabled:!0,phase:"read",fn:function(A){var p=A.state,E=A.name;p.modifiersData[E]=ba({reference:p.rects.reference,element:p.rects.popper,placement:p.placement})},data:{}},Ia={name:"preventOverflow",enabled:!0,phase:"main",fn:function(A){var p=A.state,E=A.options,R=A.name,F=E.mainAxis,$=F===void 0||F,ne=E.altAxis,ue=ne!==void 0&&ne,Ee=E.boundary,ce=E.rootBoundary,ye=E.altBoundary,ve=E.padding,Qe=E.tether,Ue=Qe===void 0||Qe,ze=E.tetherOffset,He=ze===void 0?0:ze,$e=ai(p,{boundary:Ee,rootBoundary:ce,padding:ve,altBoundary:ye}),ht=kn(p.placement),Ct=hs(p.placement),Ve=!Ct,dt=ks(ht),We=dt==="x"?"y":"x",tt=p.modifiersData.popperOffsets,vt=p.rects.reference,At=p.rects.popper,_t=typeof He=="function"?He(Object.assign({},p.rects,{placement:p.placement})):He,Bt=typeof _t=="number"?{mainAxis:_t,altAxis:_t}:Object.assign({mainAxis:0,altAxis:0},_t),ui=p.modifiersData.offset?p.modifiersData.offset[p.placement]:null,Mt={x:0,y:0};if(tt){if($){var lt,ci=dt==="y"?on:$t,Qn=dt==="y"?Ht:Pn,Pt=dt==="y"?"height":"width",tr=tt[dt],Sn=tr+$e[ci],bs=tr-$e[Qn],cn=Ue?-At[Pt]/2:0,Tt=Ct===ri?vt[Pt]:At[Pt],Wn=Ct===ri?-At[Pt]:-vt[Pt],Ui=p.elements.arrow,Ts=Ue&&Ui?$l(Ui):{width:0,height:0},au=p.modifiersData["arrow#persistent"]?p.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},md=au[ci],pd=au[Qn],jo=Ni(0,vt[Pt],Ts[Pt]),Hm=Ve?vt[Pt]/2-cn-jo-md-Bt.mainAxis:Tt-jo-md-Bt.mainAxis,I_=Ve?-vt[Pt]/2+cn+jo+pd+Bt.mainAxis:Wn+jo+pd+Bt.mainAxis,Cc=p.elements.arrow&&$n(p.elements.arrow),$m=Cc?dt==="y"?Cc.clientTop||0:Cc.clientLeft||0:0,gd=(lt=ui==null?void 0:ui[dt])!=null?lt:0,_d=tr+I_-gd,yd=Ni(Ue?ls(Sn,tr+Hm-gd-$m):Sn,tr,Ue?xi(bs,_d):bs);tt[dt]=yd,Mt[dt]=yd-tr}if(ue){var vd,Gm=dt==="x"?on:$t,Km=dt==="x"?Ht:Pn,$s=tt[We],Dc=We==="y"?"height":"width",Ed=$s+$e[Gm],Oa=$s-$e[Km],xc=[on,$t].indexOf(ht)!==-1,ou=(vd=ui==null?void 0:ui[We])!=null?vd:0,lu=xc?Ed:$s-vt[Dc]-At[Dc]-ou+Bt.altAxis,bd=xc?$s+vt[Dc]+At[Dc]-ou-Bt.altAxis:Oa,Nc=Ue&&xc?function(Qm,Wm,Pc){var Td=Ni(Qm,Wm,Pc);return Td>Pc?Pc:Td}(lu,$s,bd):Ni(Ue?lu:Ed,$s,Ue?bd:Oa);tt[We]=Nc,Mt[We]=Nc-$s}p.modifiersData[R]=Mt}},requiresIfExists:["offset"]};function nc(A,p,E){E===void 0&&(E=!1);var R,F,$=On(p),ne=On(p)&&function(ve){var Qe=ve.getBoundingClientRect(),Ue=et(Qe.width)/ve.offsetWidth||1,ze=et(Qe.height)/ve.offsetHeight||1;return Ue!==1||ze!==1}(p),ue=Nr(p),Ee=Vn(A,ne,E),ce={scrollLeft:0,scrollTop:0},ye={x:0,y:0};return($||!$&&!E)&&((Wi(p)!=="body"||mt(ue))&&(ce=(R=p)!==yn(R)&&On(R)?{scrollLeft:(F=R).scrollLeft,scrollTop:F.scrollTop}:ya(R)),On(p)?((ye=Vn(p,!0)).x+=p.clientLeft,ye.y+=p.clientTop):ue&&(ye.x=ln(ue))),{x:Ee.left+ce.scrollLeft-ye.x,y:Ee.top+ce.scrollTop-ye.y,width:Ee.width,height:Ee.height}}function To(A){var p=new Map,E=new Set,R=[];function F($){E.add($.name),[].concat($.requires||[],$.requiresIfExists||[]).forEach(function(ne){if(!E.has(ne)){var ue=p.get(ne);ue&&F(ue)}}),R.push($)}return A.forEach(function($){p.set($.name,$)}),A.forEach(function($){E.has($.name)||F($)}),R}var ic={placement:"bottom",modifiers:[],strategy:"absolute"};function wo(){for(var A=arguments.length,p=new Array(A),E=0;E<A;E++)p[E]=arguments[E];return!p.some(function(R){return!(R&&typeof R.getBoundingClientRect=="function")})}function Mr(A){A===void 0&&(A={});var p=A,E=p.defaultModifiers,R=E===void 0?[]:E,F=p.defaultOptions,$=F===void 0?ic:F;return function(ne,ue,Ee){Ee===void 0&&(Ee=$);var ce,ye,ve={placement:"bottom",orderedModifiers:[],options:Object.assign({},ic,$),modifiersData:{},elements:{reference:ne,popper:ue},attributes:{},styles:{}},Qe=[],Ue=!1,ze={state:ve,setOptions:function($e){var ht=typeof $e=="function"?$e(ve.options):$e;He(),ve.options=Object.assign({},$,ve.options,ht),ve.scrollParents={reference:cr(ne)?mr(ne):ne.contextElement?mr(ne.contextElement):[],popper:mr(ue)};var Ct,Ve,dt=function(We){var tt=To(We);return Hl.reduce(function(vt,At){return vt.concat(tt.filter(function(_t){return _t.phase===At}))},[])}((Ct=[].concat(R,ve.options.modifiers),Ve=Ct.reduce(function(We,tt){var vt=We[tt.name];return We[tt.name]=vt?Object.assign({},vt,tt,{options:Object.assign({},vt.options,tt.options),data:Object.assign({},vt.data,tt.data)}):tt,We},{}),Object.keys(Ve).map(function(We){return Ve[We]})));return ve.orderedModifiers=dt.filter(function(We){return We.enabled}),ve.orderedModifiers.forEach(function(We){var tt=We.name,vt=We.options,At=vt===void 0?{}:vt,_t=We.effect;if(typeof _t=="function"){var Bt=_t({state:ve,name:tt,instance:ze,options:At});Qe.push(Bt||function(){})}}),ze.update()},forceUpdate:function(){if(!Ue){var $e=ve.elements,ht=$e.reference,Ct=$e.popper;if(wo(ht,Ct)){ve.rects={reference:nc(ht,$n(Ct),ve.options.strategy==="fixed"),popper:$l(Ct)},ve.reset=!1,ve.placement=ve.options.placement,ve.orderedModifiers.forEach(function(_t){return ve.modifiersData[_t.name]=Object.assign({},_t.data)});for(var Ve=0;Ve<ve.orderedModifiers.length;Ve++)if(ve.reset!==!0){var dt=ve.orderedModifiers[Ve],We=dt.fn,tt=dt.options,vt=tt===void 0?{}:tt,At=dt.name;typeof We=="function"&&(ve=We({state:ve,options:vt,name:At,instance:ze})||ve)}else ve.reset=!1,Ve=-1}}},update:(ce=function(){return new Promise(function($e){ze.forceUpdate(),$e(ve)})},function(){return ye||(ye=new Promise(function($e){Promise.resolve().then(function(){ye=void 0,$e(ce())})})),ye}),destroy:function(){He(),Ue=!0}};if(!wo(ne,ue))return ze;function He(){Qe.forEach(function($e){return $e()}),Qe=[]}return ze.setOptions(Ee).then(function($e){!Ue&&Ee.onFirstUpdate&&Ee.onFirstUpdate($e)}),ze}}var rc=Mr(),sc=Mr({defaultModifiers:[kr,Aa,ds,kt]}),Sa=Mr({defaultModifiers:[kr,Aa,ds,kt,wa,ki,Ia,Eo,Ms]});const Ls=Object.freeze(Object.defineProperty({__proto__:null,afterMain:as,afterRead:go,afterWrite:Hn,applyStyles:kt,arrow:Eo,auto:Dr,basePlacements:zn,beforeMain:_o,beforeRead:vi,beforeWrite:os,bottom:Ht,clippingParents:ss,computeStyles:ds,createPopper:Sa,createPopperBase:rc,createPopperLite:sc,detectOverflow:ai,end:Ci,eventListeners:kr,flip:ki,hide:Ms,left:$t,main:ql,modifierPhases:Hl,offset:wa,placements:qn,popper:xr,popperGenerator:Mr,popperOffsets:Aa,preventOverflow:Ia,read:ec,reference:ga,right:Pn,start:ri,top:on,variationPlacements:si,viewport:Nt,write:Di},Symbol.toStringTag,{value:"Module"})),Ql="dropdown",Xi=".bs.dropdown",Ao=".data-api",Wl="ArrowUp",Lr="ArrowDown",ac=`hide${Xi}`,oc=`hidden${Xi}`,lc=`show${Xi}`,uc=`shown${Xi}`,Ra=`click${Xi}${Ao}`,Gn=`keydown${Xi}${Ao}`,cc=`keyup${Xi}${Ao}`,ms="show",Kn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',h=`${Kn}.${ms}`,y=".dropdown-menu",T=j()?"top-end":"top-start",C=j()?"top-start":"top-end",W=j()?"bottom-end":"bottom-start",ee=j()?"bottom-start":"bottom-end",we=j()?"left-start":"right-start",at=j()?"right-start":"left-start",vn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},ot={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class wt extends Fe{constructor(p,E){super(p,E),this._popper=null,this._parent=this._element.parentNode,this._menu=Te.next(this._element,y)[0]||Te.prev(this._element,y)[0]||Te.findOne(y,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return vn}static get DefaultType(){return ot}static get NAME(){return Ql}toggle(){return this._isShown()?this.hide():this.show()}show(){if(v(this._element)||this._isShown())return;const p={relatedTarget:this._element};if(!D.trigger(this._element,lc,p).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const E of[].concat(...document.body.children))D.on(E,"mouseover",I);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ms),this._element.classList.add(ms),D.trigger(this._element,uc,p)}}hide(){if(v(this._element)||!this._isShown())return;const p={relatedTarget:this._element};this._completeHide(p)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(p){if(!D.trigger(this._element,ac,p).defaultPrevented){if("ontouchstart"in document.documentElement)for(const E of[].concat(...document.body.children))D.off(E,"mouseover",I);this._popper&&this._popper.destroy(),this._menu.classList.remove(ms),this._element.classList.remove(ms),this._element.setAttribute("aria-expanded","false"),Ie.removeDataAttribute(this._menu,"popper"),D.trigger(this._element,oc,p)}}_getConfig(p){if(typeof(p=super._getConfig(p)).reference=="object"&&!d(p.reference)&&typeof p.reference.getBoundingClientRect!="function")throw new TypeError(`${Ql.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return p}_createPopper(){if(Ls===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let p=this._element;this._config.reference==="parent"?p=this._parent:d(this._config.reference)?p=m(this._config.reference):typeof this._config.reference=="object"&&(p=this._config.reference);const E=this._getPopperConfig();this._popper=Sa(p,this._menu,E)}_isShown(){return this._menu.classList.contains(ms)}_getPlacement(){const p=this._parent;if(p.classList.contains("dropend"))return we;if(p.classList.contains("dropstart"))return at;if(p.classList.contains("dropup-center"))return"top";if(p.classList.contains("dropdown-center"))return"bottom";const E=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return p.classList.contains("dropup")?E?C:T:E?ee:W}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:p}=this._config;return typeof p=="string"?p.split(",").map(E=>Number.parseInt(E,10)):typeof p=="function"?E=>p(E,this._element):p}_getPopperConfig(){const p={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Ie.setDataAttribute(this._menu,"popper","static"),p.modifiers=[{name:"applyStyles",enabled:!1}]),{...p,...ie(this._config.popperConfig,[p])}}_selectMenuItem({key:p,target:E}){const R=Te.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(F=>g(F));R.length&&_e(R,E,p===Lr,!R.includes(E)).focus()}static jQueryInterface(p){return this.each(function(){const E=wt.getOrCreateInstance(this,p);if(typeof p=="string"){if(E[p]===void 0)throw new TypeError(`No method named "${p}"`);E[p]()}})}static clearMenus(p){if(p.button===2||p.type==="keyup"&&p.key!=="Tab")return;const E=Te.find(h);for(const R of E){const F=wt.getInstance(R);if(!F||F._config.autoClose===!1)continue;const $=p.composedPath(),ne=$.includes(F._menu);if($.includes(F._element)||F._config.autoClose==="inside"&&!ne||F._config.autoClose==="outside"&&ne||F._menu.contains(p.target)&&(p.type==="keyup"&&p.key==="Tab"||/input|select|option|textarea|form/i.test(p.target.tagName)))continue;const ue={relatedTarget:F._element};p.type==="click"&&(ue.clickEvent=p),F._completeHide(ue)}}static dataApiKeydownHandler(p){const E=/input|textarea/i.test(p.target.tagName),R=p.key==="Escape",F=[Wl,Lr].includes(p.key);if(!F&&!R||E&&!R)return;p.preventDefault();const $=this.matches(Kn)?this:Te.prev(this,Kn)[0]||Te.next(this,Kn)[0]||Te.findOne(Kn,p.delegateTarget.parentNode),ne=wt.getOrCreateInstance($);if(F)return p.stopPropagation(),ne.show(),void ne._selectMenuItem(p);ne._isShown()&&(p.stopPropagation(),ne.hide(),$.focus())}}D.on(document,Gn,Kn,wt.dataApiKeydownHandler),D.on(document,Gn,y,wt.dataApiKeydownHandler),D.on(document,Ra,wt.clearMenus),D.on(document,cc,wt.clearMenus),D.on(document,Ra,Kn,function(A){A.preventDefault(),wt.getOrCreateInstance(this).toggle()}),Z(wt);const un="backdrop",Ur="show",In=`mousedown.bs.${un}`,jr={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Yl={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Xl extends Be{constructor(p){super(),this._config=this._getConfig(p),this._isAppended=!1,this._element=null}static get Default(){return jr}static get DefaultType(){return Yl}static get NAME(){return un}show(p){if(!this._config.isVisible)return void ie(p);this._append();const E=this._getElement();this._config.isAnimated&&P(E),E.classList.add(Ur),this._emulateAnimation(()=>{ie(p)})}hide(p){this._config.isVisible?(this._getElement().classList.remove(Ur),this._emulateAnimation(()=>{this.dispose(),ie(p)})):ie(p)}dispose(){this._isAppended&&(D.off(this._element,In),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const p=document.createElement("div");p.className=this._config.className,this._config.isAnimated&&p.classList.add("fade"),this._element=p}return this._element}_configAfterMerge(p){return p.rootElement=m(p.rootElement),p}_append(){if(this._isAppended)return;const p=this._getElement();this._config.rootElement.append(p),D.on(p,In,()=>{ie(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(p){se(p,this._getElement(),this._config.isAnimated)}}const Zl=".bs.focustrap",Im=`focusin${Zl}`,Jh=`keydown.tab${Zl}`,hc="backward",Sm={autofocus:!0,trapElement:null},Rm={autofocus:"boolean",trapElement:"element"};class ed extends Be{constructor(p){super(),this._config=this._getConfig(p),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Sm}static get DefaultType(){return Rm}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),D.off(document,Zl),D.on(document,Im,p=>this._handleFocusin(p)),D.on(document,Jh,p=>this._handleKeydown(p)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,D.off(document,Zl))}_handleFocusin(p){const{trapElement:E}=this._config;if(p.target===document||p.target===E||E.contains(p.target))return;const R=Te.focusableChildren(E);R.length===0?E.focus():this._lastTabNavDirection===hc?R[R.length-1].focus():R[0].focus()}_handleKeydown(p){p.key==="Tab"&&(this._lastTabNavDirection=p.shiftKey?hc:"forward")}}const Cm=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Dm=".sticky-top",dc="padding-right",xm="margin-right";class td{constructor(){this._element=document.body}getWidth(){const p=document.documentElement.clientWidth;return Math.abs(window.innerWidth-p)}hide(){const p=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,dc,E=>E+p),this._setElementAttributes(Cm,dc,E=>E+p),this._setElementAttributes(Dm,xm,E=>E-p)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,dc),this._resetElementAttributes(Cm,dc),this._resetElementAttributes(Dm,xm)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(p,E,R){const F=this.getWidth();this._applyManipulationCallback(p,$=>{if($!==this._element&&window.innerWidth>$.clientWidth+F)return;this._saveInitialAttribute($,E);const ne=window.getComputedStyle($).getPropertyValue(E);$.style.setProperty(E,`${R(Number.parseFloat(ne))}px`)})}_saveInitialAttribute(p,E){const R=p.style.getPropertyValue(E);R&&Ie.setDataAttribute(p,E,R)}_resetElementAttributes(p,E){this._applyManipulationCallback(p,R=>{const F=Ie.getDataAttribute(R,E);F!==null?(Ie.removeDataAttribute(R,E),R.style.setProperty(E,F)):R.style.removeProperty(E)})}_applyManipulationCallback(p,E){if(d(p))E(p);else for(const R of Te.find(p,this._element))E(R)}}const Vt=".bs.modal",Jl=`hide${Vt}`,Nm=`hidePrevented${Vt}`,nd=`hidden${Vt}`,id=`show${Vt}`,Pm=`shown${Vt}`,rd=`resize${Vt}`,v_=`click.dismiss${Vt}`,E_=`mousedown.dismiss${Vt}`,Io=`keydown.dismiss${Vt}`,sd=`click${Vt}.data-api`,So="modal-open",fc="show",mc="modal-static",Ca={backdrop:!0,focus:!0,keyboard:!0},Ro={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ps extends Fe{constructor(p,E){super(p,E),this._dialog=Te.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new td,this._addEventListeners()}static get Default(){return Ca}static get DefaultType(){return Ro}static get NAME(){return"modal"}toggle(p){return this._isShown?this.hide():this.show(p)}show(p){this._isShown||this._isTransitioning||D.trigger(this._element,id,{relatedTarget:p}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(So),this._adjustDialog(),this._backdrop.show(()=>this._showElement(p)))}hide(){this._isShown&&!this._isTransitioning&&(D.trigger(this._element,Jl).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(fc),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){D.off(window,Vt),D.off(this._dialog,Vt),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Xl({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ed({trapElement:this._element})}_showElement(p){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const E=Te.findOne(".modal-body",this._dialog);E&&(E.scrollTop=0),P(this._element),this._element.classList.add(fc),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,D.trigger(this._element,Pm,{relatedTarget:p})},this._dialog,this._isAnimated())}_addEventListeners(){D.on(this._element,Io,p=>{p.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),D.on(window,rd,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),D.on(this._element,E_,p=>{D.one(this._element,v_,E=>{this._element===p.target&&this._element===E.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(So),this._resetAdjustments(),this._scrollBar.reset(),D.trigger(this._element,nd)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(D.trigger(this._element,Nm).defaultPrevented)return;const p=this._element.scrollHeight>document.documentElement.clientHeight,E=this._element.style.overflowY;E==="hidden"||this._element.classList.contains(mc)||(p||(this._element.style.overflowY="hidden"),this._element.classList.add(mc),this._queueCallback(()=>{this._element.classList.remove(mc),this._queueCallback(()=>{this._element.style.overflowY=E},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const p=this._element.scrollHeight>document.documentElement.clientHeight,E=this._scrollBar.getWidth(),R=E>0;if(R&&!p){const F=j()?"paddingLeft":"paddingRight";this._element.style[F]=`${E}px`}if(!R&&p){const F=j()?"paddingRight":"paddingLeft";this._element.style[F]=`${E}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(p,E){return this.each(function(){const R=ps.getOrCreateInstance(this,p);if(typeof p=="string"){if(R[p]===void 0)throw new TypeError(`No method named "${p}"`);R[p](E)}})}}D.on(document,sd,'[data-bs-toggle="modal"]',function(A){const p=Te.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&A.preventDefault(),D.one(p,id,R=>{R.defaultPrevented||D.one(p,nd,()=>{g(this)&&this.focus()})});const E=Te.findOne(".modal.show");E&&ps.getInstance(E).hide(),ps.getOrCreateInstance(p).toggle(this)}),xt(ps),Z(ps);const Br=".bs.offcanvas",Us=".data-api",Om=`load${Br}${Us}`,ad="show",od="showing",km="hiding",Vm=".offcanvas.show",b_=`show${Br}`,Mm=`shown${Br}`,Lm=`hide${Br}`,ld=`hidePrevented${Br}`,Zi=`hidden${Br}`,Ji=`resize${Br}`,Co=`click${Br}${Us}`,ud=`keydown.dismiss${Br}`,pc={backdrop:!0,keyboard:!0,scroll:!1},gc={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class pr extends Fe{constructor(p,E){super(p,E),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return pc}static get DefaultType(){return gc}static get NAME(){return"offcanvas"}toggle(p){return this._isShown?this.hide():this.show(p)}show(p){this._isShown||D.trigger(this._element,b_,{relatedTarget:p}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new td().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(od),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(ad),this._element.classList.remove(od),D.trigger(this._element,Mm,{relatedTarget:p})},this._element,!0))}hide(){this._isShown&&(D.trigger(this._element,Lm).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(km),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(ad,km),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new td().reset(),D.trigger(this._element,Zi)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const p=!!this._config.backdrop;return new Xl({className:"offcanvas-backdrop",isVisible:p,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:p?()=>{this._config.backdrop!=="static"?this.hide():D.trigger(this._element,ld)}:null})}_initializeFocusTrap(){return new ed({trapElement:this._element})}_addEventListeners(){D.on(this._element,ud,p=>{p.key==="Escape"&&(this._config.keyboard?this.hide():D.trigger(this._element,ld))})}static jQueryInterface(p){return this.each(function(){const E=pr.getOrCreateInstance(this,p);if(typeof p=="string"){if(E[p]===void 0||p.startsWith("_")||p==="constructor")throw new TypeError(`No method named "${p}"`);E[p](this)}})}}D.on(document,Co,'[data-bs-toggle="offcanvas"]',function(A){const p=Te.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&A.preventDefault(),v(this))return;D.one(p,Zi,()=>{g(this)&&this.focus()});const E=Te.findOne(Vm);E&&E!==p&&pr.getInstance(E).hide(),pr.getOrCreateInstance(p).toggle(this)}),D.on(window,Om,()=>{for(const A of Te.find(Vm))pr.getOrCreateInstance(A).show()}),D.on(window,Ji,()=>{for(const A of Te.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(A).position!=="fixed"&&pr.getOrCreateInstance(A).hide()}),xt(pr),Z(pr);const gs={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Um=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),_c=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Do=(A,p)=>{const E=A.nodeName.toLowerCase();return p.includes(E)?!Um.has(E)||!!_c.test(A.nodeValue):p.filter(R=>R instanceof RegExp).some(R=>R.test(E))},jm={allowList:gs,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},er={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},xo={entry:"(string|element|function|null)",selector:"(string|element)"};class No extends Be{constructor(p){super(),this._config=this._getConfig(p)}static get Default(){return jm}static get DefaultType(){return er}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(p=>this._resolvePossibleFunction(p)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(p){return this._checkContent(p),this._config.content={...this._config.content,...p},this}toHtml(){const p=document.createElement("div");p.innerHTML=this._maybeSanitize(this._config.template);for(const[F,$]of Object.entries(this._config.content))this._setContent(p,$,F);const E=p.children[0],R=this._resolvePossibleFunction(this._config.extraClass);return R&&E.classList.add(...R.split(" ")),E}_typeCheckConfig(p){super._typeCheckConfig(p),this._checkContent(p.content)}_checkContent(p){for(const[E,R]of Object.entries(p))super._typeCheckConfig({selector:E,entry:R},xo)}_setContent(p,E,R){const F=Te.findOne(R,p);F&&((E=this._resolvePossibleFunction(E))?d(E)?this._putElementInTemplate(m(E),F):this._config.html?F.innerHTML=this._maybeSanitize(E):F.textContent=E:F.remove())}_maybeSanitize(p){return this._config.sanitize?function(E,R,F){if(!E.length)return E;if(F&&typeof F=="function")return F(E);const $=new window.DOMParser().parseFromString(E,"text/html"),ne=[].concat(...$.body.querySelectorAll("*"));for(const ue of ne){const Ee=ue.nodeName.toLowerCase();if(!Object.keys(R).includes(Ee)){ue.remove();continue}const ce=[].concat(...ue.attributes),ye=[].concat(R["*"]||[],R[Ee]||[]);for(const ve of ce)Do(ve,ye)||ue.removeAttribute(ve.nodeName)}return $.body.innerHTML}(p,this._config.allowList,this._config.sanitizeFn):p}_resolvePossibleFunction(p){return ie(p,[this])}_putElementInTemplate(p,E){if(this._config.html)return E.innerHTML="",void E.append(p);E.textContent=p.textContent}}const yc=new Set(["sanitize","allowList","sanitizeFn"]),Po="fade",oi="show",Vi=".modal",js="hide.bs.modal",Mi="hover",gr="focus",Da={AUTO:"auto",TOP:"top",RIGHT:j()?"left":"right",BOTTOM:"bottom",LEFT:j()?"right":"left"},Bm={allowList:gs,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},cd={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class _s extends Fe{constructor(p,E){if(Ls===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(p,E),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Bm}static get DefaultType(){return cd}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),D.off(this._element.closest(Vi),js,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const p=D.trigger(this._element,this.constructor.eventName("show")),E=(b(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(p.defaultPrevented||!E)return;this._disposePopper();const R=this._getTipElement();this._element.setAttribute("aria-describedby",R.getAttribute("id"));const{container:F}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(F.append(R),D.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(R),R.classList.add(oi),"ontouchstart"in document.documentElement)for(const $ of[].concat(...document.body.children))D.on($,"mouseover",I);this._queueCallback(()=>{D.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!D.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(oi),"ontouchstart"in document.documentElement)for(const p of[].concat(...document.body.children))D.off(p,"mouseover",I);this._activeTrigger.click=!1,this._activeTrigger[gr]=!1,this._activeTrigger[Mi]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),D.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(p){const E=this._getTemplateFactory(p).toHtml();if(!E)return null;E.classList.remove(Po,oi),E.classList.add(`bs-${this.constructor.NAME}-auto`);const R=(F=>{do F+=Math.floor(1e6*Math.random());while(document.getElementById(F));return F})(this.constructor.NAME).toString();return E.setAttribute("id",R),this._isAnimated()&&E.classList.add(Po),E}setContent(p){this._newContent=p,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(p){return this._templateFactory?this._templateFactory.changeContent(p):this._templateFactory=new No({...this._config,content:p,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(p){return this.constructor.getOrCreateInstance(p.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Po)}_isShown(){return this.tip&&this.tip.classList.contains(oi)}_createPopper(p){const E=ie(this._config.placement,[this,p,this._element]),R=Da[E.toUpperCase()];return Sa(this._element,p,this._getPopperConfig(R))}_getOffset(){const{offset:p}=this._config;return typeof p=="string"?p.split(",").map(E=>Number.parseInt(E,10)):typeof p=="function"?E=>p(E,this._element):p}_resolvePossibleFunction(p){return ie(p,[this._element])}_getPopperConfig(p){const E={placement:p,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:R=>{this._getTipElement().setAttribute("data-popper-placement",R.state.placement)}}]};return{...E,...ie(this._config.popperConfig,[E])}}_setListeners(){const p=this._config.trigger.split(" ");for(const E of p)if(E==="click")D.on(this._element,this.constructor.eventName("click"),this._config.selector,R=>{this._initializeOnDelegatedTarget(R).toggle()});else if(E!=="manual"){const R=E===Mi?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),F=E===Mi?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");D.on(this._element,R,this._config.selector,$=>{const ne=this._initializeOnDelegatedTarget($);ne._activeTrigger[$.type==="focusin"?gr:Mi]=!0,ne._enter()}),D.on(this._element,F,this._config.selector,$=>{const ne=this._initializeOnDelegatedTarget($);ne._activeTrigger[$.type==="focusout"?gr:Mi]=ne._element.contains($.relatedTarget),ne._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},D.on(this._element.closest(Vi),js,this._hideModalHandler)}_fixTitle(){const p=this._element.getAttribute("title");p&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",p),this._element.setAttribute("data-bs-original-title",p),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(p,E){clearTimeout(this._timeout),this._timeout=setTimeout(p,E)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(p){const E=Ie.getDataAttributes(this._element);for(const R of Object.keys(E))yc.has(R)&&delete E[R];return p={...E,...typeof p=="object"&&p?p:{}},p=this._mergeConfigObj(p),p=this._configAfterMerge(p),this._typeCheckConfig(p),p}_configAfterMerge(p){return p.container=p.container===!1?document.body:m(p.container),typeof p.delay=="number"&&(p.delay={show:p.delay,hide:p.delay}),typeof p.title=="number"&&(p.title=p.title.toString()),typeof p.content=="number"&&(p.content=p.content.toString()),p}_getDelegateConfig(){const p={};for(const[E,R]of Object.entries(this._config))this.constructor.Default[E]!==R&&(p[E]=R);return p.selector=!1,p.trigger="manual",p}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(p){return this.each(function(){const E=_s.getOrCreateInstance(this,p);if(typeof p=="string"){if(E[p]===void 0)throw new TypeError(`No method named "${p}"`);E[p]()}})}}Z(_s);const li={..._s.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Mn={..._s.DefaultType,content:"(null|string|element|function)"};class it extends _s{static get Default(){return li}static get DefaultType(){return Mn}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(p){return this.each(function(){const E=it.getOrCreateInstance(this,p);if(typeof p=="string"){if(E[p]===void 0)throw new TypeError(`No method named "${p}"`);E[p]()}})}}Z(it);const Li=".bs.scrollspy",Fr=`activate${Li}`,vc=`click${Li}`,xa=`load${Li}.data-api`,Na="active",Ec="[href]",Oo=".nav-link",eu=`${Oo}, .nav-item > ${Oo}, .list-group-item`,tu={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},nu={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ko extends Fe{constructor(p,E){super(p,E),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return tu}static get DefaultType(){return nu}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const p of this._observableSections.values())this._observer.observe(p)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(p){return p.target=m(p.target)||document.body,p.rootMargin=p.offset?`${p.offset}px 0px -30%`:p.rootMargin,typeof p.threshold=="string"&&(p.threshold=p.threshold.split(",").map(E=>Number.parseFloat(E))),p}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(D.off(this._config.target,vc),D.on(this._config.target,vc,Ec,p=>{const E=this._observableSections.get(p.target.hash);if(E){p.preventDefault();const R=this._rootElement||window,F=E.offsetTop-this._element.offsetTop;if(R.scrollTo)return void R.scrollTo({top:F,behavior:"smooth"});R.scrollTop=F}}))}_getNewObserver(){const p={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(E=>this._observerCallback(E),p)}_observerCallback(p){const E=ne=>this._targetLinks.get(`#${ne.target.id}`),R=ne=>{this._previousScrollData.visibleEntryTop=ne.target.offsetTop,this._process(E(ne))},F=(this._rootElement||document.documentElement).scrollTop,$=F>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=F;for(const ne of p){if(!ne.isIntersecting){this._activeTarget=null,this._clearActiveClass(E(ne));continue}const ue=ne.target.offsetTop>=this._previousScrollData.visibleEntryTop;if($&&ue){if(R(ne),!F)return}else $||ue||R(ne)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const p=Te.find(Ec,this._config.target);for(const E of p){if(!E.hash||v(E))continue;const R=Te.findOne(decodeURI(E.hash),this._element);g(R)&&(this._targetLinks.set(decodeURI(E.hash),E),this._observableSections.set(E.hash,R))}}_process(p){this._activeTarget!==p&&(this._clearActiveClass(this._config.target),this._activeTarget=p,p.classList.add(Na),this._activateParents(p),D.trigger(this._element,Fr,{relatedTarget:p}))}_activateParents(p){if(p.classList.contains("dropdown-item"))Te.findOne(".dropdown-toggle",p.closest(".dropdown")).classList.add(Na);else for(const E of Te.parents(p,".nav, .list-group"))for(const R of Te.prev(E,eu))R.classList.add(Na)}_clearActiveClass(p){p.classList.remove(Na);const E=Te.find(`${Ec}.${Na}`,p);for(const R of E)R.classList.remove(Na)}static jQueryInterface(p){return this.each(function(){const E=ko.getOrCreateInstance(this,p);if(typeof p=="string"){if(E[p]===void 0||p.startsWith("_")||p==="constructor")throw new TypeError(`No method named "${p}"`);E[p]()}})}}D.on(window,xa,()=>{for(const A of Te.find('[data-bs-spy="scroll"]'))ko.getOrCreateInstance(A)}),Z(ko);const ys=".bs.tab",Fm=`hide${ys}`,bc=`hidden${ys}`,zm=`show${ys}`,iu=`shown${ys}`,qm=`click${ys}`,Vo=`keydown${ys}`,ru=`load${ys}`,Tc="ArrowLeft",Mo="ArrowRight",wc="ArrowUp",hd="ArrowDown",Ac="Home",Bs="End",Fs="active",Pa="fade",Lo="show",dd=".dropdown-toggle",su=`:not(${dd})`,Ic='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ei=`.nav-link${su}, .list-group-item${su}, [role="tab"]${su}, ${Ic}`,zr=`.${Fs}[data-bs-toggle="tab"], .${Fs}[data-bs-toggle="pill"], .${Fs}[data-bs-toggle="list"]`;class bi extends Fe{constructor(p){super(p),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),D.on(this._element,Vo,E=>this._keydown(E)))}static get NAME(){return"tab"}show(){const p=this._element;if(this._elemIsActive(p))return;const E=this._getActiveElem(),R=E?D.trigger(E,Fm,{relatedTarget:p}):null;D.trigger(p,zm,{relatedTarget:E}).defaultPrevented||R&&R.defaultPrevented||(this._deactivate(E,p),this._activate(p,E))}_activate(p,E){p&&(p.classList.add(Fs),this._activate(Te.getElementFromSelector(p)),this._queueCallback(()=>{p.getAttribute("role")==="tab"?(p.removeAttribute("tabindex"),p.setAttribute("aria-selected",!0),this._toggleDropDown(p,!0),D.trigger(p,iu,{relatedTarget:E})):p.classList.add(Lo)},p,p.classList.contains(Pa)))}_deactivate(p,E){p&&(p.classList.remove(Fs),p.blur(),this._deactivate(Te.getElementFromSelector(p)),this._queueCallback(()=>{p.getAttribute("role")==="tab"?(p.setAttribute("aria-selected",!1),p.setAttribute("tabindex","-1"),this._toggleDropDown(p,!1),D.trigger(p,bc,{relatedTarget:E})):p.classList.remove(Lo)},p,p.classList.contains(Pa)))}_keydown(p){if(![Tc,Mo,wc,hd,Ac,Bs].includes(p.key))return;p.stopPropagation(),p.preventDefault();const E=this._getChildren().filter(F=>!v(F));let R;if([Ac,Bs].includes(p.key))R=E[p.key===Ac?0:E.length-1];else{const F=[Mo,hd].includes(p.key);R=_e(E,p.target,F,!0)}R&&(R.focus({preventScroll:!0}),bi.getOrCreateInstance(R).show())}_getChildren(){return Te.find(Ei,this._parent)}_getActiveElem(){return this._getChildren().find(p=>this._elemIsActive(p))||null}_setInitialAttributes(p,E){this._setAttributeIfNotExists(p,"role","tablist");for(const R of E)this._setInitialAttributesOnChild(R)}_setInitialAttributesOnChild(p){p=this._getInnerElement(p);const E=this._elemIsActive(p),R=this._getOuterElement(p);p.setAttribute("aria-selected",E),R!==p&&this._setAttributeIfNotExists(R,"role","presentation"),E||p.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(p,"role","tab"),this._setInitialAttributesOnTargetPanel(p)}_setInitialAttributesOnTargetPanel(p){const E=Te.getElementFromSelector(p);E&&(this._setAttributeIfNotExists(E,"role","tabpanel"),p.id&&this._setAttributeIfNotExists(E,"aria-labelledby",`${p.id}`))}_toggleDropDown(p,E){const R=this._getOuterElement(p);if(!R.classList.contains("dropdown"))return;const F=($,ne)=>{const ue=Te.findOne($,R);ue&&ue.classList.toggle(ne,E)};F(dd,Fs),F(".dropdown-menu",Lo),R.setAttribute("aria-expanded",E)}_setAttributeIfNotExists(p,E,R){p.hasAttribute(E)||p.setAttribute(E,R)}_elemIsActive(p){return p.classList.contains(Fs)}_getInnerElement(p){return p.matches(Ei)?p:Te.findOne(Ei,p)}_getOuterElement(p){return p.closest(".nav-item, .list-group-item")||p}static jQueryInterface(p){return this.each(function(){const E=bi.getOrCreateInstance(this);if(typeof p=="string"){if(E[p]===void 0||p.startsWith("_")||p==="constructor")throw new TypeError(`No method named "${p}"`);E[p]()}})}}D.on(document,qm,Ic,function(A){["A","AREA"].includes(this.tagName)&&A.preventDefault(),v(this)||bi.getOrCreateInstance(this).show()}),D.on(window,ru,()=>{for(const A of Te.find(zr))bi.getOrCreateInstance(A)}),Z(bi);const vs=".bs.toast",zs=`mouseover${vs}`,Es=`mouseout${vs}`,En=`focusin${vs}`,Sc=`focusout${vs}`,T_=`hide${vs}`,w_=`hidden${vs}`,A_=`show${vs}`,bn=`shown${vs}`,Rc="hide",qs="show",Hs="showing",fd={animation:"boolean",autohide:"boolean",delay:"number"},Uo={animation:!0,autohide:!0,delay:5e3};class qr extends Fe{constructor(p,E){super(p,E),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Uo}static get DefaultType(){return fd}static get NAME(){return"toast"}show(){D.trigger(this._element,A_).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Rc),P(this._element),this._element.classList.add(qs,Hs),this._queueCallback(()=>{this._element.classList.remove(Hs),D.trigger(this._element,bn),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(D.trigger(this._element,T_).defaultPrevented||(this._element.classList.add(Hs),this._queueCallback(()=>{this._element.classList.add(Rc),this._element.classList.remove(Hs,qs),D.trigger(this._element,w_)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(qs),super.dispose()}isShown(){return this._element.classList.contains(qs)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(p,E){switch(p.type){case"mouseover":case"mouseout":this._hasMouseInteraction=E;break;case"focusin":case"focusout":this._hasKeyboardInteraction=E}if(E)return void this._clearTimeout();const R=p.relatedTarget;this._element===R||this._element.contains(R)||this._maybeScheduleHide()}_setListeners(){D.on(this._element,zs,p=>this._onInteraction(p,!0)),D.on(this._element,Es,p=>this._onInteraction(p,!1)),D.on(this._element,En,p=>this._onInteraction(p,!0)),D.on(this._element,Sc,p=>this._onInteraction(p,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(p){return this.each(function(){const E=qr.getOrCreateInstance(this,p);if(typeof p=="string"){if(E[p]===void 0)throw new TypeError(`No method named "${p}"`);E[p](this)}})}}return xt(qr),Z(qr),{Alert:Bn,Button:$i,Carousel:Rr,Collapse:Qi,Dropdown:wt,Modal:ps,Offcanvas:pr,Popover:it,ScrollSpy:ko,Tab:bi,Toast:qr,Tooltip:_s}})}(Fp)),Fp.exports}d1();const nS=({formTitle:n,initialData:e={},onSubmit:t})=>{const[i,a]=z.useState(e.id||""),[l,u]=z.useState(e.title||""),[d,m]=z.useState(e.difficulty||"Easy"),[g,v]=z.useState(e.tags||""),[b,I]=z.useState(e.description||""),[P,U]=z.useState(e.code||"// Write sample code here"),[G,j]=z.useState(e.language||"java"),[Z,ie]=z.useState(e.cases||"");z.useEffect(()=>{(e.id||e.title||e.description||e.code)&&(a(e.id||""),u(e.title||""),m(e.difficulty||"Easy"),v(e.tags||""),I(e.description||""),U(e.code||"// Write sample code here"),j(e.language||"java"),ie(e.cases||""))},[e]);const se=_e=>{_e.preventDefault();const pe={id:i,title:l,difficulty:d,tags:g,description:b,code:P,language:G,cases:Z};console.log("Submitted Problem Data:",pe),t(pe)};return N.jsxs("div",{className:"admin-form-container",children:[N.jsx("h2",{className:"form-title",children:n}),N.jsxs("form",{onSubmit:se,children:[N.jsx("label",{children:"ID"}),N.jsx("input",{className:"form-input",type:"number",value:i,onChange:_e=>a(_e.target.value),required:!0}),N.jsx("label",{children:"Title"}),N.jsx("input",{className:"form-input",type:"text",value:l,onChange:_e=>u(_e.target.value),required:!0}),N.jsx("label",{children:"Difficulty"}),N.jsxs("select",{className:"form-input",value:d,onChange:_e=>m(_e.target.value),children:[N.jsx("option",{value:"Easy",children:"Easy"}),N.jsx("option",{value:"Medium",children:"Medium"}),N.jsx("option",{value:"Hard",children:"Hard"})]}),N.jsx("label",{children:"Tags (comma-separated)"}),N.jsx("input",{className:"form-input",type:"text",value:g,onChange:_e=>v(_e.target.value)}),N.jsx("label",{children:"Description"}),N.jsx("textarea",{className:"form-input",value:b,onChange:_e=>I(_e.target.value),rows:5}),N.jsxs("div",{className:"dropdown mb-3",children:[N.jsx("button",{className:"btn btn-dark dropdown-toggle",type:"button",id:"languageDropdown","data-bs-toggle":"dropdown","aria-expanded":"false",children:G.toUpperCase()}),N.jsx("ul",{className:"dropdown-menu","aria-labelledby":"languageDropdown",children:["java","javascript","python","c","cpp"].map(_e=>N.jsx("li",{children:N.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>j(_e),children:_e.toUpperCase()})},_e))})]}),N.jsx("label",{children:"Sample Code"}),N.jsx("div",{className:"editor-container",children:N.jsx(tS,{height:"400px",language:G,theme:"vs-dark",value:P,onChange:_e=>U(_e||"")})}),N.jsx("label",{children:"Test Cases"}),N.jsx("textarea",{className:"form-input",value:Z,onChange:_e=>ie(_e.target.value),rows:5,placeholder:`Example:
Input: 5
Output: 25

Input: 2
Output: 4`}),N.jsx("button",{type:"submit",className:"submit-btn btn btn-success mt-3",children:"Submit"})]})]})},iS=()=>{const{port:n,hostIP:e}=fa();console.log(`${n}`);const t=async i=>{const a=parseInt(i.id);if(isNaN(a)){alert(" Please enter a valid numeric ID.");return}const l={id:a,title:i.title,diff:i.difficulty,desc:i.description,tags:(i.tags||"").split(",").map(u=>u.trim()).filter(u=>u.length>0),code:i.code,cases:i.cases};console.log(" Submitted Problem Data:",l);try{const u=await fetch(`http://${e}:${n}/addQuestion`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(u.ok)alert(" Question sent to server and added to Firebase!");else{const d=await u.text();console.error(" Server Error Response:",d),alert(" Server failed to add question.")}}catch(u){console.error(" Error sending to server:",u),alert(" Could not reach server.")}};return N.jsx(nS,{formTitle:"Add New Problem",initialData:{id:"",title:"",difficulty:"",tags:"",description:"",code:"",cases:""},onSubmit:t})},bA=()=>{const[n,e]=z.useState(!1);return N.jsxs("div",{className:"PL-container",style:{position:"relative"},children:[N.jsx("button",{className:"top-right-btn",onClick:()=>e(!n),children:n?"Close":"Add Problem"}),n&&N.jsx(iS,{}),!n&&N.jsx(mE,{})]})},vv=()=>N.jsx(N.Fragment,{children:N.jsxs("div",{className:"overflow-hidden",children:[N.jsx("h2",{className:"submissionList-title",children:"Recent Submissions"}),N.jsxs("ul",{className:"list-group",children:[N.jsxs("li",{className:"submission-item",children:[N.jsx("span",{className:"submission-problem",children:"Problem 1"}),N.jsx("span",{className:"submission-user",children:"JohnDoe"})]}),N.jsxs("li",{className:"submission-item",children:[N.jsx("span",{className:"submission-problem",children:"Sorting Algorithm"}),N.jsx("span",{className:"submission-user",children:"Alice123"})]}),N.jsxs("li",{className:"submission-item",children:[N.jsx("span",{className:"submission-problem",children:"Graph Traversal"}),N.jsx("span",{className:"submission-user",children:"CoderX"})]}),N.jsxs("li",{className:"submission-item",children:[N.jsx("span",{className:"submission-problem",children:"Dynamic Programming"}),N.jsx("span",{className:"submission-user",children:"Dev99"})]}),N.jsxs("li",{className:"submission-item",children:[N.jsx("span",{className:"submission-problem",children:"Binary Search"}),N.jsx("span",{className:"submission-user",children:"TechGeek"})]})]})]})}),f1=()=>{const n=[{id:1,name:"John Doe",email:"john@example.com",img:"https://i.pravatar.cc/40?img=1"},{id:2,name:"Alice Smith",email:"alice@example.com",img:"https://i.pravatar.cc/40?img=2"},{id:3,name:"Michael Brown",email:"michael@example.com",img:"https://i.pravatar.cc/40?img=3"},{id:4,name:"Sarah Wilson",email:"sarah@example.com",img:"https://i.pravatar.cc/40?img=4"},{id:5,name:"David Johnson",email:"david@example.com",img:"https://i.pravatar.cc/40?img=5"}];return N.jsxs("div",{className:"overflow-auto",children:[N.jsx("h2",{className:"userList-title",children:"User List"}),N.jsxs("div",{className:"input-group mb-3",children:[N.jsx("span",{className:"input-group-text bg-dark text-white",children:"@"}),N.jsx("input",{type:"text",className:"form-control bg-dark text-white",placeholder:"Search user..."})]}),N.jsx("ul",{className:"list-group",children:n.map(e=>N.jsxs("li",{className:"lgi",style:{display:"flex",alignItems:"center",padding:"10px"},children:[N.jsx("img",{src:e.img,alt:"Profile",width:"40",height:"40",style:{borderRadius:"50%",marginRight:"10px"}}),N.jsxs("div",{children:[N.jsx("strong",{children:e.name}),N.jsx("div",{children:e.email})]})]},e.id))})]})};function m1(){return N.jsxs("div",{className:"dashboard",children:[N.jsx("h1",{children:"Welcome to Admin Dashboard"}),N.jsxs("div",{className:"dashboard-cards",children:[N.jsx("div",{className:"dashboard-card",children:"Total Users: 120"}),N.jsx("div",{className:"dashboard-card",children:"Problems Created: 30"}),N.jsx("div",{className:"dashboard-card",children:"Submissions Today: 150"})]}),N.jsxs("div",{className:"dashboard_content",children:[N.jsx(f1,{}),N.jsx(mE,{}),N.jsx(vv,{})]})]})}const p1=()=>{const{port:n,hostIP:e}=fa(),{id:t}=uE(),[i,a]=z.useState(null),[l,u]=z.useState(!0);z.useEffect(()=>{t&&fetch(`http://${e}:${n}/question/${t}`).then(m=>{if(!m.ok)throw new Error("Failed to fetch problem data");return m.json()}).then(m=>{a(m),u(!1)}).catch(m=>{console.error("Error fetching problem:",m),u(!1)})},[t]);const d=async m=>{const g={id:t,title:m.title,diff:m.difficulty,desc:m.description,tags:(m.tags||"").split(",").map(v=>v.trim()).filter(v=>v.length>0),code:m.code,cases:m.cases};console.log(" Updating Problem Data:",g);try{const v=await fetch(`http://${e}:${n}/updateQuestion`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(v.ok)alert(" Question successfully updated in Firebase!");else{const b=await v.text();console.error(" Server Error Response:",b),alert(" Failed to update question on server.")}}catch(v){console.error(" Error reaching server:",v),alert(" Could not reach server.")}};return l?N.jsx("p",{children:"Loading problem data..."}):i?N.jsx(nS,{formTitle:`Edit Problem #${i.title}`,initialData:{...i,tags:Array.isArray(i.tags)?i.tags.join(", "):i.tags||""},onSubmit:d}):N.jsx("p",{children:"Problem not found."})},rS=()=>{const{port:n,hostIP:e}=fa(),[t,i]=z.useState([{id:1,title:"Two Sum",diff:"Easy",tags:["Array","HashMap"]},{id:2,title:"Binary Tree Inorder Traversal",diff:"Medium",tags:["Tree","DFS"]},{id:3,title:"Dijkstra's Algorithm",diff:"Hard",tags:["Graph","Shortest Path"]}]);return z.useEffect(()=>{(async()=>{try{const l=await fetch(`http://${e}:${n}/question`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!l.ok)throw new Error(`HTTP error! Status: ${l.status}`);const u=await l.text(),d=JSON.parse(u);console.log(d),i(d)}catch(l){console.error(" Error fetching problems:",l)}})()},[]),N.jsxs("div",{className:"overflow-auto",children:[N.jsx("h2",{className:"problemList-title",children:"Problem List"}),N.jsx("ul",{className:"list-group",children:t.map(a=>{var l;return N.jsx("li",{children:N.jsxs(xn,{to:`/problempage/${a.id}`,className:"pli",children:[N.jsx("strong",{children:a.title})," Difficulty:"," ",a.diff,N.jsx("br",{}),(l=a.tags)==null?void 0:l.map((u,d)=>N.jsx("span",{className:"tag",children:u},d))]})},a.id)})})]})};function g1(){return N.jsxs("div",{className:"dashboard",children:[N.jsx("h1",{children:"Welcome to Client Dashboard"}),N.jsxs("div",{className:"dashboard-cards",children:[N.jsx("div",{className:"dashboard-card",children:"Problems Solved: 30"}),N.jsx("div",{className:"dashboard-card",children:"Pending Problems: 4"})]}),N.jsx("div",{className:"dashboard_content",children:N.jsx(rS,{})})]})}function _1({children:n}){return N.jsxs("nav",{className:"navbar",children:[N.jsx("h2",{className:"navbar_head",children:"Vcode"}),N.jsxs("div",{className:"nav-links",children:[N.jsx(xn,{to:"/",children:"Dashboard"}),N.jsx(xn,{to:"/manage-problem",children:"Problems"}),N.jsx(xn,{to:"/client-submissions",children:"Submissions"})]}),N.jsx("div",{children:n})]})}const y1=()=>N.jsx("aside",{className:"sidebar",children:N.jsxs("ul",{className:"listgroup",children:[N.jsx("li",{className:"listgroupitem",children:N.jsx(xn,{to:"/",children:"Dashboard"})}),N.jsx("li",{className:"listgroupitem",children:N.jsx(xn,{to:"/manage-problem",children:"View Problems"})}),N.jsx("li",{className:"listgroupitem",children:N.jsx(xn,{to:"/client-submissions",children:"Submissions"})}),N.jsx("li",{className:"listgroupitem",children:N.jsx(xn,{to:"/analytics",children:"Performance"})}),N.jsx("li",{className:"listgroupitem",children:N.jsx(xn,{to:"/settings",children:"Settings"})})]})}),sS=z.createContext(void 0),aS=()=>{const n=z.useContext(sS);if(!n)throw new Error("useTheme must be used within ThemeProvider");return n},v1=({children:n})=>{const[e,t]=z.useState(localStorage.getItem("theme")||"dark");z.useEffect(()=>{e==="light"?document.body.classList.add("light-theme"):document.body.classList.remove("light-theme"),localStorage.setItem("theme",e)},[e]);const i=()=>t(a=>a==="dark"?"light":"dark");return N.jsx(sS.Provider,{value:{theme:e,toggleTheme:i},children:n})};function E1(){const{theme:n,toggleTheme:e}=aS(),t=xl(),{hostIP:i}=fa();z.useEffect(()=>{n==="light"?document.body.classList.add("light-theme"):document.body.classList.remove("light-theme")},[n]);const a=()=>{localStorage.removeItem("sessionId"),localStorage.removeItem("userEmail"),localStorage.removeItem("userRole"),localStorage.removeItem("userPort"),fetch(`http://${i}:9000/logout`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}).then(l=>{l.ok?(console.log("Logged out successfully"),window.location.href=`http://${i}:9000/`):(console.error("Logout failed:",l.statusText),alert("Logout failed. Please try again."))}).catch(l=>{console.error("Error during logout:",l),alert("Error during logout. Please try again."),window.location.href=`http://${i}:9000/`})};return N.jsxs("div",{className:"client-layout",children:[N.jsx(_1,{children:N.jsxs(N.Fragment,{children:[N.jsxs("button",{className:"theme-toggle",onClick:e,children:["Switch to ",n==="dark"?"Light":"Dark"," Mode"]}),N.jsx("button",{className:"logout-button",onClick:a,children:"Logout"})]})}),N.jsxs("div",{className:"main-content",children:[t.pathname!=="/problempage"&&N.jsx(y1,{}),N.jsx("div",{className:"content",children:N.jsx(FI,{})})]})]})}const b1=()=>{const{port:n,hostIP:e}=fa(),{id:t}=uE(),[i,a]=z.useState(null),[l,u]=z.useState("java"),[d,m]=z.useState("// Write your code here..."),[g,v]=z.useState("No output yet..."),[b,I]=z.useState("");z.useEffect(()=>{t&&(async()=>{try{const j=await fetch(`http://${e}:${n}/question/${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!j.ok)throw new Error(`HTTP error! Status: ${j.status}`);const Z=await j.json();console.log("Fetched problem:",Z),a({title:Z.title||"No title available",difficulty:Z.diff||"Unknown",description:Z.desc||"No description available"})}catch(j){console.error("Error fetching problem details:",j)}})()},[t]);const P=async()=>{v("Submitting code...");const G={language:l,code:d,problemId:t};try{const j=await fetch(`http://${e}:${n}/submitCode`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});if(!j.ok)throw new Error(`HTTP error! Status: ${j.status}`);const Z=await j.json();v(Z.result||"No result received from server.")}catch(j){console.error("Error submitting code:",j),v("Error submitting code.")}},U=async()=>{v("Running code...");const G={language:l,code:d,testInput:b||null};try{const Z=await(await fetch(`http://${e}:${n}/compile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)})).json();v(Z.output||"No output received.")}catch(j){console.error("Error running code:",j),v("Error running code.")}};return N.jsx("div",{className:"problem-page",children:i?N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"problem-container",children:[N.jsx("h2",{children:i.title}),N.jsxs("p",{children:[N.jsx("strong",{children:"Difficulty:"})," ",i.difficulty]}),N.jsxs("div",{className:"problem-description",children:[N.jsx("strong",{children:"Description:"}),i.description.replace(/\\n/g,`
`).split(`
`).map((G,j)=>N.jsx("p",{children:G},j))]})]}),N.jsxs("div",{className:"content",children:[N.jsxs("select",{className:"language-selector",value:l,onChange:G=>u(G.target.value),children:[N.jsx("option",{value:"python",children:"Python"}),N.jsx("option",{value:"java",children:"Java"}),N.jsx("option",{value:"c",children:"c"}),N.jsx("option",{value:"cpp",children:"C++"}),N.jsx("option",{value:"javascript",children:"JavaScript"})]}),N.jsx("div",{className:"code-editor",children:N.jsx(tS,{height:"400px",language:l,theme:"vs-dark",value:d,onChange:G=>m(G||""),options:{fontSize:18,automaticLayout:!0}})}),N.jsxs("div",{className:"custom-test",children:[N.jsx("p",{children:N.jsx("strong",{children:"Custom Test Cases:"})}),N.jsx("textarea",{placeholder:"Enter custom test cases...",value:b,onChange:G=>I(G.target.value)})]}),N.jsxs("div",{className:"controls",children:[N.jsx("button",{className:"btn run-btn",onClick:U,children:"Run"}),N.jsx("button",{className:"btn submit-btn",onClick:P,children:"Submit"})]}),N.jsxs("div",{className:"output-container",children:[N.jsx("h3",{children:"Output:"}),N.jsx("pre",{children:g})]})]})]}):N.jsx("p",{children:"Loading problem details..."})})},T1=()=>{const{port:n,hostIP:e}=fa(),t=Pg(),[i,a]=z.useState([]),[l,u]=z.useState(!0),[d,m]=z.useState(null);z.useEffect(()=>{(async()=>{try{const I=await fetch(`http://${e}:${n}/submissions`);if(!I.ok)throw new Error("Failed to fetch submissions");const P=await I.json();a(P),localStorage.setItem("submissions",JSON.stringify(P))}catch(I){m(I.message)}finally{u(!1)}})()},[]);const g=b=>{const I=b.split(/\s+/);return I.slice(0,10).join(" ")+(I.length>10?"...":"")},v=b=>{t(`/submission/${b}`)};return N.jsxs("div",{className:"overflow-auto",children:[N.jsx("h2",{className:"problemList-title",children:"Your Submissions"}),l&&N.jsx("p",{className:"text-white",children:"Loading submissions..."}),d&&N.jsxs("p",{className:"text-danger",children:["Error: ",d]}),N.jsx("ul",{className:"list-group",children:i.map((b,I)=>N.jsx("li",{children:N.jsxs("div",{className:"pli cursor-pointer",onClick:()=>v(I),children:[N.jsxs("div",{className:"problem-content",children:[N.jsxs("strong",{children:["Language: ",b.language]}),N.jsxs("div",{className:"difficulty",children:["Time: ",b.timestamp]}),N.jsx("div",{className:"tags",children:N.jsxs("span",{className:"tag",children:["IP: ",b.ip]})})]}),N.jsx("div",{className:"text-white mt-2",children:N.jsx("code",{className:"bg-dark p-2 rounded d-block",children:g(b.code)})})]})},I))})]})},w1=()=>{const{id:n}=uE(),e=Pg(),i=JSON.parse(localStorage.getItem("submissions")||"[]")[parseInt(n||"-1")];return i?N.jsxs("div",{className:"p-4 bg-dark text-white min-vh-100",children:[N.jsx("button",{className:"btn btn-secondary mb-3",onClick:()=>e(-1),children:" Back"}),N.jsx("h2",{className:"mb-3",children:"Submission Details"}),N.jsxs("p",{children:[N.jsx("strong",{children:"Language:"})," ",i.language]}),N.jsxs("p",{children:[N.jsx("strong",{children:"IP:"})," ",i.ip]}),N.jsxs("p",{children:[N.jsx("strong",{children:"Timestamp:"})," ",i.timestamp]}),N.jsx("pre",{className:"bg-black p-3 rounded mt-3 text-white",children:i.code})]}):N.jsx("div",{className:"text-white",children:"Submission not found"})},A1=()=>{};var TA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},I1=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],d=n[t++],m=((a&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},lS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,d=u?n[a+1]:0,m=a+2<n.length,g=m?n[a+2]:0,v=l>>2,b=(l&3)<<4|d>>4;let I=(d&15)<<2|g>>6,P=g&63;m||(P=64,u||(I=64)),i.push(t[v],t[b],t[I],t[P])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(oS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):I1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const b=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||b==null)throw new S1;const I=l<<2|d>>4;if(i.push(I),g!==64){const P=d<<4&240|g>>2;if(i.push(P),b!==64){const U=g<<6&192|b;i.push(U)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class S1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const R1=function(n){const e=oS(n);return lS.encodeByteArray(e,!0)},rg=function(n){return R1(n).replace(/\./g,"")},pE=function(n){try{return lS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sg(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!C1(t)||(n[t]=sg(n[t],e[t]));return n}function C1(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=()=>uS().__FIREBASE_DEFAULTS__,x1=()=>{if(typeof process>"u"||typeof TA>"u")return;const n=TA.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},N1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&pE(n[1]);return e&&JSON.parse(e)},gE=()=>{try{return A1()||D1()||x1()||N1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cS=()=>{var n;return(n=gE())===null||n===void 0?void 0:n.config},P1=n=>{var e;return(e=gE())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[rg(JSON.stringify(t)),rg(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function V1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function _E(){var n;const e=(n=gE())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M1(){return typeof window<"u"||hS()}function hS(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function L1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fS(){const n=nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function mS(){return!_E()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xf(){try{return typeof indexedDB=="object"}catch{return!1}}function U1(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="FirebaseError";class zi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=j1,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ku.prototype.create)}}class Ku{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?B1(l,i):"Error",d=`${this.serviceName}: ${u} (${a}).`;return new zi(a,d,i)}}function B1(n,e){return n.replace(F1,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const F1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function z1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _l(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],u=e[a];if(AA(l)&&AA(u)){if(!_l(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function AA(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function sh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function uf(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function pS(n,e){const t=new q1(n,e);return t.subscribe.bind(t)}class q1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");H1(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Zy),a.error===void 0&&(a.error=Zy),a.complete===void 0&&(a.complete=Zy);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function H1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Zy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(n){return n&&n._delegate?n._delegate:n}class oa{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new O1;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(K1(e))try{this.getOrInitializeService({instanceIdentifier:Eu})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Eu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eu){return this.instances.has(e)}getOptions(e=Eu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&u.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&e(u,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:G1(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Eu){return this.component?this.component.multipleInstances?e:Eu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function G1(n){return n===Eu?void 0:n}function K1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=[];var st;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(st||(st={}));const _S={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},Q1=st.INFO,W1={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},Y1=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=W1[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vg{constructor(e){this.name=e,this._logLevel=Q1,this._logHandler=Y1,this._userLogHandler=null,vE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_S[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}function X1(n){vE.forEach(e=>{e.setLogLevel(n)})}function Z1(n,e){for(const t of vE){let i=null;e&&e.level&&(i=_S[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(a,l,...u)=>{const d=u.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");l>=(i??a.logLevel)&&n({level:st[l].toLowerCase(),message:d,args:u,type:a.name})}}}const J1=(n,e)=>e.some(t=>n instanceof t);let IA,SA;function ek(){return IA||(IA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tk(){return SA||(SA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yS=new WeakMap,Ev=new WeakMap,vS=new WeakMap,Jy=new WeakMap,EE=new WeakMap;function nk(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(hl(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&yS.set(t,n)}).catch(()=>{}),EE.set(e,n),e}function ik(n){if(Ev.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Ev.set(n,e)}let bv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ev.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return hl(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function rk(n){bv=n(bv)}function sk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(ev(this),e,...t);return vS.set(i,e.sort?e.sort():[e]),hl(i)}:tk().includes(n)?function(...e){return n.apply(ev(this),e),hl(yS.get(this))}:function(...e){return hl(n.apply(ev(this),e))}}function ak(n){return typeof n=="function"?sk(n):(n instanceof IDBTransaction&&ik(n),J1(n,ek())?new Proxy(n,bv):n)}function hl(n){if(n instanceof IDBRequest)return nk(n);if(Jy.has(n))return Jy.get(n);const e=ak(n);return e!==n&&(Jy.set(n,e),EE.set(e,n)),e}const ev=n=>EE.get(n);function ok(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),d=hl(u);return i&&u.addEventListener("upgradeneeded",m=>{i(hl(u.result),m.oldVersion,m.newVersion,hl(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const lk=["get","getKey","getAll","getAllKeys","count"],uk=["put","add","delete","clear"],tv=new Map;function RA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tv.get(e))return tv.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=uk.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||lk.includes(t)))return;const l=async function(u,...d){const m=this.transaction(u,a?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&m.done]))[0]};return tv.set(e,l),l}rk(n=>({...n,get:(e,t,i)=>RA(e,t)||n.get(e,t,i),has:(e,t)=>!!RA(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(hk(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function hk(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ag="@firebase/app",Tv="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new Vg("@firebase/app"),dk="@firebase/app-compat",fk="@firebase/analytics-compat",mk="@firebase/analytics",pk="@firebase/app-check-compat",gk="@firebase/app-check",_k="@firebase/auth",yk="@firebase/auth-compat",vk="@firebase/database",Ek="@firebase/data-connect",bk="@firebase/database-compat",Tk="@firebase/functions",wk="@firebase/functions-compat",Ak="@firebase/installations",Ik="@firebase/installations-compat",Sk="@firebase/messaging",Rk="@firebase/messaging-compat",Ck="@firebase/performance",Dk="@firebase/performance-compat",xk="@firebase/remote-config",Nk="@firebase/remote-config-compat",Pk="@firebase/storage",Ok="@firebase/storage-compat",kk="@firebase/firestore",Vk="@firebase/vertexai",Mk="@firebase/firestore-compat",Lk="firebase",Uk="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl="[DEFAULT]",jk={[ag]:"fire-core",[dk]:"fire-core-compat",[mk]:"fire-analytics",[fk]:"fire-analytics-compat",[gk]:"fire-app-check",[pk]:"fire-app-check-compat",[_k]:"fire-auth",[yk]:"fire-auth-compat",[vk]:"fire-rtdb",[Ek]:"fire-data-connect",[bk]:"fire-rtdb-compat",[Tk]:"fire-fn",[wk]:"fire-fn-compat",[Ak]:"fire-iid",[Ik]:"fire-iid-compat",[Sk]:"fire-fcm",[Rk]:"fire-fcm-compat",[Ck]:"fire-perf",[Dk]:"fire-perf-compat",[xk]:"fire-rc",[Nk]:"fire-rc-compat",[Pk]:"fire-gcs",[Ok]:"fire-gcs-compat",[kk]:"fire-fst",[Mk]:"fire-fst-compat",[Vk]:"fire-vertex","fire-js":"fire-js",[Lk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=new Map,fh=new Map,mh=new Map;function Nf(n,e){try{n.container.addComponent(e)}catch(t){Za.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ES(n,e){n.container.addOrOverwriteComponent(e)}function El(n){const e=n.name;if(mh.has(e))return Za.debug(`There were multiple attempts to register component ${e}.`),!1;mh.set(e,n);for(const t of vl.values())Nf(t,n);for(const t of fh.values())Nf(t,n);return!0}function bS(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Bk(n,e,t=yl){bS(n,e).clearInstance(t)}function TS(n){return n.options!==void 0}function Kt(n){return n==null?!1:n.settings!==void 0}function Fk(){mh.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new Ku("app","Firebase",zk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wS=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new oa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(n,e){const t=pE(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class qk extends wS{constructor(e,t,i,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,u={name:i,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,u,a);else{const d=e;super(d.options,u,a)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:l},t),this._serverConfig.authIdToken&&CA(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&CA(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Ss(ag,Tv,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){TE(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Yr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=Uk;function bE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:yl,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw Yr.create("bad-app-name",{appName:String(a)});if(t||(t=cS()),!t)throw Yr.create("no-options");const l=vl.get(a);if(l){if(_l(t,l.options)&&_l(i,l.config))return l;throw Yr.create("duplicate-app",{appName:a})}const u=new gS(a);for(const m of mh.values())u.addComponent(m);const d=new wS(t,i,u);return vl.set(a,d),d}function Hk(n,e){if(M1()&&!hS())throw Yr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;TS(n)?t=n.options:t=n;const i=Object.assign(Object.assign({},e),t);i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const a=g=>[...g].reduce((v,b)=>Math.imul(31,v)+b.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Yr.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(i)),u=fh.get(l);if(u)return u.incRefCount(e.releaseOnDeref),u;const d=new gS(l);for(const g of mh.values())d.addComponent(g);const m=new qk(t,e,l,d);return fh.set(l,m),m}function $k(n=yl){const e=vl.get(n);if(!e&&n===yl&&cS())return bE();if(!e)throw Yr.create("no-app",{appName:n});return e}function Gk(){return Array.from(vl.values())}async function TE(n){let e=!1;const t=n.name;vl.has(t)?(e=!0,vl.delete(t)):fh.has(t)&&n.decRefCount()<=0&&(fh.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)}function Ss(n,e,t){var i;let a=(i=jk[n])!==null&&i!==void 0?i:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Za.warn(d.join(" "));return}El(new oa(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}function AS(n,e){if(n!==null&&typeof n!="function")throw Yr.create("invalid-log-argument");Z1(n,e)}function IS(n){X1(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk="firebase-heartbeat-database",Qk=1,Pf="firebase-heartbeat-store";let nv=null;function SS(){return nv||(nv=ok(Kk,Qk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Pf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Yr.create("idb-open",{originalErrorMessage:n.message})})),nv}async function Wk(n){try{const t=(await SS()).transaction(Pf),i=await t.objectStore(Pf).get(RS(n));return await t.done,i}catch(e){if(e instanceof zi)Za.warn(e.message);else{const t=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Za.warn(t.message)}}}async function DA(n,e){try{const i=(await SS()).transaction(Pf,"readwrite");await i.objectStore(Pf).put(e,RS(n)),await i.done}catch(t){if(t instanceof zi)Za.warn(t.message);else{const i=Yr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Za.warn(i.message)}}}function RS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=1024,Xk=30;class Zk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new eV(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=xA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>Xk){const u=tV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Za.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=xA(),{heartbeatsToSend:i,unsentEntries:a}=Jk(this._heartbeatsCache.heartbeats),l=rg(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Za.warn(t),""}}}function xA(){return new Date().toISOString().substring(0,10)}function Jk(n,e=Yk){const t=[];let i=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),NA(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),NA(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class eV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xf()?U1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Wk(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return DA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return DA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function NA(n){return rg(JSON.stringify({version:2,heartbeats:n})).length}function tV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(n){El(new oa("platform-logger",e=>new ck(e),"PRIVATE")),El(new oa("heartbeat",e=>new Zk(e),"PRIVATE")),Ss(ag,Tv,n),Ss(ag,Tv,"esm2017"),Ss("fire-js","")}nV("");const iV=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:zi,SDK_VERSION:Nl,_DEFAULT_ENTRY_NAME:yl,_addComponent:Nf,_addOrOverwriteComponent:ES,_apps:vl,_clearComponents:Fk,_components:mh,_getProvider:bS,_isFirebaseApp:TS,_isFirebaseServerApp:Kt,_registerComponent:El,_removeServiceInstance:Bk,_serverApps:fh,deleteApp:TE,getApp:$k,getApps:Gk,initializeApp:bE,initializeServerApp:Hk,onLog:AS,registerVersion:Ss,setLogLevel:IS},Symbol.toStringTag,{value:"Module"}));var PA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dl,CS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,O){function x(){}x.prototype=O.prototype,L.D=O.prototype,L.prototype=new x,L.prototype.constructor=L,L.C=function(k,B,K){for(var M=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)M[Rt-2]=arguments[Rt];return O.prototype[B].apply(k,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(L,O,x){x||(x=0);var k=Array(16);if(typeof O=="string")for(var B=0;16>B;++B)k[B]=O.charCodeAt(x++)|O.charCodeAt(x++)<<8|O.charCodeAt(x++)<<16|O.charCodeAt(x++)<<24;else for(B=0;16>B;++B)k[B]=O[x++]|O[x++]<<8|O[x++]<<16|O[x++]<<24;O=L.g[0],x=L.g[1],B=L.g[2];var K=L.g[3],M=O+(K^x&(B^K))+k[0]+3614090360&4294967295;O=x+(M<<7&4294967295|M>>>25),M=K+(B^O&(x^B))+k[1]+3905402710&4294967295,K=O+(M<<12&4294967295|M>>>20),M=B+(x^K&(O^x))+k[2]+606105819&4294967295,B=K+(M<<17&4294967295|M>>>15),M=x+(O^B&(K^O))+k[3]+3250441966&4294967295,x=B+(M<<22&4294967295|M>>>10),M=O+(K^x&(B^K))+k[4]+4118548399&4294967295,O=x+(M<<7&4294967295|M>>>25),M=K+(B^O&(x^B))+k[5]+1200080426&4294967295,K=O+(M<<12&4294967295|M>>>20),M=B+(x^K&(O^x))+k[6]+2821735955&4294967295,B=K+(M<<17&4294967295|M>>>15),M=x+(O^B&(K^O))+k[7]+4249261313&4294967295,x=B+(M<<22&4294967295|M>>>10),M=O+(K^x&(B^K))+k[8]+1770035416&4294967295,O=x+(M<<7&4294967295|M>>>25),M=K+(B^O&(x^B))+k[9]+2336552879&4294967295,K=O+(M<<12&4294967295|M>>>20),M=B+(x^K&(O^x))+k[10]+4294925233&4294967295,B=K+(M<<17&4294967295|M>>>15),M=x+(O^B&(K^O))+k[11]+2304563134&4294967295,x=B+(M<<22&4294967295|M>>>10),M=O+(K^x&(B^K))+k[12]+1804603682&4294967295,O=x+(M<<7&4294967295|M>>>25),M=K+(B^O&(x^B))+k[13]+4254626195&4294967295,K=O+(M<<12&4294967295|M>>>20),M=B+(x^K&(O^x))+k[14]+2792965006&4294967295,B=K+(M<<17&4294967295|M>>>15),M=x+(O^B&(K^O))+k[15]+1236535329&4294967295,x=B+(M<<22&4294967295|M>>>10),M=O+(B^K&(x^B))+k[1]+4129170786&4294967295,O=x+(M<<5&4294967295|M>>>27),M=K+(x^B&(O^x))+k[6]+3225465664&4294967295,K=O+(M<<9&4294967295|M>>>23),M=B+(O^x&(K^O))+k[11]+643717713&4294967295,B=K+(M<<14&4294967295|M>>>18),M=x+(K^O&(B^K))+k[0]+3921069994&4294967295,x=B+(M<<20&4294967295|M>>>12),M=O+(B^K&(x^B))+k[5]+3593408605&4294967295,O=x+(M<<5&4294967295|M>>>27),M=K+(x^B&(O^x))+k[10]+38016083&4294967295,K=O+(M<<9&4294967295|M>>>23),M=B+(O^x&(K^O))+k[15]+3634488961&4294967295,B=K+(M<<14&4294967295|M>>>18),M=x+(K^O&(B^K))+k[4]+3889429448&4294967295,x=B+(M<<20&4294967295|M>>>12),M=O+(B^K&(x^B))+k[9]+568446438&4294967295,O=x+(M<<5&4294967295|M>>>27),M=K+(x^B&(O^x))+k[14]+3275163606&4294967295,K=O+(M<<9&4294967295|M>>>23),M=B+(O^x&(K^O))+k[3]+4107603335&4294967295,B=K+(M<<14&4294967295|M>>>18),M=x+(K^O&(B^K))+k[8]+1163531501&4294967295,x=B+(M<<20&4294967295|M>>>12),M=O+(B^K&(x^B))+k[13]+2850285829&4294967295,O=x+(M<<5&4294967295|M>>>27),M=K+(x^B&(O^x))+k[2]+4243563512&4294967295,K=O+(M<<9&4294967295|M>>>23),M=B+(O^x&(K^O))+k[7]+1735328473&4294967295,B=K+(M<<14&4294967295|M>>>18),M=x+(K^O&(B^K))+k[12]+2368359562&4294967295,x=B+(M<<20&4294967295|M>>>12),M=O+(x^B^K)+k[5]+4294588738&4294967295,O=x+(M<<4&4294967295|M>>>28),M=K+(O^x^B)+k[8]+2272392833&4294967295,K=O+(M<<11&4294967295|M>>>21),M=B+(K^O^x)+k[11]+1839030562&4294967295,B=K+(M<<16&4294967295|M>>>16),M=x+(B^K^O)+k[14]+4259657740&4294967295,x=B+(M<<23&4294967295|M>>>9),M=O+(x^B^K)+k[1]+2763975236&4294967295,O=x+(M<<4&4294967295|M>>>28),M=K+(O^x^B)+k[4]+1272893353&4294967295,K=O+(M<<11&4294967295|M>>>21),M=B+(K^O^x)+k[7]+4139469664&4294967295,B=K+(M<<16&4294967295|M>>>16),M=x+(B^K^O)+k[10]+3200236656&4294967295,x=B+(M<<23&4294967295|M>>>9),M=O+(x^B^K)+k[13]+681279174&4294967295,O=x+(M<<4&4294967295|M>>>28),M=K+(O^x^B)+k[0]+3936430074&4294967295,K=O+(M<<11&4294967295|M>>>21),M=B+(K^O^x)+k[3]+3572445317&4294967295,B=K+(M<<16&4294967295|M>>>16),M=x+(B^K^O)+k[6]+76029189&4294967295,x=B+(M<<23&4294967295|M>>>9),M=O+(x^B^K)+k[9]+3654602809&4294967295,O=x+(M<<4&4294967295|M>>>28),M=K+(O^x^B)+k[12]+3873151461&4294967295,K=O+(M<<11&4294967295|M>>>21),M=B+(K^O^x)+k[15]+530742520&4294967295,B=K+(M<<16&4294967295|M>>>16),M=x+(B^K^O)+k[2]+3299628645&4294967295,x=B+(M<<23&4294967295|M>>>9),M=O+(B^(x|~K))+k[0]+4096336452&4294967295,O=x+(M<<6&4294967295|M>>>26),M=K+(x^(O|~B))+k[7]+1126891415&4294967295,K=O+(M<<10&4294967295|M>>>22),M=B+(O^(K|~x))+k[14]+2878612391&4294967295,B=K+(M<<15&4294967295|M>>>17),M=x+(K^(B|~O))+k[5]+4237533241&4294967295,x=B+(M<<21&4294967295|M>>>11),M=O+(B^(x|~K))+k[12]+1700485571&4294967295,O=x+(M<<6&4294967295|M>>>26),M=K+(x^(O|~B))+k[3]+2399980690&4294967295,K=O+(M<<10&4294967295|M>>>22),M=B+(O^(K|~x))+k[10]+4293915773&4294967295,B=K+(M<<15&4294967295|M>>>17),M=x+(K^(B|~O))+k[1]+2240044497&4294967295,x=B+(M<<21&4294967295|M>>>11),M=O+(B^(x|~K))+k[8]+1873313359&4294967295,O=x+(M<<6&4294967295|M>>>26),M=K+(x^(O|~B))+k[15]+4264355552&4294967295,K=O+(M<<10&4294967295|M>>>22),M=B+(O^(K|~x))+k[6]+2734768916&4294967295,B=K+(M<<15&4294967295|M>>>17),M=x+(K^(B|~O))+k[13]+1309151649&4294967295,x=B+(M<<21&4294967295|M>>>11),M=O+(B^(x|~K))+k[4]+4149444226&4294967295,O=x+(M<<6&4294967295|M>>>26),M=K+(x^(O|~B))+k[11]+3174756917&4294967295,K=O+(M<<10&4294967295|M>>>22),M=B+(O^(K|~x))+k[2]+718787259&4294967295,B=K+(M<<15&4294967295|M>>>17),M=x+(K^(B|~O))+k[9]+3951481745&4294967295,L.g[0]=L.g[0]+O&4294967295,L.g[1]=L.g[1]+(B+(M<<21&4294967295|M>>>11))&4294967295,L.g[2]=L.g[2]+B&4294967295,L.g[3]=L.g[3]+K&4294967295}i.prototype.u=function(L,O){O===void 0&&(O=L.length);for(var x=O-this.blockSize,k=this.B,B=this.h,K=0;K<O;){if(B==0)for(;K<=x;)a(this,L,K),K+=this.blockSize;if(typeof L=="string"){for(;K<O;)if(k[B++]=L.charCodeAt(K++),B==this.blockSize){a(this,k),B=0;break}}else for(;K<O;)if(k[B++]=L[K++],B==this.blockSize){a(this,k),B=0;break}}this.h=B,this.o+=O},i.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var O=1;O<L.length-8;++O)L[O]=0;var x=8*this.o;for(O=L.length-8;O<L.length;++O)L[O]=x&255,x/=256;for(this.u(L),L=Array(16),O=x=0;4>O;++O)for(var k=0;32>k;k+=8)L[x++]=this.g[O]>>>k&255;return L};function l(L,O){var x=d;return Object.prototype.hasOwnProperty.call(x,L)?x[L]:x[L]=O(L)}function u(L,O){this.h=O;for(var x=[],k=!0,B=L.length-1;0<=B;B--){var K=L[B]|0;k&&K==O||(x[B]=K,k=!1)}this.g=x}var d={};function m(L){return-128<=L&&128>L?l(L,function(O){return new u([O|0],0>O?-1:0)}):new u([L|0],0>L?-1:0)}function g(L){if(isNaN(L)||!isFinite(L))return b;if(0>L)return j(g(-L));for(var O=[],x=1,k=0;L>=x;k++)O[k]=L/x|0,x*=4294967296;return new u(O,0)}function v(L,O){if(L.length==0)throw Error("number format error: empty string");if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(L.charAt(0)=="-")return j(v(L.substring(1),O));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=g(Math.pow(O,8)),k=b,B=0;B<L.length;B+=8){var K=Math.min(8,L.length-B),M=parseInt(L.substring(B,B+K),O);8>K?(K=g(Math.pow(O,K)),k=k.j(K).add(g(M))):(k=k.j(x),k=k.add(g(M)))}return k}var b=m(0),I=m(1),P=m(16777216);n=u.prototype,n.m=function(){if(G(this))return-j(this).m();for(var L=0,O=1,x=0;x<this.g.length;x++){var k=this.i(x);L+=(0<=k?k:4294967296+k)*O,O*=4294967296}return L},n.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(U(this))return"0";if(G(this))return"-"+j(this).toString(L);for(var O=g(Math.pow(L,6)),x=this,k="";;){var B=_e(x,O).g;x=Z(x,B.j(O));var K=((0<x.g.length?x.g[0]:x.h)>>>0).toString(L);if(x=B,U(x))return K+k;for(;6>K.length;)K="0"+K;k=K+k}},n.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function U(L){if(L.h!=0)return!1;for(var O=0;O<L.g.length;O++)if(L.g[O]!=0)return!1;return!0}function G(L){return L.h==-1}n.l=function(L){return L=Z(this,L),G(L)?-1:U(L)?0:1};function j(L){for(var O=L.g.length,x=[],k=0;k<O;k++)x[k]=~L.g[k];return new u(x,~L.h).add(I)}n.abs=function(){return G(this)?j(this):this},n.add=function(L){for(var O=Math.max(this.g.length,L.g.length),x=[],k=0,B=0;B<=O;B++){var K=k+(this.i(B)&65535)+(L.i(B)&65535),M=(K>>>16)+(this.i(B)>>>16)+(L.i(B)>>>16);k=M>>>16,K&=65535,M&=65535,x[B]=M<<16|K}return new u(x,x[x.length-1]&-2147483648?-1:0)};function Z(L,O){return L.add(j(O))}n.j=function(L){if(U(this)||U(L))return b;if(G(this))return G(L)?j(this).j(j(L)):j(j(this).j(L));if(G(L))return j(this.j(j(L)));if(0>this.l(P)&&0>L.l(P))return g(this.m()*L.m());for(var O=this.g.length+L.g.length,x=[],k=0;k<2*O;k++)x[k]=0;for(k=0;k<this.g.length;k++)for(var B=0;B<L.g.length;B++){var K=this.i(k)>>>16,M=this.i(k)&65535,Rt=L.i(B)>>>16,xe=L.i(B)&65535;x[2*k+2*B]+=M*xe,ie(x,2*k+2*B),x[2*k+2*B+1]+=K*xe,ie(x,2*k+2*B+1),x[2*k+2*B+1]+=M*Rt,ie(x,2*k+2*B+1),x[2*k+2*B+2]+=K*Rt,ie(x,2*k+2*B+2)}for(k=0;k<O;k++)x[k]=x[2*k+1]<<16|x[2*k];for(k=O;k<2*O;k++)x[k]=0;return new u(x,0)};function ie(L,O){for(;(L[O]&65535)!=L[O];)L[O+1]+=L[O]>>>16,L[O]&=65535,O++}function se(L,O){this.g=L,this.h=O}function _e(L,O){if(U(O))throw Error("division by zero");if(U(L))return new se(b,b);if(G(L))return O=_e(j(L),O),new se(j(O.g),j(O.h));if(G(O))return O=_e(L,j(O)),new se(j(O.g),O.h);if(30<L.g.length){if(G(L)||G(O))throw Error("slowDivide_ only works with positive integers.");for(var x=I,k=O;0>=k.l(L);)x=pe(x),k=pe(k);var B=Re(x,1),K=Re(k,1);for(k=Re(k,2),x=Re(x,2);!U(k);){var M=K.add(k);0>=M.l(L)&&(B=B.add(x),K=M),k=Re(k,1),x=Re(x,1)}return O=Z(L,B.j(O)),new se(B,O)}for(B=b;0<=L.l(O);){for(x=Math.max(1,Math.floor(L.m()/O.m())),k=Math.ceil(Math.log(x)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),K=g(x),M=K.j(O);G(M)||0<M.l(L);)x-=k,K=g(x),M=K.j(O);U(K)&&(K=I),B=B.add(K),L=Z(L,M)}return new se(B,L)}n.A=function(L){return _e(this,L).h},n.and=function(L){for(var O=Math.max(this.g.length,L.g.length),x=[],k=0;k<O;k++)x[k]=this.i(k)&L.i(k);return new u(x,this.h&L.h)},n.or=function(L){for(var O=Math.max(this.g.length,L.g.length),x=[],k=0;k<O;k++)x[k]=this.i(k)|L.i(k);return new u(x,this.h|L.h)},n.xor=function(L){for(var O=Math.max(this.g.length,L.g.length),x=[],k=0;k<O;k++)x[k]=this.i(k)^L.i(k);return new u(x,this.h^L.h)};function pe(L){for(var O=L.g.length+1,x=[],k=0;k<O;k++)x[k]=L.i(k)<<1|L.i(k-1)>>>31;return new u(x,L.h)}function Re(L,O){var x=O>>5;O%=32;for(var k=L.g.length-x,B=[],K=0;K<k;K++)B[K]=0<O?L.i(K+x)>>>O|L.i(K+x+1)<<32-O:L.i(K+x);return new u(B,L.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,CS=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=v,dl=u}).apply(typeof PA<"u"?PA:typeof self<"u"?self:typeof window<"u"?window:{});var Np=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DS,cf,xS,zp,wv,NS,PS,OS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,T){return h==Array.prototype||h==Object.prototype||(h[y]=T.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Np=="object"&&Np];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var T=i;h=h.split(".");for(var C=0;C<h.length-1;C++){var W=h[C];if(!(W in T))break e;T=T[W]}h=h[h.length-1],C=T[h],y=y(C),y!=C&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var T=0,C=!1,W={next:function(){if(!C&&T<h.length){var ee=T++;return{value:y(ee,h[ee]),done:!1}}return C=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}a("Array.prototype.values",function(h){return h||function(){return l(this,function(y,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function g(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function v(h,y,T){return h.call.apply(h.bind,arguments)}function b(h,y,T){if(!h)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,C),h.apply(y,W)}}return function(){return h.apply(y,arguments)}}function I(h,y,T){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,I.apply(null,arguments)}function P(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var C=T.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function U(h,y){function T(){}T.prototype=y.prototype,h.aa=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(C,W,ee){for(var we=Array(arguments.length-2),at=2;at<arguments.length;at++)we[at-2]=arguments[at];return y.prototype[W].apply(C,we)}}function G(h){const y=h.length;if(0<y){const T=Array(y);for(let C=0;C<y;C++)T[C]=h[C];return T}return[]}function j(h,y){for(let T=1;T<arguments.length;T++){const C=arguments[T];if(m(C)){const W=h.length||0,ee=C.length||0;h.length=W+ee;for(let we=0;we<ee;we++)h[W+we]=C[we]}else h.push(C)}}class Z{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ie(h){return/^[\s\xa0]*$/.test(h)}function se(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function _e(h){return _e[" "](h),h}_e[" "]=function(){};var pe=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function Re(h,y,T){for(const C in h)y.call(T,h[C],C,h)}function L(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function O(h){const y={};for(const T in h)y[T]=h[T];return y}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(h,y){let T,C;for(let W=1;W<arguments.length;W++){C=arguments[W];for(T in C)h[T]=C[T];for(let ee=0;ee<x.length;ee++)T=x[ee],Object.prototype.hasOwnProperty.call(C,T)&&(h[T]=C[T])}}function B(h){var y=1;h=h.split(":");const T=[];for(;0<y&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function K(h){d.setTimeout(()=>{throw h},0)}function M(){var h=Je;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Rt{constructor(){this.h=this.g=null}add(y,T){const C=xe.get();C.set(y,T),this.h?this.h.next=C:this.g=C,this.h=C}}var xe=new Z(()=>new de,h=>h.reset());class de{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ke,Pe=!1,Je=new Rt,D=()=>{const h=d.Promise.resolve(void 0);ke=()=>{h.then(re)}};var re=()=>{for(var h;h=M();){try{h.h.call(h.g)}catch(T){K(T)}var y=xe;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}Pe=!1};function Ae(){this.s=this.s,this.C=this.C}Ae.prototype.s=!1,Ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};d.addEventListener("test",T,y),d.removeEventListener("test",T,y)}catch{}return h}();function Be(h,y){if(be.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(pe){e:{try{_e(y.nodeName);var W=!0;break e}catch{}W=!1}W||(y=null)}}else T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement);this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Fe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Be.aa.h.call(this)}}U(Be,be);var Fe={2:"touch",3:"pen",4:"mouse"};Be.prototype.h=function(){Be.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var zt="closure_listenable_"+(1e6*Math.random()|0),Te=0;function xt(h,y,T,C,W){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!C,this.ha=W,this.key=++Te,this.da=this.fa=!1}function yt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ni(h){this.src=h,this.g={},this.h=0}ni.prototype.add=function(h,y,T,C,W){var ee=h.toString();h=this.g[ee],h||(h=this.g[ee]=[],this.h++);var we=Bn(h,y,C,W);return-1<we?(y=h[we],T||(y.fa=!1)):(y=new xt(y,this.src,ee,!!C,W),y.fa=T,h.push(y)),y};function Zr(h,y){var T=y.type;if(T in h.g){var C=h.g[T],W=Array.prototype.indexOf.call(C,y,void 0),ee;(ee=0<=W)&&Array.prototype.splice.call(C,W,1),ee&&(yt(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Bn(h,y,T,C){for(var W=0;W<h.length;++W){var ee=h[W];if(!ee.da&&ee.listener==y&&ee.capture==!!T&&ee.ha==C)return W}return-1}var Jr="closure_lm_"+(1e6*Math.random()|0),$i={};function _i(h,y,T,C,W){if(Array.isArray(y)){for(var ee=0;ee<y.length;ee++)_i(h,y[ee],T,C,W);return null}return T=ar(T),h&&h[zt]?h.K(y,T,g(C)?!!C.capture:!1,W):Ul(h,y,T,!1,C,W)}function Ul(h,y,T,C,W,ee){if(!y)throw Error("Invalid event type");var we=g(W)?!!W.capture:!!W,at=jl(h);if(at||(h[Jr]=at=new ni(h)),T=at.add(y,T,C,we,ee),T.proxy)return T;if(C=uo(),T.proxy=C,C.src=h,C.listener=T,h.addEventListener)Ie||(W=we),W===void 0&&(W=!1),h.addEventListener(y.toString(),C,W);else if(h.attachEvent)h.attachEvent(ho(y.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return T}function uo(){function h(T){return y.call(h.src,h.listener,T)}const y=Xh;return h}function co(h,y,T,C,W){if(Array.isArray(y))for(var ee=0;ee<y.length;ee++)co(h,y[ee],T,C,W);else C=g(C)?!!C.capture:!!C,T=ar(T),h&&h[zt]?(h=h.i,y=String(y).toString(),y in h.g&&(ee=h.g[y],T=Bn(ee,T,C,W),-1<T&&(yt(ee[T]),Array.prototype.splice.call(ee,T,1),ee.length==0&&(delete h.g[y],h.h--)))):h&&(h=jl(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Bn(y,T,C,W)),(T=-1<h?y[h]:null)&&ma(T))}function ma(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[zt])Zr(y.i,h);else{var T=h.type,C=h.proxy;y.removeEventListener?y.removeEventListener(T,C,h.capture):y.detachEvent?y.detachEvent(ho(T),C):y.addListener&&y.removeListener&&y.removeListener(C),(T=jl(y))?(Zr(T,h),T.h==0&&(T.src=null,y[Jr]=null)):yt(h)}}}function ho(h){return h in $i?$i[h]:$i[h]="on"+h}function Xh(h,y){if(h.da)h=!0;else{y=new Be(y,this);var T=h.listener,C=h.ha||h.src;h.fa&&ma(h),h=T.call(C,y)}return h}function jl(h){return h=h[Jr],h instanceof ni?h:null}var Nn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ar(h){return typeof h=="function"?h:(h[Nn]||(h[Nn]=function(y){return h.handleEvent(y)}),h[Nn])}function sn(){Ae.call(this),this.i=new ni(this),this.M=this,this.F=null}U(sn,Ae),sn.prototype[zt]=!0,sn.prototype.removeEventListener=function(h,y,T,C){co(this,h,y,T,C)};function qt(h,y){var T,C=h.F;if(C)for(T=[];C;C=C.F)T.push(C);if(h=h.M,C=y.type||y,typeof y=="string")y=new be(y,h);else if(y instanceof be)y.target=y.target||h;else{var W=y;y=new be(C,h),k(y,W)}if(W=!0,T)for(var ee=T.length-1;0<=ee;ee--){var we=y.g=T[ee];W=yi(we,C,!0,y)&&W}if(we=y.g=h,W=yi(we,C,!0,y)&&W,W=yi(we,C,!1,y)&&W,T)for(ee=0;ee<T.length;ee++)we=y.g=T[ee],W=yi(we,C,!1,y)&&W}sn.prototype.N=function(){if(sn.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var T=h.g[y],C=0;C<T.length;C++)yt(T[C]);delete h.g[y],h.h--}}this.F=null},sn.prototype.K=function(h,y,T,C){return this.i.add(String(h),y,!1,T,C)},sn.prototype.L=function(h,y,T,C){return this.i.add(String(h),y,!0,T,C)};function yi(h,y,T,C){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var W=!0,ee=0;ee<y.length;++ee){var we=y[ee];if(we&&!we.da&&we.capture==T){var at=we.listener,vn=we.ha||we.src;we.fa&&Zr(h.i,we),W=at.call(vn,C)!==!1&&W}}return W&&!C.defaultPrevented}function es(h,y,T){if(typeof h=="function")T&&(h=I(h,T));else if(h&&typeof h.handleEvent=="function")h=I(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function Ds(h){h.g=es(()=>{h.g=null,h.i&&(h.i=!1,Ds(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Zh extends Ae{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ds(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ts(h){Ae.call(this),this.h=h,this.g={}}U(ts,Ae);var xs=[];function Fn(h){Re(h.g,function(y,T){this.g.hasOwnProperty(T)&&ma(y)},h),h.g={}}ts.prototype.N=function(){ts.aa.N.call(this),Fn(this)},ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bl=d.JSON.stringify,Sr=d.JSON.parse,ii=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Fl(){}Fl.prototype.h=null;function zl(h){return h.h||(h.h=h.i())}function pa(){}var or={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ns(){be.call(this,"d")}U(ns,be);function lr(){be.call(this,"c")}U(lr,be);var Gi={},Ns=null;function fo(){return Ns=Ns||new sn}Gi.La="serverreachability";function Rr(h){be.call(this,Gi.La,h)}U(Rr,be);function Ki(h){const y=fo();qt(y,new Rr(y))}Gi.STAT_EVENT="statevent";function mo(h,y){be.call(this,Gi.STAT_EVENT,h),this.stat=y}U(mo,be);function Xt(h){const y=fo();qt(y,new mo(y,h))}Gi.Ma="timingevent";function Ju(h,y){be.call(this,Gi.Ma,h),this.size=y}U(Ju,be);function Ps(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Os(){this.g=!0}Os.prototype.xa=function(){this.g=!1};function po(h,y,T,C,W,ee){h.info(function(){if(h.g)if(ee)for(var we="",at=ee.split("&"),vn=0;vn<at.length;vn++){var ot=at[vn].split("=");if(1<ot.length){var wt=ot[0];ot=ot[1];var un=wt.split("_");we=2<=un.length&&un[1]=="type"?we+(wt+"="+ot+"&"):we+(wt+"=redacted&")}}else we=null;else we=ee;return"XMLHTTP REQ ("+C+") [attempt "+W+"]: "+y+`
`+T+`
`+we})}function is(h,y,T,C,W,ee,we){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+W+"]: "+y+`
`+T+`
`+ee+" "+we})}function ur(h,y,T,C){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+an(h,T)+(C?" "+C:"")})}function Cr(h,y){h.info(function(){return"TIMEOUT: "+y})}Os.prototype.info=function(){};function an(h,y){if(!h.g)return y;if(!y)return null;try{var T=JSON.parse(y);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var C=T[h];if(!(2>C.length)){var W=C[1];if(Array.isArray(W)&&!(1>W.length)){var ee=W[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var we=1;we<W.length;we++)W[we]=""}}}}return Bl(T)}catch{return y}}var _n={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qi;function on(){}U(on,Fl),on.prototype.g=function(){return new XMLHttpRequest},on.prototype.i=function(){return{}},Qi=new on;function Ht(h,y,T,C){this.j=h,this.i=y,this.l=T,this.R=C||1,this.U=new ts(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pn}function Pn(){this.i=null,this.g="",this.h=!1}var $t={},Dr={};function zn(h,y,T){h.L=1,h.v=us(kt(y)),h.m=T,h.P=!0,ri(h,null)}function ri(h,y){h.F=Date.now(),Nt(h),h.A=kt(h.v);var T=h.A,C=h.R;Array.isArray(C)||(C=[String(C)]),Pr(T.i,"t",C),h.C=0,T=h.j.J,h.h=new Pn,h.g=lc(h.j,T?y:null,!h.m),0<h.O&&(h.M=new Zh(I(h.Y,h,h.g),h.O)),y=h.U,T=h.g,C=h.ca;var W="readystatechange";Array.isArray(W)||(W&&(xs[0]=W.toString()),W=xs);for(var ee=0;ee<W.length;ee++){var we=_i(T,W[ee],C||y.handleEvent,!1,y.h||y);if(!we)break;y.g[we.key]=we}y=h.H?O(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Ki(),po(h.i,h.u,h.A,h.l,h.R,h.m)}Ht.prototype.ca=function(h){h=h.target;const y=this.M;y&&ki(h)==3?y.j():this.Y(h)},Ht.prototype.Y=function(h){try{if(h==this.g)e:{const un=ki(this.g);var y=this.g.Ba();const Ur=this.g.Z();if(!(3>un)&&(un!=3||this.g&&(this.h.h||this.g.oa()||Kl(this.g)))){this.J||un!=4||y==7||(y==8||0>=Ur?Ki(3):Ki(2)),ga(this);var T=this.g.Z();this.X=T;t:if(Ci(this)){var C=Kl(this.g);h="";var W=C.length,ee=ki(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qn(this),si(this);var we="";break t}this.h.i=new d.TextDecoder}for(y=0;y<W;y++)this.h.h=!0,h+=this.h.i.decode(C[y],{stream:!(ee&&y==W-1)});C.length=0,this.h.g+=h,this.C=0,we=this.h.g}else we=this.g.oa();if(this.o=T==200,is(this.i,this.u,this.A,this.l,this.R,un,T),this.o){if(this.T&&!this.K){t:{if(this.g){var at,vn=this.g;if((at=vn.g?vn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(at)){var ot=at;break t}}ot=null}if(T=ot)ur(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vi(this,T);else{this.o=!1,this.s=3,Xt(12),qn(this),si(this);break e}}if(this.P){T=!0;let In;for(;!this.J&&this.C<we.length;)if(In=ss(this,we),In==Dr){un==4&&(this.s=4,Xt(14),T=!1),ur(this.i,this.l,null,"[Incomplete Response]");break}else if(In==$t){this.s=4,Xt(15),ur(this.i,this.l,we,"[Invalid Chunk]"),T=!1;break}else ur(this.i,this.l,In,null),vi(this,In);if(Ci(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||we.length!=0||this.h.h||(this.s=1,Xt(16),T=!1),this.o=this.o&&T,!T)ur(this.i,this.l,we,"[Invalid Chunked Response]"),qn(this),si(this);else if(0<we.length&&!this.W){this.W=!0;var wt=this.j;wt.g==this&&wt.ba&&!wt.M&&(wt.j.info("Great, no buffering proxy detected. Bytes received: "+we.length),Ls(wt),wt.M=!0,Xt(11))}}else ur(this.i,this.l,we,null),vi(this,we);un==4&&qn(this),this.o&&!this.J&&(un==4?Ao(this.j,this):(this.o=!1,Nt(this)))}else tc(this.g),T==400&&0<we.indexOf("Unknown SID")?(this.s=3,Xt(12)):(this.s=0,Xt(13)),qn(this),si(this)}}}catch{}finally{}};function Ci(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ss(h,y){var T=h.C,C=y.indexOf(`
`,T);return C==-1?Dr:(T=Number(y.substring(T,C)),isNaN(T)?$t:(C+=1,C+T>y.length?Dr:(y=y.slice(C,C+T),h.C=C+T,y)))}Ht.prototype.cancel=function(){this.J=!0,qn(this)};function Nt(h){h.S=Date.now()+h.I,xr(h,h.I)}function xr(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ps(I(h.ba,h),y)}function ga(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Ht.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Cr(this.i,this.A),this.L!=2&&(Ki(),Xt(17)),qn(this),this.s=2,si(this)):xr(this,this.S-h)};function si(h){h.j.G==0||h.J||Ao(h.j,h)}function qn(h){ga(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,Fn(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function vi(h,y){try{var T=h.j;if(T.G!=0&&(T.g==h||as(T.h,h))){if(!h.K&&as(T.h,h)&&T.G==3){try{var C=T.Da.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var W=C;if(W[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)Xi(T),Ia(T);else break e;Sa(T),Xt(18)}}else T.za=W[1],0<T.za-T.T&&37500>W[2]&&T.F&&T.v==0&&!T.C&&(T.C=Ps(I(T.Za,T),6e3));if(1>=ql(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Lr(T,11)}else if((h.K||T.g==h)&&Xi(T),!ie(y))for(W=T.Da.g.parse(y),y=0;y<W.length;y++){let ot=W[y];if(T.T=ot[0],ot=ot[1],T.G==2)if(ot[0]=="c"){T.K=ot[1],T.ia=ot[2];const wt=ot[3];wt!=null&&(T.la=wt,T.j.info("VER="+T.la));const un=ot[4];un!=null&&(T.Aa=un,T.j.info("SVER="+T.Aa));const Ur=ot[5];Ur!=null&&typeof Ur=="number"&&0<Ur&&(C=1.5*Ur,T.L=C,T.j.info("backChannelRequestTimeoutMs_="+C)),C=T;const In=h.g;if(In){const jr=In.g?In.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jr){var ee=C.h;ee.g||jr.indexOf("spdy")==-1&&jr.indexOf("quic")==-1&&jr.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(os(ee,ee.h),ee.h=null))}if(C.D){const Yl=In.g?In.g.getResponseHeader("X-HTTP-Session-Id"):null;Yl&&(C.ya=Yl,et(C.I,C.D,Yl))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),C=T;var we=h;if(C.qa=oc(C,C.J?C.ia:null,C.W),we.K){Di(C.h,we);var at=we,vn=C.L;vn&&(at.I=vn),at.B&&(ga(at),Nt(at)),C.g=we}else sc(C);0<T.i.length&&To(T)}else ot[0]!="stop"&&ot[0]!="close"||Lr(T,7);else T.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?Lr(T,7):Aa(T):ot[0]!="noop"&&T.l&&T.l.ta(ot),T.v=0)}}Ki(4)}catch{}}var ec=class{constructor(h,y){this.g=h,this.map=y}};function go(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _o(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ql(h){return h.h?1:h.g?h.g.size:0}function as(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function os(h,y){h.g?h.g.add(y):h.h=y}function Di(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}go.prototype.cancel=function(){if(this.i=Hn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Hn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.D);return y}return G(h.i)}function Hl(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],T=h.length,C=0;C<T;C++)y.push(h[C]);return y}y=[],T=0;for(C in h)y[T++]=h[C];return y}function Wi(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var T=0;T<h;T++)y.push(T);return y}y=[],T=0;for(const C in h)y[T++]=C;return y}}}function yn(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var T=Wi(h),C=Hl(h),W=C.length,ee=0;ee<W;ee++)y.call(void 0,C[ee],T&&T[ee],h)}var cr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function On(h,y){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var C=h[T].indexOf("="),W=null;if(0<=C){var ee=h[T].substring(0,C);W=h[T].substring(C+1)}else ee=h[T];y(ee,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function hr(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof hr){this.h=h.h,kn(this,h.j),this.o=h.o,this.g=h.g,xi(this,h.s),this.l=h.l;var y=h.i,T=new dr;T.i=y.i,y.g&&(T.g=new Map(y.g),T.h=y.h),ls(this,T),this.m=h.m}else h&&(y=String(h).match(cr))?(this.h=!1,kn(this,y[1]||"",!0),this.o=cs(y[2]||""),this.g=cs(y[3]||"",!0),xi(this,y[4]),this.l=cs(y[5]||"",!0),ls(this,y[6]||"",!0),this.m=cs(y[7]||"")):(this.h=!1,this.i=new dr(null,this.h))}hr.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Vn(y,yo,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Vn(y,yo,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Vn(T,T.charAt(0)=="/"?Gl:Yi,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Vn(T,vo)),h.join("")};function kt(h){return new hr(h)}function kn(h,y,T){h.j=T?cs(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function xi(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function ls(h,y,T){y instanceof dr?(h.i=y,Eo(h.i,h.h)):(T||(y=Vn(y,Nr)),h.i=new dr(y,h.h))}function et(h,y,T){h.i.set(y,T)}function us(h){return et(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function cs(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Vn(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,$l),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function $l(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var yo=/[#\/\?@]/g,Yi=/[#\?:]/g,Gl=/[#\?]/g,Nr=/[#\?@]/g,vo=/#/g;function dr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function $n(h){h.g||(h.g=new Map,h.h=0,h.i&&On(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}n=dr.prototype,n.add=function(h,y){$n(this),this.i=null,h=Or(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function ks(h,y){$n(h),y=Or(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Ni(h,y){return $n(h),y=Or(h,y),h.g.has(y)}n.forEach=function(h,y){$n(this),this.g.forEach(function(T,C){T.forEach(function(W){h.call(y,W,C,this)},this)},this)},n.na=function(){$n(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),T=[];for(let C=0;C<y.length;C++){const W=h[C];for(let ee=0;ee<W.length;ee++)T.push(y[C])}return T},n.V=function(h){$n(this);let y=[];if(typeof h=="string")Ni(this,h)&&(y=y.concat(this.g.get(Or(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)y=y.concat(h[T])}return y},n.set=function(h,y){return $n(this),this.i=null,h=Or(this,h),Ni(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Pr(h,y,T){ks(h,y),0<T.length&&(h.i=null,h.g.set(Or(h,y),G(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var T=0;T<y.length;T++){var C=y[T];const ee=encodeURIComponent(String(C)),we=this.V(C);for(C=0;C<we.length;C++){var W=ee;we[C]!==""&&(W+="="+encodeURIComponent(String(we[C]))),h.push(W)}}return this.i=h.join("&")};function Or(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Eo(h,y){y&&!h.j&&($n(h),h.i=null,h.g.forEach(function(T,C){var W=C.toLowerCase();C!=W&&(ks(this,C),Pr(this,W,T))},h)),h.j=y}function hs(h,y){const T=new Os;if(d.Image){const C=new Image;C.onload=P(Pi,T,"TestLoadImage: loaded",!0,y,C),C.onerror=P(Pi,T,"TestLoadImage: error",!1,y,C),C.onabort=P(Pi,T,"TestLoadImage: abort",!1,y,C),C.ontimeout=P(Pi,T,"TestLoadImage: timeout",!1,y,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else y(!1)}function _a(h,y){const T=new Os,C=new AbortController,W=setTimeout(()=>{C.abort(),Pi(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:C.signal}).then(ee=>{clearTimeout(W),ee.ok?Pi(T,"TestPingServer: ok",!0,y):Pi(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(W),Pi(T,"TestPingServer: error",!1,y)})}function Pi(h,y,T,C,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),C(T)}catch{}}function ds(){this.g=new ii}function Oi(h,y,T){const C=T||"";try{yn(h,function(W,ee){let we=W;g(W)&&(we=Bl(W)),y.push(C+ee+"="+encodeURIComponent(we))})}catch(W){throw y.push(C+"type="+encodeURIComponent("_badmap")),W}}function kr(h){this.l=h.Ub||null,this.j=h.eb||!1}U(kr,Fl),kr.prototype.g=function(){return new fs(this.l,this.j)},kr.prototype.i=function(h){return function(){return h}}({});function fs(h,y){sn.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(fs,sn),n=fs.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,fr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,fr(this)),this.g&&(this.readyState=3,fr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vs(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vs(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Vr(this):fr(this),this.readyState==3&&Vs(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Vr(this))},n.Qa=function(h){this.g&&(this.response=h,Vr(this))},n.ga=function(){this.g&&Vr(this)};function Vr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,fr(h)}n.setRequestHeader=function(h,y){this.u.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function fr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ya(h){let y="";return Re(h,function(T,C){y+=C,y+=":",y+=T,y+=`\r
`}),y}function ln(h,y,T){e:{for(C in T){var C=!1;break e}C=!0}C||(T=ya(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):et(h,y,T))}function mt(h){sn.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(mt,sn);var va=/^https?$/i,mr=["POST","PUT"];n=mt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,y,T,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qi.g(),this.v=this.o?zl(this.o):zl(Qi),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ee){bo(this,ee);return}if(h=T||"",T=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var W in C)T.set(W,C[W]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const ee of C.keys())T.set(ee,C.get(ee));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(T.keys()).find(ee=>ee.toLowerCase()=="content-type"),W=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(mr,y,void 0))||C||W||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,we]of T)this.g.setRequestHeader(ee,we);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ta(this),this.u=!0,this.g.send(h),this.u=!1}catch(ee){bo(this,ee)}};function bo(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,Ea(h),ai(h)}function Ea(h){h.A||(h.A=!0,qt(h,"complete"),qt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,qt(this,"complete"),qt(this,"abort"),ai(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ai(this,!0)),mt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ba(this):this.bb())},n.bb=function(){ba(this)};function ba(h){if(h.h&&typeof u<"u"&&(!h.v[1]||ki(h)!=4||h.Z()!=2)){if(h.u&&ki(h)==4)es(h.Ea,0,h);else if(qt(h,"readystatechange"),ki(h)==4){h.h=!1;try{const we=h.Z();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var C;if(C=we===0){var W=String(h.D).match(cr)[1]||null;!W&&d.self&&d.self.location&&(W=d.self.location.protocol.slice(0,-1)),C=!va.test(W?W.toLowerCase():"")}T=C}if(T)qt(h,"complete"),qt(h,"success");else{h.m=6;try{var ee=2<ki(h)?h.g.statusText:""}catch{ee=""}h.l=ee+" ["+h.Z()+"]",Ea(h)}}finally{ai(h)}}}}function ai(h,y){if(h.g){Ta(h);const T=h.g,C=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||qt(h,"ready");try{T.onreadystatechange=C}catch{}}}function Ta(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function ki(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<ki(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Sr(y)}};function Kl(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function tc(h){const y={};h=(h.g&&2<=ki(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(ie(h[C]))continue;var T=B(h[C]);const W=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ee=y[W]||[];y[W]=ee,ee.push(T)}L(y,function(C){return C.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ms(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function wa(h){this.Aa=0,this.i=[],this.j=new Os,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ms("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ms("baseRetryDelayMs",5e3,h),this.cb=Ms("retryDelaySeedMs",1e4,h),this.Wa=Ms("forwardChannelMaxRetries",2,h),this.wa=Ms("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new go(h&&h.concurrentRequestLimit),this.Da=new ds,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=wa.prototype,n.la=8,n.G=1,n.connect=function(h,y,T,C){Xt(0),this.W=h,this.H=y||{},T&&C!==void 0&&(this.H.OSID=T,this.H.OAID=C),this.F=this.X,this.I=oc(this,null,this.W),To(this)};function Aa(h){if(nc(h),h.G==3){var y=h.U++,T=kt(h.I);if(et(T,"SID",h.K),et(T,"RID",y),et(T,"TYPE","terminate"),Mr(h,T),y=new Ht(h,h.j,y),y.L=2,y.v=us(kt(T)),T=!1,d.navigator&&d.navigator.sendBeacon)try{T=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!T&&d.Image&&(new Image().src=y.v,T=!0),T||(y.g=lc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Nt(y)}ac(h)}function Ia(h){h.g&&(Ls(h),h.g.cancel(),h.g=null)}function nc(h){Ia(h),h.u&&(d.clearTimeout(h.u),h.u=null),Xi(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function To(h){if(!_o(h.h)&&!h.s){h.s=!0;var y=h.Ga;ke||D(),Pe||(ke(),Pe=!0),Je.add(y,h),h.B=0}}function ic(h,y){return ql(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ps(I(h.Ga,h,y),Wl(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const W=new Ht(this,this.j,h);let ee=this.o;if(this.S&&(ee?(ee=O(ee),k(ee,this.S)):ee=this.S),this.m!==null||this.O||(W.H=ee,ee=null),this.P)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var C=this.i[T];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,4096<y){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=rc(this,W,y),T=kt(this.I),et(T,"RID",h),et(T,"CVER",22),this.D&&et(T,"X-HTTP-Session-Id",this.D),Mr(this,T),ee&&(this.O?y="headers="+encodeURIComponent(String(ya(ee)))+"&"+y:this.m&&ln(T,this.m,ee)),os(this.h,W),this.Ua&&et(T,"TYPE","init"),this.P?(et(T,"$req",y),et(T,"SID","null"),W.T=!0,zn(W,T,null)):zn(W,T,y),this.G=2}}else this.G==3&&(h?wo(this,h):this.i.length==0||_o(this.h)||wo(this))};function wo(h,y){var T;y?T=y.l:T=h.U++;const C=kt(h.I);et(C,"SID",h.K),et(C,"RID",T),et(C,"AID",h.T),Mr(h,C),h.m&&h.o&&ln(C,h.m,h.o),T=new Ht(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),y&&(h.i=y.D.concat(h.i)),y=rc(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),os(h.h,T),zn(T,C,y)}function Mr(h,y){h.H&&Re(h.H,function(T,C){et(y,C,T)}),h.l&&yn({},function(T,C){et(y,C,T)})}function rc(h,y,T){T=Math.min(h.i.length,T);var C=h.l?I(h.l.Na,h.l,h):null;e:{var W=h.i;let ee=-1;for(;;){const we=["count="+T];ee==-1?0<T?(ee=W[0].g,we.push("ofs="+ee)):ee=0:we.push("ofs="+ee);let at=!0;for(let vn=0;vn<T;vn++){let ot=W[vn].g;const wt=W[vn].map;if(ot-=ee,0>ot)ee=Math.max(0,W[vn].g-100),at=!1;else try{Oi(wt,we,"req"+ot+"_")}catch{C&&C(wt)}}if(at){C=we.join("&");break e}}}return h=h.i.splice(0,T),y.D=h,C}function sc(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;ke||D(),Pe||(ke(),Pe=!0),Je.add(y,h),h.v=0}}function Sa(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ps(I(h.Fa,h),Wl(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Ql(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ps(I(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xt(10),Ia(this),Ql(this))};function Ls(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Ql(h){h.g=new Ht(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=kt(h.qa);et(y,"RID","rpc"),et(y,"SID",h.K),et(y,"AID",h.T),et(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&et(y,"TO",h.ja),et(y,"TYPE","xmlhttp"),Mr(h,y),h.m&&h.o&&ln(y,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=us(kt(y)),T.m=null,T.P=!0,ri(T,h)}n.Za=function(){this.C!=null&&(this.C=null,Ia(this),Sa(this),Xt(19))};function Xi(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Ao(h,y){var T=null;if(h.g==y){Xi(h),Ls(h),h.g=null;var C=2}else if(as(h.h,y))T=y.D,Di(h.h,y),C=1;else return;if(h.G!=0){if(y.o)if(C==1){T=y.m?y.m.length:0,y=Date.now()-y.F;var W=h.B;C=fo(),qt(C,new Ju(C,T)),To(h)}else sc(h);else if(W=y.s,W==3||W==0&&0<y.X||!(C==1&&ic(h,y)||C==2&&Sa(h)))switch(T&&0<T.length&&(y=h.h,y.i=y.i.concat(T)),W){case 1:Lr(h,5);break;case 4:Lr(h,10);break;case 3:Lr(h,6);break;default:Lr(h,2)}}}function Wl(h,y){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*y}function Lr(h,y){if(h.j.info("Error code "+y),y==2){var T=I(h.fb,h),C=h.Xa;const W=!C;C=new hr(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||kn(C,"https"),us(C),W?hs(C.toString(),T):_a(C.toString(),T)}else Xt(2);h.G=0,h.l&&h.l.sa(y),ac(h),nc(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function ac(h){if(h.G=0,h.ka=[],h.l){const y=Hn(h.h);(y.length!=0||h.i.length!=0)&&(j(h.ka,y),j(h.ka,h.i),h.h.i.length=0,G(h.i),h.i.length=0),h.l.ra()}}function oc(h,y,T){var C=T instanceof hr?kt(T):new hr(T);if(C.g!="")y&&(C.g=y+"."+C.g),xi(C,C.s);else{var W=d.location;C=W.protocol,y=y?y+"."+W.hostname:W.hostname,W=+W.port;var ee=new hr(null);C&&kn(ee,C),y&&(ee.g=y),W&&xi(ee,W),T&&(ee.l=T),C=ee}return T=h.D,y=h.ya,T&&y&&et(C,T,y),et(C,"VER",h.la),Mr(h,C),C}function lc(h,y,T){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new mt(new kr({eb:T})):new mt(h.pa),y.Ha(h.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function uc(){}n=uc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ra(){}Ra.prototype.g=function(h,y){return new Gn(h,y)};function Gn(h,y){sn.call(this),this.g=new wa(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!ie(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ie(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Kn(this)}U(Gn,sn),Gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){Aa(this.g)},Gn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=Bl(h),h=T);y.i.push(new ec(y.Ya++,h)),y.G==3&&To(y)},Gn.prototype.N=function(){this.g.l=null,delete this.j,Aa(this.g),delete this.g,Gn.aa.N.call(this)};function cc(h){ns.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}U(cc,ns);function ms(){lr.call(this),this.status=1}U(ms,lr);function Kn(h){this.g=h}U(Kn,uc),Kn.prototype.ua=function(){qt(this.g,"a")},Kn.prototype.ta=function(h){qt(this.g,new cc(h))},Kn.prototype.sa=function(h){qt(this.g,new ms)},Kn.prototype.ra=function(){qt(this.g,"b")},Ra.prototype.createWebChannel=Ra.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,OS=function(){return new Ra},PS=function(){return fo()},NS=Gi,wv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_n.NO_ERROR=0,_n.TIMEOUT=8,_n.HTTP_ERROR=6,zp=_n,rs.COMPLETE="complete",xS=rs,pa.EventType=or,or.OPEN="a",or.CLOSE="b",or.ERROR="c",or.MESSAGE="d",sn.prototype.listen=sn.prototype.K,cf=pa,mt.prototype.listenOnce=mt.prototype.L,mt.prototype.getLastError=mt.prototype.Ka,mt.prototype.getLastErrorCode=mt.prototype.Ba,mt.prototype.getStatus=mt.prototype.Z,mt.prototype.getResponseJson=mt.prototype.Oa,mt.prototype.getResponseText=mt.prototype.oa,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Ha,DS=mt}).apply(typeof Np<"u"?Np:typeof self<"u"?self:typeof window<"u"?window:{});const OA="@firebase/firestore",kA="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ei=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ei.UNAUTHENTICATED=new ei(null),ei.GOOGLE_CREDENTIALS=new ei("google-credentials-uid"),ei.FIRST_PARTY=new ei("first-party-uid"),ei.MOCK_USER=new ei("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=new Vg("@firebase/firestore");function Jc(){return bl.logLevel}function rV(n){bl.setLogLevel(n)}function me(n,...e){if(bl.logLevel<=st.DEBUG){const t=e.map(wE);bl.debug(`Firestore (${jh}): ${n}`,...t)}}function Tn(n,...e){if(bl.logLevel<=st.ERROR){const t=e.map(wE);bl.error(`Firestore (${jh}): ${n}`,...t)}}function la(n,...e){if(bl.logLevel<=st.WARN){const t=e.map(wE);bl.warn(`Firestore (${jh}): ${n}`,...t)}}function wE(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(n="Unexpected state"){const e=`FIRESTORE (${jh}) INTERNAL ASSERTION FAILED: `+n;throw Tn(e),new Error(e)}function Oe(n,e){n||De()}function sV(n,e){n||De()}function Ce(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends zi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ei.UNAUTHENTICATED))}shutdown(){}}class oV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class lV{constructor(e){this.t=e,this.currentUser=ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Oe(this.o===void 0);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new pi,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new pi)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Oe(typeof i.accessToken=="string"),new kS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new ei(e)}}class uV{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=ei.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class cV{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new uV(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ei.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class VA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hV{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Kt(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Oe(this.o===void 0);const i=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.R;return this.R=l.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new VA(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Oe(typeof t.token=="string"),this.R=t.token,new VA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=dV(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Ke(n,e){return n<e?-1:n>e?1:0}function Av(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),a=e.codePointAt(t);if(i!==a){if(i<128&&a<128)return Ke(i,a);{const l=AE(),u=fV(l.encode(MA(n,t)),l.encode(MA(e,t)));return u!==0?u:Ke(i,a)}}t+=i>65535?2:1}return Ke(n.length,e.length)}function MA(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function fV(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ke(n[t],e[t]);return Ke(n.length,e.length)}function ph(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}function MS(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=-62135596800,UA=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*UA);return new Yt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<LA)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/UA}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-LA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new Yt(0,0))}static max(){return new Le(new Yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="__name__";class Ws{constructor(e,t,i){t===void 0?t=0:t>e.length&&De(),i===void 0?i=e.length-t:i>e.length-t&&De(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ws.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ws?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Ws.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ke(e.length,t.length)}static compareSegments(e,t){const i=Ws.isNumericId(e),a=Ws.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Ws.extractNumericId(e).compare(Ws.extractNumericId(t)):Av(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return dl.fromString(e.substring(4,e.length-2))}}class ut extends Ws{construct(e,t,i){return new ut(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new ut(t)}static emptyPath(){return new ut([])}}const mV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Ws{construct(e,t,i){return new Qt(e,t,i)}static isValidIdentifier(e){return mV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jA}static keyField(){return new Qt([jA])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new he(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new he(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new he(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else d==="`"?(u=!u,a++):d!=="."||u?(i+=d,a++):(l(),a++)}if(l(),u)throw new he(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(t)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(ut.fromString(e))}static fromName(e){return new Se(ut.fromString(e).popFirst(5))}static empty(){return new Se(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new ut(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=-1;class og{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function Iv(n){return n.fields.find(e=>e.kind===2)}function bu(n){return n.fields.filter(e=>e.kind!==2)}og.UNKNOWN_ID=-1;class qp{constructor(e,t){this.fieldPath=e,this.kind=t}}class Of{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Of(0,Ir.min())}}function LS(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Le.fromTimestamp(i===1e9?new Yt(t+1,0):new Yt(t,i));return new Ir(a,Se.empty(),e)}function US(n){return new Ir(n.readTime,n.key,gh)}class Ir{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ir(Le.min(),Se.empty(),gh)}static max(){return new Ir(Le.max(),Se.empty(),gh)}}function IE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:Ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==jS)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.reject(t)}static resolve(e){return new Y((t,i)=>{t(e)})}static reject(e){return new Y((t,i)=>{i(e)})}static waitFor(e){return new Y((t,i)=>{let a=0,l=0,u=!1;e.forEach(d=>{++a,d.next(()=>{++l,u&&l===a&&t()},m=>i(m))}),u=!0,l===a&&t()})}static or(e){let t=Y.resolve(!1);for(const i of e)t=t.next(a=>a?Y.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,l)=>{i.push(t.call(this,a,l))}),this.waitFor(i)}static mapArray(e,t){return new Y((i,a)=>{const l=e.length,u=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next(v=>{u[g]=v,++d,d===l&&i(u)},v=>a(v))}})}static doWhile(e,t){return new Y((i,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):i()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="SimpleDb";class Mg{static open(e,t,i,a){try{return new Mg(t,e.transaction(a,i))}catch(l){throw new gf(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new pi,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new gf(e,t.error)):this.m.resolve()},this.transaction.onerror=i=>{const a=SE(i.target.error);this.m.reject(new gf(e,a))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(me(Tr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gV(t)}}class ra{static delete(e){return me(Tr,"Removing database:",e),wu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!xf())return!1;if(ra.v())return!0;const e=nn(),t=ra.C(e),i=0<t&&t<10,a=FS(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.O=i,ra.C(nn())===12.2&&Tn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(me(Tr,"Opening database:",this.name),this.db=await new Promise((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;t(u)},a.onblocked=()=>{i(new gf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?i(new he(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?i(new he(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):i(new gf(e,u))},a.onupgradeneeded=l=>{me(Tr,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;this.O.B(u,a.transaction,l.oldVersion,this.version).next(()=>{me(Tr,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.N(e);const d=Mg.open(this.db,e,l?"readonly":"readwrite",i),m=a(d).next(g=>(d.S(),g)).catch(g=>(d.abort(g),Y.reject(g))).toPromise();return m.catch(()=>{}),await d.p,m}catch(d){const m=d,g=m.name!=="FirebaseError"&&u<3;if(me(Tr,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function FS(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class pV{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return wu(this.q.delete())}}class gf extends he{constructor(e,t){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ol(n){return n.name==="IndexedDbTransactionError"}class gV{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(me(Tr,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(me(Tr,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),wu(i)}add(e){return me(Tr,"ADD",this.store.name,e,e),wu(this.store.add(e))}get(e){return wu(this.store.get(e)).next(t=>(t===void 0&&(t=null),me(Tr,"GET",this.store.name,e,t),t))}delete(e){return me(Tr,"DELETE",this.store.name,e),wu(this.store.delete(e))}count(){return me(Tr,"COUNT",this.store.name),wu(this.store.count())}G(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new Y((u,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{u(m.target.result)}})}{const l=this.cursor(i),u=[];return this.j(l,(d,m)=>{u.push(m)}).next(()=>u)}}H(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new Y((a,l)=>{i.onerror=u=>{l(u.target.error)},i.onsuccess=u=>{a(u.target.result)}})}J(e,t){me(Tr,"DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const a=this.cursor(i);return this.j(a,(l,u,d)=>d.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.j(a,t)}X(e){const t=this.cursor({});return new Y((i,a)=>{t.onerror=l=>{const u=SE(l.target.error);a(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next(d=>{d?u.continue():i()}):i()}})}j(e,t){const i=[];return new Y((a,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void a();const m=new pV(d),g=t(d.primaryKey,d.value,m);if(g instanceof Y){const v=g.catch(b=>(m.done(),Y.reject(b)));i.push(v)}m.isDone?a():m.K===null?d.continue():d.continue(m.K)}}).next(()=>Y.waitFor(i))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function wu(n){return new Y((e,t)=>{n.onsuccess=i=>{const a=i.target.result;e(a)},n.onerror=i=>{const a=SE(i.target.error);t(a)}})}let BA=!1;function SE(n){const e=ra.C(nn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return BA||(BA=!0,setTimeout(()=>{throw i},0)),i}}return n}const _f="IndexBackfiller";class _V{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){me(_f,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();me(_f,`Documents written: ${t}`)}catch(t){Ol(t)?me(_f,"Ignoring IndexedDB error during index backfill: ",t):await Pl(t)}await this.te(6e4)})}}class yV{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const i=new Set;let a=t,l=!0;return Y.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(u!==null&&!i.has(u))return me(_f,`Processing collection: ${u}`),this.ie(e,u,a).next(d=>{a-=d,i.add(u)});l=!1})).next(()=>t-a)}ie(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next(l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.se(a,l)).next(d=>(me(_f,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>u.size)}))}se(e,t){let i=e;return t.changes.forEach((a,l)=>{const u=US(l);IE(u,i)>0&&(i=u)}),new Ir(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.oe(i),this._e=i=>t.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}ir.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=-1;function rm(n){return n==null}function kf(n){return n===0&&1/n==-1/0}function zS(n){return typeof n=="number"&&Number.isInteger(n)&&!kf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="";function Si(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=FA(e)),e=vV(n.get(t),e);return FA(e)}function vV(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case lg:t+="";break;default:t+=l}}return t}function FA(n){return n+lg+""}function ta(n){const e=n.length;if(Oe(e>=2),e===2)return Oe(n.charAt(0)===lg&&n.charAt(1)===""),ut.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const u=n.indexOf(lg,l);switch((u<0||u>t)&&De(),n.charAt(u+1)){case"":const d=n.substring(l,u);let m;a.length===0?m=d:(a+=d,m=a,a=""),i.push(m);break;case"":a+=n.substring(l,u),a+="\0";break;case"":a+=n.substring(l,u+1);break;default:De()}l=u+2}return new ut(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu="remoteDocuments",sm="owner",Gc="owner",Vf="mutationQueues",EV="userId",Is="mutations",zA="batchId",Cu="userMutationsIndex",qA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(n,e){return[n,Si(e)]}function qS(n,e,t){return[n,Si(e),t]}const bV={},_h="documentMutations",ug="remoteDocumentsV14",TV=["prefixPath","collectionGroup","readTime","documentId"],$p="documentKeyIndex",wV=["prefixPath","collectionGroup","documentId"],HS="collectionGroupIndex",AV=["collectionGroup","readTime","prefixPath","documentId"],Mf="remoteDocumentGlobal",Sv="remoteDocumentGlobalKey",yh="targets",$S="queryTargetsIndex",IV=["canonicalId","targetId"],vh="targetDocuments",SV=["targetId","path"],RE="documentTargetsIndex",RV=["path","targetId"],cg="targetGlobalKey",Pu="targetGlobal",Lf="collectionParents",CV=["collectionId","parent"],Eh="clientMetadata",DV="clientId",Lg="bundles",xV="bundleId",Ug="namedQueries",NV="name",CE="indexConfiguration",PV="indexId",Rv="collectionGroupIndex",OV="collectionGroup",hg="indexState",kV=["indexId","uid"],GS="sequenceNumberIndex",VV=["uid","sequenceNumber"],dg="indexEntries",MV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],KS="documentKeyIndex",LV=["indexId","uid","orderedDocumentKey"],jg="documentOverlays",UV=["userId","collectionPath","documentId"],Cv="collectionPathOverlayIndex",jV=["userId","collectionPath","largestBatchId"],QS="collectionGroupOverlayIndex",BV=["userId","collectionGroup","largestBatchId"],DE="globals",FV="name",WS=[Vf,Is,_h,Tu,yh,sm,Pu,vh,Eh,Mf,Lf,Lg,Ug],zV=[...WS,jg],YS=[Vf,Is,_h,ug,yh,sm,Pu,vh,Eh,Mf,Lf,Lg,Ug,jg],XS=YS,xE=[...XS,CE,hg,dg],qV=xE,HV=[...xE,DE];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv extends BS{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function jn(n,e){const t=Ce(n);return ra.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function kl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,t){this.comparator=e,this.root=t||fi.EMPTY}insert(e,t){return new jt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fi.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pp(this.root,e,this.comparator,!0)}}class Pp{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fi{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??fi.RED,this.left=a??fi.EMPTY,this.right=l??fi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new fi(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return fi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return fi.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}fi.EMPTY=null,fi.RED=!0,fi.BLACK=!1;fi.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,t,i,a,l){return this}insert(e,t,i){return new fi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $A(this.data.getIterator())}getIteratorFrom(e){return new $A(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new St(this.comparator);return t.data=e,t}}class $A{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Kc(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new rr([])}unionWith(e){let t=new St(Qt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new rr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ph(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new JS("Invalid base64 string: "+l):l}}(e);return new mn(t)}static fromUint8Array(e){const t=function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l}(e);return new mn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const GV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ja(n){if(Oe(!!n),typeof n=="string"){let e=0;const t=GV.exec(n);if(Oe(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Gt(n.seconds),nanos:Gt(n.nanos)}}function Gt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function eo(n){return typeof n=="string"?mn.fromBase64String(n):mn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="server_timestamp",tR="__type__",nR="__previous_value__",iR="__local_write_time__";function Bg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[tR])===null||t===void 0?void 0:t.stringValue)===eR}function Fg(n){const e=n.mapValue.fields[nR];return Bg(e)?Fg(e):e}function Uf(n){const e=Ja(n.mapValue.fields[iR].timestampValue);return new Yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e,t,i,a,l,u,d,m,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g}}const xv="(default)";class Tl{constructor(e,t){this.projectId=e,this.database=t||xv}static empty(){return new Tl("","")}get isDefaultDatabase(){return this.database===xv}isEqual(e){return e instanceof Tl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="__type__",rR="__max__",ol={mapValue:{fields:{__type__:{stringValue:rR}}}},PE="__vector__",bh="value",Gp={nullValue:"NULL_VALUE"};function wl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Bg(n)?4:sR(n)?9007199254740991:zg(n)?10:11:De()}function ua(n,e){if(n===e)return!0;const t=wl(n);if(t!==wl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uf(n).isEqual(Uf(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Ja(a.timestampValue),d=Ja(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return eo(a.bytesValue).isEqual(eo(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return Gt(a.geoPointValue.latitude)===Gt(l.geoPointValue.latitude)&&Gt(a.geoPointValue.longitude)===Gt(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Gt(a.integerValue)===Gt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Gt(a.doubleValue),d=Gt(l.doubleValue);return u===d?kf(u)===kf(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return ph(n.arrayValue.values||[],e.arrayValue.values||[],ua);case 10:case 11:return function(a,l){const u=a.mapValue.fields||{},d=l.mapValue.fields||{};if(HA(u)!==HA(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(d[m]===void 0||!ua(u[m],d[m])))return!1;return!0}(n,e);default:return De()}}function jf(n,e){return(n.values||[]).find(t=>ua(t,e))!==void 0}function Al(n,e){if(n===e)return 0;const t=wl(n),i=wl(e);if(t!==i)return Ke(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(n.booleanValue,e.booleanValue);case 2:return function(l,u){const d=Gt(l.integerValue||l.doubleValue),m=Gt(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return GA(n.timestampValue,e.timestampValue);case 4:return GA(Uf(n),Uf(e));case 5:return Av(n.stringValue,e.stringValue);case 6:return function(l,u){const d=eo(l),m=eo(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(l,u){const d=l.split("/"),m=u.split("/");for(let g=0;g<d.length&&g<m.length;g++){const v=Ke(d[g],m[g]);if(v!==0)return v}return Ke(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,u){const d=Ke(Gt(l.latitude),Gt(u.latitude));return d!==0?d:Ke(Gt(l.longitude),Gt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return KA(n.arrayValue,e.arrayValue);case 10:return function(l,u){var d,m,g,v;const b=l.fields||{},I=u.fields||{},P=(d=b[bh])===null||d===void 0?void 0:d.arrayValue,U=(m=I[bh])===null||m===void 0?void 0:m.arrayValue,G=Ke(((g=P==null?void 0:P.values)===null||g===void 0?void 0:g.length)||0,((v=U==null?void 0:U.values)===null||v===void 0?void 0:v.length)||0);return G!==0?G:KA(P,U)}(n.mapValue,e.mapValue);case 11:return function(l,u){if(l===ol.mapValue&&u===ol.mapValue)return 0;if(l===ol.mapValue)return 1;if(u===ol.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=u.fields||{},v=Object.keys(g);m.sort(),v.sort();for(let b=0;b<m.length&&b<v.length;++b){const I=Av(m[b],v[b]);if(I!==0)return I;const P=Al(d[m[b]],g[v[b]]);if(P!==0)return P}return Ke(m.length,v.length)}(n.mapValue,e.mapValue);default:throw De()}}function GA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ke(n,e);const t=Ja(n),i=Ja(e),a=Ke(t.seconds,i.seconds);return a!==0?a:Ke(t.nanos,i.nanos)}function KA(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Al(t[a],i[a]);if(l)return l}return Ke(t.length,i.length)}function Th(n){return Nv(n)}function Nv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Ja(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return eo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Se.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Nv(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${Nv(t.fields[u])}`;return a+"}"}(n.mapValue):De()}function Kp(n){switch(wl(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fg(n);return e?16+Kp(e):16;case 5:return 2*n.stringValue.length;case 6:return eo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+Kp(l),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return kl(i.fields,(l,u)=>{a+=l.length+Kp(u)}),a}(n.mapValue);default:throw De()}}function Vu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Pv(n){return!!n&&"integerValue"in n}function Bf(n){return!!n&&"arrayValue"in n}function QA(n){return!!n&&"nullValue"in n}function WA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qp(n){return!!n&&"mapValue"in n}function zg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[NE])===null||t===void 0?void 0:t.stringValue)===PE}function yf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return kl(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=yf(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function sR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===rR}const aR={mapValue:{fields:{[NE]:{stringValue:PE},[bh]:{arrayValue:{}}}}};function QV(n){return"nullValue"in n?Gp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Vu(Tl.empty(),Se.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?zg(n)?aR:{mapValue:{}}:De()}function WV(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Vu(Tl.empty(),Se.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?aR:"mapValue"in n?zg(n)?{mapValue:{}}:ol:De()}function YA(n,e){const t=Al(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function XA(n,e){const t=Al(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.value=e}static empty(){return new mi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Qp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yf(t)}setAll(e){let t=Qt.emptyPath(),i={},a=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=d.popLast()}u?i[d.lastSegment()]=yf(u):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Qp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ua(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Qp(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){kl(t,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new mi(yf(this.value))}}function oR(n){const e=[];return kl(n.fields,(t,i)=>{const a=new Qt([t]);if(Qp(i)){const l=oR(i.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)}),new rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t,i,a,l,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Ft(e,0,Le.min(),Le.min(),Le.min(),mi.empty(),0)}static newFoundDocument(e,t,i,a){return new Ft(e,1,t,Le.min(),i,a,0)}static newNoDocument(e,t){return new Ft(e,2,t,Le.min(),Le.min(),mi.empty(),0)}static newUnknownDocument(e,t){return new Ft(e,3,t,Le.min(),Le.min(),mi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t){this.position=e,this.inclusive=t}}function ZA(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?i=Se.comparator(Se.fromName(u.referenceValue),t.key):i=Al(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function JA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ua(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t="asc"){this.field=e,this.dir=t}}function YV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{}class ct extends lR{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new XV(e,t,i):t==="array-contains"?new eM(e,i):t==="in"?new mR(e,i):t==="not-in"?new tM(e,i):t==="array-contains-any"?new nM(e,i):new ct(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new ZV(e,i):new JV(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Al(t,this.value)):t!==null&&wl(this.value)===wl(t)&&this.matchesComparison(Al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class It extends lR{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new It(e,t)}matches(e){return wh(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function wh(n){return n.op==="and"}function Ov(n){return n.op==="or"}function OE(n){return uR(n)&&wh(n)}function uR(n){for(const e of n.filters)if(e instanceof It)return!1;return!0}function kv(n){if(n instanceof ct)return n.field.canonicalString()+n.op.toString()+Th(n.value);if(OE(n))return n.filters.map(e=>kv(e)).join(",");{const e=n.filters.map(t=>kv(t)).join(",");return`${n.op}(${e})`}}function cR(n,e){return n instanceof ct?function(i,a){return a instanceof ct&&i.op===a.op&&i.field.isEqual(a.field)&&ua(i.value,a.value)}(n,e):n instanceof It?function(i,a){return a instanceof It&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,u,d)=>l&&cR(u,a.filters[d]),!0):!1}(n,e):void De()}function hR(n,e){const t=n.filters.concat(e);return It.create(t,n.op)}function dR(n){return n instanceof ct?function(t){return`${t.field.canonicalString()} ${t.op} ${Th(t.value)}`}(n):n instanceof It?function(t){return t.op.toString()+" {"+t.getFilters().map(dR).join(" ,")+"}"}(n):"Filter"}class XV extends ct{constructor(e,t,i){super(e,t,i),this.key=Se.fromName(i.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class ZV extends ct{constructor(e,t){super(e,"in",t),this.keys=fR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class JV extends ct{constructor(e,t){super(e,"not-in",t),this.keys=fR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Se.fromName(i.referenceValue))}class eM extends ct{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bf(t)&&jf(t.arrayValue,this.value)}}class mR extends ct{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&jf(this.value.arrayValue,t)}}class tM extends ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(jf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!jf(this.value.arrayValue,t)}}class nM extends ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>jf(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t=null,i=[],a=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=d,this.le=null}}function Vv(n,e=null,t=[],i=[],a=null,l=null,u=null){return new iM(n,e,t,i,a,l,u)}function Mu(n){const e=Ce(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>kv(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),rm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Th(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Th(i)).join(",")),e.le=t}return e.le}function am(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!JA(n.startAt,e.startAt)&&JA(n.endAt,e.endAt)}function fg(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function mg(n,e){return n.filters.filter(t=>t instanceof ct&&t.field.isEqual(e))}function e0(n,e,t){let i=Gp,a=!0;for(const l of mg(n,e)){let u=Gp,d=!0;switch(l.op){case"<":case"<=":u=QV(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,d=!1;break;case"!=":case"not-in":u=Gp}YA({value:i,inclusive:a},{value:u,inclusive:d})<0&&(i=u,a=d)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];YA({value:i,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(i=u,a=t.inclusive);break}}return{value:i,inclusive:a}}function t0(n,e,t){let i=ol,a=!0;for(const l of mg(n,e)){let u=ol,d=!0;switch(l.op){case">=":case">":u=WV(l.value),d=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,d=!1;break;case"!=":case"not-in":u=ol}XA({value:i,inclusive:a},{value:u,inclusive:d})>0&&(i=u,a=d)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];XA({value:i,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(i=u,a=t.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,t=null,i=[],a=[],l=null,u="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=m,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function pR(n,e,t,i,a,l,u,d){return new io(n,e,t,i,a,l,u,d)}function Bh(n){return new io(n)}function n0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kE(n){return n.collectionGroup!==null}function oh(n){const e=Ce(n);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new St(Qt.comparator);return u.filters.forEach(m=>{m.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new Ff(l,i))}),t.has(Qt.keyField().canonicalString())||e.he.push(new Ff(Qt.keyField(),i))}return e.he}function qi(n){const e=Ce(n);return e.Pe||(e.Pe=rM(e,oh(n))),e.Pe}function rM(n,e){if(n.limitType==="F")return Vv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Ff(a.field,l)});const t=n.endAt?new Il(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Il(n.startAt.position,n.startAt.inclusive):null;return Vv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Mv(n,e){const t=n.filters.concat([e]);return new io(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function pg(n,e,t){return new io(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function om(n,e){return am(qi(n),qi(e))&&n.limitType===e.limitType}function gR(n){return`${Mu(qi(n))}|lt:${n.limitType}`}function eh(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>dR(a)).join(", ")}]`),rm(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>Th(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>Th(a)).join(",")),`Target(${i})`}(qi(n))}; limitType=${n.limitType})`}function lm(n,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Se.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,a){for(const l of oh(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(i,a){return!(i.startAt&&!function(u,d,m){const g=ZA(u,d,m);return u.inclusive?g<=0:g<0}(i.startAt,oh(i),a)||i.endAt&&!function(u,d,m){const g=ZA(u,d,m);return u.inclusive?g>=0:g>0}(i.endAt,oh(i),a))}(n,e)}function _R(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function yR(n){return(e,t)=>{let i=!1;for(const a of oh(n)){const l=sM(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function sM(n,e,t){const i=n.field.isKeyField()?Se.comparator(e.key,t.key):function(l,u,d){const m=u.data.field(l),g=d.data.field(l);return m!==null&&g!==null?Al(m,g):De()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return De()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){kl(this.inner,(t,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return ZS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=new jt(Se.comparator);function sr(){return aM}const vR=new jt(Se.comparator);function hf(...n){let e=vR;for(const t of n)e=e.insert(t.key,t);return e}function ER(n){let e=vR;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function na(){return vf()}function bR(){return vf()}function vf(){return new ro(n=>n.toString(),(n,e)=>n.isEqual(e))}const oM=new jt(Se.comparator),lM=new St(Se.comparator);function Xe(...n){let e=lM;for(const t of n)e=e.add(t);return e}const uM=new St(Ke);function VE(){return uM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kf(e)?"-0":e}}function TR(n){return{integerValue:""+n}}function wR(n,e){return zS(e)?TR(e):ME(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(){this._=void 0}}function cM(n,e,t){return n instanceof Ah?function(a,l){const u={fields:{[tR]:{stringValue:eR},[iR]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Bg(l)&&(l=Fg(l)),l&&(u.fields[nR]=l),{mapValue:u}}(t,e):n instanceof Lu?IR(n,e):n instanceof Uu?SR(n,e):function(a,l){const u=AR(a,l),d=i0(u)+i0(a.Ie);return Pv(u)&&Pv(a.Ie)?TR(d):ME(a.serializer,d)}(n,e)}function hM(n,e,t){return n instanceof Lu?IR(n,e):n instanceof Uu?SR(n,e):t}function AR(n,e){return n instanceof Ih?function(i){return Pv(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class Ah extends qg{}class Lu extends qg{constructor(e){super(),this.elements=e}}function IR(n,e){const t=RR(e);for(const i of n.elements)t.some(a=>ua(a,i))||t.push(i);return{arrayValue:{values:t}}}class Uu extends qg{constructor(e){super(),this.elements=e}}function SR(n,e){let t=RR(e);for(const i of n.elements)t=t.filter(a=>!ua(a,i));return{arrayValue:{values:t}}}class Ih extends qg{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function i0(n){return Gt(n.integerValue||n.doubleValue)}function RR(n){return Bf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t){this.field=e,this.transform=t}}function dM(n,e){return n.field.isEqual(e.field)&&function(i,a){return i instanceof Lu&&a instanceof Lu||i instanceof Uu&&a instanceof Uu?ph(i.elements,a.elements,ua):i instanceof Ih&&a instanceof Ih?ua(i.Ie,a.Ie):i instanceof Ah&&a instanceof Ah}(n.transform,e.transform)}class fM{constructor(e,t){this.version=e,this.transformResults=t}}class Wt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Hg{}function CR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zh(n.key,Wt.none()):new Fh(n.key,n.data,Wt.none());{const t=n.data,i=mi.empty();let a=new St(Qt.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new so(n.key,i,new rr(a.toArray()),Wt.none())}}function mM(n,e,t){n instanceof Fh?function(a,l,u){const d=a.value.clone(),m=s0(a.fieldTransforms,l,u.transformResults);d.setAll(m),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof so?function(a,l,u){if(!Wp(a.precondition,l))return void l.convertToUnknownDocument(u.version);const d=s0(a.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(DR(a)),m.setAll(d),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Ef(n,e,t,i){return n instanceof Fh?function(l,u,d,m){if(!Wp(l.precondition,u))return d;const g=l.value.clone(),v=a0(l.fieldTransforms,m,u);return g.setAll(v),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null}(n,e,t,i):n instanceof so?function(l,u,d,m){if(!Wp(l.precondition,u))return d;const g=a0(l.fieldTransforms,m,u),v=u.data;return v.setAll(DR(l)),v.setAll(g),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(b=>b.field))}(n,e,t,i):function(l,u,d){return Wp(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d}(n,e,t)}function pM(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=AR(i.transform,a||null);l!=null&&(t===null&&(t=mi.empty()),t.set(i.field,l))}return t||null}function r0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&ph(i,a,(l,u)=>dM(l,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Fh extends Hg{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class so extends Hg{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function DR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function s0(n,e,t){const i=new Map;Oe(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,d=e.data.field(l.field);i.set(l.field,hM(u,d,t[a]))}return i}function a0(n,e,t){const i=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);i.set(a.field,cM(l,u,e))}return i}class zh extends Hg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LE extends Hg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&mM(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ef(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ef(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=bR();return this.mutations.forEach(a=>{const l=e.get(a.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(a.key)?null:d;const m=CR(u,d);m!==null&&i.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(Le.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xe())}isEqual(e){return this.batchId===e.batchId&&ph(this.mutations,e.mutations,(t,i)=>r0(t,i))&&ph(this.baseMutations,e.baseMutations,(t,i)=>r0(t,i))}}class jE{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){Oe(e.mutations.length===i.length);let a=function(){return oM}();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,i[u].version);return new jE(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn,gt;function xR(n){switch(n){case te.OK:return De();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return De()}}function NR(n){if(n===void 0)return Tn("GRPC error has no .code"),te.UNKNOWN;switch(n){case Cn.OK:return te.OK;case Cn.CANCELLED:return te.CANCELLED;case Cn.UNKNOWN:return te.UNKNOWN;case Cn.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Cn.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Cn.INTERNAL:return te.INTERNAL;case Cn.UNAVAILABLE:return te.UNAVAILABLE;case Cn.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Cn.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Cn.NOT_FOUND:return te.NOT_FOUND;case Cn.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Cn.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Cn.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Cn.ABORTED:return te.ABORTED;case Cn.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Cn.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Cn.DATA_LOSS:return te.DATA_LOSS;default:return De()}}(gt=Cn||(Cn={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=new dl([4294967295,4294967295],0);function o0(n){const e=AE().encode(n),t=new CS;return t.update(e),new Uint8Array(t.digest())}function l0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new dl([t,i],0),new dl([a,l],0)]}class FE{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new df(`Invalid padding: ${t}`);if(i<0)throw new df(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new df(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new df(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=dl.fromNumber(this.Ee)}Ae(e,t,i){let a=e.add(t.multiply(dl.fromNumber(i)));return a.compare(_M)===1&&(a=new dl([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=o0(e),[i,a]=l0(t);for(let l=0;l<this.hashCount;l++){const u=this.Ae(i,a,l);if(!this.Re(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new FE(l,a,t);return i.forEach(d=>u.insert(d)),u}insert(e){if(this.Ee===0)return;const t=o0(e),[i,a]=l0(t);for(let l=0;l<this.hashCount;l++){const u=this.Ae(i,a,l);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class df extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,hm.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new cm(Le.min(),a,new jt(Ke),sr(),Xe())}}class hm{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new hm(i,t,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,t,i,a){this.me=e,this.removedTargetIds=t,this.key=i,this.fe=a}}class PR{constructor(e,t){this.targetId=e,this.ge=t}}class OR{constructor(e,t,i=mn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class u0{constructor(){this.pe=0,this.ye=c0(),this.we=mn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Xe(),t=Xe(),i=Xe();return this.ye.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:De()}}),new hm(this.we,this.Se,e,t,i)}Me(){this.be=!1,this.ye=c0()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Oe(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class yM{constructor(e){this.ke=e,this.qe=new Map,this.Qe=sr(),this.$e=Op(),this.Ue=Op(),this.Ke=new jt(Ke)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const i=this.He(t);switch(e.state){case 0:this.Je(t)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(t);break;case 3:this.Je(t)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),i.Ce(e.resumeToken));break;default:De()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((i,a)=>{this.Je(a)&&t(a)})}Ze(e){const t=e.targetId,i=e.ge.count,a=this.Xe(t);if(a){const l=a.target;if(fg(l))if(i===0){const u=new Se(l.path);this.ze(t,u,Ft.newNoDocument(u,Le.min()))}else Oe(i===1);else{const u=this.et(t);if(u!==i){const d=this.tt(e),m=d?this.nt(d,e,u):1;if(m!==0){this.Ye(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,g)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let u,d;try{u=eo(i).toUint8Array()}catch(m){if(m instanceof JS)return la("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new FE(u,a,l)}catch(m){return la(m instanceof df?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.Ee===0?null:d}nt(e,t,i){return t.ge.count===i-this.st(e,t.targetId)?0:2}st(e,t){const i=this.ke.getRemoteKeysForTarget(t);let a=0;return i.forEach(l=>{const u=this.ke.it(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,l,null),a++)}),a}ot(e){const t=new Map;this.qe.forEach((l,u)=>{const d=this.Xe(u);if(d){if(l.current&&fg(d.target)){const m=new Se(d.target.path);this._t(m).has(u)||this.ut(u,m)||this.ze(u,m,Ft.newNoDocument(m,e))}l.ve&&(t.set(u,l.Fe()),l.Me())}});let i=Xe();this.Ue.forEach((l,u)=>{let d=!0;u.forEachWhile(m=>{const g=this.Xe(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.Qe.forEach((l,u)=>u.setReadTime(e));const a=new cm(e,t,this.Ke,this.Qe,i);return this.Qe=sr(),this.$e=Op(),this.Ue=Op(),this.Ke=new jt(Ke),a}Ge(e,t){if(!this.Je(e))return;const i=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,i),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,i){if(!this.Je(e))return;const a=this.He(e);this.ut(e,t)?a.xe(t,1):a.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),i&&(this.Qe=this.Qe.insert(t,i))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new u0,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new St(Ke),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new St(Ke),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new u0),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Op(){return new jt(Se.comparator)}function c0(){return new jt(Se.comparator)}const vM={asc:"ASCENDING",desc:"DESCENDING"},EM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bM={and:"AND",or:"OR"};class TM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Lv(n,e){return n.useProto3Json||rm(e)?e:{value:e}}function Sh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wM(n,e){return Sh(n,e.toTimestamp())}function wn(n){return Oe(!!n),Le.fromTimestamp(function(t){const i=Ja(t);return new Yt(i.seconds,i.nanos)}(n))}function zE(n,e){return Uv(n,e).canonicalString()}function Uv(n,e){const t=function(a){return new ut(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function VR(n){const e=ut.fromString(n);return Oe($R(e)),e}function zf(n,e){return zE(n.databaseId,e.path)}function sa(n,e){const t=VR(e);if(t.get(1)!==n.databaseId.projectId)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(UR(t))}function MR(n,e){return zE(n.databaseId,e)}function LR(n){const e=VR(n);return e.length===4?ut.emptyPath():UR(e)}function jv(n){return new ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function UR(n){return Oe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function h0(n,e,t){return{name:zf(n,e),fields:t.value.mapValue.fields}}function jR(n,e,t){const i=sa(n,e.name),a=wn(e.updateTime),l=e.createTime?wn(e.createTime):Le.min(),u=new mi({mapValue:{fields:e.fields}}),d=Ft.newFoundDocument(i,a,l,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function AM(n,e){return"found"in e?function(i,a){Oe(!!a.found),a.found.name,a.found.updateTime;const l=sa(i,a.found.name),u=wn(a.found.updateTime),d=a.found.createTime?wn(a.found.createTime):Le.min(),m=new mi({mapValue:{fields:a.found.fields}});return Ft.newFoundDocument(l,u,d,m)}(n,e):"missing"in e?function(i,a){Oe(!!a.missing),Oe(!!a.readTime);const l=sa(i,a.missing),u=wn(a.readTime);return Ft.newNoDocument(l,u)}(n,e):De()}function IM(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:De()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(g,v){return g.useProto3Json?(Oe(v===void 0||typeof v=="string"),mn.fromBase64String(v||"")):(Oe(v===void 0||v instanceof Buffer||v instanceof Uint8Array),mn.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(g){const v=g.code===void 0?te.UNKNOWN:NR(g.code);return new he(v,g.message||"")}(u);t=new OR(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=sa(n,i.document.name),l=wn(i.document.updateTime),u=i.document.createTime?wn(i.document.createTime):Le.min(),d=new mi({mapValue:{fields:i.document.fields}}),m=Ft.newFoundDocument(a,l,u,d),g=i.targetIds||[],v=i.removedTargetIds||[];t=new Yp(g,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=sa(n,i.document),l=i.readTime?wn(i.readTime):Le.min(),u=Ft.newNoDocument(a,l),d=i.removedTargetIds||[];t=new Yp([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=sa(n,i.document),l=i.removedTargetIds||[];t=new Yp([],l,a,null)}else{if(!("filter"in e))return De();{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new gM(a,l),d=i.targetId;t=new PR(d,u)}}return t}function qf(n,e){let t;if(e instanceof Fh)t={update:h0(n,e.key,e.value)};else if(e instanceof zh)t={delete:zf(n,e.key)};else if(e instanceof so)t={update:h0(n,e.key,e.data),updateMask:NM(e.fieldMask)};else{if(!(e instanceof LE))return De();t={verify:zf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,u){const d=u.transform;if(d instanceof Ah)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Lu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Uu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ih)return{fieldPath:u.field.canonicalString(),increment:d.Ie};throw De()}(0,i))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:wM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:De()}(n,e.precondition)),t}function Bv(n,e){const t=e.currentDocument?function(l){return l.updateTime!==void 0?Wt.updateTime(wn(l.updateTime)):l.exists!==void 0?Wt.exists(l.exists):Wt.none()}(e.currentDocument):Wt.none(),i=e.updateTransforms?e.updateTransforms.map(a=>function(u,d){let m=null;if("setToServerValue"in d)Oe(d.setToServerValue==="REQUEST_TIME"),m=new Ah;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];m=new Lu(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];m=new Uu(v)}else"increment"in d?m=new Ih(u,d.increment):De();const g=Qt.fromServerFormat(d.fieldPath);return new um(g,m)}(n,a)):[];if(e.update){e.update.name;const a=sa(n,e.update.name),l=new mi({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=function(m){const g=m.fieldPaths||[];return new rr(g.map(v=>Qt.fromServerFormat(v)))}(e.updateMask);return new so(a,l,u,t,i)}return new Fh(a,l,t,i)}if(e.delete){const a=sa(n,e.delete);return new zh(a,t)}if(e.verify){const a=sa(n,e.verify);return new LE(a,t)}return De()}function SM(n,e){return n&&n.length>0?(Oe(e!==void 0),n.map(t=>function(a,l){let u=a.updateTime?wn(a.updateTime):wn(l);return u.isEqual(Le.min())&&(u=wn(l)),new fM(u,a.transformResults||[])}(t,e))):[]}function BR(n,e){return{documents:[MR(n,e.path)]}}function FR(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=MR(n,a);const l=function(g){if(g.length!==0)return HR(It.create(g,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(g){if(g.length!==0)return g.map(v=>function(I){return{field:th(I.field),direction:CM(I.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Lv(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ht:t,parent:a}}function zR(n){let e=LR(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){Oe(i===1);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(b){const I=qR(b);return I instanceof It&&OE(I)?I.getFilters():[I]}(t.where));let u=[];t.orderBy&&(u=function(b){return b.map(I=>function(U){return new Ff(nh(U.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(U.direction))}(I))}(t.orderBy));let d=null;t.limit&&(d=function(b){let I;return I=typeof b=="object"?b.value:b,rm(I)?null:I}(t.limit));let m=null;t.startAt&&(m=function(b){const I=!!b.before,P=b.values||[];return new Il(P,I)}(t.startAt));let g=null;return t.endAt&&(g=function(b){const I=!b.before,P=b.values||[];return new Il(P,I)}(t.endAt)),pR(e,a,u,l,d,"F",m,g)}function RM(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qR(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=nh(t.unaryFilter.field);return ct.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=nh(t.unaryFilter.field);return ct.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=nh(t.unaryFilter.field);return ct.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=nh(t.unaryFilter.field);return ct.create(u,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(n):n.fieldFilter!==void 0?function(t){return ct.create(nh(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return It.create(t.compositeFilter.filters.map(i=>qR(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return De()}}(t.compositeFilter.op))}(n):De()}function CM(n){return vM[n]}function DM(n){return EM[n]}function xM(n){return bM[n]}function th(n){return{fieldPath:n.canonicalString()}}function nh(n){return Qt.fromServerFormat(n.fieldPath)}function HR(n){return n instanceof ct?function(t){if(t.op==="=="){if(WA(t.value))return{unaryFilter:{field:th(t.field),op:"IS_NAN"}};if(QA(t.value))return{unaryFilter:{field:th(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(WA(t.value))return{unaryFilter:{field:th(t.field),op:"IS_NOT_NAN"}};if(QA(t.value))return{unaryFilter:{field:th(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:th(t.field),op:DM(t.op),value:t.value}}}(n):n instanceof It?function(t){const i=t.getFilters().map(a=>HR(a));return i.length===1?i[0]:{compositeFilter:{op:xM(t.op),filters:i}}}(n):De()}function NM(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $R(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,t,i,a,l=Le.min(),u=Le.min(),d=mn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Ga(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.Tt=e}}function PM(n,e){let t;if(e.document)t=jR(n.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Se.fromSegments(e.noDocument.path),a=Bu(e.noDocument.readTime);t=Ft.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return De();{const i=Se.fromSegments(e.unknownDocument.path),a=Bu(e.unknownDocument.version);t=Ft.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime(function(a){const l=new Yt(a[0],a[1]);return Le.fromTimestamp(l)}(e.readTime)),t}function d0(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:gg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(l,u){return{name:zf(l,u.key),fields:u.data.value.mapValue.fields,updateTime:Sh(l,u.version.toTimestamp()),createTime:Sh(l,u.createTime.toTimestamp())}}(n.Tt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:ju(e.version)};else{if(!e.isUnknownDocument())return De();i.unknownDocument={path:t.path.toArray(),version:ju(e.version)}}return i}function gg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ju(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bu(n){const e=new Yt(n.seconds,n.nanoseconds);return Le.fromTimestamp(e)}function Au(n,e){const t=(e.baseMutations||[]).map(l=>Bv(n.Tt,l));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];u.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map(l=>Bv(n.Tt,l)),a=Yt.fromMillis(e.localWriteTimeMs);return new UE(e.batchId,a,t,i)}function ff(n){const e=Bu(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Bu(n.lastLimboFreeSnapshotVersion):Le.min();let i;return i=function(l){return l.documents!==void 0}(n.query)?function(l){return Oe(l.documents.length===1),qi(Bh(LR(l.documents[0])))}(n.query):function(l){return qi(zR(l))}(n.query),new Ga(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,mn.fromBase64String(n.resumeToken))}function KR(n,e){const t=ju(e.snapshotVersion),i=ju(e.lastLimboFreeSnapshotVersion);let a;a=fg(e.target)?BR(n.Tt,e.target):FR(n.Tt,e.target).ht;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mu(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function qE(n){const e=zR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?pg(e,e.limit,"L"):e}function iv(n,e){return new BE(e.largestBatchId,Bv(n.Tt,e.overlayMutation))}function f0(n,e){const t=e.path.lastSegment();return[n,Si(e.path.popLast()),t]}function m0(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:ju(i.readTime),documentKey:Si(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{getBundleMetadata(e,t){return p0(e).get(t).next(i=>{if(i)return function(l){return{id:l.bundleId,createTime:Bu(l.createTime),version:l.version}}(i)})}saveBundleMetadata(e,t){return p0(e).put(function(a){return{bundleId:a.id,createTime:ju(wn(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return g0(e).get(t).next(i=>{if(i)return function(l){return{name:l.name,query:qE(l.bundledQuery),readTime:Bu(l.readTime)}}(i)})}saveNamedQuery(e,t){return g0(e).put(function(a){return{name:a.name,readTime:ju(wn(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function p0(n){return jn(n,Lg)}function g0(n){return jn(n,Ug)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const i=t.uid||"";return new $g(e,i)}getOverlay(e,t){return Zd(e).get(f0(this.userId,t)).next(i=>i?iv(this.serializer,i):null)}getOverlays(e,t){const i=na();return Y.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){const a=[];return i.forEach((l,u)=>{const d=new BE(t,u);a.push(this.Et(e,d))}),Y.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach(u=>a.add(Si(u.getCollectionPath())));const l=[];return a.forEach(u=>{const d=IDBKeyRange.bound([this.userId,u,i],[this.userId,u,i+1],!1,!0);l.push(Zd(e).J(Cv,d))}),Y.waitFor(l)}getOverlaysForCollection(e,t,i){const a=na(),l=Si(t),u=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Zd(e).G(Cv,u).next(d=>{for(const m of d){const g=iv(this.serializer,m);a.set(g.getKey(),g)}return a})}getOverlaysForCollectionGroup(e,t,i,a){const l=na();let u;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zd(e).Z({index:QS,range:d},(m,g,v)=>{const b=iv(this.serializer,g);l.size()<a||b.largestBatchId===u?(l.set(b.getKey(),b),u=b.largestBatchId):v.done()}).next(()=>l)}Et(e,t){return Zd(e).put(function(a,l,u){const[d,m,g]=f0(l,u.mutation.key);return{userId:l,collectionPath:m,documentId:g,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:qf(a.Tt,u.mutation)}}(this.serializer,this.userId,t))}}function Zd(n){return jn(n,jg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{dt(e){return jn(e,DE)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const i=t==null?void 0:t.value;return i?mn.fromUint8Array(i):mn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Gt(e.integerValue));else if("doubleValue"in e){const i=Gt(e.doubleValue);isNaN(i)?this.ft(t,13):(this.ft(t,15),kf(i)?t.gt(0):t.gt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.ft(t,20),typeof i=="string"&&(i=Ja(i)),t.yt(`${i.seconds||""}`),t.gt(i.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(eo(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ft(t,45),t.gt(i.latitude||0),t.gt(i.longitude||0)}else"mapValue"in e?sR(e)?this.ft(t,Number.MAX_SAFE_INTEGER):zg(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):De()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const i=e.fields||{};this.ft(t,55);for(const a of Object.keys(i))this.wt(a,t),this.Rt(i[a],t)}vt(e,t){var i,a;const l=e.fields||{};this.ft(t,53);const u=bh,d=((a=(i=l[u].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.length)||0;this.ft(t,15),t.gt(Gt(d)),this.wt(u,t),this.Rt(l[u],t)}Ft(e,t){const i=e.values||[];this.ft(t,50);for(const a of i)this.Rt(a,t)}Dt(e,t){this.ft(t,37),Se.fromName(e).path.forEach(i=>{this.ft(t,60),this.Mt(i,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}}Iu.xt=new Iu;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=255;function VM(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function _0(n){const e=64-function(i){let a=0;for(let l=0;l<8;++l){const u=VM(255&i[l]);if(a+=u,u!==8)break}return a}(n);return Math.ceil(e/8)}class MM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Nt(i.value),i=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.kt(i.value),i=t.next();this.qt()}Qt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Nt(i);else if(i<2048)this.Nt(960|i>>>6),this.Nt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|i>>>12),this.Nt(128|63&i>>>6),this.Nt(128|63&i);else{const a=t.codePointAt(0);this.Nt(240|a>>>18),this.Nt(128|63&a>>>12),this.Nt(128|63&a>>>6),this.Nt(128|63&a)}}this.Bt()}$t(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.kt(i);else if(i<2048)this.kt(960|i>>>6),this.kt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|i>>>12),this.kt(128|63&i>>>6),this.kt(128|63&i);else{const a=t.codePointAt(0);this.kt(240|a>>>18),this.kt(128|63&a>>>12),this.kt(128|63&a>>>6),this.kt(128|63&a)}}this.qt()}Ut(e){const t=this.Kt(e),i=_0(t);this.Wt(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Gt(e){const t=this.Kt(e),i=_0(t);this.Wt(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}zt(){this.jt(Qc),this.jt(255)}Ht(){this.Jt(Qc),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)}(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===Qc?(this.jt(Qc),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===Qc?(this.Jt(Qc),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class LM{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class UM{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class Jd{constructor(){this.Zt=new MM,this.Xt=new LM(this.Zt),this.en=new UM(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,t,i,a){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=a}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Su(this.indexId,this.documentKey,this.arrayValue,i)}}function nl(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=y0(n.arrayValue,e.arrayValue),t!==0?t:(t=y0(n.directionalValue,e.directionalValue),t!==0?t:Se.comparator(n.documentKey,e.documentKey)))}function y0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e){this.rn=new St((t,i)=>Qt.comparator(t.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const i=t;i.isInequality()?this.rn=this.rn.add(i):this._n.push(i)}}get an(){return this.rn.size>1}un(e){if(Oe(e.collectionGroup===this.collectionId),this.an)return!1;const t=Iv(e);if(t!==void 0&&!this.cn(t))return!1;const i=bu(e);let a=new Set,l=0,u=0;for(;l<i.length&&this.cn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.rn.size>0){const d=this.rn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=i[l];if(!this.ln(d,m)||!this.hn(this.sn[u++],m))return!1}++l}for(;l<i.length;++l){const d=i[l];if(u>=this.sn.length||!this.hn(this.sn[u++],d))return!1}return!0}Pn(){if(this.an)return null;let e=new St(Qt.comparator);const t=[];for(const i of this._n)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new qp(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new qp(i.field,0))}for(const i of this.sn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new qp(i.field,i.dir==="asc"?0:1)));return new og(og.UNKNOWN_ID,this.collectionId,t,Of.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(n){var e,t;if(Oe(n instanceof ct||n instanceof It),n instanceof ct){if(n instanceof mR){const a=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(l=>ct.create(n.field,"==",l)))||[];return It.create(a,"or")}return n}const i=n.filters.map(a=>QR(a));return It.create(i,n.op)}function jM(n){if(n.getFilters().length===0)return[];const e=qv(QR(n));return Oe(WR(e)),Fv(e)||zv(e)?[e]:e.getFilters()}function Fv(n){return n instanceof ct}function zv(n){return n instanceof It&&OE(n)}function WR(n){return Fv(n)||zv(n)||function(t){if(t instanceof It&&Ov(t)){for(const i of t.getFilters())if(!Fv(i)&&!zv(i))return!1;return!0}return!1}(n)}function qv(n){if(Oe(n instanceof ct||n instanceof It),n instanceof ct)return n;if(n.filters.length===1)return qv(n.filters[0]);const e=n.filters.map(i=>qv(i));let t=It.create(e,n.op);return t=_g(t),WR(t)?t:(Oe(t instanceof It),Oe(wh(t)),Oe(t.filters.length>1),t.filters.reduce((i,a)=>HE(i,a)))}function HE(n,e){let t;return Oe(n instanceof ct||n instanceof It),Oe(e instanceof ct||e instanceof It),t=n instanceof ct?e instanceof ct?function(a,l){return It.create([a,l],"and")}(n,e):E0(n,e):e instanceof ct?E0(e,n):function(a,l){if(Oe(a.filters.length>0&&l.filters.length>0),wh(a)&&wh(l))return hR(a,l.getFilters());const u=Ov(a)?a:l,d=Ov(a)?l:a,m=u.filters.map(g=>HE(g,d));return It.create(m,"or")}(n,e),_g(t)}function E0(n,e){if(wh(e))return hR(e,n.getFilters());{const t=e.filters.map(i=>HE(n,i));return It.create(t,"or")}}function _g(n){if(Oe(n instanceof ct||n instanceof It),n instanceof ct)return n;const e=n.getFilters();if(e.length===1)return _g(e[0]);if(uR(n))return n;const t=e.map(a=>_g(a)),i=[];return t.forEach(a=>{a instanceof ct?i.push(a):a instanceof It&&(a.op===n.op?i.push(...a.filters):i.push(a))}),i.length===1?i[0]:It.create(i,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(){this.Tn=new $E}addToCollectionParentIndex(e,t){return this.Tn.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(Ir.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(Ir.min())}updateCollectionGroup(e,t,i){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class $E{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new St(ut.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new St(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="IndexedDbIndexManager",kp=new Uint8Array(0);class FM{constructor(e,t){this.databaseId=t,this.In=new $E,this.En=new ro(i=>Mu(i),(i,a)=>am(i,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const l={collectionId:i,parent:Si(a)};return T0(e).put(l)}return Y.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[MS(t),""],!1,!0);return T0(e).G(a).next(l=>{for(const u of l){if(u.collectionId!==t)break;i.push(ta(u.parent))}return i})}addFieldIndex(e,t){const i=ef(e),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(t);delete a.indexId;const l=i.add(a);if(t.indexState){const u=Yc(e);return l.next(d=>{u.put(m0(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const i=ef(e),a=Yc(e),l=Wc(e);return i.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=ef(e),i=Wc(e),a=Yc(e);return t.J().next(()=>i.J()).next(()=>a.J())}createTargetIndexes(e,t){return Y.forEach(this.dn(t),i=>this.getIndexType(e,i).next(a=>{if(a===0||a===1){const l=new v0(i).Pn();if(l!=null)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const i=Wc(e);let a=!0;const l=new Map;return Y.forEach(this.dn(t),u=>this.An(e,u).next(d=>{a&&(a=!!d),l.set(u,d)})).next(()=>{if(a){let u=Xe();const d=[];return Y.forEach(l,(m,g)=>{me(b0,`Using index ${function(se){return`id=${se.indexId}|cg=${se.collectionGroup}|f=${se.fields.map(_e=>`${_e.fieldPath}:${_e.kind}`).join(",")}`}(m)} to execute ${Mu(t)}`);const v=function(se,_e){const pe=Iv(_e);if(pe===void 0)return null;for(const Re of mg(se,pe.fieldPath))switch(Re.op){case"array-contains-any":return Re.value.arrayValue.values||[];case"array-contains":return[Re.value]}return null}(g,m),b=function(se,_e){const pe=new Map;for(const Re of bu(_e))for(const L of mg(se,Re.fieldPath))switch(L.op){case"==":case"in":pe.set(Re.fieldPath.canonicalString(),L.value);break;case"not-in":case"!=":return pe.set(Re.fieldPath.canonicalString(),L.value),Array.from(pe.values())}return null}(g,m),I=function(se,_e){const pe=[];let Re=!0;for(const L of bu(_e)){const O=L.kind===0?e0(se,L.fieldPath,se.startAt):t0(se,L.fieldPath,se.startAt);pe.push(O.value),Re&&(Re=O.inclusive)}return new Il(pe,Re)}(g,m),P=function(se,_e){const pe=[];let Re=!0;for(const L of bu(_e)){const O=L.kind===0?t0(se,L.fieldPath,se.endAt):e0(se,L.fieldPath,se.endAt);pe.push(O.value),Re&&(Re=O.inclusive)}return new Il(pe,Re)}(g,m),U=this.Rn(m,g,I),G=this.Rn(m,g,P),j=this.Vn(m,g,b),Z=this.mn(m.indexId,v,U,I.inclusive,G,P.inclusive,j);return Y.forEach(Z,ie=>i.H(ie,t.limit).next(se=>{se.forEach(_e=>{const pe=Se.fromSegments(_e.documentKey);u.has(pe)||(u=u.add(pe),d.push(pe))})}))}).next(()=>d)}return Y.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=jM(It.create(e.filters,"and")).map(i=>Vv(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,i,a,l,u,d){const m=(t!=null?t.length:1)*Math.max(i.length,l.length),g=m/(t!=null?t.length:1),v=[];for(let b=0;b<m;++b){const I=t?this.fn(t[b/g]):kp,P=this.gn(e,I,i[b%g],a),U=this.pn(e,I,l[b%g],u),G=d.map(j=>this.gn(e,I,j,!0));v.push(...this.createRange(P,U,G))}return v}gn(e,t,i,a){const l=new Su(e,Se.empty(),t,i);return a?l:l.nn()}pn(e,t,i,a){const l=new Su(e,Se.empty(),t,i);return a?l.nn():l}An(e,t){const i=new v0(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let u=null;for(const d of l)i.un(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u})}getIndexType(e,t){let i=2;const a=this.dn(t);return Y.forEach(a,l=>this.An(e,l).next(u=>{u?i!==0&&u.fields.length<function(m){let g=new St(Qt.comparator),v=!1;for(const b of m.filters)for(const I of b.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?v=!0:g=g.add(I.field));for(const b of m.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(v?1:0)}(l)&&(i=1):i=0})).next(()=>function(u){return u.limit!==null}(t)&&a.length>1&&i===2?1:i)}yn(e,t){const i=new Jd;for(const a of bu(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const u=i.tn(a.kind);Iu.xt.At(l,u)}return i.Yt()}fn(e){const t=new Jd;return Iu.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const i=new Jd;return Iu.xt.At(Vu(this.databaseId,t),i.tn(function(l){const u=bu(l);return u.length===0?0:u[u.length-1].kind}(e))),i.Yt()}Vn(e,t,i){if(i===null)return[];let a=[];a.push(new Jd);let l=0;for(const u of bu(e)){const d=i[l++];for(const m of a)if(this.Sn(t,u.fieldPath)&&Bf(d))a=this.bn(a,u,d);else{const g=m.tn(u.kind);Iu.xt.At(d,g)}}return this.Dn(a)}Rn(e,t,i){return this.Vn(e,t,i.position)}Dn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Yt();return t}bn(e,t,i){const a=[...e],l=[];for(const u of i.arrayValue.values||[])for(const d of a){const m=new Jd;m.seed(d.Yt()),Iu.xt.At(u,m.tn(t.kind)),l.push(m)}return l}Sn(e,t){return!!e.filters.find(i=>i instanceof ct&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,t){const i=ef(e),a=Yc(e);return(t?i.G(Rv,IDBKeyRange.bound(t,t)):i.G()).next(l=>{const u=[];return Y.forEach(l,d=>a.get([d.indexId,this.uid]).next(m=>{u.push(function(v,b){const I=b?new Of(b.sequenceNumber,new Ir(Bu(b.readTime),new Se(ta(b.documentKey)),b.largestBatchId)):Of.empty(),P=v.fields.map(([U,G])=>new qp(Qt.fromServerFormat(U),G));return new og(v.indexId,v.collectionGroup,P,I)}(d,m))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ke(i.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const a=ef(e),l=Yc(e);return this.vn(e).next(u=>a.G(Rv,IDBKeyRange.bound(t,t)).next(d=>Y.forEach(d,m=>l.put(m0(m.indexId,this.uid,u,i)))))}updateIndexEntries(e,t){const i=new Map;return Y.forEach(t,(a,l)=>{const u=i.get(a.collectionGroup);return(u?Y.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next(d=>(i.set(a.collectionGroup,d),Y.forEach(d,m=>this.Cn(e,a,m).next(g=>{const v=this.Fn(l,m);return g.isEqual(v)?Y.resolve():this.Mn(e,l,m,g,v)}))))})}xn(e,t,i,a){return Wc(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.wn(i,t.key),documentKey:t.key.path.toArray()})}On(e,t,i,a){return Wc(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.wn(i,t.key),t.key.path.toArray()])}Cn(e,t,i){const a=Wc(e);let l=new St(nl);return a.Z({index:KS,range:IDBKeyRange.only([i.indexId,this.uid,this.wn(i,t)])},(u,d)=>{l=l.add(new Su(i.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>l)}Fn(e,t){let i=new St(nl);const a=this.yn(t,e);if(a==null)return i;const l=Iv(t);if(l!=null){const u=e.data.field(l.fieldPath);if(Bf(u))for(const d of u.arrayValue.values||[])i=i.add(new Su(t.indexId,e.key,this.fn(d),a))}else i=i.add(new Su(t.indexId,e.key,kp,a));return i}Mn(e,t,i,a,l){me(b0,"Updating index entries for document '%s'",t.key);const u=[];return function(m,g,v,b,I){const P=m.getIterator(),U=g.getIterator();let G=Kc(P),j=Kc(U);for(;G||j;){let Z=!1,ie=!1;if(G&&j){const se=v(G,j);se<0?ie=!0:se>0&&(Z=!0)}else G!=null?ie=!0:Z=!0;Z?(b(j),j=Kc(U)):ie?(I(G),G=Kc(P)):(G=Kc(P),j=Kc(U))}}(a,l,nl,d=>{u.push(this.xn(e,t,i,d))},d=>{u.push(this.On(e,t,i,d))}),Y.waitFor(u)}vn(e){let t=1;return Yc(e).Z({index:GS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((u,d)=>nl(u,d)).filter((u,d,m)=>!d||nl(u,m[d-1])!==0);const a=[];a.push(e);for(const u of i){const d=nl(u,e),m=nl(u,t);if(d===0)a[0]=e.nn();else if(d>0&&m<0)a.push(u),a.push(u.nn());else if(m>0)break}a.push(t);const l=[];for(let u=0;u<a.length;u+=2){if(this.Nn(a[u],a[u+1]))return[];const d=[a[u].indexId,this.uid,a[u].arrayValue,a[u].directionalValue,kp,[]],m=[a[u+1].indexId,this.uid,a[u+1].arrayValue,a[u+1].directionalValue,kp,[]];l.push(IDBKeyRange.bound(d,m))}return l}Nn(e,t){return nl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(w0)}getMinOffset(e,t){return Y.mapArray(this.dn(t),i=>this.An(e,i).next(a=>a||De())).next(w0)}}function T0(n){return jn(n,Lf)}function Wc(n){return jn(n,dg)}function ef(n){return jn(n,CE)}function Yc(n){return jn(n,hg)}function w0(n){Oe(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const a=n[i].indexState.offset;IE(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Ir(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YR=41943040;class Ii{static withCacheSize(e){return new Ii(e,Ii.DEFAULT_COLLECTION_PERCENTILE,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(n,e,t){const i=n.store(Is),a=n.store(_h),l=[],u=IDBKeyRange.only(t.batchId);let d=0;const m=i.Z({range:u},(v,b,I)=>(d++,I.delete()));l.push(m.next(()=>{Oe(d===1)}));const g=[];for(const v of t.mutations){const b=qS(e,v.key.path,t.batchId);l.push(a.delete(b)),g.push(v.key)}return Y.waitFor(l).next(()=>g)}function yg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw De();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ii.DEFAULT_COLLECTION_PERCENTILE=10,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ii.DEFAULT=new Ii(YR,Ii.DEFAULT_COLLECTION_PERCENTILE,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ii.DISABLED=new Ii(-1,0,0);class Gg{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Bn={}}static It(e,t,i,a){Oe(e.uid!=="");const l=e.isAuthenticated()?e.uid:"";return new Gg(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return il(e).Z({index:Cu,range:i},(a,l,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,i,a){const l=ih(e),u=il(e);return u.add({}).next(d=>{Oe(typeof d=="number");const m=new UE(d,t,i,a),g=function(P,U,G){const j=G.baseMutations.map(ie=>qf(P.Tt,ie)),Z=G.mutations.map(ie=>qf(P.Tt,ie));return{userId:U,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:j,mutations:Z}}(this.serializer,this.userId,m),v=[];let b=new St((I,P)=>Ke(I.canonicalString(),P.canonicalString()));for(const I of a){const P=qS(this.userId,I.key.path,d);b=b.add(I.key.path.popLast()),v.push(u.put(g)),v.push(l.put(P,bV))}return b.forEach(I=>{v.push(this.indexManager.addToCollectionParentIndex(e,I))}),e.addOnCommittedListener(()=>{this.Bn[d]=m.keys()}),Y.waitFor(v).next(()=>m)})}lookupMutationBatch(e,t){return il(e).get(t).next(i=>i?(Oe(i.userId===this.userId),Au(this.serializer,i)):null)}Ln(e,t){return this.Bn[t]?Y.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const a=i.keys();return this.Bn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return il(e).Z({index:Cu,range:a},(u,d,m)=>{d.userId===this.userId&&(Oe(d.batchId>=i),l=Au(this.serializer,d)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=fl;return il(e).Z({index:Cu,range:t,reverse:!0},(a,l,u)=>{i=l.batchId,u.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,fl],[this.userId,Number.POSITIVE_INFINITY]);return il(e).G(Cu,t).next(i=>i.map(a=>Au(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Hp(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return ih(e).Z({range:a},(u,d,m)=>{const[g,v,b]=u,I=ta(v);if(g===this.userId&&t.path.isEqual(I))return il(e).get(b).next(P=>{if(!P)throw De();Oe(P.userId===this.userId),l.push(Au(this.serializer,P))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new St(Ke);const a=[];return t.forEach(l=>{const u=Hp(this.userId,l.path),d=IDBKeyRange.lowerBound(u),m=ih(e).Z({range:d},(g,v,b)=>{const[I,P,U]=g,G=ta(P);I===this.userId&&l.path.isEqual(G)?i=i.add(U):b.done()});a.push(m)}),Y.waitFor(a).next(()=>this.kn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=Hp(this.userId,i),u=IDBKeyRange.lowerBound(l);let d=new St(Ke);return ih(e).Z({range:u},(m,g,v)=>{const[b,I,P]=m,U=ta(I);b===this.userId&&i.isPrefixOf(U)?U.length===a&&(d=d.add(P)):v.done()}).next(()=>this.kn(e,d))}kn(e,t){const i=[],a=[];return t.forEach(l=>{a.push(il(e).get(l).next(u=>{if(u===null)throw De();Oe(u.userId===this.userId),i.push(Au(this.serializer,u))}))}),Y.waitFor(a).next(()=>i)}removeMutationBatch(e,t){return XR(e.ue,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),Y.forEach(i,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Y.resolve();const i=IDBKeyRange.lowerBound(function(u){return[u]}(this.userId)),a=[];return ih(e).Z({range:i},(l,u,d)=>{if(l[0]===this.userId){const m=ta(l[1]);a.push(m)}else d.done()}).next(()=>{Oe(a.length===0)})})}containsKey(e,t){return ZR(e,this.userId,t)}Qn(e){return JR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:fl,lastStreamToken:""})}}function ZR(n,e,t){const i=Hp(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let u=!1;return ih(n).Z({range:l,Y:!0},(d,m,g)=>{const[v,b,I]=d;v===e&&b===a&&(u=!0),g.done()}).next(()=>u)}function il(n){return jn(n,Is)}function ih(n){return jn(n,_h)}function JR(n){return jn(n,Vf)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Fu(0)}static Kn(){return new Fu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const i=new Fu(t.highestTargetId);return t.highestTargetId=i.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>Le.fromTimestamp(new Yt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Wn(e).next(a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Gn(e,a)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(i=>(i.targetCount+=1,this.jn(t,i),this.Gn(e,i))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Xc(e).delete(t.targetId)).next(()=>this.Wn(e)).next(i=>(Oe(i.targetCount>0),i.targetCount-=1,this.Gn(e,i)))}removeTargets(e,t,i){let a=0;const l=[];return Xc(e).Z((u,d)=>{const m=ff(d);m.sequenceNumber<=t&&i.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))}).next(()=>Y.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Xc(e).Z((i,a)=>{const l=ff(a);t(l)})}Wn(e){return I0(e).get(cg).next(t=>(Oe(t!==null),t))}Gn(e,t){return I0(e).put(cg,t)}zn(e,t){return Xc(e).put(KR(this.serializer,t))}jn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Mu(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Xc(e).Z({range:a,index:$S},(u,d,m)=>{const g=ff(d);am(t,g.target)&&(l=g,m.done())}).next(()=>l)}addMatchingKeys(e,t,i){const a=[],l=al(e);return t.forEach(u=>{const d=Si(u.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(e,i,u))}),Y.waitFor(a)}removeMatchingKeys(e,t,i){const a=al(e);return Y.forEach(t,l=>{const u=Si(l.path);return Y.waitFor([a.delete([i,u]),this.referenceDelegate.removeReference(e,i,l)])})}removeMatchingKeysForTargetId(e,t){const i=al(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=al(e);let l=Xe();return a.Z({range:i,Y:!0},(u,d,m)=>{const g=ta(u[1]),v=new Se(g);l=l.add(v)}).next(()=>l)}containsKey(e,t){const i=Si(t.path),a=IDBKeyRange.bound([i],[MS(i)],!1,!0);let l=0;return al(e).Z({index:RE,Y:!0,range:a},([u,d],m,g)=>{u!==0&&(l++,g.done())}).next(()=>l>0)}lt(e,t){return Xc(e).get(t).next(i=>i?ff(i):null)}}function Xc(n){return jn(n,yh)}function I0(n){return jn(n,Pu)}function al(n){return jn(n,vh)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="LruGarbageCollector",qM=1048576;function R0([n,e],[t,i]){const a=Ke(n,t);return a===0?Ke(e,i):a}class HM{constructor(e){this.Hn=e,this.buffer=new St(R0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();R0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){me(S0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ol(t)?me(S0,"Ignoring IndexedDB error during garbage collection: ",t):await Pl(t)}await this.er(3e5)})}}class $M{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Y.resolve(ir.ae);const i=new HM(t);return this.tr.forEachTarget(e,a=>i.Zn(a.sequenceNumber)).next(()=>this.tr.rr(e,a=>i.Zn(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.tr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(A0)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A0):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let i,a,l,u,d,m,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,u=Date.now(),this.nthSequenceNumber(e,a))).next(b=>(i=b,d=Date.now(),this.removeTargets(e,i,t))).next(b=>(l=b,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(b=>(g=Date.now(),Jc()<=st.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(d-u)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${b} documents in `+(g-m)+`ms
Total Duration: ${g-v}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b})))}}function tC(n,e){return new $M(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,t){this.db=e,this.garbageCollector=tC(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}sr(e){let t=0;return this.rr(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(i,a)=>t(a))}addReference(e,t,i){return Vp(e,i)}removeReference(e,t,i){return Vp(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Vp(e,t)}ar(e,t){return function(a,l){let u=!1;return JR(a).X(d=>ZR(a,d,l).next(m=>(m&&(u=!0),Y.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this._r(e,(u,d)=>{if(d<=t){const m=this.ar(e,u).next(g=>{if(!g)return l++,i.getEntry(e,u).next(()=>(i.removeEntry(u,Le.min()),al(e).delete(function(b){return[0,Si(b.path)]}(u))))});a.push(m)}}).next(()=>Y.waitFor(a)).next(()=>i.apply(e)).next(()=>l)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Vp(e,t)}_r(e,t){const i=al(e);let a,l=ir.ae;return i.Z({index:RE},([u,d],{path:m,sequenceNumber:g})=>{u===0?(l!==ir.ae&&t(new Se(ta(a)),l),l=g,a=m):l=ir.ae}).next(()=>{l!==ir.ae&&t(new Se(ta(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Vp(n,e){return al(n).put(function(i,a){return{targetId:0,path:Si(i.path),sequenceNumber:a}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(){this.changes=new ro(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Y.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return vu(e).put(i)}removeEntry(e,t,i){return vu(e).delete(function(l,u){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],gg(u),d[d.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.ur(e,i)))}getEntry(e,t){let i=Ft.newInvalidDocument(t);return vu(e).Z({index:$p,range:IDBKeyRange.only(tf(t))},(a,l)=>{i=this.cr(t,l)}).next(()=>i)}lr(e,t){let i={size:0,document:Ft.newInvalidDocument(t)};return vu(e).Z({index:$p,range:IDBKeyRange.only(tf(t))},(a,l)=>{i={document:this.cr(t,l),size:yg(l)}}).next(()=>i)}getEntries(e,t){let i=sr();return this.hr(e,t,(a,l)=>{const u=this.cr(a,l);i=i.insert(a,u)}).next(()=>i)}Pr(e,t){let i=sr(),a=new jt(Se.comparator);return this.hr(e,t,(l,u)=>{const d=this.cr(l,u);i=i.insert(l,d),a=a.insert(l,yg(u))}).next(()=>({documents:i,Tr:a}))}hr(e,t,i){if(t.isEmpty())return Y.resolve();let a=new St(x0);t.forEach(m=>a=a.add(m));const l=IDBKeyRange.bound(tf(a.first()),tf(a.last())),u=a.getIterator();let d=u.getNext();return vu(e).Z({index:$p,range:l},(m,g,v)=>{const b=Se.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&x0(d,b)<0;)i(d,null),d=u.getNext();d&&d.isEqual(b)&&(i(d,g),d=u.hasNext()?u.getNext():null),d?v.W(tf(d)):v.done()}).next(()=>{for(;d;)i(d,null),d=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,i,a,l){const u=t.path,d=[u.popLast().toArray(),u.lastSegment(),gg(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vu(e).G(IDBKeyRange.bound(d,m,!0)).next(g=>{l==null||l.incrementDocumentReadCount(g.length);let v=sr();for(const b of g){const I=this.cr(Se.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);I.isFoundDocument()&&(lm(t,I)||a.has(I.key))&&(v=v.insert(I.key,I))}return v})}getAllFromCollectionGroup(e,t,i,a){let l=sr();const u=D0(t,i),d=D0(t,Ir.max());return vu(e).Z({index:HS,range:IDBKeyRange.bound(u,d,!0)},(m,g,v)=>{const b=this.cr(Se.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(b.key,b),l.size===a&&v.done()}).next(()=>l)}newChangeBuffer(e){return new QM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return C0(e).get(Sv).next(t=>(Oe(!!t),t))}ur(e,t){return C0(e).put(Sv,t)}cr(e,t){if(t){const i=PM(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Le.min())))return i}return Ft.newInvalidDocument(e)}}function iC(n){return new KM(n)}class QM extends nC{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new ro(i=>i.toString(),(i,a)=>i.isEqual(a))}applyChanges(e){const t=[];let i=0,a=new St((l,u)=>Ke(l.canonicalString(),u.canonicalString()));return this.changes.forEach((l,u)=>{const d=this.Er.get(l);if(t.push(this.Ir.removeEntry(e,l,d.readTime)),u.isValidDocument()){const m=d0(this.Ir.serializer,u);a=a.add(l.path.popLast());const g=yg(m);i+=g-d.size,t.push(this.Ir.addEntry(e,l,m))}else if(i-=d.size,this.trackRemovals){const m=d0(this.Ir.serializer,u.convertToNoDocument(Le.min()));t.push(this.Ir.addEntry(e,l,m))}}),a.forEach(l=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Ir.updateMetadata(e,i)),Y.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(i=>(this.Er.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:i,Tr:a})=>(a.forEach((l,u)=>{this.Er.set(l,{size:u,readTime:i.get(l).readTime})}),i))}}function C0(n){return jn(n,Mf)}function vu(n){return jn(n,ug)}function tf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function D0(n,e){const t=e.documentKey.path.toArray();return[n,gg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function x0(n,e){const t=n.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=Ke(t[l],i[l]),a)return a;return a=Ke(t.length,i.length),a||(a=Ke(t[t.length-2],i[i.length-2]),a||Ke(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(i!==null&&Ef(i.mutation,a,rr.empty(),Yt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Xe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Xe()){const a=na();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(l=>{let u=hf();return l.forEach((d,m)=>{u=u.insert(d,m.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const i=na();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Xe()))}populateOverlays(e,t,i){const a=[];return i.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,i,a){let l=sr();const u=vf(),d=function(){return vf()}();return t.forEach((m,g)=>{const v=i.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof so)?l=l.insert(g.key,g):v!==void 0?(u.set(g.key,v.mutation.getFieldMask()),Ef(v.mutation,g,v.mutation.getFieldMask(),Yt.now())):u.set(g.key,rr.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((g,v)=>u.set(g,v)),t.forEach((g,v)=>{var b;return d.set(g,new WM(v,(b=u.get(g))!==null&&b!==void 0?b:null))}),d))}recalculateAndSaveOverlays(e,t){const i=vf();let a=new jt((u,d)=>u-d),l=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(m=>{const g=t.get(m);if(g===null)return;let v=i.get(m)||rr.empty();v=d.applyToLocalView(g,v),i.set(m,v);const b=(a.get(d.batchId)||Xe()).add(m);a=a.insert(d.batchId,b)})}).next(()=>{const u=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,v=m.value,b=bR();v.forEach(I=>{if(!l.has(I)){const P=CR(t.get(I),i.get(I));P!==null&&b.set(I,P),l=l.add(I)}}),u.push(this.documentOverlayCache.saveOverlays(e,g,b))}return Y.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return function(u){return Se.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):Y.resolve(na());let d=gh,m=l;return u.next(g=>Y.forEach(g,(v,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),l.get(v)?Y.resolve():this.remoteDocumentCache.getEntry(e,v).next(I=>{m=m.insert(v,I)}))).next(()=>this.populateOverlays(e,g,l)).next(()=>this.computeViews(e,m,g,Xe())).next(v=>({batchId:d,changes:ER(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(i=>{let a=hf();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let u=hf();return this.indexManager.getCollectionParents(e,l).next(d=>Y.forEach(d,m=>{const g=function(b,I){return new io(I,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next(v=>{v.forEach((b,I)=>{u=u.insert(b,I)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a))).next(u=>{l.forEach((m,g)=>{const v=g.getKey();u.get(v)===null&&(u=u.insert(v,Ft.newInvalidDocument(v)))});let d=hf();return u.forEach((m,g)=>{const v=l.get(m);v!==void 0&&Ef(v.mutation,g,rr.empty(),Yt.now()),lm(t,g)&&(d=d.insert(m,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Y.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:wn(a.createTime)}}(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(a){return{name:a.name,query:qE(a.bundledQuery),readTime:wn(a.readTime)}}(t)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.overlays=new jt(Se.comparator),this.Rr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const i=na();return Y.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,l)=>{this.Et(e,t,l)}),Y.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Rr.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(i)),Y.resolve()}getOverlaysForCollection(e,t,i){const a=na(),l=t.length+1,u=new Se(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return Y.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new jt((g,v)=>g-v);const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let v=l.get(g.largestBatchId);v===null&&(v=na(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=na(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((g,v)=>d.set(g,v)),!(d.size()>=a)););return Y.resolve(d)}Et(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Rr.get(a.largestBatchId).delete(i.key);this.Rr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new BE(t,i));let l=this.Rr.get(t);l===void 0&&(l=Xe(),this.Rr.set(t,l)),this.Rr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.Vr=new St(Jn.mr),this.gr=new St(Jn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const i=new Jn(e,t);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.wr(new Jn(e,t))}Sr(e,t){e.forEach(i=>this.removeReference(i,t))}br(e){const t=new Se(new ut([])),i=new Jn(t,e),a=new Jn(t,e+1),l=[];return this.gr.forEachInRange([i,a],u=>{this.wr(u),l.push(u.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Se(new ut([])),i=new Jn(t,e),a=new Jn(t,e+1);let l=Xe();return this.gr.forEachInRange([i,a],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new Jn(e,0),i=this.Vr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Jn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Se.comparator(e.key,t.key)||Ke(e.Cr,t.Cr)}static pr(e,t){return Ke(e.Cr,t.Cr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new St(Jn.mr)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new UE(l,t,i,a);this.mutationQueue.push(u);for(const d of a)this.Mr=this.Mr.add(new Jn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Y.resolve(u)}lookupMutationBatch(e,t){return Y.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Nr(i),l=a<0?0:a;return Y.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?fl:this.Fr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Jn(t,0),a=new Jn(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([i,a],u=>{const d=this.Or(u.Cr);l.push(d)}),Y.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new St(Ke);return t.forEach(a=>{const l=new Jn(a,0),u=new Jn(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,u],d=>{i=i.add(d.Cr)})}),Y.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;Se.isDocumentKey(l)||(l=l.child(""));const u=new Jn(new Se(l),0);let d=new St(Ke);return this.Mr.forEachWhile(m=>{const g=m.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(d=d.add(m.Cr)),!0)},u),Y.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(i=>{const a=this.Or(i);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){Oe(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return Y.forEach(t.mutations,a=>{const l=new Jn(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,t){const i=new Jn(t,0),a=this.Mr.firstAfterOrEqual(i);return Y.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.kr=e,this.docs=function(){return new jt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,u=this.kr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Y.resolve(i?i.document.mutableCopy():Ft.newInvalidDocument(t))}getEntries(e,t){let i=sr();return t.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Ft.newInvalidDocument(a))}),Y.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=sr();const u=t.path,d=new Se(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:v}}=m.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||IE(US(v),i)<=0||(a.has(v.key)||lm(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return Y.resolve(l)}getAllFromCollectionGroup(e,t,i,a){De()}qr(e,t){return Y.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new tL(this)}getSize(e){return Y.resolve(this.size)}}class tL extends nC{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Ir.addEntry(e,a)):this.Ir.removeEntry(i)}),Y.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.persistence=e,this.Qr=new ro(t=>Mu(t),am),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.$r=0,this.Ur=new GE,this.targetCount=0,this.Kr=Fu.Un()}forEachTarget(e,t){return this.Qr.forEach((i,a)=>t(a)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.$r&&(this.$r=t),Y.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Fu(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.zn(t),Y.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.Qr.forEach((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Qr.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),Y.waitFor(l).next(()=>a)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const i=this.Qr.get(t)||null;return Y.resolve(i)}addMatchingKeys(e,t,i){return this.Ur.yr(t,i),Y.resolve()}removeMatchingKeys(e,t,i){this.Ur.Sr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(u=>{l.push(a.markPotentiallyOrphaned(e,u))}),Y.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ur.vr(t);return Y.resolve(i)}containsKey(e,t){return Y.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new ir(0),this.zr=!1,this.zr=!0,this.jr=new ZM,this.referenceDelegate=e(this),this.Hr=new nL(this),this.indexManager=new BM,this.remoteDocumentCache=function(a){return new eL(a)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new GR(t),this.Yr=new YM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new XM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Wr[e.toKey()];return i||(i=new JM(t,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,i){me("MemoryPersistence","Starting transaction:",e);const a=new iL(this.Gr.next());return this.referenceDelegate.Zr(),i(a).next(l=>this.referenceDelegate.Xr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}ei(e,t){return Y.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,t)))}}class iL extends BS{constructor(e){super(),this.currentSequenceNumber=e}}class Kg{constructor(e){this.persistence=e,this.ti=new GE,this.ni=null}static ri(e){return new Kg(e)}get ii(){if(this.ni)return this.ni;throw De()}addReference(e,t,i){return this.ti.addReference(i,t),this.ii.delete(i.toString()),Y.resolve()}removeReference(e,t,i){return this.ti.removeReference(i,t),this.ii.add(i.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Y.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(a=>this.ii.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.ii.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.ii,i=>{const a=Se.fromPath(i);return this.si(e,a).next(l=>{l||t.removeEntry(a,Le.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(i=>{i?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return Y.or([()=>Y.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class vg{constructor(e,t){this.persistence=e,this.oi=new ro(i=>Si(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=tC(this,t)}static ri(e,t){return new vg(e,t)}Zr(){}Xr(e){return Y.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}sr(e){let t=0;return this.rr(e,i=>{t++}).next(()=>t)}rr(e,t){return Y.forEach(this.oi,(i,a)=>this.ar(e,i,a).next(l=>l?Y.resolve():t(a)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.qr(e,u=>this.ar(e,u,t).next(d=>{d||(i++,l.removeEntry(u,Le.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Y.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),Y.resolve()}removeReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Y.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kp(e.data.value)),t}ar(e,t,i){return Y.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.oi.get(t);return Y.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.serializer=e}B(e,t,i,a){const l=new Mg("createOrUpgrade",t);i<1&&a>=1&&(function(m){m.createObjectStore(sm)}(e),function(m){m.createObjectStore(Vf,{keyPath:EV}),m.createObjectStore(Is,{keyPath:zA,autoIncrement:!0}).createIndex(Cu,qA,{unique:!0}),m.createObjectStore(_h)}(e),N0(e),function(m){m.createObjectStore(Tu)}(e));let u=Y.resolve();return i<3&&a>=3&&(i!==0&&(function(m){m.deleteObjectStore(vh),m.deleteObjectStore(yh),m.deleteObjectStore(Pu)}(e),N0(e)),u=u.next(()=>function(m){const g=m.store(Pu),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Le.min().toTimestamp(),targetCount:0};return g.put(cg,v)}(l))),i<4&&a>=4&&(i!==0&&(u=u.next(()=>function(m,g){return g.store(Is).G().next(b=>{m.deleteObjectStore(Is),m.createObjectStore(Is,{keyPath:zA,autoIncrement:!0}).createIndex(Cu,qA,{unique:!0});const I=g.store(Is),P=b.map(U=>I.put(U));return Y.waitFor(P)})}(e,l))),u=u.next(()=>{(function(m){m.createObjectStore(Eh,{keyPath:DV})})(e)})),i<5&&a>=5&&(u=u.next(()=>this._i(l))),i<6&&a>=6&&(u=u.next(()=>(function(m){m.createObjectStore(Mf)}(e),this.ai(l)))),i<7&&a>=7&&(u=u.next(()=>this.ui(l))),i<8&&a>=8&&(u=u.next(()=>this.ci(e,l))),i<9&&a>=9&&(u=u.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&a>=10&&(u=u.next(()=>this.li(l))),i<11&&a>=11&&(u=u.next(()=>{(function(m){m.createObjectStore(Lg,{keyPath:xV})})(e),function(m){m.createObjectStore(Ug,{keyPath:NV})}(e)})),i<12&&a>=12&&(u=u.next(()=>{(function(m){const g=m.createObjectStore(jg,{keyPath:UV});g.createIndex(Cv,jV,{unique:!1}),g.createIndex(QS,BV,{unique:!1})})(e)})),i<13&&a>=13&&(u=u.next(()=>function(m){const g=m.createObjectStore(ug,{keyPath:TV});g.createIndex($p,wV),g.createIndex(HS,AV)}(e)).next(()=>this.hi(e,l)).next(()=>e.deleteObjectStore(Tu))),i<14&&a>=14&&(u=u.next(()=>this.Pi(e,l))),i<15&&a>=15&&(u=u.next(()=>function(m){m.createObjectStore(CE,{keyPath:PV,autoIncrement:!0}).createIndex(Rv,OV,{unique:!1}),m.createObjectStore(hg,{keyPath:kV}).createIndex(GS,VV,{unique:!1}),m.createObjectStore(dg,{keyPath:MV}).createIndex(KS,LV,{unique:!1})}(e))),i<16&&a>=16&&(u=u.next(()=>{t.objectStore(hg).clear()}).next(()=>{t.objectStore(dg).clear()})),i<17&&a>=17&&(u=u.next(()=>{(function(m){m.createObjectStore(DE,{keyPath:FV})})(e)})),u}ai(e){let t=0;return e.store(Tu).Z((i,a)=>{t+=yg(a)}).next(()=>{const i={byteSize:t};return e.store(Mf).put(Sv,i)})}_i(e){const t=e.store(Vf),i=e.store(Is);return t.G().next(a=>Y.forEach(a,l=>{const u=IDBKeyRange.bound([l.userId,fl],[l.userId,l.lastAcknowledgedBatchId]);return i.G(Cu,u).next(d=>Y.forEach(d,m=>{Oe(m.userId===l.userId);const g=Au(this.serializer,m);return XR(e,l.userId,g).next(()=>{})}))}))}ui(e){const t=e.store(vh),i=e.store(Tu);return e.store(Pu).get(cg).next(a=>{const l=[];return i.Z((u,d)=>{const m=new ut(u),g=function(b){return[0,Si(b)]}(m);l.push(t.get(g).next(v=>v?Y.resolve():(b=>t.put({targetId:0,path:Si(b),sequenceNumber:a.highestListenSequenceNumber}))(m)))}).next(()=>Y.waitFor(l))})}ci(e,t){e.createObjectStore(Lf,{keyPath:CV});const i=t.store(Lf),a=new $E,l=u=>{if(a.add(u)){const d=u.lastSegment(),m=u.popLast();return i.put({collectionId:d,parent:Si(m)})}};return t.store(Tu).Z({Y:!0},(u,d)=>{const m=new ut(u);return l(m.popLast())}).next(()=>t.store(_h).Z({Y:!0},([u,d,m],g)=>{const v=ta(d);return l(v.popLast())}))}li(e){const t=e.store(yh);return t.Z((i,a)=>{const l=ff(a),u=KR(this.serializer,l);return t.put(u)})}hi(e,t){const i=t.store(Tu),a=[];return i.Z((l,u)=>{const d=t.store(ug),m=function(b){return b.document?new Se(ut.fromString(b.document.name).popFirst(5)):b.noDocument?Se.fromSegments(b.noDocument.path):b.unknownDocument?Se.fromSegments(b.unknownDocument.path):De()}(u).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(d.put(g))}).next(()=>Y.waitFor(a))}Pi(e,t){const i=t.store(Is),a=iC(this.serializer),l=new KE(Kg.ri,this.serializer.Tt);return i.G().next(u=>{const d=new Map;return u.forEach(m=>{var g;let v=(g=d.get(m.userId))!==null&&g!==void 0?g:Xe();Au(this.serializer,m).keys().forEach(b=>v=v.add(b)),d.set(m.userId,v)}),Y.forEach(d,(m,g)=>{const v=new ei(g),b=$g.It(this.serializer,v),I=l.getIndexManager(v),P=Gg.It(v,this.serializer,I,l.referenceDelegate);return new rC(a,P,b,I).recalculateAndSaveOverlaysForDocumentKeys(new Dv(t,ir.ae),m).next()})})}}function N0(n){n.createObjectStore(vh,{keyPath:SV}).createIndex(RE,RV,{unique:!0}),n.createObjectStore(yh,{keyPath:"targetId"}).createIndex($S,IV,{unique:!0}),n.createObjectStore(Pu)}const rl="IndexedDbPersistence",rv=18e5,sv=5e3,av="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sC="main";class QE{constructor(e,t,i,a,l,u,d,m,g,v,b=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Ti=l,this.window=u,this.document=d,this.Ii=g,this.Ei=v,this.di=b,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=I=>Promise.resolve(),!QE.D())throw new he(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new GM(this,a),this.gi=t+sC,this.serializer=new GR(m),this.pi=new ra(this.gi,this.di,new rL(this.serializer)),this.jr=new kM,this.Hr=new zM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iC(this.serializer),this.Yr=new OM,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,v===!1&&Tn(rl,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(te.FAILED_PRECONDITION,av);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new ir(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Mp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(Ol(e))return me(rl,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return me(rl,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return nf(e).get(Gc).next(t=>Y.resolve(this.Ni(t)))}Bi(e){return Mp(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,rv)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const i=jn(t,Eh);return i.G().next(a=>{const l=this.qi(a,rv),u=a.filter(d=>l.indexOf(d)===-1);return Y.forEach(u,d=>i.delete(d.clientId)).next(()=>u)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?Y.resolve(!0):nf(e).get(Gc).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,sv)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new he(te.FAILED_PRECONDITION,av);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mp(e).G().next(i=>this.qi(i,sv).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||u&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&me(rl,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[sm,Eh],e=>{const t=new Dv(e,ir.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(i=>this.ki(i.updateTimeMs,t)&&!this.$i(i.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>Mp(e).G().next(t=>this.qi(t,rv).map(i=>i.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Gg.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new FM(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return $g.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,i){me(rl,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=function(m){return m===17?HV:m===16?qV:m===15?xE:m===14?XS:m===13?YS:m===12?zV:m===11?WS:void De()}(this.di);let u;return this.pi.runTransaction(e,a,l,d=>(u=new Dv(d,this.Gr?this.Gr.next():ir.ae),t==="readwrite-primary"?this.Fi(u).next(m=>!!m||this.Mi(u)).next(m=>{if(!m)throw Tn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new he(te.FAILED_PRECONDITION,jS);return i(u)}).next(m=>this.Oi(u).next(()=>m)):this.ji(u).next(()=>i(u)))).then(d=>(u.raiseOnCommittedEvent(),d))}ji(e){return nf(e).get(Gc).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,sv)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(te.FAILED_PRECONDITION,av)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nf(e).put(Gc,t)}static D(){return ra.D()}xi(e){const t=nf(e);return t.get(Gc).next(i=>this.Ni(i)?(me(rl,"Releasing primary lease."),t.delete(Gc)):Y.resolve())}ki(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Tn(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const t=/(?:Version|Mobile)\/1[456]/;mS()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const i=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return me(rl,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Tn(rl,"Failed to get zombied client id.",i),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Tn("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nf(n){return jn(n,sm)}function Mp(n){return jn(n,Eh)}function WE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Hi=i,this.Ji=a}static Yi(e,t){let i=Xe(),a=Xe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new YE(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return mS()?8:FS(nn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.rs(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.ss(e,t,a,i).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new sL;return this._s(e,t,u).next(d=>{if(l.result=d,this.Xi)return this.us(e,t,u,d.size)})}).next(()=>l.result)}us(e,t,i,a){return i.documentReadCount<this.es?(Jc()<=st.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",eh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Y.resolve()):(Jc()<=st.DEBUG&&me("QueryEngine","Query:",eh(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ts*a?(Jc()<=st.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",eh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qi(t))):Y.resolve())}rs(e,t){if(n0(t))return Y.resolve(null);let i=qi(t);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=pg(t,null,"F"),i=qi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const u=Xe(...l);return this.ns.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,i).next(m=>{const g=this.cs(t,d);return this.ls(t,g,u,m.readTime)?this.rs(e,pg(t,null,"F")):this.hs(e,g,t,m)}))})))}ss(e,t,i,a){return n0(t)||a.isEqual(Le.min())?Y.resolve(null):this.ns.getDocuments(e,i).next(l=>{const u=this.cs(t,l);return this.ls(t,u,i,a)?Y.resolve(null):(Jc()<=st.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),eh(t)),this.hs(e,u,t,LS(a,gh)).next(d=>d))})}cs(e,t){let i=new St(yR(e));return t.forEach((a,l)=>{lm(e,l)&&(i=i.add(l))}),i}ls(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}_s(e,t,i){return Jc()<=st.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",eh(t)),this.ns.getDocumentsMatchingQuery(e,t,Ir.min(),i)}hs(e,t,i,a){return this.ns.getDocumentsMatchingQuery(e,i,a).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="LocalStore",aL=3e8;class oL{constructor(e,t,i,a){this.persistence=e,this.Ps=t,this.serializer=a,this.Ts=new jt(Ke),this.Is=new ro(l=>Mu(l),am),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rC(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function oC(n,e,t,i){return new oL(n,e,t,i)}async function lC(n,e){const t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,t.As(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const u=[],d=[];let m=Xe();for(const g of a){u.push(g.batchId);for(const v of g.mutations)m=m.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(i,m).next(g=>({Rs:g,removedBatchIds:u,addedBatchIds:d}))})})}function lL(n,e){const t=Ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,m,g,v){const b=g.batch,I=b.keys();let P=Y.resolve();return I.forEach(U=>{P=P.next(()=>v.getEntry(m,U)).next(G=>{const j=g.docVersions.get(U);Oe(j!==null),G.version.compareTo(j)<0&&(b.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),v.addEntry(G)))})}),P.next(()=>d.mutationQueue.removeMutationBatch(m,b))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let m=Xe();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function uC(n){const e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function uL(n,e){const t=Ce(n),i=e.snapshotVersion;let a=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});a=t.Ts;const d=[];e.targetChanges.forEach((v,b)=>{const I=a.get(b);if(!I)return;d.push(t.Hr.removeMatchingKeys(l,v.removedDocuments,b).next(()=>t.Hr.addMatchingKeys(l,v.addedDocuments,b)));let P=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?P=P.withResumeToken(mn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):v.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(v.resumeToken,i)),a=a.insert(b,P),function(G,j,Z){return G.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=aL?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0}(I,P,v)&&d.push(t.Hr.updateTargetData(l,P))});let m=sr(),g=Xe();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),d.push(cC(l,u,e.documentUpdates).next(v=>{m=v.Vs,g=v.fs})),!i.isEqual(Le.min())){const v=t.Hr.getLastRemoteSnapshotVersion(l).next(b=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(v)}return Y.waitFor(d).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,g)).next(()=>m)}).then(l=>(t.Ts=a,l))}function cC(n,e,t){let i=Xe(),a=Xe();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let u=sr();return t.forEach((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Le.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):me(XE,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)}),{Vs:u,fs:a}})}function cL(n,e){const t=Ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=fl),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Rh(n,e){const t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Hr.getTargetData(i,e).next(l=>l?(a=l,Y.resolve(a)):t.Hr.allocateTargetId(i).next(u=>(a=new Ga(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Hr.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Ts.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(i.targetId,i),t.Is.set(e,i.targetId)),i})}async function Ch(n,e,t){const i=Ce(n),a=i.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,u=>i.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!Ol(u))throw u;me(XE,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ts=i.Ts.remove(e),i.Is.delete(a.target)}function Eg(n,e,t){const i=Ce(n);let a=Le.min(),l=Xe();return i.persistence.runTransaction("Execute query","readwrite",u=>function(m,g,v){const b=Ce(m),I=b.Is.get(v);return I!==void 0?Y.resolve(b.Ts.get(I)):b.Hr.getTargetData(g,v)}(i,u,qi(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(u,d.targetId).next(m=>{l=m})}).next(()=>i.Ps.getDocumentsMatchingQuery(u,e,t?a:Le.min(),t?l:Xe())).next(d=>(fC(i,_R(e),d),{documents:d,gs:l})))}function hC(n,e){const t=Ce(n),i=Ce(t.Hr),a=t.Ts.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>i.lt(l,e).next(u=>u?u.target:null))}function dC(n,e){const t=Ce(n),i=t.Es.get(e)||Le.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.ds.getAllFromCollectionGroup(a,e,LS(i,gh),Number.MAX_SAFE_INTEGER)).then(a=>(fC(t,e,a),a))}function fC(n,e,t){let i=n.Es.get(e)||Le.min();t.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.Es.set(e,i)}async function hL(n,e,t,i){const a=Ce(n);let l=Xe(),u=sr();for(const g of t){const v=e.ps(g.metadata.name);g.document&&(l=l.add(v));const b=e.ys(g);b.setReadTime(e.ws(g.metadata.readTime)),u=u.insert(v,b)}const d=a.ds.newChangeBuffer({trackRemovals:!0}),m=await Rh(a,function(v){return qi(Bh(ut.fromString(`__bundle__/docs/${v}`)))}(i));return a.persistence.runTransaction("Apply bundle documents","readwrite",g=>cC(g,d,u).next(v=>(d.apply(g),v)).next(v=>a.Hr.removeMatchingKeysForTargetId(g,m.targetId).next(()=>a.Hr.addMatchingKeys(g,l,m.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(g,v.Vs,v.fs)).next(()=>v.Vs)))}async function dL(n,e,t=Xe()){const i=await Rh(n,qi(qE(e.bundledQuery))),a=Ce(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const u=wn(e.readTime);if(i.snapshotVersion.compareTo(u)>=0)return a.Yr.saveNamedQuery(l,e);const d=i.withResumeToken(mn.EMPTY_BYTE_STRING,u);return a.Ts=a.Ts.insert(d.targetId,d),a.Hr.updateTargetData(l,d).next(()=>a.Hr.removeMatchingKeysForTargetId(l,i.targetId)).next(()=>a.Hr.addMatchingKeys(l,t,i.targetId)).next(()=>a.Yr.saveNamedQuery(l,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="firestore_clients";function P0(n,e){return`${mC}_${n}_${e}`}const pC="firestore_mutations";function O0(n,e,t){let i=`${pC}_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const gC="firestore_targets";function ov(n,e){return`${gC}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="SharedClientState";class bg{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static Ss(e,t,i){const a=JSON.parse(i);let l,u=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return u&&a.error&&(u=typeof a.error.message=="string"&&typeof a.error.code=="string",u&&(l=new he(a.error.code,a.error.message))),u?new bg(e,t,a.state,l):(Tn(Ys,`Failed to parse mutation state for ID '${t}': ${i}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bf{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ss(e,t){const i=JSON.parse(t);let a,l=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new he(i.error.code,i.error.message))),l?new bf(e,i.state,a):(Tn(Ys,`Failed to parse target state for ID '${e}': ${t}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Tg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ss(e,t){const i=JSON.parse(t);let a=typeof i=="object"&&i.activeTargetIds instanceof Array,l=VE();for(let u=0;a&&u<i.activeTargetIds.length;++u)a=zS(i.activeTargetIds[u]),l=l.add(i.activeTargetIds[u]);return a?new Tg(e,l):(Tn(Ys,`Failed to parse client data for instance '${e}': ${t}`),null)}}class ZE{constructor(e,t){this.clientId=e,this.onlineState=t}static Ss(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new ZE(t.clientId,t.onlineState):(Tn(Ys,`Failed to parse online state: ${e}`),null)}}class Hv{constructor(){this.activeTargetIds=VE()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lv{constructor(e,t,i,a,l){this.window=e,this.Ti=t,this.persistenceKey=i,this.Cs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new jt(Ke),this.started=!1,this.Os=[];const u=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Ns=P0(this.persistenceKey,this.Cs),this.Bs=function(m){return`firestore_sequence_number_${m}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new Hv),this.Ls=new RegExp(`^${mC}_${u}_([^_]*)$`),this.ks=new RegExp(`^${pC}_${u}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${gC}_${u}_(\\d+)$`),this.Qs=function(m){return`firestore_online_state_${m}`}(this.persistenceKey),this.$s=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const i of e){if(i===this.Cs)continue;const a=this.getItem(P0(this.persistenceKey,i));if(a){const l=Tg.Ss(i,a);l&&(this.xs=this.xs.insert(l.clientId,l))}}this.Us();const t=this.storage.getItem(this.Qs);if(t){const i=this.Ks(t);i&&this.Ws(i)}for(const i of this.Os)this.Ms(i);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,i){this.zs(e,t,i),this.js(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(ov(this.persistenceKey,e));if(a){const l=bf.Ss(e,a);l&&(i=l.state)}}return t&&this.Hs.Ds(e),this.Us(),i}removeLocalQueryTarget(e){this.Hs.vs(e),this.Us()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ov(this.persistenceKey,e))}updateQueryState(e,t,i){this.Js(e,t,i)}handleUserChange(e,t,i){t.forEach(a=>{this.js(a)}),this.currentUser=e,i.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return me(Ys,"READ",e,t),t}setItem(e,t){me(Ys,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){me(Ys,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(me(Ys,"EVENT",t.key,t.newValue),t.key===this.Ns)return void Tn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){const i=this.Xs(t.key);return this.eo(i,null)}{const i=this.no(t.key,t.newValue);if(i)return this.eo(i.clientId,i)}}else if(this.ks.test(t.key)){if(t.newValue!==null){const i=this.ro(t.key,t.newValue);if(i)return this.io(i)}}else if(this.qs.test(t.key)){if(t.newValue!==null){const i=this.so(t.key,t.newValue);if(i)return this.oo(i)}}else if(t.key===this.Qs){if(t.newValue!==null){const i=this.Ks(t.newValue);if(i)return this.Ws(i)}}else if(t.key===this.Bs){const i=function(l){let u=ir.ae;if(l!=null)try{const d=JSON.parse(l);Oe(typeof d=="number"),u=d}catch(d){Tn(Ys,"Failed to read sequence number from WebStorage",d)}return u}(t.newValue);i!==ir.ae&&this.sequenceNumberHandler(i)}else if(t.key===this.$s){const i=this._o(t.newValue);await Promise.all(i.map(a=>this.syncEngine.ao(a)))}}}else this.Os.push(t)})}}get Hs(){return this.xs.get(this.Cs)}Us(){this.setItem(this.Ns,this.Hs.bs())}zs(e,t,i){const a=new bg(this.currentUser,e,t,i),l=O0(this.persistenceKey,this.currentUser,e);this.setItem(l,a.bs())}js(e){const t=O0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,i){const a=ov(this.persistenceKey,e),l=new bf(e,t,i);this.setItem(a,l.bs())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const i=this.Xs(e);return Tg.Ss(i,t)}ro(e,t){const i=this.ks.exec(e),a=Number(i[1]),l=i[2]!==void 0?i[2]:null;return bg.Ss(new ei(l),a,t)}so(e,t){const i=this.qs.exec(e),a=Number(i[1]);return bf.Ss(a,t)}Ks(e){return ZE.Ss(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);me(Ys,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const i=t?this.xs.insert(e,t):this.xs.remove(e),a=this.Gs(this.xs),l=this.Gs(i),u=[],d=[];return l.forEach(m=>{a.has(m)||u.push(m)}),a.forEach(m=>{l.has(m)||d.push(m)}),this.syncEngine.lo(u,d).then(()=>{this.xs=i})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=VE();return e.forEach((i,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class _C{constructor(){this.ho=new Hv,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,i){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Hv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="ConnectivityMonitor";class V0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){me(k0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){me(k0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lp=null;function $v(){return Lp===null?Lp=function(){return 268435456+Math.round(2147483648*Math.random())}():Lp++,"0x"+Lp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="RestConnection",mL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pL{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${i}/databases/${a}`,this.wo=this.databaseId.database===xv?`project_id=${i}`:`project_id=${i}&database_id=${a}`}So(e,t,i,a,l){const u=$v(),d=this.bo(e,t.toUriEncodedString());me(uv,`Sending RPC '${e}' ${u}:`,d,i);const m={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(m,a,l),this.vo(e,d,m,i).then(g=>(me(uv,`Received RPC '${e}' ${u}: `,g),g),g=>{throw la(uv,`RPC '${e}' ${u} failed with error: `,g,"url: ",d,"request:",i),g})}Co(e,t,i,a,l,u){return this.So(e,t,i,a,l)}Do(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jh}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}bo(e,t){const i=mL[e];return`${this.po}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="WebChannelConnection";class _L extends pL{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,i,a){const l=$v();return new Promise((u,d)=>{const m=new DS;m.setWithCredentials(!0),m.listenOnce(xS.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case zp.NO_ERROR:const v=m.getResponseJson();me(Ai,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),u(v);break;case zp.TIMEOUT:me(Ai,`RPC '${e}' ${l} timed out`),d(new he(te.DEADLINE_EXCEEDED,"Request time out"));break;case zp.HTTP_ERROR:const b=m.getStatus();if(me(Ai,`RPC '${e}' ${l} failed with status:`,b,"response text:",m.getResponseText()),b>0){let I=m.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I==null?void 0:I.error;if(P&&P.status&&P.message){const U=function(j){const Z=j.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(Z)>=0?Z:te.UNKNOWN}(P.status);d(new he(U,P.message))}else d(new he(te.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new he(te.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{me(Ai,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(a);me(Ai,`RPC '${e}' ${l} sending request:`,a),m.send(t,"POST",g,i,15)})}Wo(e,t,i){const a=$v(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=OS(),d=PS(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Do(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const v=l.join("");me(Ai,`Creating RPC '${e}' stream ${a}: ${v}`,m);const b=u.createWebChannel(v,m);let I=!1,P=!1;const U=new gL({Fo:j=>{P?me(Ai,`Not sending because RPC '${e}' stream ${a} is closed:`,j):(I||(me(Ai,`Opening RPC '${e}' stream ${a} transport.`),b.open(),I=!0),me(Ai,`RPC '${e}' stream ${a} sending:`,j),b.send(j))},Mo:()=>b.close()}),G=(j,Z,ie)=>{j.listen(Z,se=>{try{ie(se)}catch(_e){setTimeout(()=>{throw _e},0)}})};return G(b,cf.EventType.OPEN,()=>{P||(me(Ai,`RPC '${e}' stream ${a} transport opened.`),U.Qo())}),G(b,cf.EventType.CLOSE,()=>{P||(P=!0,me(Ai,`RPC '${e}' stream ${a} transport closed`),U.Uo())}),G(b,cf.EventType.ERROR,j=>{P||(P=!0,la(Ai,`RPC '${e}' stream ${a} transport errored:`,j),U.Uo(new he(te.UNAVAILABLE,"The operation could not be completed")))}),G(b,cf.EventType.MESSAGE,j=>{var Z;if(!P){const ie=j.data[0];Oe(!!ie);const se=ie,_e=(se==null?void 0:se.error)||((Z=se[0])===null||Z===void 0?void 0:Z.error);if(_e){me(Ai,`RPC '${e}' stream ${a} received error:`,_e);const pe=_e.status;let Re=function(x){const k=Cn[x];if(k!==void 0)return NR(k)}(pe),L=_e.message;Re===void 0&&(Re=te.INTERNAL,L="Unknown error status: "+pe+" with message "+_e.message),P=!0,U.Uo(new he(Re,L)),b.close()}else me(Ai,`RPC '${e}' stream ${a} received:`,ie),U.Ko(ie)}}),G(d,NS.STAT_EVENT,j=>{j.stat===wv.PROXY?me(Ai,`RPC '${e}' stream ${a} detected buffering proxy`):j.stat===wv.NOPROXY&&me(Ai,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{U.$o()},0),U}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(){return typeof window<"u"?window:null}function Xp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(n){return new TM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=i,this.zo=a,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),a=Math.max(0,t-i);a>0&&me("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="PersistentStream";class vC{constructor(e,t,i,a,l,u,d,m){this.Ti=e,this.n_=i,this.r_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new JE(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Tn(t.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.i_===t&&this.V_(i,a)},i=>{e(()=>{const a=new he(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(a)})})}V_(e,t){const i=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{i(()=>this.m_(a))}),this.stream.onMessage(a=>{i(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return me(M0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(me(M0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yL extends vC{constructor(e,t,i,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=IM(this.serializer,e),i=function(l){if(!("targetChange"in l))return Le.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Le.min():u.readTime?wn(u.readTime):Le.min()}(e);return this.listener.p_(t,i)}y_(e){const t={};t.database=jv(this.serializer),t.addTarget=function(l,u){let d;const m=u.target;if(d=fg(m)?{documents:BR(l,m)}:{query:FR(l,m).ht},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=kR(l,u.resumeToken);const g=Lv(l,u.expectedCount);g!==null&&(d.expectedCount=g)}else if(u.snapshotVersion.compareTo(Le.min())>0){d.readTime=Sh(l,u.snapshotVersion.toTimestamp());const g=Lv(l,u.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,e);const i=RM(this.serializer,e);i&&(t.labels=i),this.I_(t)}w_(e){const t={};t.database=jv(this.serializer),t.removeTarget=e,this.I_(t)}}class vL extends vC{constructor(e,t,i,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=SM(e.writeResults,e.commitTime),i=wn(e.commitTime);return this.listener.v_(i,t)}C_(){const e={};e.database=jv(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>qf(this.serializer,i))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{}class bL extends EL{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,i,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.So(e,Uv(t,i),a,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(te.UNKNOWN,l.toString())})}Co(e,t,i,a,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.Co(e,Uv(t,i),a,u,d,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(te.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class TL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Tn(t),this.N_=!1):me("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu="RemoteStore";class wL{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(u=>{i.enqueueAndForget(async()=>{Vl(this)&&(me(zu,"Restarting streams for network reachability change."),await async function(m){const g=Ce(m);g.W_.add(4),await qh(g),g.j_.set("Unknown"),g.W_.delete(4),await fm(g)}(this))})}),this.j_=new TL(i,a)}}async function fm(n){if(Vl(n))for(const e of n.G_)await e(!0)}async function qh(n){for(const e of n.G_)await e(!1)}function Qg(n,e){const t=Ce(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),nb(t)?tb(t):$h(t).c_()&&eb(t,e))}function Dh(n,e){const t=Ce(n),i=$h(t);t.K_.delete(e),i.c_()&&EC(t,e),t.K_.size===0&&(i.c_()?i.P_():Vl(t)&&t.j_.set("Unknown"))}function eb(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$h(n).y_(e)}function EC(n,e){n.H_.Ne(e),$h(n).w_(e)}function tb(n){n.H_=new yM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),$h(n).start(),n.j_.B_()}function nb(n){return Vl(n)&&!$h(n).u_()&&n.K_.size>0}function Vl(n){return Ce(n).W_.size===0}function bC(n){n.H_=void 0}async function AL(n){n.j_.set("Online")}async function IL(n){n.K_.forEach((e,t)=>{eb(n,e)})}async function SL(n,e){bC(n),nb(n)?(n.j_.q_(e),tb(n)):n.j_.set("Unknown")}async function RL(n,e,t){if(n.j_.set("Online"),e instanceof OR&&e.state===2&&e.cause)try{await async function(a,l){const u=l.cause;for(const d of l.targetIds)a.K_.has(d)&&(await a.remoteSyncer.rejectListen(d,u),a.K_.delete(d),a.H_.removeTarget(d))}(n,e)}catch(i){me(zu,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await wg(n,i)}else if(e instanceof Yp?n.H_.We(e):e instanceof PR?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Le.min()))try{const i=await uC(n.localStore);t.compareTo(i)>=0&&await function(l,u){const d=l.H_.ot(u);return d.targetChanges.forEach((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.K_.get(g);v&&l.K_.set(g,v.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach((m,g)=>{const v=l.K_.get(m);if(!v)return;l.K_.set(m,v.withResumeToken(mn.EMPTY_BYTE_STRING,v.snapshotVersion)),EC(l,m);const b=new Ga(v.target,m,g,v.sequenceNumber);eb(l,b)}),l.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(i){me(zu,"Failed to raise snapshot:",i),await wg(n,i)}}async function wg(n,e,t){if(!Ol(e))throw e;n.W_.add(1),await qh(n),n.j_.set("Offline"),t||(t=()=>uC(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{me(zu,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await fm(n)})}function TC(n,e){return e().catch(t=>wg(n,t,e))}async function Hh(n){const e=Ce(n),t=Sl(e);let i=e.U_.length>0?e.U_[e.U_.length-1].batchId:fl;for(;CL(e);)try{const a=await cL(e.localStore,i);if(a===null){e.U_.length===0&&t.P_();break}i=a.batchId,DL(e,a)}catch(a){await wg(e,a)}wC(e)&&AC(e)}function CL(n){return Vl(n)&&n.U_.length<10}function DL(n,e){n.U_.push(e);const t=Sl(n);t.c_()&&t.S_&&t.b_(e.mutations)}function wC(n){return Vl(n)&&!Sl(n).u_()&&n.U_.length>0}function AC(n){Sl(n).start()}async function xL(n){Sl(n).C_()}async function NL(n){const e=Sl(n);for(const t of n.U_)e.b_(t.mutations)}async function PL(n,e,t){const i=n.U_.shift(),a=jE.from(i,e,t);await TC(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await Hh(n)}async function OL(n,e){e&&Sl(n).S_&&await async function(i,a){if(function(u){return xR(u)&&u!==te.ABORTED}(a.code)){const l=i.U_.shift();Sl(i).h_(),await TC(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Hh(i)}}(n,e),wC(n)&&AC(n)}async function L0(n,e){const t=Ce(n);t.asyncQueue.verifyOperationInProgress(),me(zu,"RemoteStore received new credentials");const i=Vl(t);t.W_.add(3),await qh(t),i&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await fm(t)}async function Gv(n,e){const t=Ce(n);e?(t.W_.delete(2),await fm(t)):e||(t.W_.add(2),await qh(t),t.j_.set("Unknown"))}function $h(n){return n.J_||(n.J_=function(t,i,a){const l=Ce(t);return l.M_(),new yL(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{xo:AL.bind(null,n),No:IL.bind(null,n),Lo:SL.bind(null,n),p_:RL.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),nb(n)?tb(n):n.j_.set("Unknown")):(await n.J_.stop(),bC(n))})),n.J_}function Sl(n){return n.Y_||(n.Y_=function(t,i,a){const l=Ce(t);return l.M_(),new vL(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:xL.bind(null,n),Lo:OL.bind(null,n),D_:NL.bind(null,n),v_:PL.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Hh(n)):(await n.Y_.stop(),n.U_.length>0&&(me(zu,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const u=Date.now()+i,d=new ib(e,t,u,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gh(n,e){if(Tn("AsyncQueue",`${e}: ${n}`),Ol(n))return new he(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{static emptySet(e){return new lh(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Se.comparator(t.key,i.key):(t,i)=>Se.comparator(t.key,i.key),this.keyedMap=hf(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new lh;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(){this.Z_=new jt(Se.comparator)}track(e){const t=e.doc.key,i=this.Z_.get(t);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(t):e.type===1&&i.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):De():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class xh{constructor(e,t,i,a,l,u,d,m,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new xh(e,t,lh.emptySet(t),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&om(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class VL{constructor(){this.queries=j0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,i){const a=Ce(t),l=a.queries;a.queries=j0(),l.forEach((u,d)=>{for(const m of d.ta)m.onError(i)})})(this,new he(te.ABORTED,"Firestore shutting down"))}}function j0(){return new ro(n=>gR(n),om)}async function rb(n,e){const t=Ce(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.na()&&e.ra()&&(i=2):(l=new kL,i=e.ra()?0:1);try{switch(i){case 0:l.ea=await t.onListen(a,!0);break;case 1:l.ea=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const d=Gh(u,`Initialization of query '${eh(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&ab(t)}async function sb(n,e){const t=Ce(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const u=l.ta.indexOf(e);u>=0&&(l.ta.splice(u,1),l.ta.length===0?a=e.ra()?0:1:!l.na()&&e.ra()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function ML(n,e){const t=Ce(n);let i=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const d of u.ta)d.oa(a)&&(i=!0);u.ea=a}}i&&ab(t)}function LL(n,e,t){const i=Ce(n),a=i.queries.get(e);if(a)for(const l of a.ta)l.onError(t);i.queries.delete(e)}function ab(n){n.ia.forEach(e=>{e.next()})}var Kv,B0;(B0=Kv||(Kv={}))._a="default",B0.Cache="cache";class ob{constructor(e,t,i){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new xh(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const i=t!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=xh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Kv.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e){this.serializer=e}ps(e){return sa(this.serializer,e)}ys(e){return e.metadata.exists?jR(this.serializer,e.document,!1):Ft.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return wn(e)}}class jL{constructor(e,t,i){this.da=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=IC(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;const i=ut.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){const t=new Map,i=new F0(this.serializer);for(const a of e)if(a.metadata.queries){const l=i.ps(a.metadata.name);for(const u of a.metadata.queries){const d=(t.get(u)||Xe()).add(l);t.set(u,d)}}return t}async complete(){const e=await hL(this.localStore,new F0(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(const i of this.queries)await dL(this.localStore,i,t.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}}}function IC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.key=e}}class RC{constructor(e){this.key=e}}class CC{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Xe(),this.mutatedKeys=Xe(),this.ya=yR(e),this.wa=new lh(this.ya)}get Sa(){return this.fa}ba(e,t){const i=t?t.Da:new U0,a=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((v,b)=>{const I=a.get(v),P=lm(this.query,b)?b:null,U=!!I&&this.mutatedKeys.has(I.key),G=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let j=!1;I&&P?I.data.isEqual(P.data)?U!==G&&(i.track({type:3,doc:P}),j=!0):this.va(I,P)||(i.track({type:2,doc:P}),j=!0,(m&&this.ya(P,m)>0||g&&this.ya(P,g)<0)&&(d=!0)):!I&&P?(i.track({type:0,doc:P}),j=!0):I&&!P&&(i.track({type:1,doc:I}),j=!0,(m||g)&&(d=!0)),j&&(P?(u=u.add(P),l=G?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{wa:u,Da:i,ls:d,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((v,b)=>function(P,U){const G=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return G(P)-G(U)}(v.type,b.type)||this.ya(v.doc,b.doc)),this.Ca(i),a=a!=null&&a;const d=t&&!a?this.Fa():[],m=this.pa.size===0&&this.current&&!a?1:0,g=m!==this.ga;return this.ga=m,u.length!==0||g?{snapshot:new xh(this.query,e.wa,l,u,e.mutatedKeys,m===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new U0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Xe(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const t=[];return e.forEach(i=>{this.pa.has(i)||t.push(new RC(i))}),this.pa.forEach(i=>{e.has(i)||t.push(new SC(i))}),t}Oa(e){this.fa=e.gs,this.pa=Xe();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return xh.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Ml="SyncEngine";class BL{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class FL{constructor(e){this.key=e,this.Ba=!1}}class zL{constructor(e,t,i,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new ro(d=>gR(d),om),this.qa=new Map,this.Qa=new Set,this.$a=new jt(Se.comparator),this.Ua=new Map,this.Ka=new GE,this.Wa={},this.Ga=new Map,this.za=Fu.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function qL(n,e,t=!0){const i=Wg(n);let a;const l=i.ka.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Na()):a=await DC(i,e,t,!0),a}async function HL(n,e){const t=Wg(n);await DC(t,e,!0,!1)}async function DC(n,e,t,i){const a=await Rh(n.localStore,qi(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await lb(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&Qg(n.remoteStore,a),d}async function lb(n,e,t,i,a){n.Ha=(b,I,P)=>async function(G,j,Z,ie){let se=j.view.ba(Z);se.ls&&(se=await Eg(G.localStore,j.query,!1).then(({documents:L})=>j.view.ba(L,se)));const _e=ie&&ie.targetChanges.get(j.targetId),pe=ie&&ie.targetMismatches.get(j.targetId)!=null,Re=j.view.applyChanges(se,G.isPrimaryClient,_e,pe);return Qv(G,j.targetId,Re.Ma),Re.snapshot}(n,b,I,P);const l=await Eg(n.localStore,e,!0),u=new CC(e,l.gs),d=u.ba(l.documents),m=hm.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),g=u.applyChanges(d,n.isPrimaryClient,m);Qv(n,t,g.Ma);const v=new BL(e,t,u);return n.ka.set(e,v),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),g.snapshot}async function $L(n,e,t){const i=Ce(n),a=i.ka.get(e),l=i.qa.get(a.targetId);if(l.length>1)return i.qa.set(a.targetId,l.filter(u=>!om(u,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Ch(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Dh(i.remoteStore,a.targetId),Nh(i,a.targetId)}).catch(Pl)):(Nh(i,a.targetId),await Ch(i.localStore,a.targetId,!0))}async function GL(n,e){const t=Ce(n),i=t.ka.get(e),a=t.qa.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Dh(t.remoteStore,i.targetId))}async function KL(n,e,t){const i=db(n);try{const a=await function(u,d){const m=Ce(u),g=Yt.now(),v=d.reduce((P,U)=>P.add(U.key),Xe());let b,I;return m.persistence.runTransaction("Locally write mutations","readwrite",P=>{let U=sr(),G=Xe();return m.ds.getEntries(P,v).next(j=>{U=j,U.forEach((Z,ie)=>{ie.isValidDocument()||(G=G.add(Z))})}).next(()=>m.localDocuments.getOverlayedDocuments(P,U)).next(j=>{b=j;const Z=[];for(const ie of d){const se=pM(ie,b.get(ie.key).overlayedDocument);se!=null&&Z.push(new so(ie.key,se,oR(se.value.mapValue),Wt.exists(!0)))}return m.mutationQueue.addMutationBatch(P,g,Z,d)}).next(j=>{I=j;const Z=j.applyToLocalDocumentSet(b,G);return m.documentOverlayCache.saveOverlays(P,j.batchId,Z)})}).then(()=>({batchId:I.batchId,changes:ER(b)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(u,d,m){let g=u.Wa[u.currentUser.toKey()];g||(g=new jt(Ke)),g=g.insert(d,m),u.Wa[u.currentUser.toKey()]=g}(i,a.batchId,t),await ao(i,a.changes),await Hh(i.remoteStore)}catch(a){const l=Gh(a,"Failed to persist write");t.reject(l)}}async function xC(n,e){const t=Ce(n);try{const i=await uL(t.localStore,e);e.targetChanges.forEach((a,l)=>{const u=t.Ua.get(l);u&&(Oe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?u.Ba=!0:a.modifiedDocuments.size>0?Oe(u.Ba):a.removedDocuments.size>0&&(Oe(u.Ba),u.Ba=!1))}),await ao(t,i,e)}catch(i){await Pl(i)}}function z0(n,e,t){const i=Ce(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.ka.forEach((l,u)=>{const d=u.view.sa(e);d.snapshot&&a.push(d.snapshot)}),function(u,d){const m=Ce(u);m.onlineState=d;let g=!1;m.queries.forEach((v,b)=>{for(const I of b.ta)I.sa(d)&&(g=!0)}),g&&ab(m)}(i.eventManager,e),a.length&&i.La.p_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function QL(n,e,t){const i=Ce(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Ua.get(e),l=a&&a.key;if(l){let u=new jt(Se.comparator);u=u.insert(l,Ft.newNoDocument(l,Le.min()));const d=Xe().add(l),m=new cm(Le.min(),new Map,new jt(Ke),u,d);await xC(i,m),i.$a=i.$a.remove(l),i.Ua.delete(e),hb(i)}else await Ch(i.localStore,e,!1).then(()=>Nh(i,e,t)).catch(Pl)}async function WL(n,e){const t=Ce(n),i=e.batch.batchId;try{const a=await lL(t.localStore,e);cb(t,i,null),ub(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await ao(t,a)}catch(a){await Pl(a)}}async function YL(n,e,t){const i=Ce(n);try{const a=await function(u,d){const m=Ce(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return m.mutationQueue.lookupMutationBatch(g,d).next(b=>(Oe(b!==null),v=b.keys(),m.mutationQueue.removeMutationBatch(g,b))).next(()=>m.mutationQueue.performConsistencyCheck(g)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(g,v,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>m.localDocuments.getDocuments(g,v))})}(i.localStore,e);cb(i,e,t),ub(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await ao(i,a)}catch(a){await Pl(a)}}async function XL(n,e){const t=Ce(n);Vl(t.remoteStore)||me(Ml,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(u){const d=Ce(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(i===fl)return void e.resolve();const a=t.Ga.get(i)||[];a.push(e),t.Ga.set(i,a)}catch(i){const a=Gh(i,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function ub(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function cb(n,e,t){const i=Ce(n);let a=i.Wa[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Wa[i.currentUser.toKey()]=a}}function Nh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.qa.get(e))n.ka.delete(i),t&&n.La.Ja(i,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(i=>{n.Ka.containsKey(i)||NC(n,i)})}function NC(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Dh(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),hb(n))}function Qv(n,e,t){for(const i of t)i instanceof SC?(n.Ka.addReference(i.key,e),ZL(n,i)):i instanceof RC?(me(Ml,"Document no longer in limbo: "+i.key),n.Ka.removeReference(i.key,e),n.Ka.containsKey(i.key)||NC(n,i.key)):De()}function ZL(n,e){const t=e.key,i=t.path.canonicalString();n.$a.get(t)||n.Qa.has(i)||(me(Ml,"New document in limbo: "+t),n.Qa.add(i),hb(n))}function hb(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Se(ut.fromString(e)),i=n.za.next();n.Ua.set(i,new FL(t)),n.$a=n.$a.insert(t,i),Qg(n.remoteStore,new Ga(qi(Bh(t.path)),i,"TargetPurposeLimboResolution",ir.ae))}}async function ao(n,e,t){const i=Ce(n),a=[],l=[],u=[];i.ka.isEmpty()||(i.ka.forEach((d,m)=>{u.push(i.Ha(m,e,t).then(g=>{var v;if((g||t)&&i.isPrimaryClient){const b=g?!g.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,b?"current":"not-current")}if(g){a.push(g);const b=YE.Yi(m.targetId,g);l.push(b)}}))}),await Promise.all(u),i.La.p_(a),await async function(m,g){const v=Ce(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>Y.forEach(g,I=>Y.forEach(I.Hi,P=>v.persistence.referenceDelegate.addReference(b,I.targetId,P)).next(()=>Y.forEach(I.Ji,P=>v.persistence.referenceDelegate.removeReference(b,I.targetId,P)))))}catch(b){if(!Ol(b))throw b;me(XE,"Failed to update sequence numbers: "+b)}for(const b of g){const I=b.targetId;if(!b.fromCache){const P=v.Ts.get(I),U=P.snapshotVersion,G=P.withLastLimboFreeSnapshotVersion(U);v.Ts=v.Ts.insert(I,G)}}}(i.localStore,l))}async function JL(n,e){const t=Ce(n);if(!t.currentUser.isEqual(e)){me(Ml,"User change. New user:",e.toKey());const i=await lC(t.localStore,e);t.currentUser=e,function(l,u){l.Ga.forEach(d=>{d.forEach(m=>{m.reject(new he(te.CANCELLED,u))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ao(t,i.Rs)}}function e2(n,e){const t=Ce(n),i=t.Ua.get(e);if(i&&i.Ba)return Xe().add(i.key);{let a=Xe();const l=t.qa.get(e);if(!l)return a;for(const u of l){const d=t.ka.get(u);a=a.unionWith(d.view.Sa)}return a}}async function t2(n,e){const t=Ce(n),i=await Eg(t.localStore,e.query,!0),a=e.view.Oa(i);return t.isPrimaryClient&&Qv(t,e.targetId,a.Ma),a}async function n2(n,e){const t=Ce(n);return dC(t.localStore,e).then(i=>ao(t,i))}async function i2(n,e,t,i){const a=Ce(n),l=await function(d,m){const g=Ce(d),v=Ce(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",b=>v.Ln(b,m).next(I=>I?g.localDocuments.getDocuments(b,I):Y.resolve(null)))}(a.localStore,e);l!==null?(t==="pending"?await Hh(a.remoteStore):t==="acknowledged"||t==="rejected"?(cb(a,e,i||null),ub(a,e),function(d,m){Ce(Ce(d).mutationQueue).qn(m)}(a.localStore,e)):De(),await ao(a,l)):me(Ml,"Cannot apply mutation batch with id: "+e)}async function r2(n,e){const t=Ce(n);if(Wg(t),db(t),e===!0&&t.ja!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),a=await q0(t,i.toArray());t.ja=!0,await Gv(t.remoteStore,!0);for(const l of a)Qg(t.remoteStore,l)}else if(e===!1&&t.ja!==!1){const i=[];let a=Promise.resolve();t.qa.forEach((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?i.push(u):a=a.then(()=>(Nh(t,u),Ch(t.localStore,u,!0))),Dh(t.remoteStore,u)}),await a,await q0(t,i),function(u){const d=Ce(u);d.Ua.forEach((m,g)=>{Dh(d.remoteStore,g)}),d.Ka.Dr(),d.Ua=new Map,d.$a=new jt(Se.comparator)}(t),t.ja=!1,await Gv(t.remoteStore,!1)}}async function q0(n,e,t){const i=Ce(n),a=[],l=[];for(const u of e){let d;const m=i.qa.get(u);if(m&&m.length!==0){d=await Rh(i.localStore,qi(m[0]));for(const g of m){const v=i.ka.get(g),b=await t2(i,v);b.snapshot&&l.push(b.snapshot)}}else{const g=await hC(i.localStore,u);d=await Rh(i.localStore,g),await lb(i,PC(g),u,!1,d.resumeToken)}a.push(d)}return i.La.p_(l),a}function PC(n){return pR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function s2(n){return function(t){return Ce(Ce(t).persistence).zi()}(Ce(n).localStore)}async function a2(n,e,t,i){const a=Ce(n);if(a.ja)return void me(Ml,"Ignoring unexpected query state notification.");const l=a.qa.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=await dC(a.localStore,_R(l[0])),d=cm.createSynthesizedRemoteEventForCurrentChange(e,t==="current",mn.EMPTY_BYTE_STRING);await ao(a,u,d);break}case"rejected":await Ch(a.localStore,e,!0),Nh(a,e,i);break;default:De()}}async function o2(n,e,t){const i=Wg(n);if(i.ja){for(const a of e){if(i.qa.has(a)&&i.sharedClientState.isActiveQueryTarget(a)){me(Ml,"Adding an already active target "+a);continue}const l=await hC(i.localStore,a),u=await Rh(i.localStore,l);await lb(i,PC(l),u.targetId,!1,u.resumeToken),Qg(i.remoteStore,u)}for(const a of t)i.qa.has(a)&&await Ch(i.localStore,a,!1).then(()=>{Dh(i.remoteStore,a),Nh(i,a)}).catch(Pl)}}function Wg(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=e2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QL.bind(null,e),e.La.p_=ML.bind(null,e.eventManager),e.La.Ja=LL.bind(null,e.eventManager),e}function db(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YL.bind(null,e),e}function l2(n,e,t){const i=Ce(n);(async function(l,u,d){try{const m=await u.getMetadata();if(await function(P,U){const G=Ce(P),j=wn(U.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",Z=>G.Yr.getBundleMetadata(Z,U.id)).then(Z=>!!Z&&Z.createTime.compareTo(j)>=0)}(l.localStore,m))return await u.close(),d._completeWith(function(P){return{taskState:"Success",documentsLoaded:P.totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}}(m)),Promise.resolve(new Set);d._updateProgress(IC(m));const g=new jL(m,l.localStore,u.serializer);let v=await u.Ya();for(;v;){const I=await g.Aa(v);I&&d._updateProgress(I),v=await u.Ya()}const b=await g.complete();return await ao(l,b.ma,void 0),await function(P,U){const G=Ce(P);return G.persistence.runTransaction("Save bundle","readwrite",j=>G.Yr.saveBundleMetadata(j,U))}(l.localStore,m),d._completeWith(b.progress),Promise.resolve(b.Va)}catch(m){return la(Ml,`Loading bundle failed with ${m}`),d._failWith(m),Promise.resolve(new Set)}})(i,e,t).then(a=>{i.sharedClientState.notifyBundleLoaded(a)})}class Hf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dm(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return oC(this.persistence,new aC,e.initialUser,this.serializer)}Xa(e){return new KE(Kg.ri,this.serializer)}Za(e){return new _C}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hf.provider={build:()=>new Hf};class u2 extends Hf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Oe(this.persistence.referenceDelegate instanceof vg);const i=this.persistence.referenceDelegate.garbageCollector;return new eC(i,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Ii.withCacheSize(this.cacheSizeBytes):Ii.DEFAULT;return new KE(i=>vg.ri(i,t),this.serializer)}}class OC extends Hf{constructor(e,t,i){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await db(this.ru.syncEngine),await Hh(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return oC(this.persistence,new aC,e.initialUser,this.serializer)}tu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new eC(i,e.asyncQueue,t)}nu(e,t){const i=new yV(t,this.persistence);return new _V(e.asyncQueue,i)}Xa(e){const t=WE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Ii.withCacheSize(this.cacheSizeBytes):Ii.DEFAULT;return new QE(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,yC(),Xp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new _C}}class c2 extends OC{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof lv&&(this.sharedClientState.syncEngine={uo:i2.bind(null,t),co:a2.bind(null,t),lo:o2.bind(null,t),zi:s2.bind(null,t),ao:n2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci(async i=>{await r2(this.ru.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}Za(e){const t=yC();if(!lv.D(t))throw new he(te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=WE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new lv(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class $f{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>z0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=JL.bind(null,this.syncEngine),await Gv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VL}()}createDatastore(e){const t=dm(e.databaseInfo.databaseId),i=function(l){return new _L(l)}(e.databaseInfo);return function(l,u,d,m){return new bL(l,u,d,m)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,a,l,u,d){return new wL(i,a,l,u,d)}(this.localStore,this.datastore,e.asyncQueue,t=>z0(this.syncEngine,t,0),function(){return V0.D()?new V0:new fL}())}createSyncEngine(e,t){return function(a,l,u,d,m,g,v){const b=new zL(a,l,u,d,m,g);return v&&(b.ja=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=Ce(a);me(zu,"RemoteStore shutting down."),l.W_.add(5),await qh(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}$f.provider={build:()=>new $f};function H0(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Tn("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new pi,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(i=>{i&&i.Ea()?this.metadata.resolve(i.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Ia)}`))},i=>this.metadata.reject(i))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const e=await this.uu();if(e===null)return null;const t=this._u.decode(e),i=Number(t);isNaN(i)&&this.cu(`length string (${t}) is not valid number`);const a=await this.lu(i);return new UL(JSON.parse(a),e.length+i)}hu(){return this.buffer.findIndex(e=>e===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async lu(e){for(;this.buffer.length<e;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}async Pu(){const e=await this.ou.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new he(te.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(a,l){const u=Ce(a),d={documents:l.map(b=>zf(u.serializer,b))},m=await u.Co("BatchGetDocuments",u.serializer.databaseId,ut.emptyPath(),d,l.length),g=new Map;m.forEach(b=>{const I=AM(u.serializer,b);g.set(I.key.toString(),I)});const v=[];return l.forEach(b=>{const I=g.get(b.toString());Oe(!!I),v.push(I)}),v}(this.datastore,e);return t.forEach(i=>this.recordVersion(i)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new zh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,i)=>{const a=Se.fromPath(i);this.mutations.push(new LE(a,this.precondition(a)))}),await async function(i,a){const l=Ce(i),u={writes:a.map(d=>qf(l.serializer,d))};await l.So("Commit",l.serializer.databaseId,ut.emptyPath(),u)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw De();t=Le.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new he(te.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Le.min())?Wt.exists(!1):Wt.updateTime(t):Wt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Le.min()))throw new he(te.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wt.updateTime(t)}return Wt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,t,i,a,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=l,this.Tu=i.maxAttempts,this.a_=new JE(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const e=new d2(this.datastore),t=this.du(e);t&&t.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(a=>{this.Au(a)}))}).catch(i=>{this.Au(i)})})}du(e){try{const t=this.updateFunction(e);return!rm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!xR(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl="FirestoreClient";class m2{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=ei.UNAUTHENTICATED,this.clientId=VS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async u=>{me(Rl,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(me(Rl,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Gh(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function cv(n,e){n.asyncQueue.verifyOperationInProgress(),me(Rl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await lC(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function $0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await fb(n);me(Rl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>L0(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>L0(e.remoteStore,a)),n._onlineComponents=e}async function fb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(Rl,"Using user provided OfflineComponentProvider");try{await cv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===te.FAILED_PRECONDITION||a.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;la("Error using user provided cache. Falling back to memory cache: "+t),await cv(n,new Hf)}}else me(Rl,"Using default OfflineComponentProvider"),await cv(n,new u2(void 0));return n._offlineComponents}async function Xg(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(Rl,"Using user provided OnlineComponentProvider"),await $0(n,n._uninitializedComponentsProvider._online)):(me(Rl,"Using default OnlineComponentProvider"),await $0(n,new $f))),n._onlineComponents}function kC(n){return fb(n).then(e=>e.persistence)}function mb(n){return fb(n).then(e=>e.localStore)}function VC(n){return Xg(n).then(e=>e.remoteStore)}function pb(n){return Xg(n).then(e=>e.syncEngine)}function p2(n){return Xg(n).then(e=>e.datastore)}async function Ph(n){const e=await Xg(n),t=e.eventManager;return t.onListen=qL.bind(null,e.syncEngine),t.onUnlisten=$L.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=GL.bind(null,e.syncEngine),t}function g2(n){return n.asyncQueue.enqueue(async()=>{const e=await kC(n),t=await VC(n);return e.setNetworkEnabled(!0),function(a){const l=Ce(a);return l.W_.delete(0),fm(l)}(t)})}function _2(n){return n.asyncQueue.enqueue(async()=>{const e=await kC(n),t=await VC(n);return e.setNetworkEnabled(!1),async function(a){const l=Ce(a);l.W_.add(0),await qh(l),l.j_.set("Offline")}(t)})}function y2(n,e){const t=new pi;return n.asyncQueue.enqueueAndForget(async()=>async function(a,l,u){try{const d=await function(g,v){const b=Ce(g);return b.persistence.runTransaction("read document","readonly",I=>b.localDocuments.getDocument(I,v))}(a,l);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new he(te.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const m=Gh(d,`Failed to get document '${l} from cache`);u.reject(m)}}(await mb(n),e,t)),t.promise}function MC(n,e,t={}){const i=new pi;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,d,m,g){const v=new Yg({next:I=>{v.su(),u.enqueueAndForget(()=>sb(l,b));const P=I.docs.has(d);!P&&I.fromCache?g.reject(new he(te.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&I.fromCache&&m&&m.source==="server"?g.reject(new he(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),b=new ob(Bh(d.path),v,{includeMetadataChanges:!0,Ta:!0});return rb(l,b)}(await Ph(n),n.asyncQueue,e,t,i)),i.promise}function v2(n,e){const t=new pi;return n.asyncQueue.enqueueAndForget(async()=>async function(a,l,u){try{const d=await Eg(a,l,!0),m=new CC(l,d.gs),g=m.ba(d.documents),v=m.applyChanges(g,!1);u.resolve(v.snapshot)}catch(d){const m=Gh(d,`Failed to execute query '${l} against cache`);u.reject(m)}}(await mb(n),e,t)),t.promise}function LC(n,e,t={}){const i=new pi;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,d,m,g){const v=new Yg({next:I=>{v.su(),u.enqueueAndForget(()=>sb(l,b)),I.fromCache&&m.source==="server"?g.reject(new he(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),b=new ob(d,v,{includeMetadataChanges:!0,Ta:!0});return rb(l,b)}(await Ph(n),n.asyncQueue,e,t,i)),i.promise}function E2(n,e){const t=new Yg(e);return n.asyncQueue.enqueueAndForget(async()=>function(a,l){Ce(a).ia.add(l),l.next()}(await Ph(n),t)),()=>{t.su(),n.asyncQueue.enqueueAndForget(async()=>function(a,l){Ce(a).ia.delete(l)}(await Ph(n),t))}}function b2(n,e,t,i){const a=function(u,d){let m;return m=typeof u=="string"?AE().encode(u):u,function(v,b){return new h2(v,b)}(function(v,b){if(v instanceof Uint8Array)return H0(v,b);if(v instanceof ArrayBuffer)return H0(new Uint8Array(v),b);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),d)}(t,dm(e));n.asyncQueue.enqueueAndForget(async()=>{l2(await pb(n),a,i)})}function T2(n,e){return n.asyncQueue.enqueue(async()=>function(i,a){const l=Ce(i);return l.persistence.runTransaction("Get named query","readonly",u=>l.Yr.getNamedQuery(u,a))}(await mb(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(n,e,t){if(!t)throw new he(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jC(n,e,t,i){if(e===!0&&i===!0)throw new he(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function K0(n){if(!Se.isDocumentKey(n))throw new he(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Q0(n){if(Se.isDocumentKey(n))throw new he(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Zg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De()}function bt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zg(n);throw new he(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function BC(n,e){if(e<=0)throw new he(te.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="firestore.googleapis.com",W0=!0;class Y0{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new he(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FC,this.ssl=W0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:W0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qM)throw new he(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mm{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new aV;switch(i.type){case"firstParty":return new cV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=G0.get(t);i&&(me("ComponentProvider","Removing Datastore"),G0.delete(t),i.terminate())}(this),Promise.resolve()}}function w2(n,e,t,i={}){var a;const l=(n=bt(n,mm))._getSettings(),u=Object.assign(Object.assign({},l),{emulatorOptions:n._getEmulatorOptions()}),d=`${e}:${t}`;l.host!==FC&&l.host!==d&&la("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},l),{host:d,ssl:!1,emulatorOptions:i});if(!_l(m,u)&&(n._setSettings(m),i.mockUserToken)){let g,v;if(typeof i.mockUserToken=="string")g=i.mockUserToken,v=ei.MOCK_USER;else{g=k1(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new he(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new ei(b)}n._authCredentials=new oV(new kS(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hi=class zC{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new zC(this.firestore,e,this._query)}},tn=class qC{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ml(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qC(this.firestore,e,this._key)}},ml=class HC extends Hi{constructor(e,t,i){super(e,t,Bh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new Se(e))}withConverter(e){return new HC(this.firestore,e,this._path)}};function _b(n,e,...t){if(n=qe(n),gb("collection","path",e),n instanceof mm){const i=ut.fromString(e,...t);return Q0(i),new ml(n,null,i)}{if(!(n instanceof tn||n instanceof ml))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ut.fromString(e,...t));return Q0(i),new ml(n.firestore,null,i)}}function A2(n,e){if(n=bt(n,mm),gb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new he(te.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hi(n,null,function(i){return new io(ut.emptyPath(),i)}(e))}function Ag(n,e,...t){if(n=qe(n),arguments.length===1&&(e=VS.newId()),gb("doc","path",e),n instanceof mm){const i=ut.fromString(e,...t);return K0(i),new tn(n,null,new Se(i))}{if(!(n instanceof tn||n instanceof ml))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ut.fromString(e,...t));return K0(i),new tn(n.firestore,n instanceof ml?n.converter:null,new Se(i))}}function $C(n,e){return n=qe(n),e=qe(e),(n instanceof tn||n instanceof ml)&&(e instanceof tn||e instanceof ml)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function GC(n,e){return n=qe(n),e=qe(e),n instanceof Hi&&e instanceof Hi&&n.firestore===e.firestore&&om(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="AsyncQueue";class Z0{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new JE(this,"async_queue_retry"),this.Su=()=>{const i=Xp();i&&me(X0,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=e;const t=Xp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Xp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new pi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ol(e))throw e;me(X0,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const a=function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d}(i);throw Tn("INTERNAL UNHANDLED ERROR: ",a),i}).then(i=>(this.pu=!1,i))));return this.bu=t,t}enqueueAfterDelay(e,t,i){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const a=ib.createAndSchedule(this,e,t,i,l=>this.Fu(l));return this.fu.push(a),a}Du(){this.gu&&De()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function Wv(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1}(n,["next","error","complete"])}class I2{constructor(){this._progressObserver={},this._taskCompletionResolver=new pi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=-1;let An=class extends mm{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new Z0,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Z0(e),this._firestoreClient=void 0,await e}}};function Ri(n){if(n._terminated)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||KC(n),n._firestoreClient}function KC(n){var e,t,i;const a=n._freezeSettings(),l=function(d,m,g,v){return new KV(d,m,g,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,UC(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new m2(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(n._componentsProvider))}function R2(n,e){la("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return QC(n,$f.provider,{build:i=>new OC(i,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function C2(n){la("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();QC(n,$f.provider,{build:t=>new c2(t,e.cacheSizeBytes)})}function QC(n,e,t){if((n=bt(n,An))._firestoreClient||n._terminated)throw new he(te.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new he(te.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},KC(n)}function D2(n){if(n._initialized&&!n._terminated)throw new he(te.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new pi;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!ra.D())return Promise.resolve();const a=i+sC;await ra.delete(a)}(WE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function x2(n){return function(t){const i=new pi;return t.asyncQueue.enqueueAndForget(async()=>XL(await pb(t),i)),i.promise}(Ri(n=bt(n,An)))}function N2(n){return g2(Ri(n=bt(n,An)))}function P2(n){return _2(Ri(n=bt(n,An)))}function O2(n,e){const t=Ri(n=bt(n,An)),i=new I2;return b2(t,n._databaseId,e,i),i}function k2(n,e){return T2(Ri(n=bt(n,An)),e).then(t=>t?new Hi(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ca(mn.fromBase64String(e))}catch(t){throw new he(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ca(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cl=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=/^__.*__$/;class M2{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new so(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fh(e,this.data,t,this.fieldTransforms)}}class WC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new so(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function YC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class e_{constructor(e,t,i,a,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new e_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:i,Qu:!1});return a.$u(e),a}Uu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:i,Qu:!1});return a.Bu(),a}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Ig(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(YC(this.Lu)&&V2.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class L2{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||dm(e)}ju(e,t,i,a=!1){return new e_({Lu:e,methodName:t,zu:i,path:Qt.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wu(n){const e=n._freezeSettings(),t=dm(n._databaseId);return new L2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function t_(n,e,t,i,a,l={}){const u=n.ju(l.merge||l.mergeFields?2:0,e,t,a);Ib("Data must be an object, but it was:",u,i);const d=JC(i,u);let m,g;if(l.merge)m=new rr(u.fieldMask),g=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const b of l.mergeFields){const I=Yv(e,b,t);if(!u.contains(I))throw new he(te.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);tD(v,I)||v.push(I)}m=new rr(v),g=u.fieldTransforms.filter(b=>m.covers(b.field))}else m=null,g=u.fieldTransforms;return new M2(new mi(d),m,g)}class pm extends Qu{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pm}}function XC(n,e,t){return new e_({Lu:3,zu:e.settings.zu,methodName:n._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class vb extends Qu{_toFieldTransform(e){return new um(e.path,new Ah)}isEqual(e){return e instanceof vb}}class Eb extends Qu{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=XC(this,e,!0),i=this.Hu.map(l=>Yu(l,t)),a=new Lu(i);return new um(e.path,a)}isEqual(e){return e instanceof Eb&&_l(this.Hu,e.Hu)}}class bb extends Qu{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=XC(this,e,!0),i=this.Hu.map(l=>Yu(l,t)),a=new Uu(i);return new um(e.path,a)}isEqual(e){return e instanceof bb&&_l(this.Hu,e.Hu)}}class Tb extends Qu{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new Ih(e.serializer,wR(e.serializer,this.Ju));return new um(e.path,t)}isEqual(e){return e instanceof Tb&&this.Ju===e.Ju}}function wb(n,e,t,i){const a=n.ju(1,e,t);Ib("Data must be an object, but it was:",a,i);const l=[],u=mi.empty();kl(i,(m,g)=>{const v=Sb(e,m,t);g=qe(g);const b=a.Uu(v);if(g instanceof pm)l.push(v);else{const I=Yu(g,b);I!=null&&(l.push(v),u.set(v,I))}});const d=new rr(l);return new WC(u,d,a.fieldTransforms)}function Ab(n,e,t,i,a,l){const u=n.ju(1,e,t),d=[Yv(e,i,t)],m=[a];if(l.length%2!=0)throw new he(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)d.push(Yv(e,l[I])),m.push(l[I+1]);const g=[],v=mi.empty();for(let I=d.length-1;I>=0;--I)if(!tD(g,d[I])){const P=d[I];let U=m[I];U=qe(U);const G=u.Uu(P);if(U instanceof pm)g.push(P);else{const j=Yu(U,G);j!=null&&(g.push(P),v.set(P,j))}}const b=new rr(g);return new WC(v,b,u.fieldTransforms)}function ZC(n,e,t,i=!1){return Yu(t,n.ju(i?4:3,e))}function Yu(n,e){if(eD(n=qe(n)))return Ib("Unsupported field value:",e,n),JC(n,e);if(n instanceof Qu)return function(i,a){if(!YC(a.Lu))throw a.Wu(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,a){const l=[];let u=0;for(const d of i){let m=Yu(d,a.Ku(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}}(n,e)}return function(i,a){if((i=qe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wR(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Yt.fromDate(i);return{timestampValue:Sh(a.serializer,l)}}if(i instanceof Yt){const l=new Yt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Sh(a.serializer,l)}}if(i instanceof Jg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ca)return{bytesValue:kR(a.serializer,i._byteString)};if(i instanceof tn){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:zE(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof yb)return function(u,d){return{mapValue:{fields:{[NE]:{stringValue:PE},[bh]:{arrayValue:{values:u.toArray().map(g=>{if(typeof g!="number")throw d.Wu("VectorValues must only contain numeric values.");return ME(d.serializer,g)})}}}}}}(i,a);throw a.Wu(`Unsupported field value: ${Zg(i)}`)}(n,e)}function JC(n,e){const t={};return ZS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kl(n,(i,a)=>{const l=Yu(a,e.qu(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function eD(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Yt||n instanceof Jg||n instanceof ca||n instanceof tn||n instanceof Qu||n instanceof yb)}function Ib(n,e,t){if(!eD(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const i=Zg(t);throw i==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+i)}}function Yv(n,e,t){if((e=qe(e))instanceof Cl)return e._internalPath;if(typeof e=="string")return Sb(n,e);throw Ig("Field path arguments must be of type string or ",n,!1,void 0,t)}const U2=new RegExp("[~\\*/\\[\\]]");function Sb(n,e,t){if(e.search(U2)>=0)throw Ig(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cl(...e.split("."))._internalPath}catch{throw Ig(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ig(n,e,t,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${i}`),u&&(m+=` in document ${a}`),m+=")"),new he(te.INVALID_ARGUMENT,d+n+m)}function tD(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new j2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(n_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class j2 extends Gf{data(){return super.data()}}function n_(n,e){return typeof e=="string"?Sb(n,e):e instanceof Cl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rb{}class gm extends Rb{}function $a(n,e,...t){let i=[];e instanceof Rb&&i.push(e),i=i.concat(t),function(l){const u=l.filter(m=>m instanceof Cb).length,d=l.filter(m=>m instanceof i_).length;if(u>1||u>0&&d>0)throw new he(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class i_ extends gm{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new i_(e,t,i)}_apply(e){const t=this._parse(e);return sD(e._query,t),new Hi(e.firestore,e.converter,Mv(e._query,t))}_parse(e){const t=Wu(e.firestore);return function(l,u,d,m,g,v,b){let I;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new he(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){eI(b,v);const U=[];for(const G of b)U.push(J0(m,l,G));I={arrayValue:{values:U}}}else I=J0(m,l,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||eI(b,v),I=ZC(d,u,b,v==="in"||v==="not-in");return ct.create(g,v,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function iD(n,e,t){const i=e,a=n_("where",n);return i_._create(a,i,t)}class Cb extends Rb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Cb(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:It.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let u=a;const d=l.getFlattenedFilters();for(const m of d)sD(u,m),u=Mv(u,m)}(e._query,t),new Hi(e.firestore,e.converter,Mv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Db extends gm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Db(e,t)}_apply(e){const t=function(a,l,u){if(a.startAt!==null)throw new he(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new he(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ff(l,u)}(e._query,this._field,this._direction);return new Hi(e.firestore,e.converter,function(a,l){const u=a.explicitOrderBy.concat([l]);return new io(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function B2(n,e="asc"){const t=e,i=n_("orderBy",n);return Db._create(i,t)}class r_ extends gm{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new r_(e,t,i)}_apply(e){return new Hi(e.firestore,e.converter,pg(e._query,this._limit,this._limitType))}}function F2(n){return BC("limit",n),r_._create("limit",n,"F")}function z2(n){return BC("limitToLast",n),r_._create("limitToLast",n,"L")}class s_ extends gm{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new s_(e,t,i)}_apply(e){const t=rD(e,this.type,this._docOrFields,this._inclusive);return new Hi(e.firestore,e.converter,function(a,l){return new io(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)}(e._query,t))}}function q2(...n){return s_._create("startAt",n,!0)}function H2(...n){return s_._create("startAfter",n,!1)}class a_ extends gm{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new a_(e,t,i)}_apply(e){const t=rD(e,this.type,this._docOrFields,this._inclusive);return new Hi(e.firestore,e.converter,function(a,l){return new io(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)}(e._query,t))}}function $2(...n){return a_._create("endBefore",n,!1)}function G2(...n){return a_._create("endAt",n,!0)}function rD(n,e,t,i){if(t[0]=qe(t[0]),t[0]instanceof Gf)return function(l,u,d,m,g){if(!m)throw new he(te.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const v=[];for(const b of oh(l))if(b.field.isKeyField())v.push(Vu(u,m.key));else{const I=m.data.field(b.field);if(Bg(I))throw new he(te.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(I===null){const P=b.field.canonicalString();throw new he(te.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}v.push(I)}return new Il(v,g)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const a=Wu(n.firestore);return function(u,d,m,g,v,b){const I=u.explicitOrderBy;if(v.length>I.length)throw new he(te.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let U=0;U<v.length;U++){const G=v[U];if(I[U].field.isKeyField()){if(typeof G!="string")throw new he(te.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof G}`);if(!kE(u)&&G.indexOf("/")!==-1)throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${G}' contains a slash.`);const j=u.path.child(ut.fromString(G));if(!Se.isDocumentKey(j))throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${j}' is not because it contains an odd number of segments.`);const Z=new Se(j);P.push(Vu(d,Z))}else{const j=ZC(m,g,G);P.push(j)}}return new Il(P,b)}(n._query,n.firestore._databaseId,a,e,t,i)}}function J0(n,e,t){if(typeof(t=qe(t))=="string"){if(t==="")throw new he(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kE(e)&&t.indexOf("/")!==-1)throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ut.fromString(t));if(!Se.isDocumentKey(i))throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Vu(n,new Se(i))}if(t instanceof tn)return Vu(n,t._key);throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zg(t)}.`)}function eI(n,e){if(!Array.isArray(n)||n.length===0)throw new he(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sD(n,e){const t=function(a,l){for(const u of a)for(const d of u.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new he(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class xb{convertValue(e,t="none"){switch(wl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(eo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return kl(e,(a,l)=>{i[a]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,a;const l=(a=(i=(t=e.fields)===null||t===void 0?void 0:t[bh].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(u=>Gt(u.doubleValue));return new yb(l)}convertGeoPoint(e){return new Jg(Gt(e.latitude),Gt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Fg(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Uf(e));default:return null}}convertTimestamp(e){const t=Ja(e);return new Yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ut.fromString(e);Oe($R(i));const a=new Tl(i.get(1),i.get(3)),l=new Se(i.popFirst(5));return a.isEqual(t)||Tn(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class K2 extends xb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ca(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let to=class extends Gf{constructor(e,t,i,a,l,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(n_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},Tf=class extends to{data(e={}){return super.data(e)}},Dl=class{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Du(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Tf(this._firestore,this._userDataWriter,i.key,i,new Du(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(d=>{const m=new Tf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Du(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new Tf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Du(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return d.type!==0&&(g=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:Q2(d.type),doc:m,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Q2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}function aD(n,e){return n instanceof to&&e instanceof to?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Dl&&e instanceof Dl&&n._firestore===e._firestore&&GC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(n){n=bt(n,tn);const e=bt(n.firestore,An);return MC(Ri(e),n._key).then(t=>Nb(e,n,t))}class Xu extends xb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ca(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,t)}}function Y2(n){n=bt(n,tn);const e=bt(n.firestore,An),t=Ri(e),i=new Xu(e);return y2(t,n._key).then(a=>new to(e,i,n._key,a,new Du(a!==null&&a.hasLocalMutations,!0),n.converter))}function X2(n){n=bt(n,tn);const e=bt(n.firestore,An);return MC(Ri(e),n._key,{source:"server"}).then(t=>Nb(e,n,t))}function oD(n){n=bt(n,Hi);const e=bt(n.firestore,An),t=Ri(e),i=new Xu(e);return nD(n._query),LC(t,n._query).then(a=>new Dl(e,i,n,a))}function Z2(n){n=bt(n,Hi);const e=bt(n.firestore,An),t=Ri(e),i=new Xu(e);return v2(t,n._query).then(a=>new Dl(e,i,n,a))}function J2(n){n=bt(n,Hi);const e=bt(n.firestore,An),t=Ri(e),i=new Xu(e);return LC(t,n._query,{source:"server"}).then(a=>new Dl(e,i,n,a))}function tI(n,e,t){n=bt(n,tn);const i=bt(n.firestore,An),a=o_(n.converter,e,t);return _m(i,[t_(Wu(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Wt.none())])}function nI(n,e,t,...i){n=bt(n,tn);const a=bt(n.firestore,An),l=Wu(a);let u;return u=typeof(e=qe(e))=="string"||e instanceof Cl?Ab(l,"updateDoc",n._key,e,t,i):wb(l,"updateDoc",n._key,e),_m(a,[u.toMutation(n._key,Wt.exists(!0))])}function eU(n){return _m(bt(n.firestore,An),[new zh(n._key,Wt.none())])}function tU(n,e){const t=bt(n.firestore,An),i=Ag(n),a=o_(n.converter,e);return _m(t,[t_(Wu(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,Wt.exists(!1))]).then(()=>i)}function lD(n,...e){var t,i,a;n=qe(n);let l={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||Wv(e[u])||(l=e[u],u++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Wv(e[u])){const b=e[u];e[u]=(t=b.next)===null||t===void 0?void 0:t.bind(b),e[u+1]=(i=b.error)===null||i===void 0?void 0:i.bind(b),e[u+2]=(a=b.complete)===null||a===void 0?void 0:a.bind(b)}let m,g,v;if(n instanceof tn)g=bt(n.firestore,An),v=Bh(n._key.path),m={next:b=>{e[u]&&e[u](Nb(g,n,b))},error:e[u+1],complete:e[u+2]};else{const b=bt(n,Hi);g=bt(b.firestore,An),v=b._query;const I=new Xu(g);m={next:P=>{e[u]&&e[u](new Dl(g,I,b,P))},error:e[u+1],complete:e[u+2]},nD(n._query)}return function(I,P,U,G){const j=new Yg(G),Z=new ob(P,j,U);return I.asyncQueue.enqueueAndForget(async()=>rb(await Ph(I),Z)),()=>{j.su(),I.asyncQueue.enqueueAndForget(async()=>sb(await Ph(I),Z))}}(Ri(g),v,d,m)}function nU(n,e){return E2(Ri(n=bt(n,An)),Wv(e)?e:{next:e})}function _m(n,e){return function(i,a){const l=new pi;return i.asyncQueue.enqueueAndForget(async()=>KL(await pb(i),a,l)),l.promise}(Ri(n),e)}function Nb(n,e,t){const i=t.docs.get(e._key),a=new Xu(n);return new to(n,a,e._key,i,new Du(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rU=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wu(e)}set(e,t,i){this._verifyNotCommitted();const a=ll(e,this._firestore),l=o_(a.converter,t,i),u=t_(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(u.toMutation(a._key,Wt.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=ll(e,this._firestore);let u;return u=typeof(t=qe(t))=="string"||t instanceof Cl?Ab(this._dataReader,"WriteBatch.update",l._key,t,i,a):wb(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,Wt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ll(e,this._firestore);return this._mutations=this._mutations.concat(new zh(t._key,Wt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ll(n,e){if((n=qe(n)).firestore!==e)throw new he(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wu(e)}get(e){const t=ll(e,this._firestore),i=new K2(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||a.length!==1)return De();const l=a[0];if(l.isFoundDocument())return new Gf(this._firestore,i,l.key,l,t.converter);if(l.isNoDocument())return new Gf(this._firestore,i,t._key,null,t.converter);throw De()})}set(e,t,i){const a=ll(e,this._firestore),l=o_(a.converter,t,i),u=t_(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,i);return this._transaction.set(a._key,u),this}update(e,t,i,...a){const l=ll(e,this._firestore);let u;return u=typeof(t=qe(t))=="string"||t instanceof Cl?Ab(this._dataReader,"Transaction.update",l._key,t,i,a):wb(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=ll(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aU=class extends sU{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ll(e,this._firestore),i=new Xu(this._firestore);return super.get(e).then(a=>new to(this._firestore,i,t._key,a._document,new Du(!1,!1),t.converter))}};function oU(n,e,t){n=bt(n,An);const i=Object.assign(Object.assign({},iU),t);return function(l){if(l.maxAttempts<1)throw new he(te.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(l,u,d){const m=new pi;return l.asyncQueue.enqueueAndForget(async()=>{const g=await p2(l);new f2(l.asyncQueue,g,d,u,m).Iu()}),m.promise}(Ri(n),a=>e(new aU(n,a)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(){return new pm("deleteField")}function uU(){return new vb("serverTimestamp")}function cU(...n){return new Eb("arrayUnion",n)}function hU(...n){return new bb("arrayRemove",n)}function dU(n){return new Tb("increment",n)}(function(e,t=!0){(function(a){jh=a})(Nl),El(new oa("firestore",(i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),d=new An(new lV(i.getProvider("auth-internal")),new hV(u,i.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new he(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(g.options.projectId,v)}(u,a),u);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),Ss(OA,kA,e),Ss(OA,kA,"esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,t){this._delegate=e,this.firebase=t,Nf(e,new oa("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),TE(this._delegate)))}_getService(e,t=yl){var i;this._delegate.checkDestroyed();const a=this._delegate.container.getProvider(e);return!a.isInitialized()&&((i=a.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&a.initialize(),a.getImmediate({identifier:t})}_removeServiceInstance(e,t=yl){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Nf(this._delegate,e)}_addOrOverwriteComponent(e){ES(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},iI=new Ku("app-compat","Firebase",mU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(n){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:Ss,setLogLevel:IS,onLog:AS,apps:null,SDK_VERSION:Nl,INTERNAL:{registerComponent:d,removeApp:i,useAsService:m,modularAPIs:iV}};t.default=t,Object.defineProperty(t,"apps",{get:u});function i(g){delete e[g]}function a(g){if(g=g||yl,!wA(e,g))throw iI.create("no-app",{appName:g});return e[g]}a.App=n;function l(g,v={}){const b=bE(g,v);if(wA(e,b.name))return e[b.name];const I=new n(b,t);return e[b.name]=I,I}function u(){return Object.keys(e).map(g=>e[g])}function d(g){const v=g.name,b=v.replace("-compat","");if(El(g)&&g.type==="PUBLIC"){const I=(P=a())=>{if(typeof P[b]!="function")throw iI.create("invalid-app-argument",{appName:v});return P[b]()};g.serviceProps!==void 0&&sg(I,g.serviceProps),t[b]=I,n.prototype[b]=function(...P){return this._getService.bind(this,v).apply(this,g.multipleInstances?P:[])}}return g.type==="PUBLIC"?t[b]:null}function m(g,v){return v==="serverAuth"?null:v}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(){const n=pU(fU);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:uD,extendNamespace:e,createSubscribe:pS,ErrorFactory:Ku,deepExtend:sg});function e(t){sg(n,t)}return n}const gU=uD();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new Vg("@firebase/app-compat"),_U="@firebase/app-compat",yU="0.2.52";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vU(n){Ss(_U,yU,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=uS();if(n.firebase!==void 0){rI.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&rI.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Kh=gU;vU();var EU="firebase",bU="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kh.registerVersion(EU,bU,"app-compat");function Pb(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}const rf={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Zc={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function cD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wU=TU,AU=cD,hD=new Ku("auth","Firebase",cD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=new Vg("@firebase/auth");function IU(n,...e){Sg.logLevel<=st.WARN&&Sg.warn(`Auth (${Nl}): ${n}`,...e)}function Zp(n,...e){Sg.logLevel<=st.ERROR&&Sg.error(`Auth (${Nl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(n,...e){throw kb(n,...e)}function Un(n,...e){return kb(n,...e)}function Ob(n,e,t){const i=Object.assign(Object.assign({},AU()),{[e]:t});return new Ku("auth","Firebase",i).create(e,{appName:n.name})}function ti(n){return Ob(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qh(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&gi(n,"argument-error"),Ob(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kb(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return hD.create(n,...e)}function ge(n,e,...t){if(!n)throw kb(e,...t)}function ia(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Zp(e),new Error(e)}function Rs(n,e){n||ia(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Vb(){return sI()==="http:"||sI()==="https:"}function sI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vb()||dS()||"connection"in navigator)?navigator.onLine:!0}function RU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,t){this.shortDelay=e,this.longDelay=t,Rs(t>e,"Short delay should be less than long delay!"),this.isMobile=V1()||yE()}get(){return SU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(n,e){Rs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ia("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ia("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ia("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU=new ym(3e4,6e4);function pn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function gn(n,e,t,i,a={}){return fD(n,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const d=Uh(Object.assign({key:n.config.apiKey},u)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:m},l);return L1()||(g.referrerPolicy="no-referrer"),dD.fetch()(mD(n,n.config.apiHost,t,d),g)})}async function fD(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},CU),e);try{const a=new NU(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw mf(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw mf(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw mf(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw mf(n,"user-disabled",u);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Ob(n,v,g);gi(n,v)}}catch(a){if(a instanceof zi)throw a;gi(n,"network-request-failed",{message:String(a)})}}async function oo(n,e,t,i,a={}){const l=await gn(n,e,t,i,a);return"mfaPendingCredential"in l&&gi(n,"multi-factor-auth-required",{_serverResponse:l}),l}function mD(n,e,t,i){const a=`${e}${t}?${i}`;return n.config.emulator?Mb(n.config,a):`${n.config.apiScheme}://${a}`}function xU(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Un(this.auth,"network-request-failed")),DU.get())})}}function mf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Un(n,e,i);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(n){return n!==void 0&&n.getResponse!==void 0}function oI(n){return n!==void 0&&n.enterprise!==void 0}class pD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xU(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(n){return(await gn(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function gD(n,e){return gn(n,"GET","/v2/recaptchaConfig",pn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OU(n,e){return gn(n,"POST","/v1/accounts:delete",e)}async function kU(n,e){return gn(n,"POST","/v1/accounts:update",e)}async function _D(n,e){return gn(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VU(n,e=!1){const t=qe(n),i=await t.getIdToken(e),a=l_(i);ge(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:wf(hv(a.auth_time)),issuedAtTime:wf(hv(a.iat)),expirationTime:wf(hv(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function hv(n){return Number(n)*1e3}function l_(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Zp("JWT malformed, contained fewer than 3 sections"),null;try{const a=pE(t);return a?JSON.parse(a):(Zp("Failed to decode base64 JWT payload"),null)}catch(a){return Zp("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function lI(n){const e=l_(n);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof zi&&MU(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function MU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wf(this.lastLoginAt),this.creationTime=wf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qf(n){var e;const t=n.auth,i=await n.getIdToken(),a=await no(n,_D(t,{idToken:i}));ge(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?yD(l.providerUserInfo):[],d=jU(n.providerData,u),m=n.isAnonymous,g=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),v=m?g:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Xv(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,b)}async function UU(n){const e=qe(n);await Qf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jU(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function yD(n){return n.map(e=>{var{providerId:t}=e,i=Pb(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BU(n,e){const t=await fD(n,{},async()=>{const i=Uh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=mD(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",dD.fetch()(u,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function FU(n,e){return gn(n,"POST","/v2/accounts:revokeToken",pn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const t=lI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await BU(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,u=new uh;return i&&(ge(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(ge(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(ge(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uh,this.toJSON())}_performRefresh(){return ia("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(n,e){ge(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ka{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,l=Pb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new LU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Xv(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await no(this,this.stsTokenManager.getToken(this.auth,e));return ge(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return VU(this,e)}reload(){return UU(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ka(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Qf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kt(this.auth.app))return Promise.reject(ti(this.auth));const e=await this.getIdToken();return await no(this,OU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,l,u,d,m,g,v;const b=(i=t.displayName)!==null&&i!==void 0?i:void 0,I=(a=t.email)!==null&&a!==void 0?a:void 0,P=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,U=(u=t.photoURL)!==null&&u!==void 0?u:void 0,G=(d=t.tenantId)!==null&&d!==void 0?d:void 0,j=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,Z=(g=t.createdAt)!==null&&g!==void 0?g:void 0,ie=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:se,emailVerified:_e,isAnonymous:pe,providerData:Re,stsTokenManager:L}=t;ge(se&&L,e,"internal-error");const O=uh.fromJSON(this.name,L);ge(typeof se=="string",e,"internal-error"),sl(b,e.name),sl(I,e.name),ge(typeof _e=="boolean",e,"internal-error"),ge(typeof pe=="boolean",e,"internal-error"),sl(P,e.name),sl(U,e.name),sl(G,e.name),sl(j,e.name),sl(Z,e.name),sl(ie,e.name);const x=new Ka({uid:se,auth:e,email:I,emailVerified:_e,displayName:b,isAnonymous:pe,photoURL:U,phoneNumber:P,tenantId:G,stsTokenManager:O,createdAt:Z,lastLoginAt:ie});return Re&&Array.isArray(Re)&&(x.providerData=Re.map(k=>Object.assign({},k))),j&&(x._redirectEventId=j),x}static async _fromIdTokenResponse(e,t,i=!1){const a=new uh;a.updateFromServerResponse(t);const l=new Ka({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Qf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];ge(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?yD(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new uh;d.updateFromIdToken(i);const m=new Ka({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:u}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Xv(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=new Map;function Ar(n){Rs(n instanceof Function,"Expected a class definition");let e=uI.get(n);return e?(Rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,uI.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vD.type="NONE";const Oh=vD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(n,e,t){return`firebase:${n}:${e}:${t}`}class ch{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Ou(this.userKey,a.apiKey,l),this.fullPersistenceKey=Ou("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ka._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ch(Ar(Oh),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Ar(Oh);const u=Ou(i,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(u);if(v){const b=Ka._fromJSON(e,v);g!==l&&(d=b),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new ch(l,e,i):(l=m[0],d&&await l._set(u,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(u)}catch{}})),new ch(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ED(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AD(e))return"Blackberry";if(ID(e))return"Webos";if(bD(e))return"Safari";if((e.includes("chrome/")||TD(e))&&!e.includes("edge/"))return"Chrome";if(vm(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function ED(n=nn()){return/firefox\//i.test(n)}function bD(n=nn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TD(n=nn()){return/crios\//i.test(n)}function wD(n=nn()){return/iemobile/i.test(n)}function vm(n=nn()){return/android/i.test(n)}function AD(n=nn()){return/blackberry/i.test(n)}function ID(n=nn()){return/webos/i.test(n)}function Em(n=nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function zU(n=nn()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function qU(n=nn()){var e;return Em(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HU(){return fS()&&document.documentMode===10}function SD(n=nn()){return Em(n)||vm(n)||ID(n)||AD(n)||/windows phone/i.test(n)||wD(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(n,e=[]){let t;switch(n){case"Browser":t=cI(nn());break;case"Worker":t=`${cI(nn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Nl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,d)=>{try{const m=e(l);u(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GU(n,e={}){return gn(n,"GET","/v2/passwordPolicy",pn(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU=6;class QU{constructor(e){var t,i,a,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:KU,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,l,u,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(u=m.containsNumericCharacter)!==null&&u!==void 0?u:!0),m.isValid&&(m.isValid=(d=m.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hI(this),this.idTokenSubscription=new hI(this),this.beforeStateQueue=new $U(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ar(t)),this._initializationPromise=this.queue(async()=>{var i,a;if(!this._deleted&&(this.persistenceManager=await ch.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await _D(this,{idToken:e}),i=await Ka._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Kt(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===d)&&(m!=null&&m.user)&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kt(this.app))return Promise.reject(ti(this));const t=e?qe(e):null;return t&&ge(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kt(this.app)?Promise.reject(ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kt(this.app)?Promise.reject(ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GU(this),t=new QU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ku("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await FU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ar(e)||this._popupRedirectResolver;ge(t,this,"argument-error"),this.redirectPersistenceManager=await ch.create(this,[Ar(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&IU(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function rn(n){return qe(n)}class hI{constructor(e){this.auth=e,this.observer=null,this.addObserver=pS(t=>this.observer=t)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YU(n){bm=n}function Lb(n){return bm.loadJS(n)}function XU(){return bm.recaptchaV2Script}function ZU(){return bm.recaptchaEnterpriseScript}function JU(){return bm.gapiScript}function CD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=500,tj=6e4,Up=1e12;class nj{constructor(e){this.auth=e,this.counter=Up,this._widgets=new Map}render(e,t){const i=this.counter;return this._widgets.set(i,new sj(e,this.auth.name,t||{})),this.counter++,i}reset(e){var t;const i=e||Up;(t=this._widgets.get(i))===null||t===void 0||t.delete(),this._widgets.delete(i)}getResponse(e){var t;const i=e||Up;return((t=this._widgets.get(i))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const i=e||Up;return(t=this._widgets.get(i))===null||t===void 0||t.execute(),""}}class ij{constructor(){this.enterprise=new rj}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class rj{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class sj{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;ge(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=aj(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},tj)},ej))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function aj(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const oj="recaptcha-enterprise",Af="NO_RECAPTCHA";class DD{constructor(e){this.type=oj,this.auth=rn(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,d)=>{gD(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new pD(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,u(g.siteKey)}}).catch(m=>{d(m)})})}function a(l,u,d){const m=window.grecaptcha;oI(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{u(g)}).catch(()=>{u(Af)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ij().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(d=>{if(!t&&oI(window.grecaptcha))a(d,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=ZU();m.length!==0&&(m+=d),Lb(m).then(()=>{a(d,l,u)}).catch(g=>{u(g)})}}).catch(d=>{u(d)})})}}async function sf(n,e,t,i=!1,a=!1){const l=new DD(n);let u;if(a)u=Af;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function pl(n,e,t,i,a){var l,u;if(a==="EMAIL_PASSWORD_PROVIDER")if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await sf(n,e,t,t==="getOobCode");return i(n,d)}else return i(n,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await sf(n,e,t,t==="getOobCode");return i(n,m)}else return Promise.reject(d)});else if(a==="PHONE_PROVIDER")if(!((u=n._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("PHONE_PROVIDER")){const d=await sf(n,e,t);return i(n,d).catch(async m=>{var g;if(((g=n._getRecaptchaConfig())===null||g===void 0?void 0:g.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(m.code==="auth/missing-recaptcha-token"||m.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const v=await sf(n,e,t,!1,!0);return i(n,v)}return Promise.reject(m)})}else{const d=await sf(n,e,t,!1,!0);return i(n,d)}else return Promise.reject(a+" provider is not supported.")}async function lj(n){const e=rn(n),t=await gD(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new pD(t);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new DD(e).verify()}function uj(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Ar);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function cj(n,e,t){const i=rn(n);ge(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!!(t!=null&&t.disableWarnings),l=xD(e),{host:u,port:d}=hj(e),m=d===null?"":`:${d}`,g={url:`${l}//${u}${m}/`},v=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){ge(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ge(_l(g,i.config.emulator)&&_l(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,a||dj()}function xD(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function hj(n){const e=xD(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:dI(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:dI(u)}}}function dI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function dj(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ia("not implemented")}_getIdTokenResponse(e){return ia("not implemented")}_linkToIdToken(e,t){return ia("not implemented")}_getReauthenticationResolver(e){return ia("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(n,e){return gn(n,"POST","/v1/accounts:resetPassword",pn(n,e))}async function fj(n,e){return gn(n,"POST","/v1/accounts:update",e)}async function mj(n,e){return gn(n,"POST","/v1/accounts:signUp",e)}async function pj(n,e){return gn(n,"POST","/v1/accounts:update",pn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gj(n,e){return oo(n,"POST","/v1/accounts:signInWithPassword",pn(n,e))}async function u_(n,e){return gn(n,"POST","/v1/accounts:sendOobCode",pn(n,e))}async function _j(n,e){return u_(n,e)}async function yj(n,e){return u_(n,e)}async function vj(n,e){return u_(n,e)}async function Ej(n,e){return u_(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bj(n,e){return oo(n,"POST","/v1/accounts:signInWithEmailLink",pn(n,e))}async function Tj(n,e){return oo(n,"POST","/v1/accounts:signInWithEmailLink",pn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf extends Wh{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Wf(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Wf(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pl(e,t,"signInWithPassword",gj,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return bj(e,{email:this._email,oobCode:this._password});default:gi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pl(e,i,"signUpPassword",mj,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Tj(e,{idToken:t,email:this._email,oobCode:this._password});default:gi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(n,e){return oo(n,"POST","/v1/accounts:signInWithIdp",pn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="http://localhost";class ha extends Wh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,l=Pb(t,["providerId","signInMethod"]);if(!i||!a)return null;const u=new ha(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Xa(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Xa(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xa(e,t)}buildRequest(){const e={requestUri:wj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Uh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fI(n,e){return gn(n,"POST","/v1/accounts:sendVerificationCode",pn(n,e))}async function Aj(n,e){return oo(n,"POST","/v1/accounts:signInWithPhoneNumber",pn(n,e))}async function Ij(n,e){const t=await oo(n,"POST","/v1/accounts:signInWithPhoneNumber",pn(n,e));if(t.temporaryProof)throw mf(n,"account-exists-with-different-credential",t);return t}const Sj={USER_NOT_FOUND:"user-not-found"};async function Rj(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return oo(n,"POST","/v1/accounts:signInWithPhoneNumber",pn(n,t),Sj)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends Wh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ku({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ku({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return Aj(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return Ij(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Rj(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:i,phoneNumber:a,temporaryProof:l}=e;return!i&&!t&&!a&&!l?null:new ku({verificationId:t,verificationCode:i,phoneNumber:a,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Dj(n){const e=sh(uf(n)).link,t=e?sh(uf(e)).deep_link_id:null,i=sh(uf(n)).deep_link_id;return(i?sh(uf(i)).link:null)||i||t||e||n}class c_{constructor(e){var t,i,a,l,u,d;const m=sh(uf(e)),g=(t=m.apiKey)!==null&&t!==void 0?t:null,v=(i=m.oobCode)!==null&&i!==void 0?i:null,b=Cj((a=m.mode)!==null&&a!==void 0?a:null);ge(g&&v&&b,"argument-error"),this.apiKey=g,this.operation=b,this.code=v,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=m.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(d=m.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=Dj(e);try{return new c_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(){this.providerId=Ll.PROVIDER_ID}static credential(e,t){return Wf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=c_.parseLink(t);return ge(i,"argument-error"),Wf._fromEmailAndCode(e,i.code,i.tenantId)}}Ll.PROVIDER_ID="password";Ll.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ll.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends lo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class hh extends Yh{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return ge("providerId"in t&&"signInMethod"in t,"argument-error"),ha._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ge(e.idToken||e.accessToken,"argument-error"),ha._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return hh.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return hh.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:a,pendingToken:l,nonce:u,providerId:d}=e;if(!i&&!a&&!t&&!l||!d)return null;try{return new hh(d)._credential({idToken:t,accessToken:i,nonce:u,pendingToken:l})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends Yh{constructor(){super("facebook.com")}static credential(e){return ha._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xs.credential(e.oauthAccessToken)}catch{return null}}}Xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends Yh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ha._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Zs.credential(t,i)}catch{return null}}}Zs.GOOGLE_SIGN_IN_METHOD="google.com";Zs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends Yh{constructor(){super("github.com")}static credential(e){return ha._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Js.credential(e.oauthAccessToken)}catch{return null}}}Js.GITHUB_SIGN_IN_METHOD="github.com";Js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj="http://localhost";class kh extends Wh{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Xa(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Xa(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xa(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,pendingToken:l}=t;return!i||!a||!l||i!==a?null:new kh(i,l)}static _create(e,t){return new kh(e,t)}buildRequest(){return{requestUri:xj,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj="saml.";class Rg extends lo{constructor(e){ge(e.startsWith(Nj),"argument-error"),super(e)}static credentialFromResult(e){return Rg.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Rg.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=kh.fromJSON(e);return ge(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:i}=e;if(!t||!i)return null;try{return kh._create(i,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends Yh{constructor(){super("twitter.com")}static credential(e,t){return ha._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ea.credential(t,i)}catch{return null}}}ea.TWITTER_SIGN_IN_METHOD="twitter.com";ea.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(n,e){return oo(n,"POST","/v1/accounts:signUp",pn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await Ka._fromIdTokenResponse(e,i,a),u=mI(i);return new Xr({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=mI(i);return new Xr({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function mI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pj(n){var e;if(Kt(n.app))return Promise.reject(ti(n));const t=rn(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Xr({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await PD(t,{returnSecureToken:!0}),a=await Xr._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg extends zi{constructor(e,t,i,a){var l;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Cg.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Cg(e,t,i,a)}}function OD(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Cg._fromErrorAndOperation(n,l,e,i):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oj(n,e){const t=qe(n);await h_(!0,t,e);const{providerUserInfo:i}=await kU(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),a=kD(i||[]);return t.providerData=t.providerData.filter(l=>a.has(l.providerId)),a.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function Ub(n,e,t=!1){const i=await no(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Xr._forOperation(n,"link",i)}async function h_(n,e,t){await Qf(e);const i=kD(e.providerData),a=n===!1?"provider-already-linked":"no-such-provider";ge(i.has(t)===n,e.auth,a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(n,e,t=!1){const{auth:i}=n;if(Kt(i.app))return Promise.reject(ti(i));const a="reauthenticate";try{const l=await no(n,OD(i,a,e,n),t);ge(l.idToken,i,"internal-error");const u=l_(l.idToken);ge(u,i,"internal-error");const{sub:d}=u;return ge(n.uid===d,i,"user-mismatch"),Xr._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&gi(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MD(n,e,t=!1){if(Kt(n.app))return Promise.reject(ti(n));const i="signIn",a=await OD(n,i,e),l=await Xr._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}async function d_(n,e){return MD(rn(n),e)}async function LD(n,e){const t=qe(n);return await h_(!1,t,e.providerId),Ub(t,e)}async function UD(n,e){return VD(qe(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kj(n,e){return oo(n,"POST","/v1/accounts:signInWithCustomToken",pn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vj(n,e){if(Kt(n.app))return Promise.reject(ti(n));const t=rn(n),i=await kj(t,{token:e,returnSecureToken:!0}),a=await Xr._fromIdTokenResponse(t,"signIn",i);return await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?jb._fromServerResponse(e,t):"totpInfo"in t?Bb._fromServerResponse(e,t):gi(e,"internal-error")}}class jb extends Tm{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new jb(t)}}class Bb extends Tm{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Bb(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(n,e,t){var i;ge(((i=t.url)===null||i===void 0?void 0:i.length)>0,n,"invalid-continue-uri"),ge(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),ge(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(ge(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(ge(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(n){const e=rn(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Mj(n,e,t){const i=rn(n),a={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&f_(i,a,t),await pl(i,a,"getOobCode",yj,"EMAIL_PASSWORD_PROVIDER")}async function Lj(n,e,t){await ND(qe(n),{oobCode:e,newPassword:t}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Fb(n),i})}async function Uj(n,e){await pj(qe(n),{oobCode:e})}async function jD(n,e){const t=qe(n),i=await ND(t,{oobCode:e}),a=i.requestType;switch(ge(a,t,"internal-error"),a){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ge(i.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ge(i.mfaInfo,t,"internal-error");default:ge(i.email,t,"internal-error")}let l=null;return i.mfaInfo&&(l=Tm._fromServerResponse(rn(t),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:l},operation:a}}async function jj(n,e){const{data:t}=await jD(qe(n),e);return t.email}async function Bj(n,e,t){if(Kt(n.app))return Promise.reject(ti(n));const i=rn(n),u=await pl(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PD,"EMAIL_PASSWORD_PROVIDER").catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&Fb(n),m}),d=await Xr._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function Fj(n,e,t){return Kt(n.app)?Promise.reject(ti(n)):d_(qe(n),Ll.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Fb(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zj(n,e,t){const i=rn(n),a={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function l(u,d){ge(d.handleCodeInApp,i,"argument-error"),d&&f_(i,u,d)}l(a,t),await pl(i,a,"getOobCode",vj,"EMAIL_PASSWORD_PROVIDER")}function qj(n,e){const t=c_.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function Hj(n,e,t){if(Kt(n.app))return Promise.reject(ti(n));const i=qe(n),a=Ll.credentialWithLink(e,t||Kf());return ge(a._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),d_(i,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $j(n,e){return gn(n,"POST","/v1/accounts:createAuthUri",pn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gj(n,e){const t=Vb()?Kf():"http://localhost",i={identifier:e,continueUri:t},{signinMethods:a}=await $j(qe(n),i);return a||[]}async function Kj(n,e){const t=qe(n),a={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&f_(t.auth,a,e);const{email:l}=await _j(t.auth,a);l!==n.email&&await n.reload()}async function Qj(n,e,t){const i=qe(n),l={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&f_(i.auth,l,t);const{email:u}=await Ej(i.auth,l);u!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wj(n,e){return gn(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yj(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=qe(n),l={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await no(i,Wj(i.auth,l));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const d=i.providerData.find(({providerId:m})=>m==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}function Xj(n,e){const t=qe(n);return Kt(t.auth.app)?Promise.reject(ti(t.auth)):BD(t,e,null)}function Zj(n,e){return BD(qe(n),null,e)}async function BD(n,e,t){const{auth:i}=n,l={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(l.email=e),t&&(l.password=t);const u=await no(n,fj(i,l));await n._updateTokensIfNecessary(u,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(n){var e,t;if(!n)return null;const{providerId:i}=n,a=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},l=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!i&&(n!=null&&n.idToken)){const u=(t=(e=l_(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(u){const d=u!=="anonymous"&&u!=="custom"?u:null;return new dh(l,d)}}if(!i)return null;switch(i){case"facebook.com":return new e4(l,a);case"github.com":return new t4(l,a);case"google.com":return new n4(l,a);case"twitter.com":return new i4(l,a,n.screenName||null);case"custom":case"anonymous":return new dh(l,null);default:return new dh(l,i,a)}}class dh{constructor(e,t,i={}){this.isNewUser=e,this.providerId=t,this.profile=i}}class FD extends dh{constructor(e,t,i,a){super(e,t,i),this.username=a}}class e4 extends dh{constructor(e,t){super(e,"facebook.com",t)}}class t4 extends FD{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class n4 extends dh{constructor(e,t){super(e,"google.com",t)}}class i4 extends FD{constructor(e,t,i){super(e,"twitter.com",t,i)}}function r4(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:Jj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t,i){this.type=e,this.credential=t,this.user=i}static _fromIdtoken(e,t){return new xu("enroll",e,t)}static _fromMfaPendingCredential(e){return new xu("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,i;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return xu._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((i=e.multiFactorSession)===null||i===void 0)&&i.idToken)return xu._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,t,i){this.session=e,this.hints=t,this.signInResolver=i}static _fromError(e,t){const i=rn(e),a=t.customData._serverResponse,l=(a.mfaInfo||[]).map(d=>Tm._fromServerResponse(i,d));ge(a.mfaPendingCredential,i,"internal-error");const u=xu._fromMfaPendingCredential(a.mfaPendingCredential);return new zb(u,l,async d=>{const m=await d._process(i,u);delete a.mfaInfo,delete a.mfaPendingCredential;const g=Object.assign(Object.assign({},a),{idToken:m.idToken,refreshToken:m.refreshToken});switch(t.operationType){case"signIn":const v=await Xr._fromIdTokenResponse(i,t.operationType,g);return await i._updateCurrentUser(v.user),v;case"reauthenticate":return ge(t.user,i,"internal-error"),Xr._forOperation(t.user,t.operationType,g);default:gi(i,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function s4(n,e){var t;const i=qe(n),a=e;return ge(e.customData.operationType,i,"argument-error"),ge((t=a.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,i,"argument-error"),zb._fromError(i,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(n,e){return gn(n,"POST","/v2/accounts/mfaEnrollment:start",pn(n,e))}function a4(n,e){return gn(n,"POST","/v2/accounts/mfaEnrollment:finalize",pn(n,e))}function o4(n,e){return gn(n,"POST","/v2/accounts/mfaEnrollment:withdraw",pn(n,e))}class qb{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(i=>Tm._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new qb(e)}async getSession(){return xu._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const i=e,a=await this.getSession(),l=await no(this.user,i._process(this.user.auth,a,t));return await this.user._updateTokensIfNecessary(l),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const a=await no(this.user,o4(this.user.auth,{idToken:i,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:l})=>l!==t),await this.user._updateTokensIfNecessary(a),await this.user.reload()}catch(a){throw a}}}const dv=new WeakMap;function l4(n){const e=qe(n);return dv.has(e)||dv.set(e,qb._fromUser(e)),dv.get(e)}const Dg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dg,"1"),this.storage.removeItem(Dg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=1e3,c4=10;class qD extends zD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);HU()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,c4):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},u4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}qD.type="LOCAL";const Hb=qD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD extends zD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}HD.type="SESSION";const qu=HD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new m_(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(u).map(async g=>g(t.origin,l)),m=await h4(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}m_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((d,m)=>{const g=wm("",20);a.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(b){const I=b;if(I.data.eventId===g)switch(I.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(I.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return window}function f4(n){Dn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(){return typeof Dn().WorkerGlobalScope<"u"&&typeof Dn().importScripts=="function"}async function m4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function p4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function g4(){return $b()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D="firebaseLocalStorageDb",_4=1,xg="firebaseLocalStorage",GD="fbase_key";class Am{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function p_(n,e){return n.transaction([xg],e?"readwrite":"readonly").objectStore(xg)}function y4(){const n=indexedDB.deleteDatabase($D);return new Am(n).toPromise()}function Zv(){const n=indexedDB.open($D,_4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(xg,{keyPath:GD})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(xg)?e(i):(i.close(),await y4(),e(await Zv()))})})}async function gI(n,e,t){const i=p_(n,!0).put({[GD]:e,value:t});return new Am(i).toPromise()}async function v4(n,e){const t=p_(n,!1).get(e),i=await new Am(t).toPromise();return i===void 0?null:i.value}function _I(n,e){const t=p_(n,!0).delete(e);return new Am(t).toPromise()}const E4=800,b4=3;class KD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>b4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $b()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=m_._getInstance(g4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await m4(),!this.activeServiceWorker)return;this.sender=new d4(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||p4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zv();return await gI(e,Dg,"1"),await _I(e,Dg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>gI(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>v4(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_I(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=p_(a,!1).getAll();return new Am(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),E4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KD.type="LOCAL";const Yf=KD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(n,e){return gn(n,"POST","/v2/accounts/mfaSignIn:start",pn(n,e))}function T4(n,e){return gn(n,"POST","/v2/accounts/mfaSignIn:finalize",pn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=CD("rcb"),w4=new ym(3e4,6e4);class A4{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Dn().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return ge(I4(t),e,"argument-error"),this.shouldResolveImmediately(t)&&aI(Dn().grecaptcha)?Promise.resolve(Dn().grecaptcha):new Promise((i,a)=>{const l=Dn().setTimeout(()=>{a(Un(e,"network-request-failed"))},w4.get());Dn()[fv]=()=>{Dn().clearTimeout(l),delete Dn()[fv];const d=Dn().grecaptcha;if(!d||!aI(d)){a(Un(e,"internal-error"));return}const m=d.render;d.render=(g,v)=>{const b=m(g,v);return this.counter++,b},this.hostLanguage=t,i(d)};const u=`${XU()}?${Uh({onload:fv,render:"explicit",hl:t})}`;Lb(u).catch(()=>{clearTimeout(l),a(Un(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Dn().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function I4(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class S4{async load(e){return new nj(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="recaptcha",R4={theme:"light",type:"image"};let C4=class{constructor(e,t,i=Object.assign({},R4)){this.parameters=i,this.type=If,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=rn(e),this.isInvisible=this.parameters.size==="invisible",ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;ge(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new S4:new A4,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(a=>{const l=u=>{u&&(this.tokenChangeListeners.delete(l),a(u))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ge(!this.parameters.sitekey,this.auth,"argument-error"),ge(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),typeof e=="function")e(t);else if(typeof e=="string"){const i=Dn()[e];typeof i=="function"&&i(t)}}}assertNotDestroyed(){ge(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ge(Vb()&&!$b(),this.auth,"internal-error"),await D4(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await PU(this.auth);ge(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ge(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function D4(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ku._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function x4(n,e,t){if(Kt(n.app))return Promise.reject(ti(n));const i=rn(n),a=await g_(i,e,qe(t));return new Gb(a,l=>d_(i,l))}async function N4(n,e,t){const i=qe(n);await h_(!1,i,"phone");const a=await g_(i.auth,e,qe(t));return new Gb(a,l=>LD(i,l))}async function P4(n,e,t){const i=qe(n);if(Kt(i.auth.app))return Promise.reject(ti(i.auth));const a=await g_(i.auth,e,qe(t));return new Gb(a,l=>UD(i,l))}async function g_(n,e,t){var i;if(!n._getRecaptchaConfig())try{await lj(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const l=a.session;if("phoneNumber"in a){ge(l.type==="enroll",n,"internal-error");const u={idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await pl(n,u,"mfaSmsEnrollment",async(v,b)=>{if(b.phoneEnrollmentInfo.captchaResponse===Af){ge((t==null?void 0:t.type)===If,v,"argument-error");const I=await mv(v,b,t);return pI(v,I)}return pI(v,b)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).phoneSessionInfo.sessionInfo}else{ge(l.type==="signin",n,"internal-error");const u=((i=a.multiFactorHint)===null||i===void 0?void 0:i.uid)||a.multiFactorUid;ge(u,n,"missing-multi-factor-info");const d={mfaPendingCredential:l.credential,mfaEnrollmentId:u,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await pl(n,d,"mfaSmsSignIn",async(b,I)=>{if(I.phoneSignInInfo.captchaResponse===Af){ge((t==null?void 0:t.type)===If,b,"argument-error");const P=await mv(b,I,t);return yI(b,P)}return yI(b,I)},"PHONE_PROVIDER").catch(b=>Promise.reject(b))).phoneResponseInfo.sessionInfo}}else{const l={phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await pl(n,l,"sendVerificationCode",async(g,v)=>{if(v.captchaResponse===Af){ge((t==null?void 0:t.type)===If,g,"argument-error");const b=await mv(g,v,t);return fI(g,b)}return fI(g,v)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).sessionInfo}}finally{t==null||t._reset()}}async function O4(n,e){const t=qe(n);if(Kt(t.auth.app))return Promise.reject(ti(t.auth));await Ub(t,e)}async function mv(n,e,t){ge(t.type===If,n,"argument-error");const i=await t.verify();ge(typeof i=="string",n,"argument-error");const a=Object.assign({},e);if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.captchaResponse,d=a.phoneEnrollmentInfo.clientType,m=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:i,captchaResponse:u,clientType:d,recaptchaVersion:m}}),a}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.captchaResponse,u=a.phoneSignInInfo.clientType,d=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:l,clientType:u,recaptchaVersion:d}}),a}else return Object.assign(a,{recaptchaToken:i}),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hu=class Jp{constructor(e){this.providerId=Jp.PROVIDER_ID,this.auth=rn(e)}verifyPhoneNumber(e,t){return g_(this.auth,e,qe(t))}static credential(e,t){return ku._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Jp.credentialFromTaggedObject(t)}static credentialFromError(e){return Jp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:i}=e;return t&&i?ku._fromTokenResponse(t,i):null}};Hu.PROVIDER_ID="phone";Hu.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(n,e){return e?Ar(e):(ge(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb extends Wh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function k4(n){return MD(n.auth,new Kb(n),n.bypassAuthState)}function V4(n){const{auth:e,user:t}=n;return ge(t,e,"internal-error"),VD(t,new Kb(n),n.bypassAuthState)}async function M4(n){const{auth:e,user:t}=n;return ge(t,e,"internal-error"),Ub(t,new Kb(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return k4;case"linkViaPopup":case"linkViaRedirect":return M4;case"reauthViaPopup":case"reauthViaRedirect":return V4;default:gi(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=new ym(2e3,1e4);async function U4(n,e,t){if(Kt(n.app))return Promise.reject(Un(n,"operation-not-supported-in-this-environment"));const i=rn(n);Qh(n,e,lo);const a=Zu(i,t);return new Qa(i,"signInViaPopup",e,a).executeNotNull()}async function j4(n,e,t){const i=qe(n);if(Kt(i.auth.app))return Promise.reject(Un(i.auth,"operation-not-supported-in-this-environment"));Qh(i.auth,e,lo);const a=Zu(i.auth,t);return new Qa(i.auth,"reauthViaPopup",e,a,i).executeNotNull()}async function B4(n,e,t){const i=qe(n);Qh(i.auth,e,lo);const a=Zu(i.auth,t);return new Qa(i.auth,"linkViaPopup",e,a,i).executeNotNull()}class Qa extends QD{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Qa.currentPopupAction&&Qa.currentPopupAction.cancel(),Qa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const e=wm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,L4.get())};e()}}Qa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4="pendingRedirect",Sf=new Map;class z4 extends QD{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Sf.get(this.auth._key());if(!e){try{const i=await q4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Sf.set(this.auth._key(),e)}return this.bypassAuthState||Sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function q4(n,e){const t=YD(e),i=WD(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}async function Qb(n,e){return WD(n)._set(YD(e),"true")}function H4(){Sf.clear()}function Wb(n,e){Sf.set(n._key(),e)}function WD(n){return Ar(n._redirectPersistence)}function YD(n){return Ou(F4,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(n,e,t){return G4(n,e,t)}async function G4(n,e,t){if(Kt(n.app))return Promise.reject(ti(n));const i=rn(n);Qh(n,e,lo),await i._initializationPromise;const a=Zu(i,t);return await Qb(a,i),a._openRedirect(i,e,"signInViaRedirect")}function K4(n,e,t){return Q4(n,e,t)}async function Q4(n,e,t){const i=qe(n);if(Qh(i.auth,e,lo),Kt(i.auth.app))return Promise.reject(ti(i.auth));await i.auth._initializationPromise;const a=Zu(i.auth,t);await Qb(a,i.auth);const l=await XD(i);return a._openRedirect(i.auth,e,"reauthViaRedirect",l)}function W4(n,e,t){return Y4(n,e,t)}async function Y4(n,e,t){const i=qe(n);Qh(i.auth,e,lo),await i.auth._initializationPromise;const a=Zu(i.auth,t);await h_(!1,i,e.providerId),await Qb(a,i.auth);const l=await XD(i);return a._openRedirect(i.auth,e,"linkViaRedirect",l)}async function X4(n,e){return await rn(n)._initializationPromise,__(n,e,!1)}async function __(n,e,t=!1){if(Kt(n.app))return Promise.reject(ti(n));const i=rn(n),a=Zu(i,e),u=await new z4(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}async function XD(n){const e=wm(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=10*60*1e3;class ZD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!J4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!JD(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Un(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Z4&&this.cachedEventUids.clear(),this.cachedEventUids.has(vI(e))}saveEventToCache(e){this.cachedEventUids.add(vI(e)),this.lastProcessedEventTime=Date.now()}}function vI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function JD({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function J4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JD(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ex(n,e={}){return gn(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tB=/^https?/;async function nB(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ex(n);for(const t of e)try{if(iB(t))return}catch{}gi(n,"unauthorized-domain")}function iB(n){const e=Kf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!tB.test(t))return!1;if(eB.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB=new ym(3e4,6e4);function EI(){const n=Dn().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function sB(n){return new Promise((e,t)=>{var i,a,l;function u(){EI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{EI(),t(Un(n,"network-request-failed"))},timeout:rB.get()})}if(!((a=(i=Dn().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=Dn().gapi)===null||l===void 0)&&l.load)u();else{const d=CD("iframefcb");return Dn()[d]=()=>{gapi.load?u():t(Un(n,"network-request-failed"))},Lb(`${JU()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw eg=null,e})}let eg=null;function aB(n){return eg=eg||sB(n),eg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB=new ym(5e3,15e3),lB="__/auth/iframe",uB="emulator/auth/iframe",cB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dB(n){const e=n.config;ge(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Mb(e,uB):`https://${n.config.authDomain}/${lB}`,i={apiKey:e.apiKey,appName:n.name,v:Nl},a=hB.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Uh(i).slice(1)}`}async function fB(n){const e=await aB(n),t=Dn().gapi;return ge(t,n,"internal-error"),e.open({where:document.body,url:dB(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cB,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=Un(n,"network-request-failed"),d=Dn().setTimeout(()=>{l(u)},oB.get());function m(){Dn().clearTimeout(d),a(i)}i.ping(m).then(m,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pB=500,gB=600,_B="_blank",yB="http://localhost";class bI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vB(n,e,t,i=pB,a=gB){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m=Object.assign(Object.assign({},mB),{width:i.toString(),height:a.toString(),top:l,left:u}),g=nn().toLowerCase();t&&(d=TD(g)?_B:t),ED(g)&&(e=e||yB,m.scrollbars="yes");const v=Object.entries(m).reduce((I,[P,U])=>`${I}${P}=${U},`,"");if(qU(g)&&d!=="_self")return EB(e||"",d),new bI(null);const b=window.open(e||"",d,v);ge(b,n,"popup-blocked");try{b.focus()}catch{}return new bI(b)}function EB(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB="__/auth/handler",TB="emulator/auth/handler",wB=encodeURIComponent("fac");async function Jv(n,e,t,i,a,l){ge(n.config.authDomain,n,"auth-domain-config-required"),ge(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Nl,eventId:a};if(e instanceof lo){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",z1(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries(l||{}))u[v]=b}if(e instanceof Yh){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const m=await n._getAppCheckToken(),g=m?`#${wB}=${encodeURIComponent(m)}`:"";return`${AB(n)}?${Uh(d).slice(1)}${g}`}function AB({config:n}){return n.emulator?Mb(n,TB):`https://${n.authDomain}/${bB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="webStorageSupport";class IB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qu,this._completeRedirectFn=__,this._overrideRedirectResult=Wb}async _openPopup(e,t,i,a){var l;Rs((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await Jv(e,t,i,Kf(),a);return vB(e,u,wm())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await Jv(e,t,i,Kf(),a);return f4(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Rs(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await fB(e),i=new ZD(e);return t.register("authEvent",a=>(ge(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pv,{type:pv},a=>{var l;const u=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[pv];u!==void 0&&t(!!u),gi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=nB(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return SD()||bD()||Em()}}const SB=IB;class RB{constructor(e){this.factorId=e}_process(e,t,i){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,i);case"signin":return this._finalizeSignIn(e,t.credential);default:return ia("unexpected MultiFactorSessionType")}}}class Yb extends RB{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Yb(e)}_finalizeEnroll(e,t,i){return a4(e,{idToken:t,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return T4(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class tx{constructor(){}static assertion(e){return Yb._fromCredential(e)}}tx.FACTOR_ID="phone";var TI="@firebase/auth",wI="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xB(n){El(new oa("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;ge(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RD(n)},g=new WU(i,a,l,m);return uj(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),El(new oa("auth-internal",e=>{const t=rn(e.getProvider("auth").getImmediate());return(i=>new CB(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ss(TI,wI,DB(n)),Ss(TI,wI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NB=5*60;P1("authIdTokenMaxAge");function PB(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}YU({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=Un("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",PB().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xB("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB=2e3;async function kB(n,e,t){var i;const{BuildInfo:a}=$u();Rs(e.sessionId,"AuthEvent did not contain a session ID");const l=await jB(e.sessionId),u={};return Em()?u.ibi=a.packageName:vm()?u.apn=a.packageName:gi(n,"operation-not-supported-in-this-environment"),a.displayName&&(u.appDisplayName=a.displayName),u.sessionId=l,Jv(n,t,e.type,void 0,(i=e.eventId)!==null&&i!==void 0?i:void 0,u)}async function VB(n){const{BuildInfo:e}=$u(),t={};Em()?t.iosBundleId=e.packageName:vm()?t.androidPackageName=e.packageName:gi(n,"operation-not-supported-in-this-environment"),await ex(n,t)}function MB(n){const{cordova:e}=$u();return new Promise(t=>{e.plugins.browsertab.isAvailable(i=>{let a=null;i?e.plugins.browsertab.openUrl(n):a=e.InAppBrowser.open(n,zU()?"_blank":"_system","location=yes"),t(a)})})}async function LB(n,e,t){const{cordova:i}=$u();let a=()=>{};try{await new Promise((l,u)=>{let d=null;function m(){var b;l();const I=(b=i.plugins.browsertab)===null||b===void 0?void 0:b.close;typeof I=="function"&&I(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function g(){d||(d=window.setTimeout(()=>{u(Un(n,"redirect-cancelled-by-user"))},OB))}function v(){(document==null?void 0:document.visibilityState)==="visible"&&g()}e.addPassiveListener(m),document.addEventListener("resume",g,!1),vm()&&document.addEventListener("visibilitychange",v,!1),a=()=>{e.removePassiveListener(m),document.removeEventListener("resume",g,!1),document.removeEventListener("visibilitychange",v,!1),d&&window.clearTimeout(d)}})}finally{a()}}function UB(n){var e,t,i,a,l,u,d,m,g,v;const b=$u();ge(typeof((e=b==null?void 0:b.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ge(typeof((t=b==null?void 0:b.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ge(typeof((l=(a=(i=b==null?void 0:b.cordova)===null||i===void 0?void 0:i.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ge(typeof((m=(d=(u=b==null?void 0:b.cordova)===null||u===void 0?void 0:u.plugins)===null||d===void 0?void 0:d.browsertab)===null||m===void 0?void 0:m.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ge(typeof((v=(g=b==null?void 0:b.cordova)===null||g===void 0?void 0:g.InAppBrowser)===null||v===void 0?void 0:v.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function jB(n){const e=BB(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")}function BB(n){if(Rs(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let i=0;i<n.length;i++)t[i]=n.charCodeAt(i);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB=20;class zB extends ZD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function qB(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:GB(),postBody:null,tenantId:n.tenantId,error:Un(n,"no-auth-event")}}function HB(n,e){return eE()._set(tE(n),e)}async function AI(n){const e=await eE()._get(tE(n));return e&&await eE()._remove(tE(n)),e}function $B(n,e){var t,i;const a=QB(e);if(a.includes("/__/auth/callback")){const l=tg(a),u=l.firebaseError?KB(decodeURIComponent(l.firebaseError)):null,d=(i=(t=u==null?void 0:u.code)===null||t===void 0?void 0:t.split("auth/"))===null||i===void 0?void 0:i[1],m=d?Un(d):null;return m?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:m,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:a,postBody:null}}return null}function GB(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<FB;t++){const i=Math.floor(Math.random()*e.length);n.push(e.charAt(i))}return n.join("")}function eE(){return Ar(Hb)}function tE(n){return Ou("authEvent",n.config.apiKey,n.name)}function KB(n){try{return JSON.parse(n)}catch{return null}}function QB(n){const e=tg(n),t=e.link?decodeURIComponent(e.link):void 0,i=tg(t).link,a=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return tg(a).link||a||i||t||n}function tg(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return sh(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WB=500;class YB{constructor(){this._redirectPersistence=qu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=__,this._overrideRedirectResult=Wb}async _initialize(e){const t=e._key();let i=this.eventManagers.get(t);return i||(i=new zB(e),this.eventManagers.set(t,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){gi(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,i,a){UB(e);const l=await this._initialize(e);await l.initialized(),l.resetRedirect(),H4(),await this._originValidation(e);const u=qB(e,i,a);await HB(e,u);const d=await kB(e,u,t),m=await MB(d);return LB(e,l,m)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=VB(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:i,handleOpenURL:a,BuildInfo:l}=$u(),u=setTimeout(async()=>{await AI(e),t.onEvent(II())},WB),d=async v=>{clearTimeout(u);const b=await AI(e);let I=null;b&&(v!=null&&v.url)&&(I=$B(b,v.url)),t.onEvent(I||II())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,d);const m=a,g=`${l.packageName.toLowerCase()}://`;$u().handleOpenURL=async v=>{if(v.toLowerCase().startsWith(g)&&d({url:v}),typeof m=="function")try{m(v)}catch(b){console.error(b)}}}}const XB=YB;function II(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Un("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZB(n,e){rn(n)._logFramework(e)}var JB="@firebase/auth-compat",eF="0.5.19";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=1e3;function Rf(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function nF(){return Rf()==="http:"||Rf()==="https:"}function nx(n=nn()){return!!((Rf()==="file:"||Rf()==="ionic:"||Rf()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function iF(){return yE()||_E()}function rF(){return fS()&&(document==null?void 0:document.documentMode)===11}function sF(n=nn()){return/Edge\/\d+/.test(n)}function aF(n=nn()){return rF()||sF(n)}function ix(){try{const n=self.localStorage,e=wm();if(n)return n.setItem(e,"1"),n.removeItem(e),aF()?xf():!0}catch{return Xb()&&xf()}return!1}function Xb(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function gv(){return(nF()||dS()||nx())&&!iF()&&ix()&&!Xb()}function rx(){return nx()&&typeof document<"u"}async function oF(){return rx()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},tF);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function lF(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr={LOCAL:"local",NONE:"none",SESSION:"session"},af=ge,sx="persistence";function uF(n,e){if(af(Object.values(wr).includes(e),n,"invalid-persistence-type"),yE()){af(e!==wr.SESSION,n,"unsupported-persistence-type");return}if(_E()){af(e===wr.NONE,n,"unsupported-persistence-type");return}if(Xb()){af(e===wr.NONE||e===wr.LOCAL&&xf(),n,"unsupported-persistence-type");return}af(e===wr.NONE||ix(),n,"unsupported-persistence-type")}async function nE(n){await n._initializationPromise;const e=ax(),t=Ou(sx,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function cF(n,e){const t=ax();if(!t)return[];const i=Ou(sx,n,e);switch(t.getItem(i)){case wr.NONE:return[Oh];case wr.LOCAL:return[Yf,qu];case wr.SESSION:return[qu];default:return[]}}function ax(){var n;try{return((n=lF())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF=ge;class ul{constructor(){this.browserResolver=Ar(SB),this.cordovaResolver=Ar(XB),this.underlyingResolver=null,this._redirectPersistence=qu,this._completeRedirectFn=__,this._overrideRedirectResult=Wb}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,i,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,i,a)}async _openRedirect(e,t,i,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,i,a)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return rx()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return hF(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await oF();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(n){return n.unwrap()}function dF(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(n){return lx(n)}function mF(n,e){var t;const i=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const a=e;a.resolver=new pF(n,s4(n,e))}else if(i){const a=lx(e),l=e;a&&(l.credential=a,l.tenantId=i.tenantId||void 0,l.email=i.email||void 0,l.phoneNumber=i.phoneNumber||void 0)}}function lx(n){const{_tokenResponse:e}=n instanceof zi?n.customData:n;if(!e)return null;if(!(n instanceof zi)&&"temporaryProof"in e&&"phoneNumber"in e)return Hu.credentialFromResult(n);const t=e.providerId;if(!t||t===rf.PASSWORD)return null;let i;switch(t){case rf.GOOGLE:i=Zs;break;case rf.FACEBOOK:i=Xs;break;case rf.GITHUB:i=Js;break;case rf.TWITTER:i=ea;break;default:const{oauthIdToken:a,oauthAccessToken:l,oauthTokenSecret:u,pendingToken:d,nonce:m}=e;return!l&&!u&&!a&&!d?null:d?t.startsWith("saml.")?kh._create(t,d):ha._fromParams({providerId:t,signInMethod:t,pendingToken:d,idToken:a,accessToken:l}):new hh(t).credential({idToken:a,accessToken:l,rawNonce:m})}return n instanceof zi?i.credentialFromError(n):i.credentialFromResult(n)}function nr(n,e){return e.catch(t=>{throw t instanceof zi&&mF(n,t),t}).then(t=>{const i=t.operationType,a=t.user;return{operationType:i,credential:fF(t),additionalUserInfo:r4(t),user:Wa.getOrCreate(a)}})}async function iE(n,e){const t=await e;return{verificationId:t.verificationId,confirm:i=>nr(n,t.confirm(i))}}class pF{constructor(e,t){this.resolver=t,this.auth=dF(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return nr(ox(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this._delegate=e,this.multiFactor=l4(e)}static getOrCreate(e){return Wa.USER_MAP.has(e)||Wa.USER_MAP.set(e,new Wa(e)),Wa.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return nr(this.auth,LD(this._delegate,e))}async linkWithPhoneNumber(e,t){return iE(this.auth,N4(this._delegate,e,t))}async linkWithPopup(e){return nr(this.auth,B4(this._delegate,e,ul))}async linkWithRedirect(e){return await nE(rn(this.auth)),W4(this._delegate,e,ul)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return nr(this.auth,UD(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return iE(this.auth,P4(this._delegate,e,t))}reauthenticateWithPopup(e){return nr(this.auth,j4(this._delegate,e,ul))}async reauthenticateWithRedirect(e){return await nE(rn(this.auth)),K4(this._delegate,e,ul)}sendEmailVerification(e){return Kj(this._delegate,e)}async unlink(e){return await Oj(this._delegate,e),this}updateEmail(e){return Xj(this._delegate,e)}updatePassword(e){return Zj(this._delegate,e)}updatePhoneNumber(e){return O4(this._delegate,e)}updateProfile(e){return Yj(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Qj(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Wa.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of=ge;class rE{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;of(i,"invalid-api-key",{appName:e.name}),of(i,"invalid-api-key",{appName:e.name});const a=typeof window<"u"?ul:void 0;this._delegate=t.initialize({options:{persistence:gF(i,e.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(wU),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Wa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){cj(this._delegate,e,t)}applyActionCode(e){return Uj(this._delegate,e)}checkActionCode(e){return jD(this._delegate,e)}confirmPasswordReset(e,t){return Lj(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return nr(this._delegate,Bj(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Gj(this._delegate,e)}isSignInWithEmailLink(e){return qj(this._delegate,e)}async getRedirectResult(){of(gv(),this._delegate,"operation-not-supported-in-this-environment");const e=await X4(this._delegate,ul);return e?nr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){ZB(this._delegate,e)}onAuthStateChanged(e,t,i){const{next:a,error:l,complete:u}=SI(e,t,i);return this._delegate.onAuthStateChanged(a,l,u)}onIdTokenChanged(e,t,i){const{next:a,error:l,complete:u}=SI(e,t,i);return this._delegate.onIdTokenChanged(a,l,u)}sendSignInLinkToEmail(e,t){return zj(this._delegate,e,t)}sendPasswordResetEmail(e,t){return Mj(this._delegate,e,t||void 0)}async setPersistence(e){uF(this._delegate,e);let t;switch(e){case wr.SESSION:t=qu;break;case wr.LOCAL:t=await Ar(Yf)._isAvailable()?Yf:Hb;break;case wr.NONE:t=Oh;break;default:return gi("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return nr(this._delegate,Pj(this._delegate))}signInWithCredential(e){return nr(this._delegate,d_(this._delegate,e))}signInWithCustomToken(e){return nr(this._delegate,Vj(this._delegate,e))}signInWithEmailAndPassword(e,t){return nr(this._delegate,Fj(this._delegate,e,t))}signInWithEmailLink(e,t){return nr(this._delegate,Hj(this._delegate,e,t))}signInWithPhoneNumber(e,t){return iE(this._delegate,x4(this._delegate,e,t))}async signInWithPopup(e){return of(gv(),this._delegate,"operation-not-supported-in-this-environment"),nr(this._delegate,U4(this._delegate,e,ul))}async signInWithRedirect(e){return of(gv(),this._delegate,"operation-not-supported-in-this-environment"),await nE(this._delegate),$4(this._delegate,e,ul)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return jj(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}rE.Persistence=wr;function SI(n,e,t){let i=n;typeof n!="function"&&({next:i,error:e,complete:t}=n);const a=i;return{next:u=>a(u&&Wa.getOrCreate(u)),error:e,complete:t}}function gF(n,e){const t=cF(n,e);if(typeof self<"u"&&!t.includes(Yf)&&t.push(Yf),typeof window<"u")for(const i of[Hb,qu])t.includes(i)||t.push(i);return t.includes(Oh)||t.push(Oh),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{static credential(e,t){return Hu.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new Hu(ox(Kh.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Zb.PHONE_SIGN_IN_METHOD=Hu.PHONE_SIGN_IN_METHOD;Zb.PROVIDER_ID=Hu.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F=ge;class yF{constructor(e,t,i=Kh.app()){var a;_F((a=i.options)===null||a===void 0?void 0:a.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new C4(i.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF="auth-compat";function EF(n){n.INTERNAL.registerComponent(new oa(vF,e=>{const t=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new rE(t,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Zc.EMAIL_SIGNIN,PASSWORD_RESET:Zc.PASSWORD_RESET,RECOVER_EMAIL:Zc.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Zc.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Zc.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Zc.VERIFY_EMAIL}},EmailAuthProvider:Ll,FacebookAuthProvider:Xs,GithubAuthProvider:Js,GoogleAuthProvider:Zs,OAuthProvider:hh,SAMLAuthProvider:Rg,PhoneAuthProvider:Zb,PhoneMultiFactorGenerator:tx,RecaptchaVerifier:yF,TwitterAuthProvider:ea,Auth:rE,AuthCredential:Wh,Error:zi}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(JB,eF)}EF(Kh);const bF="@firebase/firestore-compat",TF="0.3.45";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new he("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(){if(typeof Uint8Array>"u")throw new he("unimplemented","Uint8Arrays are not available in this environment.")}function CI(){if(!$V())throw new he("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Xf{constructor(e){this._delegate=e}static fromBase64String(e){return CI(),new Xf(ca.fromBase64String(e))}static fromUint8Array(e){return RI(),new Xf(ca.fromUint8Array(e))}toBase64(){return CI(),this._delegate.toBase64()}toUint8Array(){return RI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(n){return wF(n,["next","error","complete"])}function wF(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{enableIndexedDbPersistence(e,t){return R2(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return C2(e._delegate)}clearIndexedDbPersistence(e){return D2(e._delegate)}}class ux{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Tl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&la("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){w2(this._delegate,e,t,i)}enableNetwork(){return N2(this._delegate)}disableNetwork(){return P2(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,jC("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return x2(this._delegate)}onSnapshotsInSync(e){return nU(this._delegate,e)}get app(){if(!this._appCompat)throw new he("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vh(this,_b(this._delegate,e))}catch(t){throw Fi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Wr(this,Ag(this._delegate,e))}catch(t){throw Fi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Bi(this,A2(this._delegate,e))}catch(t){throw Fi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return oU(this._delegate,t=>e(new cx(this,t)))}batch(){return Ri(this._delegate),new hx(new rU(this._delegate,e=>_m(this._delegate,e)))}loadBundle(e){return O2(this._delegate,e)}namedQuery(e){return k2(this._delegate,e).then(t=>t?new Bi(this,t):null)}}class y_ extends xb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xf(new ca(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Wr.forKey(t,this.firestore,null)}}function IF(n){rV(n)}class cx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new y_(e)}get(e){const t=Nu(e);return this._delegate.get(t).then(i=>new Zf(this._firestore,new to(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const a=Nu(e);return i?(Jb("Transaction.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const l=Nu(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,i,...a),this}delete(e){const t=Nu(e);return this._delegate.delete(t),this}}class hx{constructor(e){this._delegate=e}set(e,t,i){const a=Nu(e);return i?(Jb("WriteBatch.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const l=Nu(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,i,...a),this}delete(e){const t=Nu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Gu{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new Tf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jf(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Gu.INSTANCES;let a=i.get(e);a||(a=new WeakMap,i.set(e,a));let l=a.get(t);return l||(l=new Gu(e,new y_(e),t),a.set(t,l)),l}}Gu.INSTANCES=new WeakMap;class Wr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new y_(e)}static forPath(e,t,i){if(e.length%2!==0)throw new he("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Wr(t,new tn(t._delegate,i,new Se(e)))}static forKey(e,t,i){return new Wr(t,new tn(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Vh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vh(this.firestore,_b(this._delegate,e))}catch(t){throw Fi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=qe(e),e instanceof tn?$C(this._delegate,e):!1}set(e,t){t=Jb("DocumentReference.set",t);try{return t?tI(this._delegate,e,t):tI(this._delegate,e)}catch(i){throw Fi(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?nI(this._delegate,e):nI(this._delegate,e,t,...i)}catch(a){throw Fi(a,"updateDoc()","DocumentReference.update()")}}delete(){return eU(this._delegate)}onSnapshot(...e){const t=dx(e),i=fx(e,a=>new Zf(this.firestore,new to(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return lD(this._delegate,t,i)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=Y2(this._delegate):(e==null?void 0:e.source)==="server"?t=X2(this._delegate):t=W2(this._delegate),t.then(i=>new Zf(this.firestore,new to(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Wr(this.firestore,e?this._delegate.withConverter(Gu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Fi(n,e,t){return n.message=n.message.replace(e,t),n}function dx(n){for(const e of n)if(typeof e=="object"&&!sE(e))return e;return{}}function fx(n,e){var t,i;let a;return sE(n[0])?a=n[0]:sE(n[1])?a=n[1]:typeof n[0]=="function"?a={next:n[0],error:n[1],complete:n[2]}:a={next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:(t=a.error)===null||t===void 0?void 0:t.bind(a),complete:(i=a.complete)===null||i===void 0?void 0:i.bind(a)}}class Zf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Wr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return aD(this._delegate,e._delegate)}}class Jf extends Zf{data(e){const t=this._delegate.data(e);return this._delegate._converter||sV(t!==void 0),t}}class Bi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new y_(e)}where(e,t,i){try{return new Bi(this.firestore,$a(this._delegate,iD(e,t,i)))}catch(a){throw Fi(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Bi(this.firestore,$a(this._delegate,B2(e,t)))}catch(i){throw Fi(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Bi(this.firestore,$a(this._delegate,F2(e)))}catch(t){throw Fi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Bi(this.firestore,$a(this._delegate,z2(e)))}catch(t){throw Fi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Bi(this.firestore,$a(this._delegate,q2(...e)))}catch(t){throw Fi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Bi(this.firestore,$a(this._delegate,H2(...e)))}catch(t){throw Fi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Bi(this.firestore,$a(this._delegate,$2(...e)))}catch(t){throw Fi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Bi(this.firestore,$a(this._delegate,G2(...e)))}catch(t){throw Fi(t,"endAt()","Query.endAt()")}}isEqual(e){return GC(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=Z2(this._delegate):(e==null?void 0:e.source)==="server"?t=J2(this._delegate):t=oD(this._delegate),t.then(i=>new aE(this.firestore,new Dl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=dx(e),i=fx(e,a=>new aE(this.firestore,new Dl(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return lD(this._delegate,t,i)}withConverter(e){return new Bi(this.firestore,e?this._delegate.withConverter(Gu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class SF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Jf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class aE{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Bi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Jf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new SF(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Jf(this._firestore,i))})}isEqual(e){return aD(this._delegate,e._delegate)}}class Vh extends Bi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Wr(this.firestore,e):null}doc(e){try{return e===void 0?new Wr(this.firestore,Ag(this._delegate)):new Wr(this.firestore,Ag(this._delegate,e))}catch(t){throw Fi(t,"doc()","CollectionReference.doc()")}}add(e){return tU(this._delegate,e).then(t=>new Wr(this.firestore,t))}isEqual(e){return $C(this._delegate,e._delegate)}withConverter(e){return new Vh(this.firestore,e?this._delegate.withConverter(Gu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Nu(n){return bt(n,tn)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(...e){this._delegate=new Cl(...e)}static documentId(){return new eT(Qt.keyField().canonicalString())}isEqual(e){return e=qe(e),e instanceof Cl?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{static serverTimestamp(){const e=uU();return e._methodName="FieldValue.serverTimestamp",new Ru(e)}static delete(){const e=lU();return e._methodName="FieldValue.delete",new Ru(e)}static arrayUnion(...e){const t=cU(...e);return t._methodName="FieldValue.arrayUnion",new Ru(t)}static arrayRemove(...e){const t=hU(...e);return t._methodName="FieldValue.arrayRemove",new Ru(t)}static increment(e){const t=dU(e);return t._methodName="FieldValue.increment",new Ru(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF={Firestore:ux,GeoPoint:Jg,Timestamp:Yt,Blob:Xf,Transaction:cx,WriteBatch:hx,DocumentReference:Wr,DocumentSnapshot:Zf,Query:Bi,QueryDocumentSnapshot:Jf,QuerySnapshot:aE,CollectionReference:Vh,FieldPath:eT,FieldValue:Ru,setLogLevel:IF,CACHE_SIZE_UNLIMITED:S2};function CF(n,e){n.INTERNAL.registerComponent(new oa("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(i,a)},"PUBLIC").setServiceProps(Object.assign({},RF)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(n){CF(n,(e,t)=>new ux(e,t,new AF)),n.registerVersion(bF,TF)}DF(Kh);const xF={apiKey:"AIzaSyAd0yxPkMVoerKq6pPZvXyTbOEaMILss4A",authDomain:"vcode-3b099.firebaseapp.com",projectId:"vcode-3b099",storageBucket:"vcode-3b099.appspot.com",messagingSenderId:"230736955287",appId:"1:230736955287:web:926fc8df65c6386eb326d2",measurementId:"G-NMDL4TH3T3"},mx=Kh.initializeApp(xF),NF=mx.auth(),PF=mx.firestore(),DI=()=>{const{email:n}=fa(),[e,t]=z.useState(null),[i,a]=z.useState(null),{theme:l,toggleTheme:u}=aS();z.useEffect(()=>{if(!n)return;(async()=>{try{const g=_b(PF,"users"),v=$a(g,iD("email","==",n)),b=await oD(v);if(!b.empty){const P=b.docs[0].data();t({email:P.email||"",regNo:P.regNo||"",role:P.role||""})}}catch(g){console.error("Error fetching user details:",g)}})()},[n]);const d=async()=>{try{await NF.sendPasswordResetEmail((e==null?void 0:e.email)||""),a("Password reset email sent!")}catch{a("Failed to send reset email.")}};return N.jsxs("div",{className:`settings-panel ${l}`,children:[N.jsxs("div",{className:"settings-profile-row",children:[N.jsx("img",{src:"https://randomuser.me/api/portraits/men/1.jpg",alt:"Profile",className:"settings-avatar"}),N.jsx("h2",{className:"settings-heading",children:"Profile"})]}),N.jsxs("div",{className:"settings-details",children:[N.jsxs("div",{children:[N.jsx("span",{className:"settings-label",children:"Email:"}),N.jsx("span",{className:"settings-label-details",children:(e==null?void 0:e.email)||"Loading..."})]}),N.jsxs("div",{children:[N.jsx("span",{className:"settings-label",children:"Username:"}),N.jsx("span",{className:"settings-label-details",children:(e==null?void 0:e.regNo)||"Loading..."})]}),N.jsxs("div",{children:[N.jsx("span",{className:"settings-label",children:"Role:"}),N.jsx("span",{className:"settings-label-details",children:(e==null?void 0:e.role)||"Loading..."})]})]}),N.jsxs("div",{className:"settings-actions",children:[N.jsx("button",{className:"settings-reset-btn",onClick:d,children:"Reset Password"}),i&&N.jsx("div",{className:"settings-reset-status",children:i}),N.jsxs("div",{className:"settings-theme-toggle",children:[N.jsx("span",{className:"settings-label",children:"Dark"}),N.jsxs("label",{className:"switch",children:[N.jsx("input",{type:"checkbox",checked:l==="light",onChange:u,"aria-label":"Toggle dark mode"}),N.jsxs("span",{className:"slider",children:[N.jsx("div",{className:"star star_1"}),N.jsx("div",{className:"star star_2"}),N.jsx("div",{className:"star star_3"}),N.jsx("svg",{viewBox:"0 0 16 16",className:"cloud_1 cloud",children:N.jsx("path",{transform:"matrix(.77976 0 0 .78395-299.99-418.63)",fill:"#fff",d:"m391.84 540.91c-.421-.329-.949-.524-1.523-.524-1.351 0-2.451 1.084-2.485 2.435-1.395.526-2.388 1.88-2.388 3.466 0 1.874 1.385 3.423 3.182 3.667v.034h12.73v-.006c1.775-.104 3.182-1.584 3.182-3.395 0-1.747-1.309-3.186-2.994-3.379.007-.106.011-.214.011-.322 0-2.707-2.271-4.901-5.072-4.901-2.073 0-3.856 1.202-4.643 2.925"})})]})]}),N.jsx("span",{className:"settings-label",children:"Light"})]})]})]})};function OF(){const{role:n}=fa(),e=()=>n==="teacher",t=()=>n==="student";return N.jsx(GP,{children:N.jsx(TP,{children:e()?N.jsxs(Ln,{path:"/",element:N.jsx(sO,{}),children:[N.jsx(Ln,{index:!0,element:N.jsx(m1,{})}),N.jsx(Ln,{path:"problems",element:N.jsx(mE,{})}),N.jsx(Ln,{path:"manage-problem",element:N.jsx(bA,{})}),N.jsx(Ln,{path:"submissions",element:N.jsx(vv,{})}),N.jsx(Ln,{path:"analytics",element:N.jsx(bA,{})}),N.jsx(Ln,{path:"settings",element:N.jsx(DI,{})}),N.jsx(Ln,{path:"/editProblem/:id",element:N.jsx(p1,{})}),N.jsx(Ln,{path:"add-problem",element:N.jsx(iS,{})})]}):t()?N.jsxs(Ln,{path:"/",element:N.jsx(E1,{}),children:[N.jsx(Ln,{index:!0,element:N.jsx(g1,{})}),N.jsx(Ln,{path:"cproblems",element:N.jsx(rS,{})}),N.jsx(Ln,{path:"csubmissions",element:N.jsx(vv,{})}),N.jsx(Ln,{path:"problempage/:id",element:N.jsx(b1,{})}),N.jsx(Ln,{path:"client-submissions",element:N.jsx(T1,{})}),N.jsx(Ln,{path:"/submission/:id",element:N.jsx(w1,{})}),N.jsx(Ln,{path:"settings",element:N.jsx(DI,{})})]}):N.jsx(Ln,{path:"*",element:N.jsx("div",{children:"Unauthorized or unknown role"})})})})}xN.createRoot(document.getElementById("root")).render(N.jsx(z.StrictMode,{children:N.jsx(rO,{children:N.jsx(v1,{children:N.jsx(OF,{})})})}));
